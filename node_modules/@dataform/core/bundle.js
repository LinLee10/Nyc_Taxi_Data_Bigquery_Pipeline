{
  "fileContents": "Ly8gQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAovLwovLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgovLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoKKCgpPT57dmFyIF9fd2VicGFja19tb2R1bGVzX189ezgxNDI6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbj1yKDI1NDkpO3ZhciBvO2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZT09PW8uU0hPV19ET0NTX0xJTks/YCBTZWUgaHR0cHM6Ly9kYXRhZm9ybS1jby5naXRodWIuaW8vZGF0YWZvcm0vZG9jcy9jb25maWdzLXJlZmVyZW5jZSMke3QuZ2V0VHlwZVVybCgiIikucmVwbGFjZSgvXC4vZywiLSIpLnJlcGxhY2UoL1wvLywiIil9IGZvciBhbGxvd2VkIHByb3BlcnRpZXMuYDoiIn1mdW5jdGlvbiBhKGUsdD17fSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBuLnV0aWwuYmFzZTY0LmVuY29kZShlLDAsZS5sZW5ndGgpfShlLmVuY29kZShlLmNyZWF0ZSh0KSkuZmluaXNoKCkpfSFmdW5jdGlvbihlKXtlW2UuREVGQVVMVD0wXT0iREVGQVVMVCIsZVtlLlNVR0dFU1RfUkVQT1JUSU5HX1RPX0RBVEFGT1JNX1RFQU09MV09IlNVR0dFU1RfUkVQT1JUSU5HX1RPX0RBVEFGT1JNX1RFQU0iLGVbZS5TSE9XX0RPQ1NfTElOSz0yXT0iU0hPV19ET0NTX0xJTksifShvPXQuVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91cnx8KHQuVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91cj17fSkpLHQudmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvPWZ1bmN0aW9uKGUsdCxyPW8uREVGQVVMVCl7aWYoQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBSZWZlcmVuY2VFcnJvcigiRXhwZWN0ZWQgYSB0b3AtbGV2ZWwgb2JqZWN0LCBidXQgZm91bmQgYW4gYXJyYXkiKTtjb25zdCBuPWUuY3JlYXRlKHQpO3JldHVybiBmdW5jdGlvbiB0KG4sYSl7T2JqZWN0LmVudHJpZXMobikuZm9yRWFjaCgoKFtuLHNdKT0+e2NvbnN0IGw9YVtuXTtpZih0eXBlb2YgbCE9dHlwZW9mIHMpe2lmKEFycmF5LmlzQXJyYXkocykmJjA9PT1zLmxlbmd0aClyZXR1cm47aWYoIXMpdGhyb3cgUmVmZXJlbmNlRXJyb3IoYFVuZXhwZWN0ZWQgZW1wdHkgdmFsdWUgZm9yICIke259Ii5gK2kocixlKSk7aWYoIm9iamVjdCI9PXR5cGVvZiBzJiYwPT09T2JqZWN0LmtleXMocykubGVuZ3RoKXJldHVybjtpZihyPT09by5TVUdHRVNUX1JFUE9SVElOR19UT19EQVRBRk9STV9URUFNKXRocm93IFJlZmVyZW5jZUVycm9yKGBVbmV4cGVjdGVkIHByb3BlcnR5ICIke259IiBmb3IgIiR7ZS5nZXRUeXBlVXJsKCIiKS5yZXBsYWNlKCIvIiwiIil9IiwgcGxlYXNlIHJlcG9ydCB0aGlzIHRvIHRoZSBEYXRhZm9ybSB0ZWFtIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRhZm9ybS1jby9kYXRhZm9ybS9pc3N1ZXMuYCk7dGhyb3cgUmVmZXJlbmNlRXJyb3IoYFVuZXhwZWN0ZWQgcHJvcGVydHkgIiR7bn0iLCBvciBwcm9wZXJ0eSB2YWx1ZSB0eXBlIG9mICIke3R5cGVvZiBzfSIgaXMgaW5jb3JyZWN0LmAraShyLGUpKX0ib2JqZWN0Ij09dHlwZW9mIHMmJnQocyxsKX0pKX0odCxlLnRvT2JqZWN0KG4pKSxufSx0LmVuY29kZTY0PWEsdC5kZWNvZGU2ND1mdW5jdGlvbihlLHQpe3JldHVybiB0P2UuZGVjb2RlKGZ1bmN0aW9uKGUpe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi51dGlsLmJhc2U2NC5sZW5ndGgoZSkpO3JldHVybiBuLnV0aWwuYmFzZTY0LmRlY29kZShlLHQsMCksdH0odCkpOmUuY3JlYXRlKCl9LHQuZXF1YWxzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gYShlLHQpPT09YShlLHIpfSx0LmRlZXBDbG9uZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLmZyb21PYmplY3QoZS50b09iamVjdChlLmNyZWF0ZSh0KSkpfX0sMzE4NzooZSx0KT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5KU09OT2JqZWN0U3RyaW5naWZpZXI9Y2xhc3N7c3RyaW5naWZ5KGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyhlKS5zb3J0KCkucmVkdWNlKCgodCxyKT0+T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtbcl06ZVtyXX0pKSx7fSkpfXBhcnNlKGUpe3JldHVybiBKU09OLnBhcnNlKGUpfX19LDkzNTA6ZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj10aGlzJiZ0aGlzLl9faW1wb3J0U3Rhcnx8ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBvPXIoODE0MiksaT1yKDMxODYpLGE9bihyKDYyMDMpKSxzPXIoOTIxMSksbD1yKDg4NjkpO2NsYXNzIGMgZXh0ZW5kcyBpLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0LHIpe2lmKHN1cGVyKGUpLHRoaXMucHJvdG89bC5kYXRhZm9ybS5Bc3NlcnRpb24uY3JlYXRlKCksdGhpcy5zZXNzaW9uPWUsIXQpcmV0dXJuO2NvbnN0IG49dGhpcy52ZXJpZnlDb25maWcodCk7bi5uYW1lfHwobi5uYW1lPWEuYmFzZW5hbWUobi5maWxlbmFtZSkpO2NvbnN0IG89cy5hY3Rpb25Db25maWdUb0NvbXBpbGVkR3JhcGhUYXJnZXQobik7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQobyxlLnByb2plY3RDb25maWcsbi5maWxlbmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITAsdXNlRGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ6ITB9KSx0aGlzLnByb3RvLmNhbm9uaWNhbFRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KG8sZS5jYW5vbmljYWxQcm9qZWN0Q29uZmlnLHZvaWQgMCx7dmFsaWRhdGVUYXJnZXQ6ITEsdXNlRGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ6ITB9KSxyJiYobi5maWxlbmFtZT1zLnJlc29sdmVBY3Rpb25zQ29uZmlnRmlsZW5hbWUobi5maWxlbmFtZSxyKSx0aGlzLnF1ZXJ5KHMubmF0aXZlUmVxdWlyZShuLmZpbGVuYW1lKS5xdWVyeSkpLG4uZGVwZW5kZW5jeVRhcmdldHMmJnRoaXMuZGVwZW5kZW5jaWVzKG4uZGVwZW5kZW5jeVRhcmdldHMubWFwKChlPT5zLmNvbmZpZ1RhcmdldFRvQ29tcGlsZWRHcmFwaFRhcmdldChsLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuY3JlYXRlKGUpKSkpKSxuLmhlcm1ldGljJiZ0aGlzLmhlcm1ldGljKG4uaGVybWV0aWMpLG4uZGlzYWJsZWQmJnRoaXMuZGlzYWJsZWQoKSxuLnRhZ3MmJnRoaXMudGFncyhuLnRhZ3MpLG4uZGVzY3JpcHRpb24mJnRoaXMuZGVzY3JpcHRpb24obi5kZXNjcmlwdGlvbiksbi5wcm9qZWN0JiZ0aGlzLmRhdGFiYXNlKG4ucHJvamVjdCksbi5kYXRhc2V0JiZ0aGlzLnNjaGVtYShuLmRhdGFzZXQpLG4uZmlsZW5hbWUmJih0aGlzLnByb3RvLmZpbGVOYW1lPW4uZmlsZW5hbWUpLHRoaXN9cXVlcnkoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVRdWVyeT1lLHRoaXN9ZGVwZW5kZW5jaWVzKGUpe3JldHVybihBcnJheS5pc0FycmF5KGUpP2U6W2VdKS5mb3JFYWNoKChlPT57Y29uc3QgdD1zLnJlc29sdmFibGVBc1RhcmdldChlKTt0aGlzLnNlc3Npb24uYWN0aW9uQXNzZXJ0aW9uTWFwLnNldCh0LHRoaXMpLHRoaXMucHJvdG8uZGVwZW5kZW5jeVRhcmdldHMucHVzaCh0KX0pKSx0aGlzfWhlcm1ldGljKGUpe3RoaXMucHJvdG8uaGVybWV0aWNpdHk9ZT9sLmRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5LkhFUk1FVElDOmwuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHkuTk9OX0hFUk1FVElDfWRpc2FibGVkKGU9ITApe3JldHVybiB0aGlzLnByb3RvLmRpc2FibGVkPWUsdGhpc310YWdzKGUpe3JldHVybigic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpLmZvckVhY2goKGU9Pnt0aGlzLnByb3RvLnRhZ3MuaW5kZXhPZihlKTwwJiZ0aGlzLnByb3RvLnRhZ3MucHVzaChlKX0pKSx0aGlzfWRlc2NyaXB0aW9uKGUpe3JldHVybiB0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3I9e2Rlc2NyaXB0aW9uOmV9LHRoaXN9ZGF0YWJhc2UoZSl7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQobC5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnByb3RvLnRhcmdldCkse2RhdGFiYXNlOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITAsdXNlRGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ6ITB9KSx0aGlzfXNjaGVtYShlKXtyZXR1cm4gdGhpcy5wcm90by50YXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChsLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMucHJvdG8udGFyZ2V0KSx7c2NoZW1hOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITAsdXNlRGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ6ITB9KSx0aGlzfWdldEZpbGVOYW1lKCl7cmV0dXJuIHRoaXMucHJvdG8uZmlsZU5hbWV9Z2V0VGFyZ2V0KCl7cmV0dXJuIGwuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZSh0aGlzLnByb3RvLnRhcmdldCl9Z2V0UGFyZW50QWN0aW9uKCl7cmV0dXJuIGwuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZSh0aGlzLnByb3RvLnBhcmVudEFjdGlvbil9c2V0UGFyZW50QWN0aW9uKGUpe3RoaXMucHJvdG8ucGFyZW50QWN0aW9uPWV9Y29tcGlsZSgpe2NvbnN0IGU9bmV3IHUodGhpcyk7cmV0dXJuIHRoaXMucHJvdG8ucXVlcnk9ZS5hcHBseSh0aGlzLmNvbnRleHRhYmxlUXVlcnkpLHMudmFsaWRhdGVRdWVyeVN0cmluZyh0aGlzLnNlc3Npb24sdGhpcy5wcm90by5xdWVyeSx0aGlzLnByb3RvLmZpbGVOYW1lKSxvLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byhsLmRhdGFmb3JtLkFzc2VydGlvbix0aGlzLnByb3RvLG8uVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TVUdHRVNUX1JFUE9SVElOR19UT19EQVRBRk9STV9URUFNKX12ZXJpZnlDb25maWcoZSl7cmV0dXJuIGUuZGVwZW5kZW5jaWVzJiYoZS5kZXBlbmRlbmN5VGFyZ2V0cz1lLmRlcGVuZGVuY2llcy5tYXAoKGU9PnMucmVzb2x2YWJsZUFzQWN0aW9uQ29uZmlnVGFyZ2V0KGUpKSksZGVsZXRlIGUuZGVwZW5kZW5jaWVzKSxlLmRhdGFiYXNlJiYoZS5wcm9qZWN0PWUuZGF0YWJhc2UsZGVsZXRlIGUuZGF0YWJhc2UpLGUuc2NoZW1hJiYoZS5kYXRhc2V0PWUuc2NoZW1hLGRlbGV0ZSBlLnNjaGVtYSksZS5maWxlTmFtZSYmKGUuZmlsZW5hbWU9ZS5maWxlTmFtZSxkZWxldGUgZS5maWxlTmFtZSksZS50eXBlJiZkZWxldGUgZS50eXBlLG8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKGwuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZyxlLG8uVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TSE9XX0RPQ1NfTElOSyl9fXQuQXNzZXJ0aW9uPWM7Y2xhc3MgdXtjb25zdHJ1Y3RvcihlKXt0aGlzLmFzc2VydGlvbj1lfXNlbGYoKXtyZXR1cm4gdGhpcy5yZXNvbHZlKHRoaXMuYXNzZXJ0aW9uLmdldFRhcmdldCgpKX1uYW1lKCl7cmV0dXJuIHRoaXMuYXNzZXJ0aW9uLnNlc3Npb24uZmluYWxpemVOYW1lKHRoaXMuYXNzZXJ0aW9uLmdldFRhcmdldCgpLm5hbWUpfXJlZihlLC4uLnQpe3JldHVybiBlPXMudG9SZXNvbHZhYmxlKGUsdCkscy5yZXNvbHZhYmxlQXNUYXJnZXQoZSk/KHRoaXMuYXNzZXJ0aW9uLmRlcGVuZGVuY2llcyhlKSx0aGlzLnJlc29sdmUoZSkpOih0aGlzLmFzc2VydGlvbi5zZXNzaW9uLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoIkFjdGlvbiBuYW1lIGlzIG5vdCBzcGVjaWZpZWQiKSksIiIpfXJlc29sdmUoZSwuLi50KXtyZXR1cm4gdGhpcy5hc3NlcnRpb24uc2Vzc2lvbi5yZXNvbHZlKGUsLi4udCl9c2NoZW1hKCl7cmV0dXJuIHRoaXMuYXNzZXJ0aW9uLnNlc3Npb24uZmluYWxpemVTY2hlbWEodGhpcy5hc3NlcnRpb24uZ2V0VGFyZ2V0KCkuc2NoZW1hKX1kYXRhYmFzZSgpe3JldHVybiB0aGlzLmFzc2VydGlvbi5nZXRUYXJnZXQoKS5kYXRhYmFzZT90aGlzLmFzc2VydGlvbi5zZXNzaW9uLmZpbmFsaXplRGF0YWJhc2UodGhpcy5hc3NlcnRpb24uZ2V0VGFyZ2V0KCkuZGF0YWJhc2UpOih0aGlzLmFzc2VydGlvbi5zZXNzaW9uLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoIldhcmVob3VzZSBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGxlIGRhdGFiYXNlcyIpKSwiIil9ZGVwZW5kZW5jaWVzKGUpe3JldHVybiB0aGlzLmFzc2VydGlvbi5kZXBlbmRlbmNpZXMoZSksIiJ9dGFncyhlKXtyZXR1cm4gdGhpcy5hc3NlcnRpb24udGFncyhlKSwiIn13aGVuKGUsdCxyPSIiKXtyZXR1cm4gZT90OnJ9YXBwbHkoZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGU/ZSh0aGlzKTplfX10LkFzc2VydGlvbkNvbnRleHQ9dX0sNjAxNDpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG89cig3MjEwKSxpPXIoODE0MiksYT1yKDMxODYpLHM9bihyKDYyMDMpKSxsPXIoOTIxMSksYz1yKDg4NjkpO2NsYXNzIHUgZXh0ZW5kcyBhLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0LHIpe2lmKHN1cGVyKGUpLHRoaXMucHJvdG89Yy5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uY3JlYXRlKCksdGhpcy5zZXNzaW9uPWUsdC5uYW1lKXQubmFtZS5lbmRzV2l0aCgiLmRwIikmJnQuZmlsZW5hbWUuZW5kc1dpdGgoIi5kcC5zcWx4IikmJih0Lm5hbWU9dC5uYW1lLnNsaWNlKDAsLTMpKTtlbHNle2NvbnN0IGU9cy5maWxlbmFtZSh0LmZpbGVuYW1lKTtpZihlLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoIi5kcC55YW1sIil8fGUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgiLmRwLnNxbHgiKSl0Lm5hbWU9ZS5zbGljZSgwLC04KTtlbHNle2lmKCFlLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoIi55YW1sIikmJiFlLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoIi5zcWx4IikpdGhyb3cgbmV3IEVycm9yKCJPbmx5IFlBTUwgYW5kIFNRTFggZmlsZXMgYXJlIHN1cHBvcnRlZCIpO3QubmFtZT1lLnNsaWNlKDAsLTUpfX1jb25zdCBuPXMuZmlsZUV4dGVuc2lvbih0LmZpbGVuYW1lKTsieWFtbCI9PT1uP3RoaXMuY29uZmlndXJlWWFtbChlLHQscik6InNxbHgiPT09biYmdGhpcy5jb25maWd1cmVTcWx4KGUsdCl9Y29uZmlnKGUpe3JldHVybiBlLmRhdGFiYXNlJiZ0aGlzLmRhdGFiYXNlKGUuZGF0YWJhc2UpLGUucHJvamVjdCYmdGhpcy5kYXRhYmFzZShlLnByb2plY3QpLGUuc2NoZW1hJiZ0aGlzLnNjaGVtYShlLnNjaGVtYSksZS5kYXRhc2V0JiZ0aGlzLnNjaGVtYShlLmRhdGFzZXQpLHRoaXN9cXVlcnkoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVRdWVyeT1lLHRoaXN9ZGVwZW5kZW5jaWVzKGUpe3JldHVybihBcnJheS5pc0FycmF5KGUpP2U6W2VdKS5mb3JFYWNoKChlPT50aGlzLnByb3RvLmRlcGVuZGVuY3lUYXJnZXRzLnB1c2gobC5jaGVja0Fzc2VydGlvbnNGb3JEZXBlbmRlbmN5KHRoaXMsZSkpKSksdGhpc31nZXRGaWxlTmFtZSgpe3JldHVybiB0aGlzLnByb3RvLmZpbGVOYW1lfWdldFRhcmdldCgpe3JldHVybiBjLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUodGhpcy5wcm90by50YXJnZXQpfWNvbXBpbGUoKXtpZihudWxsIT10aGlzLmNvbnRleHRhYmxlUXVlcnkpe2NvbnN0IGU9bmV3IHAodGhpcyk7dGhpcy5wcm90by5xdWVyeT1lLmFwcGx5KHRoaXMuY29udGV4dGFibGVRdWVyeSkudHJpbSgpLGwudmFsaWRhdGVRdWVyeVN0cmluZyh0aGlzLnNlc3Npb24sdGhpcy5wcm90by5xdWVyeSx0aGlzLnByb3RvLmZpbGVOYW1lKX1yZXR1cm4gaS52ZXJpZnlPYmplY3RNYXRjaGVzUHJvdG8oYy5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24sdGhpcy5wcm90byxpLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU1VHR0VTVF9SRVBPUlRJTkdfVE9fREFUQUZPUk1fVEVBTSl9ZGF0YWJhc2UoZSl7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoYy5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnByb3RvLnRhcmdldCkse2RhdGFiYXNlOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzfXNjaGVtYShlKXtyZXR1cm4gdGhpcy5wcm90by50YXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChjLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMucHJvdG8udGFyZ2V0KSx7c2NoZW1hOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzfWNvbmZpZ3VyZVlhbWxXaXRob3V0VGFyZ2V0cyhlLHQscil7Y29uc3Qgbj1jLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoe25hbWU6ci5uYW1lfSk7dGhpcy5wcm90by50YXJnZXQ9dGhpcy5maW5hbGl6ZVRhcmdldCh0aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KG4sdC5wcm9qZWN0Q29uZmlnLHIuZmlsZW5hbWUse3ZhbGlkYXRlVGFyZ2V0OiEwfSkpLHRoaXMucHJvdG8udGFyZ2V0cz1bdGhpcy5wcm90by50YXJnZXRdLHRoaXMucHJvdG8uY2Fub25pY2FsVGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQobix0LmNhbm9uaWNhbFByb2plY3RDb25maWcpLHRoaXMucHJvdG8uY2Fub25pY2FsVGFyZ2V0cz1bdGhpcy5wcm90by5jYW5vbmljYWxUYXJnZXRdO2NvbnN0IGk9dGhpcy5hcHBseVNlc3Npb25Ub0RhdGFQcmVwYXJhdGlvbkNvbnRlbnRzKGUpO3RoaXMucHJvdG8uZGF0YVByZXBhcmF0aW9uWWFtbD1vLmR1bXAoaSl9Y29uZmlndXJlWWFtbFdpdGhUYXJnZXRzKGUsdCxyLG4pe2NvbnN0IGk9ZS5tYXAoKGU9PnRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoZSxyLnByb2plY3RDb25maWcsbi5maWxlbmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSkpO3RoaXMucHJvdG8udGFyZ2V0cz1pLm1hcCgoZT0+dGhpcy5maW5hbGl6ZVRhcmdldChlKSkpLHRoaXMucHJvdG8uY2Fub25pY2FsVGFyZ2V0cz1lLm1hcCgoZT0+dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChlLHIuY2Fub25pY2FsUHJvamVjdENvbmZpZykpKTtjb25zdCBhPXRoaXMuYXBwbHlTZXNzaW9uVG9EYXRhUHJlcGFyYXRpb25Db250ZW50cyh0KTt0aGlzLnByb3RvLmRhdGFQcmVwYXJhdGlvbllhbWw9by5kdW1wKGEpLHRoaXMucHJvdG8udGFyZ2V0PWlbMF0sdGhpcy5wcm90by5jYW5vbmljYWxUYXJnZXQ9dGhpcy5wcm90by5jYW5vbmljYWxUYXJnZXRzWzBdfWFwcGx5U2Vzc2lvblRvRGF0YVByZXBhcmF0aW9uQ29udGVudHMoZSl7dmFyIHQ7aWYoIWUpcmV0dXJuIGU7Y29uc3Qgcj1udWxsPT09KHQ9ZS5jb25maWd1cmF0aW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5lcnJvclRhYmxlO3JldHVybiByJiYoZS5jb25maWd1cmF0aW9uLmVycm9yVGFibGU9dGhpcy5hcHBseVNlc3Npb25Ub1RhYmxlUmVmZXJlbmNlKHIpKSxlLm5vZGVzJiZlLm5vZGVzLmZvckVhY2goKCh0LHIpPT57dmFyIG4sbztjb25zdCBpPW51bGw9PT0obj10LnNvdXJjZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4udGFibGU7aSYmKGUubm9kZXNbcl0uc291cmNlLnRhYmxlPXRoaXMuYXBwbHlTZXNzaW9uVG9UYWJsZVJlZmVyZW5jZShpKSk7Y29uc3QgYT1udWxsPT09KG89dC5kZXN0aW5hdGlvbil8fHZvaWQgMD09PW8/dm9pZCAwOm8udGFibGU7YSYmKGUubm9kZXNbcl0uZGVzdGluYXRpb24udGFibGU9dGhpcy5hcHBseVNlc3Npb25Ub1RhYmxlUmVmZXJlbmNlKGEpKX0pKSxlfWFwcGx5U2Vzc2lvblRvVGFibGVSZWZlcmVuY2UoZSl7Y29uc3QgdD17ZGF0YWJhc2U6ZS5wcm9qZWN0LHNjaGVtYTplLmRhdGFzZXQsbmFtZTplLnRhYmxlfSxyPXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoYy5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHQpLHRoaXMuc2Vzc2lvbi5wcm9qZWN0Q29uZmlnKTtsZXQgbj17dGFibGU6dGhpcy5zZXNzaW9uLmZpbmFsaXplTmFtZShyLm5hbWUpfTtyZXR1cm4gci5zY2hlbWEmJihuPU9iamVjdC5hc3NpZ24oe2RhdGFzZXQ6dGhpcy5zZXNzaW9uLmZpbmFsaXplU2NoZW1hKHIuc2NoZW1hKX0sbikpLHIuZGF0YWJhc2UmJihuPU9iamVjdC5hc3NpZ24oe3Byb2plY3Q6dGhpcy5zZXNzaW9uLmZpbmFsaXplRGF0YWJhc2Uoci5kYXRhYmFzZSl9LG4pKSxufWdldFRhcmdldHMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gZSYmZS5ub2RlcyYmZS5ub2Rlcy5mb3JFYWNoKChlPT57dmFyIHI7Y29uc3Qgbj1udWxsPT09KHI9ZS5kZXN0aW5hdGlvbil8fHZvaWQgMD09PXI/dm9pZCAwOnIudGFibGU7aWYobil7Y29uc3QgZT17ZGF0YWJhc2U6bi5wcm9qZWN0LHNjaGVtYTpuLmRhdGFzZXQsbmFtZTpuLnRhYmxlfTt0LnB1c2goYy5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKGUpKX19KSksdH1jb25maWd1cmVZYW1sKGUsdCxyKXt0LmZpbGVuYW1lPWwucmVzb2x2ZUFjdGlvbnNDb25maWdGaWxlbmFtZSh0LmZpbGVuYW1lLHIpO2NvbnN0IG49bC5uYXRpdmVSZXF1aXJlKHQuZmlsZW5hbWUpLmFzSnNvbixvPXRoaXMuZ2V0VGFyZ2V0cyhuKTtvLmxlbmd0aD4wP3RoaXMuY29uZmlndXJlWWFtbFdpdGhUYXJnZXRzKG8sbixlLHQpOnRoaXMuY29uZmlndXJlWWFtbFdpdGhvdXRUYXJnZXRzKG4sZSx0KSx0aGlzLnByb3RvLnRhZ3M9dC50YWdzLHQuZGVwZW5kZW5jeVRhcmdldHMmJnRoaXMuZGVwZW5kZW5jaWVzKHQuZGVwZW5kZW5jeVRhcmdldHMubWFwKChlPT5sLmNvbmZpZ1RhcmdldFRvQ29tcGlsZWRHcmFwaFRhcmdldChjLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuY3JlYXRlKGUpKSkpKSx0aGlzLnByb3RvLmZpbGVOYW1lPXQuZmlsZW5hbWUsdC5kaXNhYmxlZCYmKHRoaXMucHJvdG8uZGlzYWJsZWQ9dC5kaXNhYmxlZCl9Y29uZmlndXJlU3FseChlLHQpe3ZhciByLG47Y29uc3Qgbz1bXTtpZihvLnB1c2gobC5hY3Rpb25Db25maWdUb0NvbXBpbGVkR3JhcGhUYXJnZXQodCkpLG51bGwhPXQuZXJyb3JUYWJsZSl7Y29uc3QgZT1jLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZy5jcmVhdGUodC5lcnJvclRhYmxlKSxyPWwuYWN0aW9uQ29uZmlnVG9Db21waWxlZEdyYXBoVGFyZ2V0KGUpO3RoaXMucHJvdG8uZXJyb3JUYWJsZVJldGVudGlvbkRheXM9ZS5yZXRlbnRpb25EYXlzLG8ucHVzaChyKX10aGlzLnByb3RvLmxvYWQ9dGhpcy5tYXBMb2FkTW9kZShudWxsPT09KHI9dC5sb2FkTW9kZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIubW9kZSxudWxsPT09KG49dC5sb2FkTW9kZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaW5jcmVtZW50YWxDb2x1bW4pLHRoaXMucHJvdG8udGFyZ2V0cz1vLm1hcCgocj0+dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChyLGUucHJvamVjdENvbmZpZyx0LmZpbGVuYW1lLHt2YWxpZGF0ZVRhcmdldDohMH0pKSkubWFwKChlPT50aGlzLmZpbmFsaXplVGFyZ2V0KGUpKSksdGhpcy5wcm90by50YXJnZXQ9dGhpcy5wcm90by50YXJnZXRzWzBdLHRoaXMucHJvdG8udGFyZ2V0cy5sZW5ndGg+MSYmKHRoaXMucHJvdG8uZXJyb3JUYWJsZT10aGlzLnByb3RvLnRhcmdldHNbMV0pLHRoaXMucHJvdG8uY2Fub25pY2FsVGFyZ2V0cz1vLm1hcCgodD0+dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldCh0LGUuY2Fub25pY2FsUHJvamVjdENvbmZpZykpKSx0aGlzLnByb3RvLmNhbm9uaWNhbFRhcmdldD10aGlzLnByb3RvLmNhbm9uaWNhbFRhcmdldHNbMF0sdC5kZXBlbmRlbmN5VGFyZ2V0cyYmdGhpcy5kZXBlbmRlbmNpZXModC5kZXBlbmRlbmN5VGFyZ2V0cy5tYXAoKGU9PmwuY29uZmlnVGFyZ2V0VG9Db21waWxlZEdyYXBoVGFyZ2V0KGMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5jcmVhdGUoZSkpKSkpLHRoaXMucHJvdG8udGFncz10LnRhZ3MsdGhpcy5wcm90by5maWxlTmFtZT10LmZpbGVuYW1lLHQuZGlzYWJsZWQmJih0aGlzLnByb3RvLmRpc2FibGVkPXQuZGlzYWJsZWQpLHRoaXMucXVlcnkobC5uYXRpdmVSZXF1aXJlKHQuZmlsZW5hbWUpLnF1ZXJ5KX1tYXBMb2FkTW9kZShlLHQpe2lmKCFlKXJldHVybiBjLmRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLmNyZWF0ZSh7cmVwbGFjZTp7fX0pO3N3aXRjaChlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSl7Y2FzZSJSRVBMQUNFX1RBQkxFIjpyZXR1cm4gYy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi5jcmVhdGUoe3JlcGxhY2U6e319KTtjYXNlIkFQUEVORCI6cmV0dXJuIGMuZGF0YWZvcm0uTG9hZENvbmZpZ3VyYXRpb24uY3JlYXRlKHthcHBlbmQ6e319KTtjYXNlIk1BWElNVU0iOnJldHVybiBjLmRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLmNyZWF0ZSh7bWF4aW11bTp7Y29sdW1uTmFtZTp0aGlzLnZhbGlkYXRlTG9hZE1vZGVDb2x1bW5OYW1lKHQpfX0pO2Nhc2UiVU5JUVVFIjpyZXR1cm4gYy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi5jcmVhdGUoe3VuaXF1ZTp7Y29sdW1uTmFtZTp0aGlzLnZhbGlkYXRlTG9hZE1vZGVDb2x1bW5OYW1lKHQpfX0pO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBMb2FkTW9kZSB2YWx1ZSAiJHtlfSIgaXMgbm90IHN1cHBvcnRlZGApfX12YWxpZGF0ZUxvYWRNb2RlQ29sdW1uTmFtZShlKXtpZighZXx8IiI9PT1lKXRocm93IG5ldyBFcnJvcigiY29sdW1uTmFtZSBpcyByZXF1aXJlZCBmb3IgTUFYSU1VTSBhbmQgVU5JUVVFIGxvYWQgbW9kZXMuIik7cmV0dXJuIGV9fXQuRGF0YVByZXBhcmF0aW9uPXU7Y2xhc3MgcHtjb25zdHJ1Y3RvcihlLHQ9ITEpe3RoaXMuZGF0YVByZXBhcmF0aW9uPWUsdGhpcy5pc0luY3JlbWVudGFsPXQsdGhpcy5FWFBFQ1Q9IiAvKiBAQFZBTElEQVRJT04gKi8gV0hFUkUgIn1jb25maWcoZSl7cmV0dXJuIHRoaXMuZGF0YVByZXBhcmF0aW9uLmNvbmZpZyhlKSwiIn1zZWxmKCl7cmV0dXJuIHRoaXMucmVzb2x2ZSh0aGlzLmRhdGFQcmVwYXJhdGlvbi5nZXRUYXJnZXQoKSl9bmFtZSgpe3JldHVybiB0aGlzLmRhdGFQcmVwYXJhdGlvbi5zZXNzaW9uLmZpbmFsaXplTmFtZSh0aGlzLmRhdGFQcmVwYXJhdGlvbi5nZXRUYXJnZXQoKS5uYW1lKX1yZWYoZSwuLi50KXtyZXR1cm4gZT1sLnRvUmVzb2x2YWJsZShlLHQpLGwucmVzb2x2YWJsZUFzVGFyZ2V0KGUpPyh0aGlzLmRhdGFQcmVwYXJhdGlvbi5kZXBlbmRlbmNpZXMoZSksdGhpcy5yZXNvbHZlKGUpKToodGhpcy5kYXRhUHJlcGFyYXRpb24uc2Vzc2lvbi5jb21waWxlRXJyb3IobmV3IEVycm9yKCJBY3Rpb24gbmFtZSBpcyBub3Qgc3BlY2lmaWVkIikpLCIiKX1yZXNvbHZlKGUsLi4udCl7cmV0dXJuIHRoaXMuZGF0YVByZXBhcmF0aW9uLnNlc3Npb24ucmVzb2x2ZShlLC4uLnQpfXNjaGVtYSgpe3JldHVybiB0aGlzLmRhdGFQcmVwYXJhdGlvbi5zZXNzaW9uLmZpbmFsaXplU2NoZW1hKHRoaXMuZGF0YVByZXBhcmF0aW9uLmdldFRhcmdldCgpLnNjaGVtYSl9ZGF0YWJhc2UoKXtyZXR1cm4gdGhpcy5kYXRhUHJlcGFyYXRpb24uZ2V0VGFyZ2V0KCkuZGF0YWJhc2U/dGhpcy5kYXRhUHJlcGFyYXRpb24uc2Vzc2lvbi5maW5hbGl6ZURhdGFiYXNlKHRoaXMuZGF0YVByZXBhcmF0aW9uLmdldFRhcmdldCgpLmRhdGFiYXNlKToodGhpcy5kYXRhUHJlcGFyYXRpb24uc2Vzc2lvbi5jb21waWxlRXJyb3IobmV3IEVycm9yKCJXYXJlaG91c2UgZG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBkYXRhYmFzZXMiKSksIiIpfXdoZW4oZSx0LHI9IiIpe3JldHVybiBlP3Q6cn1pbmNyZW1lbnRhbCgpe3JldHVybiEhdGhpcy5pc0luY3JlbWVudGFsfWRlcGVuZGVuY2llcyhlKXtyZXR1cm4gdGhpcy5kYXRhUHJlcGFyYXRpb24uZGVwZW5kZW5jaWVzKGUpLCIifWFwcGx5KGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UodGhpcyk6ZX19dC5EYXRhUHJlcGFyYXRpb25Db250ZXh0PXB9LDU1MDI6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbj1yKDgxNDIpLG89cigzMTg2KSxpPXIoMjk5KSxhPXIoOTIxMSkscz1yKDg4NjkpO2NsYXNzIGwgZXh0ZW5kcyBvLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0LHIpe3ZhciBuO2lmKHN1cGVyKGUpLHRoaXMucHJvdG89cy5kYXRhZm9ybS5EZWNsYXJhdGlvbi5jcmVhdGUoKSx0aGlzLnNlc3Npb249ZSwhdClyZXR1cm47Y29uc3Qgbz10aGlzLnZlcmlmeUNvbmZpZyh0KTtpZighby5uYW1lKXRocm93IEVycm9yKCJEZWNsYXJhdGlvbnMgbXVzdCBoYXZlIGEgcG9wdWxhdGVkICduYW1lJyBmaWVsZC4iKTtjb25zdCBpPWEuYWN0aW9uQ29uZmlnVG9Db21waWxlZEdyYXBoVGFyZ2V0KG8pO3JldHVybiB0aGlzLnByb3RvLnRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KGksZS5wcm9qZWN0Q29uZmlnKSx0aGlzLnByb3RvLmNhbm9uaWNhbFRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KGksZS5jYW5vbmljYWxQcm9qZWN0Q29uZmlnKSxvLmRlc2NyaXB0aW9uJiZ0aGlzLmRlc2NyaXB0aW9uKG8uZGVzY3JpcHRpb24pLChudWxsPT09KG49by5jb2x1bW5zKXx8dm9pZCAwPT09bj92b2lkIDA6bi5sZW5ndGgpJiZ0aGlzLmNvbHVtbnMoby5jb2x1bW5zLm1hcCgoZT0+cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5jcmVhdGUoZSkpKSksdGhpcy5wcm90by5maWxlTmFtZT1yLHRoaXN9ZGVzY3JpcHRpb24oZSl7cmV0dXJuIHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvcnx8KHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvcj17fSksdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yLmRlc2NyaXB0aW9uPWUsdGhpc31jb2x1bW5zKGUpe3JldHVybiB0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3J8fCh0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3I9e30pLHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvci5jb2x1bW5zPWkuQ29sdW1uRGVzY3JpcHRvcnMubWFwQ29uZmlnUHJvdG9Ub0NvbXBpbGF0aW9uUHJvdG8oZSksdGhpc31nZXRGaWxlTmFtZSgpe3JldHVybiB0aGlzLnByb3RvLmZpbGVOYW1lfWdldFRhcmdldCgpe3JldHVybiBzLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUodGhpcy5wcm90by50YXJnZXQpfWNvbXBpbGUoKXtyZXR1cm4gbi52ZXJpZnlPYmplY3RNYXRjaGVzUHJvdG8ocy5kYXRhZm9ybS5EZWNsYXJhdGlvbix0aGlzLnByb3RvLG4uVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TVUdHRVNUX1JFUE9SVElOR19UT19EQVRBRk9STV9URUFNKX12ZXJpZnlDb25maWcoZSl7cmV0dXJuIGUuZGF0YWJhc2UmJihlLnByb2plY3Q9ZS5kYXRhYmFzZSxkZWxldGUgZS5kYXRhYmFzZSksZS5zY2hlbWEmJihlLmRhdGFzZXQ9ZS5zY2hlbWEsZGVsZXRlIGUuc2NoZW1hKSxlLmNvbHVtbnMmJihlLmNvbHVtbnM9aS5Db2x1bW5EZXNjcmlwdG9ycy5tYXBMZWdhY3lPYmplY3RUb0NvbmZpZ1Byb3RvKGUuY29sdW1ucykpLGUudHlwZSYmZGVsZXRlIGUudHlwZSxuLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byhzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZyxlLG4uVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TSE9XX0RPQ1NfTElOSyl9fXQuRGVjbGFyYXRpb249bH0sNjIxOmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1yKDgxNDIpLGk9cigzMTg2KSxhPXIoMjQwNikscz1yKDI1MzcpLGw9cigyOTkpLGM9bihyKDYyMDMpKSx1PXIoOTIxMSkscD1yKDg4NjkpO2NsYXNzIGQgZXh0ZW5kcyBpLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0LHIpe3ZhciBuO2lmKHN1cGVyKGUpLHRoaXMuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSx0aGlzLmNvbnRleHRhYmxlUHJlT3BzPVtdLHRoaXMuY29udGV4dGFibGVQb3N0T3BzPVtdLHRoaXMucHJvdG89cC5kYXRhZm9ybS5UYWJsZS5jcmVhdGUoe3R5cGU6ImluY3JlbWVudGFsIixlbnVtVHlwZTpwLmRhdGFmb3JtLlRhYmxlVHlwZS5JTkNSRU1FTlRBTCxkaXNhYmxlZDohMSx0YWdzOltdfSksdGhpcy51bmlxdWVLZXlBc3NlcnRpb25zPVtdLHRoaXMuc2Vzc2lvbj1lLHRoaXMuY29uZmlnUGF0aD1yLHRoaXMudW52ZXJpZmllZENvbmZpZz1PYmplY3QuYXNzaWduKHt9LHQpLCF0KXJldHVybjtjb25zdCBvPXRoaXMudmVyaWZ5Q29uZmlnKHQpO28ubmFtZXx8KG8ubmFtZT1jLmJhc2VuYW1lKG8uZmlsZW5hbWUpKTtjb25zdCBpPXUuYWN0aW9uQ29uZmlnVG9Db21waWxlZEdyYXBoVGFyZ2V0KG8pO3JldHVybiB0aGlzLnByb3RvLnRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KGksZS5wcm9qZWN0Q29uZmlnLG8uZmlsZW5hbWUse3ZhbGlkYXRlVGFyZ2V0OiEwfSksdGhpcy5wcm90by5jYW5vbmljYWxUYXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChpLGUuY2Fub25pY2FsUHJvamVjdENvbmZpZyksciYmKG8uZmlsZW5hbWU9dS5yZXNvbHZlQWN0aW9uc0NvbmZpZ0ZpbGVuYW1lKG8uZmlsZW5hbWUsciksdGhpcy5xdWVyeSh1Lm5hdGl2ZVJlcXVpcmUoby5maWxlbmFtZSkucXVlcnkpKSxvLmZpbGVuYW1lJiYodGhpcy5wcm90by5maWxlTmFtZT1vLmZpbGVuYW1lKSxvLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJnRoaXMuc2V0RGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyhvLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpLG8uZGVwZW5kZW5jeVRhcmdldHMmJnRoaXMuZGVwZW5kZW5jaWVzKG8uZGVwZW5kZW5jeVRhcmdldHMubWFwKChlPT51LmNvbmZpZ1RhcmdldFRvQ29tcGlsZWRHcmFwaFRhcmdldChwLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuY3JlYXRlKGUpKSkpKSx2b2lkIDAhPT1vLmhlcm1ldGljJiZ0aGlzLmhlcm1ldGljKG8uaGVybWV0aWMpLG8uZGlzYWJsZWQmJnRoaXMuZGlzYWJsZWQoKSxvLnRhZ3MmJnRoaXMudGFncyhvLnRhZ3MpLG8uZGVzY3JpcHRpb24mJnRoaXMuZGVzY3JpcHRpb24oby5kZXNjcmlwdGlvbiksKG51bGw9PT0obj1vLmNvbHVtbnMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmxlbmd0aCkmJnRoaXMuY29sdW1ucyhvLmNvbHVtbnMubWFwKChlPT5wLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLmNyZWF0ZShlKSkpKSxvLnByb2plY3QmJnRoaXMuZGF0YWJhc2Uoby5wcm9qZWN0KSxvLmRhdGFzZXQmJnRoaXMuc2NoZW1hKG8uZGF0YXNldCksby5hc3NlcnRpb25zJiZ0aGlzLmFzc2VydGlvbnMocC5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLmNyZWF0ZShvLmFzc2VydGlvbnMpKSxvLnVuaXF1ZUtleSYmdGhpcy51bmlxdWVLZXkoby51bmlxdWVLZXkpLHRoaXMucHJvdGVjdGVkKG8ucHJvdGVjdGVkKSxvLnByZU9wZXJhdGlvbnMmJnRoaXMucHJlT3BzKG8ucHJlT3BlcmF0aW9ucyksby5wb3N0T3BlcmF0aW9ucyYmdGhpcy5wb3N0T3BzKG8ucG9zdE9wZXJhdGlvbnMpLHRoaXMuYmlncXVlcnkoe3BhcnRpdGlvbkJ5Om8ucGFydGl0aW9uQnksY2x1c3RlckJ5Om8uY2x1c3RlckJ5LHVwZGF0ZVBhcnRpdGlvbkZpbHRlcjpvLnVwZGF0ZVBhcnRpdGlvbkZpbHRlcixsYWJlbHM6by5sYWJlbHMscGFydGl0aW9uRXhwaXJhdGlvbkRheXM6by5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyxyZXF1aXJlUGFydGl0aW9uRmlsdGVyOm8ucmVxdWlyZVBhcnRpdGlvbkZpbHRlcixhZGRpdGlvbmFsT3B0aW9uczpvLmFkZGl0aW9uYWxPcHRpb25zfSksdGhpcy5wcm90by5vblNjaGVtYUNoYW5nZT10aGlzLm1hcE9uU2NoZW1hQ2hhbmdlKG8ub25TY2hlbWFDaGFuZ2UpLHRoaXN9dHlwZShlKXtsZXQgdDtzd2l0Y2goZSl7Y2FzZSJ0YWJsZSI6dD1uZXcgYS5UYWJsZSh0aGlzLnNlc3Npb24sT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMudW52ZXJpZmllZENvbmZpZykse3R5cGU6InRhYmxlIn0pLHRoaXMuY29uZmlnUGF0aCk7YnJlYWs7Y2FzZSJpbmNyZW1lbnRhbCI6cmV0dXJuIHRoaXM7Y2FzZSJ2aWV3Ijp0PW5ldyBzLlZpZXcodGhpcy5zZXNzaW9uLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnVudmVyaWZpZWRDb25maWcpLHt0eXBlOiJ2aWV3In0pLHRoaXMuY29uZmlnUGF0aCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdGFibGUgdHlwZTogJHtlfWApfWNvbnN0IHI9dGhpcy5zZXNzaW9uLmFjdGlvbnMuaW5kZXhPZih0aGlzKTtpZigtMT09PXIpdGhyb3cgRXJyb3IoIkV4cGVjdGVkIHByZS1leGlzdGluZyBhY3Rpb24sIGJ1dCBub25lIGZvdW5kLiBQbGVhc2UgcmVwb3J0IHRoaXMgdG8gdGhlIERhdGFmb3JtIHRlYW0uIik7dGhpcy5zZXNzaW9uLmFjdGlvbnNbcl09dH1xdWVyeShlKXtyZXR1cm4gdGhpcy5jb250ZXh0YWJsZVF1ZXJ5PWUsdGhpc313aGVyZShlKXtyZXR1cm4gdGhpcy5jb250ZXh0YWJsZVdoZXJlPWUsdGhpc31wcmVPcHMoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVQcmVPcHMucHVzaChlKSx0aGlzfXBvc3RPcHMoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVQb3N0T3BzLnB1c2goZSksdGhpc31kaXNhYmxlZChlPSEwKXt2YXIgdDtyZXR1cm4gdGhpcy5wcm90by5kaXNhYmxlZD1lLHRoaXMudW5pcXVlS2V5QXNzZXJ0aW9ucy5mb3JFYWNoKCh0PT50LmRpc2FibGVkKGUpKSksbnVsbD09PSh0PXRoaXMucm93Q29uZGl0aW9uc0Fzc2VydGlvbil8fHZvaWQgMD09PXR8fHQuZGlzYWJsZWQoZSksdGhpc31wcm90ZWN0ZWQoZSl7cmV0dXJuIHRoaXMucHJvdG8ucHJvdGVjdGVkPW51bGw9PWV8fGUsdGhpc311bmlxdWVLZXkoZSl7dGhpcy5wcm90by51bmlxdWVLZXk9ZX1iaWdxdWVyeShlKXtlLmxhYmVscyYmT2JqZWN0LmtleXMoZS5sYWJlbHMpLmxlbmd0aD4wJiYodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuYmlncXVlcnlMYWJlbHM9ZS5sYWJlbHMpO2NvbnN0IHQ9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIubGVnYWN5Q29udmVydEJpZ1F1ZXJ5T3B0aW9ucyhlKTtyZXR1cm4gT2JqZWN0LnZhbHVlcyh0KS5sZW5ndGg+MCYmKHRoaXMucHJvdG8uYmlncXVlcnk9cC5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMuY3JlYXRlKHQpKSx0aGlzfWRlcGVuZGVuY2llcyhlKXtyZXR1cm4oQXJyYXkuaXNBcnJheShlKT9lOltlXSkuZm9yRWFjaCgoZT0+dGhpcy5wcm90by5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHUuY2hlY2tBc3NlcnRpb25zRm9yRGVwZW5kZW5jeSh0aGlzLGUpKSkpLHRoaXN9aGVybWV0aWMoZSl7dGhpcy5wcm90by5oZXJtZXRpY2l0eT1lP3AuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHkuSEVSTUVUSUM6cC5kYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eS5OT05fSEVSTUVUSUN9dGFncyhlKXt2YXIgdDtyZXR1cm4oInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKS5mb3JFYWNoKChlPT57dGhpcy5wcm90by50YWdzLnB1c2goZSl9KSksdGhpcy51bmlxdWVLZXlBc3NlcnRpb25zLmZvckVhY2goKHQ9PnQudGFncyhlKSkpLG51bGw9PT0odD10aGlzLnJvd0NvbmRpdGlvbnNBc3NlcnRpb24pfHx2b2lkIDA9PT10fHx0LnRhZ3MoZSksdGhpc31kZXNjcmlwdGlvbihlKXtyZXR1cm4gdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuZGVzY3JpcHRpb249ZSx0aGlzfWNvbHVtbnMoZSl7cmV0dXJuIHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvcnx8KHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvcj17fSksdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yLmNvbHVtbnM9bC5Db2x1bW5EZXNjcmlwdG9ycy5tYXBDb25maWdQcm90b1RvQ29tcGlsYXRpb25Qcm90byhlKSx0aGlzfWRhdGFiYXNlKGUpe3JldHVybiB0aGlzLnByb3RvLnRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KHAuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5wcm90by50YXJnZXQpLHtkYXRhYmFzZTplfSkpLHRoaXMuc2Vzc2lvbi5wcm9qZWN0Q29uZmlnLHRoaXMucHJvdG8uZmlsZU5hbWUse3ZhbGlkYXRlVGFyZ2V0OiEwfSksdGhpc31zY2hlbWEoZSl7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQocC5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnByb3RvLnRhcmdldCkse3NjaGVtYTplfSkpLHRoaXMuc2Vzc2lvbi5wcm9qZWN0Q29uZmlnLHRoaXMucHJvdG8uZmlsZU5hbWUse3ZhbGlkYXRlVGFyZ2V0OiEwfSksdGhpc31hc3NlcnRpb25zKGUpe2NvbnN0IHQ9dGhpcy5nZW5lcmF0ZUlubGluZUFzc2VydGlvbnMoZSx0aGlzLnByb3RvKTtyZXR1cm4gdGhpcy51bmlxdWVLZXlBc3NlcnRpb25zPXQudW5pcXVlS2V5QXNzZXJ0aW9ucyx0aGlzLnJvd0NvbmRpdGlvbnNBc3NlcnRpb249dC5yb3dDb25kaXRpb25zQXNzZXJ0aW9uLHRoaXN9c2V0RGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyhlKXtyZXR1cm4gdGhpcy5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPWUsdGhpc31nZXRGaWxlTmFtZSgpe3JldHVybiB0aGlzLnByb3RvLmZpbGVOYW1lfWdldFRhcmdldCgpe3JldHVybiBwLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUodGhpcy5wcm90by50YXJnZXQpfWNvbXBpbGUoKXtjb25zdCBlPW5ldyBmKHRoaXMpLHQ9bmV3IGYodGhpcywhMCk7cmV0dXJuIHRoaXMucHJvdG8ucXVlcnk9ZS5hcHBseSh0aGlzLmNvbnRleHRhYmxlUXVlcnkpLHRoaXMucHJvdG8uaW5jcmVtZW50YWxRdWVyeT10LmFwcGx5KHRoaXMuY29udGV4dGFibGVRdWVyeSksdGhpcy5wcm90by5pbmNyZW1lbnRhbFByZU9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVByZU9wcyx0KSx0aGlzLnByb3RvLmluY3JlbWVudGFsUG9zdE9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVBvc3RPcHMsdCksdGhpcy5jb250ZXh0YWJsZVdoZXJlJiYodGhpcy5wcm90by53aGVyZT1lLmFwcGx5KHRoaXMuY29udGV4dGFibGVXaGVyZSkpLHRoaXMucHJvdG8ucHJlT3BzPXRoaXMuY29udGV4dGlmeU9wcyh0aGlzLmNvbnRleHRhYmxlUHJlT3BzLGUpLmZpbHRlcigoZT0+ISFlLnRyaW0oKSkpLHRoaXMucHJvdG8ucG9zdE9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVBvc3RPcHMsZSkuZmlsdGVyKChlPT4hIWUudHJpbSgpKSksdS52YWxpZGF0ZVF1ZXJ5U3RyaW5nKHRoaXMuc2Vzc2lvbix0aGlzLnByb3RvLnF1ZXJ5LHRoaXMucHJvdG8uZmlsZU5hbWUpLHUudmFsaWRhdGVRdWVyeVN0cmluZyh0aGlzLnNlc3Npb24sdGhpcy5wcm90by5pbmNyZW1lbnRhbFF1ZXJ5LHRoaXMucHJvdG8uZmlsZU5hbWUpLG8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKHAuZGF0YWZvcm0uVGFibGUsdGhpcy5wcm90byxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU1VHR0VTVF9SRVBPUlRJTkdfVE9fREFUQUZPUk1fVEVBTSl9Y29udGV4dGlmeU9wcyhlLHQpe2xldCByPVtdO3JldHVybiBlLmZvckVhY2goKGU9Pntjb25zdCBuPXQuYXBwbHkoZSk7cj1yLmNvbmNhdCgic3RyaW5nIj09dHlwZW9mIG4/W25dOm4pfSkpLHJ9dmVyaWZ5Q29uZmlnKGUpe2UudHlwZSYmKGRlbGV0ZSBlLnR5cGUsZS5kZXBlbmRlbmNpZXMmJihlLmRlcGVuZGVuY3lUYXJnZXRzPWUuZGVwZW5kZW5jaWVzLm1hcCgoZT0+dS5yZXNvbHZhYmxlQXNBY3Rpb25Db25maWdUYXJnZXQoZSkpKSxkZWxldGUgZS5kZXBlbmRlbmNpZXMpLGUuZGF0YWJhc2UmJihlLnByb2plY3Q9ZS5kYXRhYmFzZSxkZWxldGUgZS5kYXRhYmFzZSksZS5zY2hlbWEmJihlLmRhdGFzZXQ9ZS5zY2hlbWEsZGVsZXRlIGUuc2NoZW1hKSxlLmZpbGVOYW1lJiYoZS5maWxlbmFtZT1lLmZpbGVOYW1lLGRlbGV0ZSBlLmZpbGVOYW1lKSxlLmNvbHVtbnMmJihlLmNvbHVtbnM9bC5Db2x1bW5EZXNjcmlwdG9ycy5tYXBMZWdhY3lPYmplY3RUb0NvbmZpZ1Byb3RvKGUuY29sdW1ucykpLGU9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIuaW5zZXJ0TGVnYWN5SW5saW5lQXNzZXJ0aW9uc1RvQ29uZmlnUHJvdG8oZSksKGU9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIuaW5zZXJ0TGVnYWN5QmlnUXVlcnlPcHRpb25zVG9Db25maWdQcm90byhlKSkuYmlncXVlcnkmJnUuY2hlY2tFeGNlc3NQcm9wZXJ0aWVzKChlPT57dGhyb3cgZX0pLGUuYmlncXVlcnksdS5zdHJpY3RLZXlzT2YoKShbInBhcnRpdGlvbkJ5IiwiY2x1c3RlckJ5IiwidXBkYXRlUGFydGl0aW9uRmlsdGVyIiwibGFiZWxzIiwicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiLCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIiwiYWRkaXRpb25hbE9wdGlvbnMiXSksIkJpZ1F1ZXJ5IHRhYmxlIGNvbmZpZyIpKTtjb25zdCB0PW8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKHAuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcsZSxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU0hPV19ET0NTX0xJTkspO3JldHVybiB0LmFkZGl0aW9uYWxPcHRpb25zJiZpLmNoZWNrQ29uZmlnQWRkaXRpb25hbE9wdGlvbnNPdmVybGFwKHQsdGhpcy5zZXNzaW9uKSx0fW1hcE9uU2NoZW1hQ2hhbmdlKGUpe2lmKCFlKXJldHVybiBwLmRhdGFmb3JtLk9uU2NoZW1hQ2hhbmdlLklHTk9SRTtpZigibnVtYmVyIj09dHlwZW9mIGUpc3dpdGNoKGUpe2Nhc2UgcC5kYXRhZm9ybS5BY3Rpb25Db25maWcuT25TY2hlbWFDaGFuZ2UuSUdOT1JFOnJldHVybiBwLmRhdGFmb3JtLk9uU2NoZW1hQ2hhbmdlLklHTk9SRTtjYXNlIHAuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9uU2NoZW1hQ2hhbmdlLkZBSUw6cmV0dXJuIHAuZGF0YWZvcm0uT25TY2hlbWFDaGFuZ2UuRkFJTDtjYXNlIHAuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9uU2NoZW1hQ2hhbmdlLkVYVEVORDpyZXR1cm4gcC5kYXRhZm9ybS5PblNjaGVtYUNoYW5nZS5FWFRFTkQ7Y2FzZSBwLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PblNjaGVtYUNoYW5nZS5TWU5DSFJPTklaRTpyZXR1cm4gcC5kYXRhZm9ybS5PblNjaGVtYUNoYW5nZS5TWU5DSFJPTklaRTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgT25TY2hlbWFDaGFuZ2UgdmFsdWUgIiR7ZX0iIGlzIG5vdCBzdXBwb3J0ZWRgKX1zd2l0Y2goZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkpe2Nhc2UiSUdOT1JFIjpyZXR1cm4gcC5kYXRhZm9ybS5PblNjaGVtYUNoYW5nZS5JR05PUkU7Y2FzZSJGQUlMIjpyZXR1cm4gcC5kYXRhZm9ybS5PblNjaGVtYUNoYW5nZS5GQUlMO2Nhc2UiRVhURU5EIjpyZXR1cm4gcC5kYXRhZm9ybS5PblNjaGVtYUNoYW5nZS5FWFRFTkQ7Y2FzZSJTWU5DSFJPTklaRSI6cmV0dXJuIHAuZGF0YWZvcm0uT25TY2hlbWFDaGFuZ2UuU1lOQ0hST05JWkU7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYE9uU2NoZW1hQ2hhbmdlIHZhbHVlICIke2V9IiBpcyBub3Qgc3VwcG9ydGVkYCl9fX10LkluY3JlbWVudGFsVGFibGU9ZDtjbGFzcyBme2NvbnN0cnVjdG9yKGUsdD0hMSl7dGhpcy5pbmNyZW1lbnRhbFRhYmxlPWUsdGhpcy5pc0luY3JlbWVudGFsPXR9c2VsZigpe3JldHVybiB0aGlzLnJlc29sdmUodGhpcy5pbmNyZW1lbnRhbFRhYmxlLmdldFRhcmdldCgpKX1uYW1lKCl7cmV0dXJuIHRoaXMuaW5jcmVtZW50YWxUYWJsZS5zZXNzaW9uLmZpbmFsaXplTmFtZSh0aGlzLmluY3JlbWVudGFsVGFibGUuZ2V0VGFyZ2V0KCkubmFtZSl9cmVmKGUsLi4udCl7cmV0dXJuIGU9dS50b1Jlc29sdmFibGUoZSx0KSx1LnJlc29sdmFibGVBc1RhcmdldChlKT8odGhpcy5pbmNyZW1lbnRhbFRhYmxlLmRlcGVuZGVuY2llcyhlKSx0aGlzLnJlc29sdmUoZSkpOih0aGlzLmluY3JlbWVudGFsVGFibGUuc2Vzc2lvbi5jb21waWxlRXJyb3IobmV3IEVycm9yKCJBY3Rpb24gbmFtZSBpcyBub3Qgc3BlY2lmaWVkIikpLCIiKX1yZXNvbHZlKGUsLi4udCl7cmV0dXJuIHRoaXMuaW5jcmVtZW50YWxUYWJsZS5zZXNzaW9uLnJlc29sdmUoZSwuLi50KX1zY2hlbWEoKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLnNlc3Npb24uZmluYWxpemVTY2hlbWEodGhpcy5pbmNyZW1lbnRhbFRhYmxlLmdldFRhcmdldCgpLnNjaGVtYSl9ZGF0YWJhc2UoKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLmdldFRhcmdldCgpLmRhdGFiYXNlP3RoaXMuaW5jcmVtZW50YWxUYWJsZS5zZXNzaW9uLmZpbmFsaXplRGF0YWJhc2UodGhpcy5pbmNyZW1lbnRhbFRhYmxlLmdldFRhcmdldCgpLmRhdGFiYXNlKToodGhpcy5pbmNyZW1lbnRhbFRhYmxlLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiV2FyZWhvdXNlIGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgZGF0YWJhc2VzIikpLCIiKX13aGVyZShlKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLndoZXJlKGUpLCIifXdoZW4oZSx0LHI9IiIpe3JldHVybiBlP3Q6cn1pbmNyZW1lbnRhbCgpe3JldHVybiEhdGhpcy5pc0luY3JlbWVudGFsfXByZU9wcyhlKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLnByZU9wcyhlKSwiIn1wb3N0T3BzKGUpe3JldHVybiB0aGlzLmluY3JlbWVudGFsVGFibGUucG9zdE9wcyhlKSwiIn1kaXNhYmxlZCgpe3JldHVybiB0aGlzLmluY3JlbWVudGFsVGFibGUuZGlzYWJsZWQoKSwiIn1iaWdxdWVyeShlKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLmJpZ3F1ZXJ5KGUpLCIifWRlcGVuZGVuY2llcyhlKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLmRlcGVuZGVuY2llcyhlKSwiIn1hcHBseShlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT9lKHRoaXMpOmV9dGFncyhlKXtyZXR1cm4gdGhpcy5pbmNyZW1lbnRhbFRhYmxlLnRhZ3MoZSksIiJ9fXQuSW5jcmVtZW50YWxUYWJsZUNvbnRleHQ9Zn0sMzE4NjooZSx0LHIpPT57InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBuPXIoODg2OSk7dC5BY3Rpb25CdWlsZGVyPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuaW5jbHVkZUFzc2VydGlvbnNGb3JEZXBlbmRlbmN5PW5ldyBNYXAsdGhpcy5zZXNzaW9uPWV9YXBwbHlTZXNzaW9uVG9UYXJnZXQoZSx0LHIsbyl7Y29uc3QgaT0obnVsbD09bz92b2lkIDA6by51c2VEZWZhdWx0QXNzZXJ0aW9uRGF0YXNldCkmJnQuYXNzZXJ0aW9uU2NoZW1hfHx0LmRlZmF1bHRTY2hlbWEsYT1uLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoe25hbWU6ZS5uYW1lLHNjaGVtYTplLnNjaGVtYXx8aXx8dm9pZCAwLGRhdGFiYXNlOmUuZGF0YWJhc2V8fHQuZGVmYXVsdERhdGFiYXNlfHx2b2lkIDB9KTtyZXR1cm4obnVsbD09bz92b2lkIDA6by52YWxpZGF0ZVRhcmdldCkmJnRoaXMudmFsaWRhdGVUYXJnZXQoZSxyKSxhfWZpbmFsaXplVGFyZ2V0KGUpe3JldHVybiBuLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoe25hbWU6dGhpcy5zZXNzaW9uLmZpbmFsaXplTmFtZShlLm5hbWUpLHNjaGVtYTplLnNjaGVtYT90aGlzLnNlc3Npb24uZmluYWxpemVTY2hlbWEoZS5zY2hlbWEpOnZvaWQgMCxkYXRhYmFzZTplLmRhdGFiYXNlP3RoaXMuc2Vzc2lvbi5maW5hbGl6ZURhdGFiYXNlKGUuZGF0YWJhc2UpOnZvaWQgMH0pfWdlbmVyYXRlSW5saW5lQXNzZXJ0aW9ucyhlLHQpe3ZhciByLG8saTtjb25zdCBhPXt1bmlxdWVLZXlBc3NlcnRpb25zOltdfTsobnVsbD09PShyPWUudW5pcXVlS2V5KXx8dm9pZCAwPT09cj92b2lkIDA6ci5sZW5ndGgpJiYobnVsbD09PShvPWUudW5pcXVlS2V5cyl8fHZvaWQgMD09PW8/dm9pZCAwOm8ubGVuZ3RoKSYmdGhpcy5zZXNzaW9uLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoIlNwZWNpZnkgYXQgbW9zdCBvbmUgb2YgJ2Fzc2VydGlvbnMudW5pcXVlS2V5JyBhbmQgJ2Fzc2VydGlvbnMudW5pcXVlS2V5cycuIikpO2NvbnN0IHM9dGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXg/YCR7dGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXh9X2A6IiI7bGV0IGw9ZS51bmlxdWVLZXlzLm1hcCgoZT0+bi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleS5jcmVhdGUoZSkpKTsobnVsbD09PShpPWUudW5pcXVlS2V5KXx8dm9pZCAwPT09aT92b2lkIDA6aS5sZW5ndGgpJiYobD1bbi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleS5jcmVhdGUoe3VuaXF1ZUtleTplLnVuaXF1ZUtleX0pXSksbCYmbC5mb3JFYWNoKCgoe3VuaXF1ZUtleTplfSxyKT0+e2NvbnN0IG89dGhpcy5zZXNzaW9uLmFzc2VydChgJHtzfSR7dC50YXJnZXQuc2NoZW1hfV8ke3QudGFyZ2V0Lm5hbWV9X2Fzc2VydGlvbnNfdW5pcXVlS2V5XyR7cn1gLG4uZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZy5jcmVhdGUoe2ZpbGVuYW1lOnQuZmlsZU5hbWV9KSkucXVlcnkoKHI9PnRoaXMuc2Vzc2lvbi5jb21waWxhdGlvblNxbCgpLmluZGV4QXNzZXJ0aW9uKHIucmVmKHQudGFyZ2V0KSxlKSkpO3QudGFncyYmby50YWdzKHQudGFncyksby5zZXRQYXJlbnRBY3Rpb24obi5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHQudGFyZ2V0KSksdC5kaXNhYmxlZCYmby5kaXNhYmxlZCgpLGEudW5pcXVlS2V5QXNzZXJ0aW9ucy5wdXNoKG8pfSkpO2NvbnN0IGM9ZS5yb3dDb25kaXRpb25zfHxbXTtyZXR1cm4gZS5ub25OdWxsJiYoInN0cmluZyI9PXR5cGVvZiBlLm5vbk51bGw/W2Uubm9uTnVsbF06ZS5ub25OdWxsKS5mb3JFYWNoKChlPT5jLnB1c2goYCR7ZX0gSVMgTk9UIE5VTExgKSkpLGMmJmMubGVuZ3RoPjAmJihhLnJvd0NvbmRpdGlvbnNBc3NlcnRpb249dGhpcy5zZXNzaW9uLmFzc2VydChgJHtzfSR7dC50YXJnZXQuc2NoZW1hfV8ke3QudGFyZ2V0Lm5hbWV9X2Fzc2VydGlvbnNfcm93Q29uZGl0aW9uc2Ase2ZpbGVuYW1lOnQuZmlsZU5hbWV9KS5xdWVyeSgoZT0+dGhpcy5zZXNzaW9uLmNvbXBpbGF0aW9uU3FsKCkucm93Q29uZGl0aW9uc0Fzc2VydGlvbihlLnJlZih0LnRhcmdldCksYykpKSxhLnJvd0NvbmRpdGlvbnNBc3NlcnRpb24uc2V0UGFyZW50QWN0aW9uKG4uZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZSh0LnRhcmdldCkpLHQuZGlzYWJsZWQmJmEucm93Q29uZGl0aW9uc0Fzc2VydGlvbi5kaXNhYmxlZCgpLHQudGFncyYmYS5yb3dDb25kaXRpb25zQXNzZXJ0aW9uLnRhZ3ModC50YWdzKSksYX12YWxpZGF0ZVRhcmdldChlLHQpe2UubmFtZS5pbmNsdWRlcygiLiIpJiZ0aGlzLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiQWN0aW9uIHRhcmdldCBuYW1lcyBjYW5ub3QgaW5jbHVkZSAnLiciKSx0LGUpLGUuc2NoZW1hLmluY2x1ZGVzKCIuIikmJnRoaXMuc2Vzc2lvbi5jb21waWxlRXJyb3IobmV3IEVycm9yKCJBY3Rpb24gdGFyZ2V0IGRhdGFzZXRzIGNhbm5vdCBpbmNsdWRlICcuJyIpLHQsZSksZS5kYXRhYmFzZS5pbmNsdWRlcygiLiIpJiZ0aGlzLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiQWN0aW9uIHRhcmdldCBwcm9qZWN0cyBjYW5ub3QgaW5jbHVkZSAnLiciKSx0LGUpfX0sdC5jaGVja0NvbmZpZ0FkZGl0aW9uYWxPcHRpb25zT3ZlcmxhcD1mdW5jdGlvbihlLHQpe2NvbnN0IHI9bi5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHtkYXRhYmFzZTplLnByb2plY3Qsc2NoZW1hOmUuZGF0YXNldCxuYW1lOmUubmFtZX0pO2UucGFydGl0aW9uRXhwaXJhdGlvbkRheXMmJmUuYWRkaXRpb25hbE9wdGlvbnMucGFydGl0aW9uX2V4cGlyYXRpb25fZGF5cyYmdC5jb21waWxlRXJyb3IoInBhcnRpdGlvbkV4cGlyYXRpb25EYXlzIGhhcyBiZWVuIGRlY2xhcmVkIHR3aWNlIixlLmZpbGVuYW1lLHIpLGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlciYmZS5hZGRpdGlvbmFsT3B0aW9ucy5yZXF1aXJlX3BhcnRpdGlvbl9maWx0ZXImJnQuY29tcGlsZUVycm9yKCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIGhhcyBiZWVuIGRlY2xhcmVkIHR3aWNlIixlLmZpbGVuYW1lLHIpfSx0LlRhYmxlVHlwZT1bInRhYmxlIiwidmlldyIsImluY3JlbWVudGFsIl0sdC5MZWdhY3lDb25maWdDb252ZXJ0ZXI9Y2xhc3N7c3RhdGljIGxlZ2FjeUNvbnZlcnRCaWdRdWVyeU9wdGlvbnMoZSl7bGV0IHQ9e307cmV0dXJuIE9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKChbZSxyXSk9PntBcnJheS5pc0FycmF5KHIpJiYwPT09ci5sZW5ndGh8fCJvYmplY3QiPT10eXBlb2YgciYmMD09PU9iamVjdC5lbnRyaWVzKHIpLmxlbmd0aHx8ciYmKHQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtbZV06cn0pKX0pKSx0fXN0YXRpYyBpbnNlcnRMZWdhY3lJbmxpbmVBc3NlcnRpb25zVG9Db25maWdQcm90byhlKXt2YXIgdCxyLG87Y29uc3QgaT1lO3JldHVybihudWxsPT1pP3ZvaWQgMDppLmFzc2VydGlvbnMpJiYoInN0cmluZyI9PXR5cGVvZihudWxsPT09KHQ9aS5hc3NlcnRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dC51bmlxdWVLZXkpJiYoaS5hc3NlcnRpb25zLnVuaXF1ZUtleT1baS5hc3NlcnRpb25zLnVuaXF1ZUtleV0pLChudWxsPT09KG89bnVsbD09PShyPWkuYXNzZXJ0aW9ucy51bmlxdWVLZXlzKXx8dm9pZCAwPT09cj92b2lkIDA6clswXSl8fHZvaWQgMD09PW8/dm9pZCAwOm8ubGVuZ3RoKT4wJiYoaS5hc3NlcnRpb25zLnVuaXF1ZUtleXM9aS5hc3NlcnRpb25zLnVuaXF1ZUtleXMubWFwKChlPT5uLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuVW5pcXVlS2V5LmNyZWF0ZSh7dW5pcXVlS2V5OmV9KSkpKSwic3RyaW5nIj09dHlwZW9mIGkuYXNzZXJ0aW9ucy5ub25OdWxsJiYoaS5hc3NlcnRpb25zLm5vbk51bGw9W2kuYXNzZXJ0aW9ucy5ub25OdWxsXSkpLGl9c3RhdGljIGluc2VydExlZ2FjeUJpZ1F1ZXJ5T3B0aW9uc1RvQ29uZmlnUHJvdG8oZSl7Y29uc3QgdD1lO3JldHVybihudWxsPT10P3ZvaWQgMDp0LmJpZ3F1ZXJ5KT8odC5iaWdxdWVyeS5wYXJ0aXRpb25CeSYmKHQucGFydGl0aW9uQnk9dC5iaWdxdWVyeS5wYXJ0aXRpb25CeSxkZWxldGUgdC5iaWdxdWVyeS5wYXJ0aXRpb25CeSksdC5iaWdxdWVyeS5jbHVzdGVyQnkmJih0LmNsdXN0ZXJCeT10LmJpZ3F1ZXJ5LmNsdXN0ZXJCeSxkZWxldGUgdC5iaWdxdWVyeS5jbHVzdGVyQnkpLHQuYmlncXVlcnkudXBkYXRlUGFydGl0aW9uRmlsdGVyJiYodC51cGRhdGVQYXJ0aXRpb25GaWx0ZXI9dC5iaWdxdWVyeS51cGRhdGVQYXJ0aXRpb25GaWx0ZXIsZGVsZXRlIHQuYmlncXVlcnkudXBkYXRlUGFydGl0aW9uRmlsdGVyKSx0LmJpZ3F1ZXJ5LmxhYmVscyYmKHQubGFiZWxzPXQuYmlncXVlcnkubGFiZWxzLGRlbGV0ZSB0LmJpZ3F1ZXJ5LmxhYmVscyksdC5iaWdxdWVyeS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmKHQucGFydGl0aW9uRXhwaXJhdGlvbkRheXM9dC5iaWdxdWVyeS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyxkZWxldGUgdC5iaWdxdWVyeS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyksdC5iaWdxdWVyeS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiYodC5yZXF1aXJlUGFydGl0aW9uRmlsdGVyPXQuYmlncXVlcnkucmVxdWlyZVBhcnRpdGlvbkZpbHRlcixkZWxldGUgdC5iaWdxdWVyeS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyKSx0LmJpZ3F1ZXJ5LmFkZGl0aW9uYWxPcHRpb25zJiYodC5hZGRpdGlvbmFsT3B0aW9ucz10LmJpZ3F1ZXJ5LmFkZGl0aW9uYWxPcHRpb25zLGRlbGV0ZSB0LmJpZ3F1ZXJ5LmFkZGl0aW9uYWxPcHRpb25zKSwwPT09T2JqZWN0LmtleXModC5iaWdxdWVyeSkubGVuZ3RoJiZkZWxldGUgdC5iaWdxdWVyeSx0KTp0fX19LDUxNDU6ZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj10aGlzJiZ0aGlzLl9faW1wb3J0U3Rhcnx8ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBvPXIoODE0MiksaT1yKDMxODYpLGE9bihyKDYyMDMpKSxzPXIoOTIxMSksbD1yKDg4NjkpO2NsYXNzIGMgZXh0ZW5kcyBpLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0LHIpe3N1cGVyKGUpLHRoaXMuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSx0aGlzLnByb3RvPWwuZGF0YWZvcm0uTm90ZWJvb2suY3JlYXRlKCk7Y29uc3Qgbj10aGlzLnZlcmlmeUNvbmZpZyh0KTtuLm5hbWV8fChuLm5hbWU9YS5iYXNlbmFtZShuLmZpbGVuYW1lKSk7Y29uc3Qgbz1zLmFjdGlvbkNvbmZpZ1RvQ29tcGlsZWRHcmFwaFRhcmdldChuKTtuLmZpbGVuYW1lPXMucmVzb2x2ZUFjdGlvbnNDb25maWdGaWxlbmFtZShuLmZpbGVuYW1lLHIpLHRoaXMuc2Vzc2lvbj1lLHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQobyxlLnByb2plY3RDb25maWcsbi5maWxlbmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzLnByb3RvLmNhbm9uaWNhbFRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KG8sZS5jYW5vbmljYWxQcm9qZWN0Q29uZmlnKSx0aGlzLnByb3RvLnRhZ3M9bi50YWdzLHRoaXMuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1uLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMsbi5kZXBlbmRlbmN5VGFyZ2V0cyYmdGhpcy5kZXBlbmRlbmNpZXMobi5kZXBlbmRlbmN5VGFyZ2V0cy5tYXAoKGU9PnMuY29uZmlnVGFyZ2V0VG9Db21waWxlZEdyYXBoVGFyZ2V0KGwuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5jcmVhdGUoZSkpKSkpLHRoaXMucHJvdG8uZmlsZU5hbWU9bi5maWxlbmFtZSxuLmRpc2FibGVkJiYodGhpcy5wcm90by5kaXNhYmxlZD1uLmRpc2FibGVkKTtjb25zdCBpPXMubmF0aXZlUmVxdWlyZShuLmZpbGVuYW1lKS5hc0pzb247dGhpcy5wcm90by5ub3RlYm9va0NvbnRlbnRzPUpTT04uc3RyaW5naWZ5KGZ1bmN0aW9uKGUsdCl7aWYoISgiY2VsbHMiaW4gZSkpdGhyb3cgbmV3IEVycm9yKGBOb3RlYm9vayBhdCAke3R9IGlzIGludmFsaWQ6IGNlbGxzIGZpZWxkIG5vdCBwcmVzZW50YCk7cmV0dXJuIGUuY2VsbHMuZm9yRWFjaCgoKHQscik9Pnsib3V0cHV0cyJpbiB0JiYodC5vdXRwdXRzPVtdLGUuY2VsbHNbcl09dCl9KSksZX0oaSxuLmZpbGVuYW1lKSl9aXB5bmIoZSl7cmV0dXJuIHRoaXMucHJvdG8ubm90ZWJvb2tDb250ZW50cz1KU09OLnN0cmluZ2lmeShlKSx0aGlzfWRlcGVuZGVuY2llcyhlKXtyZXR1cm4oQXJyYXkuaXNBcnJheShlKT9lOltlXSkuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9cy5jaGVja0Fzc2VydGlvbnNGb3JEZXBlbmRlbmN5KHRoaXMsZSk7dCYmdGhpcy5wcm90by5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHQpfSkpLHRoaXN9Z2V0RmlsZU5hbWUoKXtyZXR1cm4gdGhpcy5wcm90by5maWxlTmFtZX1nZXRUYXJnZXQoKXtyZXR1cm4gbC5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHRoaXMucHJvdG8udGFyZ2V0KX1jb21waWxlKCl7cmV0dXJuIG8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKGwuZGF0YWZvcm0uTm90ZWJvb2ssdGhpcy5wcm90byxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU1VHR0VTVF9SRVBPUlRJTkdfVE9fREFUQUZPUk1fVEVBTSl9dmVyaWZ5Q29uZmlnKGUpe3JldHVybiBvLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byhsLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZyxlLG8uVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TSE9XX0RPQ1NfTElOSyl9fXQuTm90ZWJvb2s9Y30sOTc1OmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1yKDgxNDIpLGk9cigzMTg2KSxhPXIoMjk5KSxzPW4ocig2MjAzKSksbD1yKDkyMTEpLGM9cig4ODY5KTtjbGFzcyB1IGV4dGVuZHMgaS5BY3Rpb25CdWlsZGVye2NvbnN0cnVjdG9yKGUsdCxyKXt2YXIgbjtpZihzdXBlcihlKSx0aGlzLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ITEsdGhpcy5wcm90bz1jLmRhdGFmb3JtLk9wZXJhdGlvbi5jcmVhdGUoKSx0aGlzLnNlc3Npb249ZSwhdClyZXR1cm47Y29uc3Qgbz10aGlzLnZlcmlmeUNvbmZpZyh0KTtvLm5hbWV8fChvLm5hbWU9cy5iYXNlbmFtZShvLmZpbGVuYW1lKSk7Y29uc3QgaT1sLmFjdGlvbkNvbmZpZ1RvQ29tcGlsZWRHcmFwaFRhcmdldChvKTtyZXR1cm4gdGhpcy5wcm90by50YXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChpLGUucHJvamVjdENvbmZpZyxvLmZpbGVuYW1lLHt2YWxpZGF0ZVRhcmdldDohMH0pLHRoaXMucHJvdG8uY2Fub25pY2FsVGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoaSxlLmNhbm9uaWNhbFByb2plY3RDb25maWcpLHImJihvLmZpbGVuYW1lPWwucmVzb2x2ZUFjdGlvbnNDb25maWdGaWxlbmFtZShvLmZpbGVuYW1lLHIpLHRoaXMucXVlcmllcyhsLm5hdGl2ZVJlcXVpcmUoby5maWxlbmFtZSkucXVlcnkpKSxvLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJnRoaXMuc2V0RGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyhvLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpLG8uZGVwZW5kZW5jeVRhcmdldHMmJnRoaXMuZGVwZW5kZW5jaWVzKG8uZGVwZW5kZW5jeVRhcmdldHMubWFwKChlPT5sLmNvbmZpZ1RhcmdldFRvQ29tcGlsZWRHcmFwaFRhcmdldChjLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuY3JlYXRlKGUpKSkpKSx2b2lkIDAhPT1vLmhlcm1ldGljJiZ0aGlzLmhlcm1ldGljKG8uaGVybWV0aWMpLG8uZGlzYWJsZWQmJnRoaXMuZGlzYWJsZWQoKSxvLnRhZ3MmJnRoaXMudGFncyhvLnRhZ3MpLG8uaGFzT3V0cHV0JiZ0aGlzLmhhc091dHB1dChvLmhhc091dHB1dCksby5kZXNjcmlwdGlvbiYmdGhpcy5kZXNjcmlwdGlvbihvLmRlc2NyaXB0aW9uKSwobnVsbD09PShuPW8uY29sdW1ucyl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubGVuZ3RoKSYmdGhpcy5jb2x1bW5zKG8uY29sdW1ucy5tYXAoKGU9PmMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuY3JlYXRlKGUpKSkpLG8ucHJvamVjdCYmdGhpcy5kYXRhYmFzZShvLnByb2plY3QpLG8uZGF0YXNldCYmdGhpcy5zY2hlbWEoby5kYXRhc2V0KSxvLmZpbGVuYW1lJiYodGhpcy5wcm90by5maWxlTmFtZT1vLmZpbGVuYW1lKSx0aGlzfXF1ZXJpZXMoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVRdWVyaWVzPWUsdGhpc31kZXBlbmRlbmNpZXMoZSl7cmV0dXJuKEFycmF5LmlzQXJyYXkoZSk/ZTpbZV0pLmZvckVhY2goKGU9Pntjb25zdCB0PWwuY2hlY2tBc3NlcnRpb25zRm9yRGVwZW5kZW5jeSh0aGlzLGUpO3QmJnRoaXMucHJvdG8uZGVwZW5kZW5jeVRhcmdldHMucHVzaCh0KX0pKSx0aGlzfWhlcm1ldGljKGUpe3RoaXMucHJvdG8uaGVybWV0aWNpdHk9ZT9jLmRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5LkhFUk1FVElDOmMuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHkuTk9OX0hFUk1FVElDfWRpc2FibGVkKGU9ITApe3JldHVybiB0aGlzLnByb3RvLmRpc2FibGVkPWUsdGhpc310YWdzKGUpe3JldHVybigic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpLmZvckVhY2goKGU9Pnt0aGlzLnByb3RvLnRhZ3MuaW5kZXhPZihlKTwwJiZ0aGlzLnByb3RvLnRhZ3MucHVzaChlKX0pKSx0aGlzfWhhc091dHB1dChlKXtyZXR1cm4gdGhpcy5wcm90by5oYXNPdXRwdXQ9ZSx0aGlzfWRlc2NyaXB0aW9uKGUpe3JldHVybiB0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3J8fCh0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3I9e30pLHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvci5kZXNjcmlwdGlvbj1lLHRoaXN9Y29sdW1ucyhlKXtyZXR1cm4gdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuY29sdW1ucz1hLkNvbHVtbkRlc2NyaXB0b3JzLm1hcENvbmZpZ1Byb3RvVG9Db21waWxhdGlvblByb3RvKGUpLHRoaXN9ZGF0YWJhc2UoZSl7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoYy5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnByb3RvLnRhcmdldCkse2RhdGFiYXNlOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzfXNjaGVtYShlKXtyZXR1cm4gdGhpcy5wcm90by50YXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChjLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMucHJvdG8udGFyZ2V0KSx7c2NoZW1hOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzfXNldERlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMoZSl7cmV0dXJuIHRoaXMuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1lLHRoaXN9Z2V0RmlsZU5hbWUoKXtyZXR1cm4gdGhpcy5wcm90by5maWxlTmFtZX1nZXRUYXJnZXQoKXtyZXR1cm4gYy5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHRoaXMucHJvdG8udGFyZ2V0KX1nZXRIYXNPdXRwdXQoKXtyZXR1cm4gdGhpcy5wcm90by5oYXNPdXRwdXR9Y29tcGlsZSgpe3ZhciBlLHQ7KG51bGw9PT0odD1udWxsPT09KGU9dGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jb2x1bW5zKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sZW5ndGgpPjAmJiF0aGlzLnByb3RvLmhhc091dHB1dCYmdGhpcy5zZXNzaW9uLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoIkFjdGlvbnMgb2YgdHlwZSAnb3BlcmF0aW9ucycgbWF5IG9ubHkgZGVzY3JpYmUgY29sdW1ucyBpZiB0aGV5IHNwZWNpZnkgJ2hhc091dHB1dDogdHJ1ZScuIiksdGhpcy5wcm90by5maWxlTmFtZSk7Y29uc3Qgcj1uZXcgcCh0aGlzKS5hcHBseSh0aGlzLmNvbnRleHRhYmxlUXVlcmllcyk7cmV0dXJuIHRoaXMucHJvdG8ucXVlcmllcz0ic3RyaW5nIj09dHlwZW9mIHI/W3JdOnIsby52ZXJpZnlPYmplY3RNYXRjaGVzUHJvdG8oYy5kYXRhZm9ybS5PcGVyYXRpb24sdGhpcy5wcm90byxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU1VHR0VTVF9SRVBPUlRJTkdfVE9fREFUQUZPUk1fVEVBTSl9dmVyaWZ5Q29uZmlnKGUpe3JldHVybiBlLnR5cGUmJihkZWxldGUgZS50eXBlLGUuZGVwZW5kZW5jaWVzJiYoZS5kZXBlbmRlbmN5VGFyZ2V0cz1lLmRlcGVuZGVuY2llcy5tYXAoKGU9PmwucmVzb2x2YWJsZUFzQWN0aW9uQ29uZmlnVGFyZ2V0KGUpKSksZGVsZXRlIGUuZGVwZW5kZW5jaWVzKSxlLmRhdGFiYXNlJiYoZS5wcm9qZWN0PWUuZGF0YWJhc2UsZGVsZXRlIGUuZGF0YWJhc2UpLGUuc2NoZW1hJiYoZS5kYXRhc2V0PWUuc2NoZW1hLGRlbGV0ZSBlLnNjaGVtYSksZS5maWxlTmFtZSYmKGUuZmlsZW5hbWU9ZS5maWxlTmFtZSxkZWxldGUgZS5maWxlTmFtZSksZS5jb2x1bW5zJiYoZS5jb2x1bW5zPWEuQ29sdW1uRGVzY3JpcHRvcnMubWFwTGVnYWN5T2JqZWN0VG9Db25maWdQcm90byhlLmNvbHVtbnMpKSksby52ZXJpZnlPYmplY3RNYXRjaGVzUHJvdG8oYy5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLGUsby5WZXJpZnlQcm90b0Vycm9yQmVoYXZpb3VyLlNIT1dfRE9DU19MSU5LKX19dC5PcGVyYXRpb249dTtjbGFzcyBwe2NvbnN0cnVjdG9yKGUpe3RoaXMub3BlcmF0aW9uPWV9c2VsZigpe3JldHVybiB0aGlzLnJlc29sdmUodGhpcy5vcGVyYXRpb24uZ2V0VGFyZ2V0KCkpfW5hbWUoKXtyZXR1cm4gdGhpcy5vcGVyYXRpb24uc2Vzc2lvbi5maW5hbGl6ZU5hbWUodGhpcy5vcGVyYXRpb24uZ2V0VGFyZ2V0KCkubmFtZSl9cmVmKGUsLi4udCl7cmV0dXJuIGU9bC50b1Jlc29sdmFibGUoZSx0KSxsLnJlc29sdmFibGVBc1RhcmdldChlKT8odGhpcy5vcGVyYXRpb24uZGVwZW5kZW5jaWVzKGUpLHRoaXMucmVzb2x2ZShlKSk6KHRoaXMub3BlcmF0aW9uLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiQWN0aW9uIG5hbWUgaXMgbm90IHNwZWNpZmllZCIpKSwiIil9cmVzb2x2ZShlLC4uLnQpe3JldHVybiB0aGlzLm9wZXJhdGlvbi5zZXNzaW9uLnJlc29sdmUoZSwuLi50KX1zY2hlbWEoKXtyZXR1cm4gdGhpcy5vcGVyYXRpb24uc2Vzc2lvbi5maW5hbGl6ZVNjaGVtYSh0aGlzLm9wZXJhdGlvbi5nZXRUYXJnZXQoKS5zY2hlbWEpfWRhdGFiYXNlKCl7cmV0dXJuIHRoaXMub3BlcmF0aW9uLmdldFRhcmdldCgpLmRhdGFiYXNlP3RoaXMub3BlcmF0aW9uLnNlc3Npb24uZmluYWxpemVEYXRhYmFzZSh0aGlzLm9wZXJhdGlvbi5nZXRUYXJnZXQoKS5kYXRhYmFzZSk6KHRoaXMub3BlcmF0aW9uLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiV2FyZWhvdXNlIGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgZGF0YWJhc2VzIikpLCIiKX1kZXBlbmRlbmNpZXMoZSl7cmV0dXJuIHRoaXMub3BlcmF0aW9uLmRlcGVuZGVuY2llcyhlKSwiIn10YWdzKGUpe3JldHVybiB0aGlzLm9wZXJhdGlvbi50YWdzKGUpLCIifWhhc091dHB1dChlKXtyZXR1cm4gdGhpcy5vcGVyYXRpb24uaGFzT3V0cHV0KGUpLCIifXdoZW4oZSx0LHI9IiIpe3JldHVybiBlP3Q6cn1hcHBseShlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT9lKHRoaXMpOmV9fXQuT3BlcmF0aW9uQ29udGV4dD1wfSwyNDA2OmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1yKDgxNDIpLGk9cigzMTg2KSxhPXIoNjIxKSxzPXIoMjUzNyksbD1yKDI5OSksYz1uKHIoNjIwMykpLHU9cig5MjExKSxwPXIoODg2OSk7Y2xhc3MgZCBleHRlbmRzIGkuQWN0aW9uQnVpbGRlcntjb25zdHJ1Y3RvcihlLHQscil7dmFyIG47aWYoc3VwZXIoZSksdGhpcy5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPSExLHRoaXMuY29udGV4dGFibGVQcmVPcHM9W10sdGhpcy5jb250ZXh0YWJsZVBvc3RPcHM9W10sdGhpcy5wcm90bz1wLmRhdGFmb3JtLlRhYmxlLmNyZWF0ZSh7dHlwZToidGFibGUiLGVudW1UeXBlOnAuZGF0YWZvcm0uVGFibGVUeXBlLlRBQkxFLGRpc2FibGVkOiExLHRhZ3M6W119KSx0aGlzLnVuaXF1ZUtleUFzc2VydGlvbnM9W10sdGhpcy5zZXNzaW9uPWUsdGhpcy5jb25maWdQYXRoPXIsdGhpcy51bnZlcmlmaWVkQ29uZmlnPU9iamVjdC5hc3NpZ24oe30sdCksIXQpcmV0dXJuO2NvbnN0IG89dGhpcy52ZXJpZnlDb25maWcodCk7by5uYW1lfHwoby5uYW1lPWMuYmFzZW5hbWUoby5maWxlbmFtZSkpO2NvbnN0IGk9dS5hY3Rpb25Db25maWdUb0NvbXBpbGVkR3JhcGhUYXJnZXQobyk7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoaSxlLnByb2plY3RDb25maWcsby5maWxlbmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzLnByb3RvLmNhbm9uaWNhbFRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KGksZS5jYW5vbmljYWxQcm9qZWN0Q29uZmlnKSxyJiYoby5maWxlbmFtZT11LnJlc29sdmVBY3Rpb25zQ29uZmlnRmlsZW5hbWUoby5maWxlbmFtZSxyKSx0aGlzLnF1ZXJ5KHUubmF0aXZlUmVxdWlyZShvLmZpbGVuYW1lKS5xdWVyeSkpLG8uZmlsZW5hbWUmJih0aGlzLnByb3RvLmZpbGVOYW1lPW8uZmlsZW5hbWUpLG8uZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyYmdGhpcy5zZXREZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKG8uZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyksby5kZXBlbmRlbmN5VGFyZ2V0cyYmdGhpcy5kZXBlbmRlbmNpZXMoby5kZXBlbmRlbmN5VGFyZ2V0cyksdm9pZCAwIT09by5oZXJtZXRpYyYmdGhpcy5oZXJtZXRpYyhvLmhlcm1ldGljKSxvLmRpc2FibGVkJiZ0aGlzLmRpc2FibGVkKCksby50YWdzJiZ0aGlzLnRhZ3Moby50YWdzKSxvLmRlc2NyaXB0aW9uJiZ0aGlzLmRlc2NyaXB0aW9uKG8uZGVzY3JpcHRpb24pLChudWxsPT09KG49by5jb2x1bW5zKXx8dm9pZCAwPT09bj92b2lkIDA6bi5sZW5ndGgpJiZ0aGlzLmNvbHVtbnMoby5jb2x1bW5zLm1hcCgoZT0+cC5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5jcmVhdGUoZSkpKSksby5hc3NlcnRpb25zJiZ0aGlzLmFzc2VydGlvbnMocC5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLmNyZWF0ZShvLmFzc2VydGlvbnMpKSxvLnByZU9wZXJhdGlvbnMmJnRoaXMucHJlT3BzKG8ucHJlT3BlcmF0aW9ucyksby5wb3N0T3BlcmF0aW9ucyYmdGhpcy5wb3N0T3BzKG8ucG9zdE9wZXJhdGlvbnMpLHRoaXMuYmlncXVlcnkoe3BhcnRpdGlvbkJ5Om8ucGFydGl0aW9uQnksY2x1c3RlckJ5Om8uY2x1c3RlckJ5LGxhYmVsczpvLmxhYmVscyxwYXJ0aXRpb25FeHBpcmF0aW9uRGF5czpvLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzLHJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI6by5yZXF1aXJlUGFydGl0aW9uRmlsdGVyLGFkZGl0aW9uYWxPcHRpb25zOm8uYWRkaXRpb25hbE9wdGlvbnN9KSx0aGlzfXR5cGUoZSl7bGV0IHQ7c3dpdGNoKGUpe2Nhc2UidGFibGUiOnJldHVybiB0aGlzO2Nhc2UiaW5jcmVtZW50YWwiOnQ9bmV3IGEuSW5jcmVtZW50YWxUYWJsZSh0aGlzLnNlc3Npb24sT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMudW52ZXJpZmllZENvbmZpZykse3R5cGU6ImluY3JlbWVudGFsIn0pLHRoaXMuY29uZmlnUGF0aCk7YnJlYWs7Y2FzZSJ2aWV3Ijp0PW5ldyBzLlZpZXcodGhpcy5zZXNzaW9uLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnVudmVyaWZpZWRDb25maWcpLHt0eXBlOiJ2aWV3In0pLHRoaXMuY29uZmlnUGF0aCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdGFibGUgdHlwZTogJHtlfWApfWNvbnN0IHI9dGhpcy5zZXNzaW9uLmFjdGlvbnMuaW5kZXhPZih0aGlzKTtpZigtMT09PXIpdGhyb3cgRXJyb3IoIkV4cGVjdGVkIHByZS1leGlzdGluZyBhY3Rpb24sIGJ1dCBub25lIGZvdW5kLiBQbGVhc2UgcmVwb3J0IHRoaXMgdG8gdGhlIERhdGFmb3JtIHRlYW0uIik7dGhpcy5zZXNzaW9uLmFjdGlvbnNbcl09dH1xdWVyeShlKXtyZXR1cm4gdGhpcy5jb250ZXh0YWJsZVF1ZXJ5PWUsdGhpc313aGVyZShlKXtyZXR1cm4gdGhpcy5jb250ZXh0YWJsZVdoZXJlPWUsdGhpc31wcmVPcHMoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVQcmVPcHMucHVzaChlKSx0aGlzfXBvc3RPcHMoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVQb3N0T3BzLnB1c2goZSksdGhpc31kaXNhYmxlZChlPSEwKXt2YXIgdDtyZXR1cm4gdGhpcy5wcm90by5kaXNhYmxlZD1lLHRoaXMudW5pcXVlS2V5QXNzZXJ0aW9ucy5mb3JFYWNoKCh0PT50LmRpc2FibGVkKGUpKSksbnVsbD09PSh0PXRoaXMucm93Q29uZGl0aW9uc0Fzc2VydGlvbil8fHZvaWQgMD09PXR8fHQuZGlzYWJsZWQoZSksdGhpc31iaWdxdWVyeShlKXtlLmxhYmVscyYmT2JqZWN0LmtleXMoZS5sYWJlbHMpLmxlbmd0aD4wJiYodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuYmlncXVlcnlMYWJlbHM9ZS5sYWJlbHMpO2NvbnN0IHQ9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIubGVnYWN5Q29udmVydEJpZ1F1ZXJ5T3B0aW9ucyhlKTtyZXR1cm4gT2JqZWN0LnZhbHVlcyh0KS5sZW5ndGg+MCYmKHRoaXMucHJvdG8uYmlncXVlcnk9cC5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMuY3JlYXRlKHQpKSx0aGlzfWRlcGVuZGVuY2llcyhlKXtyZXR1cm4oQXJyYXkuaXNBcnJheShlKT9lOltlXSkuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9dS5jaGVja0Fzc2VydGlvbnNGb3JEZXBlbmRlbmN5KHRoaXMsZSk7dCYmdGhpcy5wcm90by5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHQpfSkpLHRoaXN9aGVybWV0aWMoZSl7dGhpcy5wcm90by5oZXJtZXRpY2l0eT1lP3AuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHkuSEVSTUVUSUM6cC5kYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eS5OT05fSEVSTUVUSUN9dGFncyhlKXt2YXIgdDtyZXR1cm4oInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKS5mb3JFYWNoKChlPT57dGhpcy5wcm90by50YWdzLnB1c2goZSl9KSksdGhpcy51bmlxdWVLZXlBc3NlcnRpb25zLmZvckVhY2goKHQ9PnQudGFncyhlKSkpLG51bGw9PT0odD10aGlzLnJvd0NvbmRpdGlvbnNBc3NlcnRpb24pfHx2b2lkIDA9PT10fHx0LnRhZ3MoZSksdGhpc31kZXNjcmlwdGlvbihlKXtyZXR1cm4gdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuZGVzY3JpcHRpb249ZSx0aGlzfWNvbHVtbnMoZSl7cmV0dXJuIHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvcnx8KHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvcj17fSksdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yLmNvbHVtbnM9bC5Db2x1bW5EZXNjcmlwdG9ycy5tYXBDb25maWdQcm90b1RvQ29tcGlsYXRpb25Qcm90byhlKSx0aGlzfWRhdGFiYXNlKGUpe3JldHVybiB0aGlzLnByb3RvLnRhcmdldD10aGlzLmFwcGx5U2Vzc2lvblRvVGFyZ2V0KHAuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5wcm90by50YXJnZXQpLHtkYXRhYmFzZTplfSkpLHRoaXMuc2Vzc2lvbi5wcm9qZWN0Q29uZmlnLHRoaXMucHJvdG8uZmlsZU5hbWUse3ZhbGlkYXRlVGFyZ2V0OiEwfSksdGhpc31zY2hlbWEoZSl7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQocC5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnByb3RvLnRhcmdldCkse3NjaGVtYTplfSkpLHRoaXMuc2Vzc2lvbi5wcm9qZWN0Q29uZmlnLHRoaXMucHJvdG8uZmlsZU5hbWUse3ZhbGlkYXRlVGFyZ2V0OiEwfSksdGhpc31hc3NlcnRpb25zKGUpe2NvbnN0IHQ9dGhpcy5nZW5lcmF0ZUlubGluZUFzc2VydGlvbnMoZSx0aGlzLnByb3RvKTtyZXR1cm4gdGhpcy51bmlxdWVLZXlBc3NlcnRpb25zPXQudW5pcXVlS2V5QXNzZXJ0aW9ucyx0aGlzLnJvd0NvbmRpdGlvbnNBc3NlcnRpb249dC5yb3dDb25kaXRpb25zQXNzZXJ0aW9uLHRoaXN9c2V0RGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyhlKXtyZXR1cm4gdGhpcy5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPWUsdGhpc31nZXRGaWxlTmFtZSgpe3JldHVybiB0aGlzLnByb3RvLmZpbGVOYW1lfWdldFRhcmdldCgpe3JldHVybiBwLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUodGhpcy5wcm90by50YXJnZXQpfWNvbXBpbGUoKXtjb25zdCBlPW5ldyBmKHRoaXMpLHQ9bmV3IGYodGhpcywhMCk7cmV0dXJuIHRoaXMucHJvdG8ucXVlcnk9ZS5hcHBseSh0aGlzLmNvbnRleHRhYmxlUXVlcnkpLHRoaXMucHJvdG8uZW51bVR5cGU9PT1wLmRhdGFmb3JtLlRhYmxlVHlwZS5JTkNSRU1FTlRBTCYmKHRoaXMucHJvdG8uaW5jcmVtZW50YWxRdWVyeT10LmFwcGx5KHRoaXMuY29udGV4dGFibGVRdWVyeSksdGhpcy5wcm90by5pbmNyZW1lbnRhbFByZU9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVByZU9wcyx0KSx0aGlzLnByb3RvLmluY3JlbWVudGFsUG9zdE9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVBvc3RPcHMsdCkpLHRoaXMuY29udGV4dGFibGVXaGVyZSYmKHRoaXMucHJvdG8ud2hlcmU9ZS5hcHBseSh0aGlzLmNvbnRleHRhYmxlV2hlcmUpKSx0aGlzLnByb3RvLnByZU9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVByZU9wcyxlKS5maWx0ZXIoKGU9PiEhZS50cmltKCkpKSx0aGlzLnByb3RvLnBvc3RPcHM9dGhpcy5jb250ZXh0aWZ5T3BzKHRoaXMuY29udGV4dGFibGVQb3N0T3BzLGUpLmZpbHRlcigoZT0+ISFlLnRyaW0oKSkpLHUudmFsaWRhdGVRdWVyeVN0cmluZyh0aGlzLnNlc3Npb24sdGhpcy5wcm90by5xdWVyeSx0aGlzLnByb3RvLmZpbGVOYW1lKSx1LnZhbGlkYXRlUXVlcnlTdHJpbmcodGhpcy5zZXNzaW9uLHRoaXMucHJvdG8uaW5jcmVtZW50YWxRdWVyeSx0aGlzLnByb3RvLmZpbGVOYW1lKSxvLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byhwLmRhdGFmb3JtLlRhYmxlLHRoaXMucHJvdG8sby5WZXJpZnlQcm90b0Vycm9yQmVoYXZpb3VyLlNVR0dFU1RfUkVQT1JUSU5HX1RPX0RBVEFGT1JNX1RFQU0pfWNvbnRleHRpZnlPcHMoZSx0KXtsZXQgcj1bXTtyZXR1cm4gZS5mb3JFYWNoKChlPT57Y29uc3Qgbj10LmFwcGx5KGUpO3I9ci5jb25jYXQoInN0cmluZyI9PXR5cGVvZiBuP1tuXTpuKX0pKSxyfXZlcmlmeUNvbmZpZyhlKXtpZihlLnR5cGUpe2lmKCJ0YWJsZSIhPT1lLnR5cGUpdGhyb3cgUmVmZXJlbmNlRXJyb3IoYFVuZXhwZWN0ZWQgdHlwZSBmb3IgVGFibGU7IHdhbnQgInRhYmxlIiwgZ290ICR7ZS50eXBlfWApO2RlbGV0ZSBlLnR5cGUsZS5kZXBlbmRlbmNpZXMmJihlLmRlcGVuZGVuY3lUYXJnZXRzPWUuZGVwZW5kZW5jaWVzLm1hcCgoZT0+dS5yZXNvbHZhYmxlQXNBY3Rpb25Db25maWdUYXJnZXQoZSkpKSxkZWxldGUgZS5kZXBlbmRlbmNpZXMpLGUuZGF0YWJhc2UmJihlLnByb2plY3Q9ZS5kYXRhYmFzZSxkZWxldGUgZS5kYXRhYmFzZSksZS5zY2hlbWEmJihlLmRhdGFzZXQ9ZS5zY2hlbWEsZGVsZXRlIGUuc2NoZW1hKSxlLmZpbGVOYW1lJiYoZS5maWxlbmFtZT1lLmZpbGVOYW1lLGRlbGV0ZSBlLmZpbGVOYW1lKSxlLmNvbHVtbnMmJihlLmNvbHVtbnM9bC5Db2x1bW5EZXNjcmlwdG9ycy5tYXBMZWdhY3lPYmplY3RUb0NvbmZpZ1Byb3RvKGUuY29sdW1ucykpLGU9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIuaW5zZXJ0TGVnYWN5SW5saW5lQXNzZXJ0aW9uc1RvQ29uZmlnUHJvdG8oZSksKGU9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIuaW5zZXJ0TGVnYWN5QmlnUXVlcnlPcHRpb25zVG9Db25maWdQcm90byhlKSkuYmlncXVlcnkmJnUuY2hlY2tFeGNlc3NQcm9wZXJ0aWVzKChlPT57dGhyb3cgZX0pLGUuYmlncXVlcnksdS5zdHJpY3RLZXlzT2YoKShbInBhcnRpdGlvbkJ5IiwiY2x1c3RlckJ5IiwidXBkYXRlUGFydGl0aW9uRmlsdGVyIiwibGFiZWxzIiwicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiLCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIiwiYWRkaXRpb25hbE9wdGlvbnMiXSksIkJpZ1F1ZXJ5IHRhYmxlIGNvbmZpZyIpfWNvbnN0IHQ9by52ZXJpZnlPYmplY3RNYXRjaGVzUHJvdG8ocC5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcsZSxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU0hPV19ET0NTX0xJTkspO3JldHVybiB0LnBhcnRpdGlvbkJ5fHwhdC5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmIXQucmVxdWlyZVBhcnRpdGlvbkZpbHRlcnx8dGhpcy5zZXNzaW9uLmNvbXBpbGVFcnJvcigicmVxdWlyZVBhcnRpdGlvbkZpbHRlci9wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyBhcmUgbm90IHZhbGlkIGZvciBub24gcGFydGl0aW9uZWQgQmlnUXVlcnkgdGFibGVzIix0LmZpbGVuYW1lLHAuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZSh7ZGF0YWJhc2U6dC5wcm9qZWN0LHNjaGVtYTp0LmRhdGFzZXQsbmFtZTp0Lm5hbWV9KSksdC5hZGRpdGlvbmFsT3B0aW9ucyYmaS5jaGVja0NvbmZpZ0FkZGl0aW9uYWxPcHRpb25zT3ZlcmxhcCh0LHRoaXMuc2Vzc2lvbiksdH19dC5UYWJsZT1kO2NsYXNzIGZ7Y29uc3RydWN0b3IoZSx0PSExKXt0aGlzLnRhYmxlPWUsdGhpcy5pc0luY3JlbWVudGFsPXR9c2VsZigpe3JldHVybiB0aGlzLnJlc29sdmUodGhpcy50YWJsZS5nZXRUYXJnZXQoKSl9bmFtZSgpe3JldHVybiB0aGlzLnRhYmxlLnNlc3Npb24uZmluYWxpemVOYW1lKHRoaXMudGFibGUuZ2V0VGFyZ2V0KCkubmFtZSl9cmVmKGUsLi4udCl7cmV0dXJuIGU9dS50b1Jlc29sdmFibGUoZSx0KSx1LnJlc29sdmFibGVBc1RhcmdldChlKT8odGhpcy50YWJsZS5kZXBlbmRlbmNpZXMoZSksdGhpcy5yZXNvbHZlKGUpKToodGhpcy50YWJsZS5zZXNzaW9uLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoIkFjdGlvbiBuYW1lIGlzIG5vdCBzcGVjaWZpZWQiKSksIiIpfXJlc29sdmUoZSwuLi50KXtyZXR1cm4gdGhpcy50YWJsZS5zZXNzaW9uLnJlc29sdmUoZSwuLi50KX1zY2hlbWEoKXtyZXR1cm4gdGhpcy50YWJsZS5zZXNzaW9uLmZpbmFsaXplU2NoZW1hKHRoaXMudGFibGUuZ2V0VGFyZ2V0KCkuc2NoZW1hKX1kYXRhYmFzZSgpe3JldHVybiB0aGlzLnRhYmxlLmdldFRhcmdldCgpLmRhdGFiYXNlP3RoaXMudGFibGUuc2Vzc2lvbi5maW5hbGl6ZURhdGFiYXNlKHRoaXMudGFibGUuZ2V0VGFyZ2V0KCkuZGF0YWJhc2UpOih0aGlzLnRhYmxlLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiV2FyZWhvdXNlIGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgZGF0YWJhc2VzIikpLCIiKX10eXBlKGUpe3JldHVybiB0aGlzLnRhYmxlLnR5cGUoZSksIiJ9d2hlcmUoZSl7cmV0dXJuIHRoaXMudGFibGUud2hlcmUoZSksIiJ9d2hlbihlLHQscj0iIil7cmV0dXJuIGU/dDpyfWluY3JlbWVudGFsKCl7cmV0dXJuISF0aGlzLmlzSW5jcmVtZW50YWx9cHJlT3BzKGUpe3JldHVybiB0aGlzLnRhYmxlLnByZU9wcyhlKSwiIn1wb3N0T3BzKGUpe3JldHVybiB0aGlzLnRhYmxlLnBvc3RPcHMoZSksIiJ9ZGlzYWJsZWQoKXtyZXR1cm4gdGhpcy50YWJsZS5kaXNhYmxlZCgpLCIifWJpZ3F1ZXJ5KGUpe3JldHVybiB0aGlzLnRhYmxlLmJpZ3F1ZXJ5KGUpLCIifWRlcGVuZGVuY2llcyhlKXtyZXR1cm4gdGhpcy50YWJsZS5kZXBlbmRlbmNpZXMoZSksIiJ9YXBwbHkoZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGU/ZSh0aGlzKTplfXRhZ3MoZSl7cmV0dXJuIHRoaXMudGFibGUudGFncyhlKSwiIn19dC5UYWJsZUNvbnRleHQ9Zn0sNTkwMDooZSx0LHIpPT57InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBuPXIoODE0Miksbz1yKDMxODYpLGk9cig2MjEpLGE9cigyNDA2KSxzPXIoMjUzNyksbD1yKDI3NDgpLGM9cig5MjExKSx1PXIoODg2OSkscD1jLnN0cmljdEtleXNPZigpKFsidHlwZSIsImRhdGFzZXQiLCJuYW1lIl0pO2NsYXNzIGQgZXh0ZW5kcyBvLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLmNvbnRleHRhYmxlSW5wdXRzPW5ldyBNYXAsdGhpcy5wcm90bz11LmRhdGFmb3JtLlRlc3QuY3JlYXRlKCksdGhpcy5zZXNzaW9uPWUsdCYmdGhpcy5jb25maWcodCl9Y29uZmlnKGUpe3JldHVybiBjLmNoZWNrRXhjZXNzUHJvcGVydGllcygoZT0+dGhpcy5zZXNzaW9uLmNvbXBpbGVFcnJvcihlKSksZSxwLCJ0ZXN0IGNvbmZpZyIpLGUubmFtZSYmKHRoaXMucHJvdG8ubmFtZT1lLm5hbWUpLGUuZGF0YXNldCYmdGhpcy5kYXRhc2V0KGUuZGF0YXNldCksdGhpc31kYXRhc2V0KGUpe3JldHVybiB0aGlzLmRhdGFzZXRUb1Rlc3Q9ZSx0aGlzfWlucHV0KGUsdCl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVJbnB1dHMuc2V0KGwudGFyZ2V0U3RyaW5naWZpZXIuc3RyaW5naWZ5KGMucmVzb2x2YWJsZUFzVGFyZ2V0KGMudG9SZXNvbHZhYmxlKGUpKSksdCksdGhpc31leHBlY3QoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVRdWVyeT1lLHRoaXN9Z2V0RmlsZU5hbWUoKXtyZXR1cm4gdGhpcy5wcm90by5maWxlTmFtZX1nZXRUYXJnZXQoKXt9c2V0RmlsZW5hbWUoZSl7dGhpcy5wcm90by5maWxlTmFtZT1lfWNvbXBpbGUoKXtjb25zdCBlPW5ldyBmKHRoaXMpO2lmKHRoaXMuZGF0YXNldFRvVGVzdCl7Y29uc3QgdD10aGlzLnNlc3Npb24uaW5kZXhlZEFjdGlvbnMuZmluZChjLnJlc29sdmFibGVBc1RhcmdldCh0aGlzLmRhdGFzZXRUb1Rlc3QpKTt0Lmxlbmd0aD4xJiZ0aGlzLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcihjLmFtYmlndW91c0FjdGlvbk5hbWVNc2codGhpcy5kYXRhc2V0VG9UZXN0LHQpKSx0aGlzLnByb3RvLmZpbGVOYW1lKTtjb25zdCByPXQubGVuZ3RoPjA/dFswXTp2b2lkIDA7aWYociYmKHIgaW5zdGFuY2VvZiBhLlRhYmxlfHxyIGluc3RhbmNlb2Ygcy5WaWV3KSlpZihyIGluc3RhbmNlb2YgaS5JbmNyZW1lbnRhbFRhYmxlKXRoaXMuc2Vzc2lvbi5jb21waWxlRXJyb3IobmV3IEVycm9yKCJSdW5uaW5nIHRlc3RzIG9uIGluY3JlbWVudGFsIGRhdGFzZXRzIGlzIG5vdCB5ZXQgc3VwcG9ydGVkLiIpLHRoaXMucHJvdG8uZmlsZU5hbWUpO2Vsc2V7Y29uc3QgdD1uZXcgaChlKTt0aGlzLnByb3RvLnRlc3RRdWVyeT10LmFwcGx5KHIuY29udGV4dGFibGVRdWVyeSl9ZWxzZSB0aGlzLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcihgRGF0YXNldCAke2Muc3RyaW5naWZ5UmVzb2x2YWJsZSh0aGlzLmRhdGFzZXRUb1Rlc3QpfSBjb3VsZCBub3QgYmUgZm91bmQuYCksdGhpcy5wcm90by5maWxlTmFtZSl9ZWxzZSB0aGlzLnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiVGVzdHMgbXVzdCBvcGVyYXRlIHVwb24gYSBzcGVjaWZpZWQgZGF0YXNldC4iKSx0aGlzLnByb3RvLmZpbGVOYW1lKTtyZXR1cm4gdGhpcy5wcm90by5leHBlY3RlZE91dHB1dFF1ZXJ5PWUuYXBwbHkodGhpcy5jb250ZXh0YWJsZVF1ZXJ5KSxuLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byh1LmRhdGFmb3JtLlRlc3QsdGhpcy5wcm90byxuLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU1VHR0VTVF9SRVBPUlRJTkdfVE9fREFUQUZPUk1fVEVBTSl9fXQuVGVzdD1kO2NsYXNzIGZ7Y29uc3RydWN0b3IoZSl7dGhpcy50ZXN0PWV9YXBwbHkoZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGU/ZSh0aGlzKTplfX10LlRlc3RDb250ZXh0PWY7Y2xhc3MgaHtjb25zdHJ1Y3RvcihlKXt0aGlzLnRlc3RDb250ZXh0PWV9cmVmKGUsLi4udCl7cmV0dXJuIHRoaXMucmVzb2x2ZShlLC4uLnQpfXJlc29sdmUoZSwuLi50KXtjb25zdCByPWMucmVzb2x2YWJsZUFzVGFyZ2V0KGMudG9SZXNvbHZhYmxlKGUsdCkpO3JldHVybiB0aGlzLnRlc3RDb250ZXh0LnRlc3QuY29udGV4dGFibGVJbnB1dHMuaGFzKGwudGFyZ2V0U3RyaW5naWZpZXIuc3RyaW5naWZ5KHIpKT9gKCR7dGhpcy50ZXN0Q29udGV4dC5hcHBseSh0aGlzLnRlc3RDb250ZXh0LnRlc3QuY29udGV4dGFibGVJbnB1dHMuZ2V0KGwudGFyZ2V0U3RyaW5naWZpZXIuc3RyaW5naWZ5KHIpKSl9KWA6KHRoaXMudGVzdENvbnRleHQudGVzdC5zZXNzaW9uLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoYElucHV0IGZvciBkYXRhc2V0ICIke0pTT04uc3RyaW5naWZ5KHIpfSIgaGFzIG5vdCBiZWVuIHByb3ZpZGVkLiBQcm92aWRlZCBpbnB1dHM6ICR7QXJyYXkuZnJvbSh0aGlzLnRlc3RDb250ZXh0LnRlc3QuY29udGV4dGFibGVJbnB1dHMua2V5cygpKS5tYXAoKGU9PkpTT04uc3RyaW5naWZ5KGUpKSl9YCkpLCIiKX1hcHBseShlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT9lKHRoaXMpOmV9Y29uZmlnKGUpe3JldHVybiIifXNlbGYoKXtyZXR1cm4iIn1uYW1lKCl7cmV0dXJuIiJ9dHlwZShlKXtyZXR1cm4iIn1zY2hlbWEoKXtyZXR1cm4iIn1kYXRhYmFzZSgpe3JldHVybiIifXdoZXJlKGUpe3JldHVybiIifXdoZW4oZSx0LHI9IiIpe3JldHVybiBlP3Q6cn1pbmNyZW1lbnRhbCgpe3JldHVybiExfXByZU9wcyhlKXtyZXR1cm4iIn1wb3N0T3BzKGUpe3JldHVybiIifWRpc2FibGVkKCl7cmV0dXJuIiJ9ZGVwZW5kZW5jaWVzKGUpe3JldHVybiIifXRhZ3MoZSl7cmV0dXJuIiJ9fX0sMjUzNzpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG89cig4MTQyKSxpPXIoMzE4NiksYT1yKDYyMSkscz1yKDI0MDYpLGw9cigyOTkpLGM9bihyKDYyMDMpKSx1PXIoOTIxMSkscD1yKDg4NjkpO2NsYXNzIGQgZXh0ZW5kcyBpLkFjdGlvbkJ1aWxkZXJ7Y29uc3RydWN0b3IoZSx0LHIpe3ZhciBuO2lmKHN1cGVyKGUpLHRoaXMuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSx0aGlzLmNvbnRleHRhYmxlUHJlT3BzPVtdLHRoaXMuY29udGV4dGFibGVQb3N0T3BzPVtdLHRoaXMucHJvdG89cC5kYXRhZm9ybS5UYWJsZS5jcmVhdGUoe3R5cGU6InZpZXciLGVudW1UeXBlOnAuZGF0YWZvcm0uVGFibGVUeXBlLlZJRVcsZGlzYWJsZWQ6ITEsdGFnczpbXX0pLHRoaXMudW5pcXVlS2V5QXNzZXJ0aW9ucz1bXSx0aGlzLnNlc3Npb249ZSx0aGlzLmNvbmZpZ1BhdGg9cix0aGlzLnVudmVyaWZpZWRDb25maWc9T2JqZWN0LmFzc2lnbih7fSx0KSwhdClyZXR1cm47Y29uc3Qgbz10aGlzLnZlcmlmeUNvbmZpZyh0KTtvLm5hbWV8fChvLm5hbWU9Yy5iYXNlbmFtZShvLmZpbGVuYW1lKSk7Y29uc3QgaT11LmFjdGlvbkNvbmZpZ1RvQ29tcGlsZWRHcmFwaFRhcmdldChvKTtyZXR1cm4gdGhpcy5wcm90by50YXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChpLGUucHJvamVjdENvbmZpZyxvLmZpbGVuYW1lLHt2YWxpZGF0ZVRhcmdldDohMH0pLHRoaXMucHJvdG8uY2Fub25pY2FsVGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQoaSxlLmNhbm9uaWNhbFByb2plY3RDb25maWcpLHImJihvLmZpbGVuYW1lPXUucmVzb2x2ZUFjdGlvbnNDb25maWdGaWxlbmFtZShvLmZpbGVuYW1lLHIpLHRoaXMucXVlcnkodS5uYXRpdmVSZXF1aXJlKG8uZmlsZW5hbWUpLnF1ZXJ5KSksby5maWxlbmFtZSYmKHRoaXMucHJvdG8uZmlsZU5hbWU9by5maWxlbmFtZSksby5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZ0aGlzLnNldERlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMoby5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSxvLmRlcGVuZGVuY3lUYXJnZXRzJiZ0aGlzLmRlcGVuZGVuY2llcyhvLmRlcGVuZGVuY3lUYXJnZXRzLm1hcCgoZT0+dS5jb25maWdUYXJnZXRUb0NvbXBpbGVkR3JhcGhUYXJnZXQocC5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LmNyZWF0ZShlKSkpKSksdm9pZCAwIT09by5oZXJtZXRpYyYmdGhpcy5oZXJtZXRpYyhvLmhlcm1ldGljKSxvLmRpc2FibGVkJiZ0aGlzLmRpc2FibGVkKCksby50YWdzJiZ0aGlzLnRhZ3Moby50YWdzKSxvLmRlc2NyaXB0aW9uJiZ0aGlzLmRlc2NyaXB0aW9uKG8uZGVzY3JpcHRpb24pLChudWxsPT09KG49by5jb2x1bW5zKXx8dm9pZCAwPT09bj92b2lkIDA6bi5sZW5ndGgpJiZ0aGlzLmNvbHVtbnMoby5jb2x1bW5zLm1hcCgoZT0+cC5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5jcmVhdGUoZSkpKSksby5wcm9qZWN0JiZ0aGlzLmRhdGFiYXNlKG8ucHJvamVjdCksby5kYXRhc2V0JiZ0aGlzLnNjaGVtYShvLmRhdGFzZXQpLG8uYXNzZXJ0aW9ucyYmdGhpcy5hc3NlcnRpb25zKHAuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5jcmVhdGUoby5hc3NlcnRpb25zKSksby5tYXRlcmlhbGl6ZWQmJnRoaXMubWF0ZXJpYWxpemVkKG8ubWF0ZXJpYWxpemVkKSxvLnByZU9wZXJhdGlvbnMmJnRoaXMucHJlT3BzKG8ucHJlT3BlcmF0aW9ucyksby5wb3N0T3BlcmF0aW9ucyYmdGhpcy5wb3N0T3BzKG8ucG9zdE9wZXJhdGlvbnMpLChPYmplY3Qua2V5cyhvLmxhYmVscykubGVuZ3RofHxPYmplY3Qua2V5cyhvLmFkZGl0aW9uYWxPcHRpb25zKS5sZW5ndGgpJiZ0aGlzLmJpZ3F1ZXJ5KHtsYWJlbHM6by5sYWJlbHMsYWRkaXRpb25hbE9wdGlvbnM6by5hZGRpdGlvbmFsT3B0aW9uc30pLHRoaXN9dHlwZShlKXtsZXQgdDtzd2l0Y2goZSl7Y2FzZSJ0YWJsZSI6dD1uZXcgcy5UYWJsZSh0aGlzLnNlc3Npb24sT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMudW52ZXJpZmllZENvbmZpZykse3R5cGU6InRhYmxlIn0pLHRoaXMuY29uZmlnUGF0aCk7YnJlYWs7Y2FzZSJpbmNyZW1lbnRhbCI6dD1uZXcgYS5JbmNyZW1lbnRhbFRhYmxlKHRoaXMuc2Vzc2lvbixPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy51bnZlcmlmaWVkQ29uZmlnKSx7dHlwZToiaW5jcmVtZW50YWwifSksdGhpcy5jb25maWdQYXRoKTticmVhaztjYXNlInZpZXciOnJldHVybiB0aGlzO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIHRhYmxlIHR5cGU6ICR7ZX1gKX1jb25zdCByPXRoaXMuc2Vzc2lvbi5hY3Rpb25zLmluZGV4T2YodGhpcyk7aWYoLTE9PT1yKXRocm93IEVycm9yKCJFeHBlY3RlZCBwcmUtZXhpc3RpbmcgYWN0aW9uLCBidXQgbm9uZSBmb3VuZC4gUGxlYXNlIHJlcG9ydCB0aGlzIHRvIHRoZSBEYXRhZm9ybSB0ZWFtLiIpO3RoaXMuc2Vzc2lvbi5hY3Rpb25zW3JdPXR9cXVlcnkoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVRdWVyeT1lLHRoaXN9d2hlcmUoZSl7cmV0dXJuIHRoaXMuY29udGV4dGFibGVXaGVyZT1lLHRoaXN9cHJlT3BzKGUpe3JldHVybiB0aGlzLmNvbnRleHRhYmxlUHJlT3BzLnB1c2goZSksdGhpc31wb3N0T3BzKGUpe3JldHVybiB0aGlzLmNvbnRleHRhYmxlUG9zdE9wcy5wdXNoKGUpLHRoaXN9ZGlzYWJsZWQoZT0hMCl7dmFyIHQ7cmV0dXJuIHRoaXMucHJvdG8uZGlzYWJsZWQ9ZSx0aGlzLnVuaXF1ZUtleUFzc2VydGlvbnMuZm9yRWFjaCgodD0+dC5kaXNhYmxlZChlKSkpLG51bGw9PT0odD10aGlzLnJvd0NvbmRpdGlvbnNBc3NlcnRpb24pfHx2b2lkIDA9PT10fHx0LmRpc2FibGVkKGUpLHRoaXN9bWF0ZXJpYWxpemVkKGUpe3RoaXMucHJvdG8ubWF0ZXJpYWxpemVkPWV9YmlncXVlcnkoZSl7cmV0dXJuIHRoaXMucHJvdG8uYmlncXVlcnk9cC5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMuY3JlYXRlKGUpLGUubGFiZWxzJiYodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuYmlncXVlcnlMYWJlbHM9ZS5sYWJlbHMpLHRoaXN9ZGVwZW5kZW5jaWVzKGUpe3JldHVybihBcnJheS5pc0FycmF5KGUpP2U6W2VdKS5mb3JFYWNoKChlPT57Y29uc3QgdD11LmNoZWNrQXNzZXJ0aW9uc0ZvckRlcGVuZGVuY3kodGhpcyxlKTt0JiZ0aGlzLnByb3RvLmRlcGVuZGVuY3lUYXJnZXRzLnB1c2godCl9KSksdGhpc31oZXJtZXRpYyhlKXt0aGlzLnByb3RvLmhlcm1ldGljaXR5PWU/cC5kYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eS5IRVJNRVRJQzpwLmRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5Lk5PTl9IRVJNRVRJQ310YWdzKGUpe3ZhciB0O3JldHVybigic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpLmZvckVhY2goKGU9Pnt0aGlzLnByb3RvLnRhZ3MucHVzaChlKX0pKSx0aGlzLnVuaXF1ZUtleUFzc2VydGlvbnMuZm9yRWFjaCgodD0+dC50YWdzKGUpKSksbnVsbD09PSh0PXRoaXMucm93Q29uZGl0aW9uc0Fzc2VydGlvbil8fHZvaWQgMD09PXR8fHQudGFncyhlKSx0aGlzfWRlc2NyaXB0aW9uKGUpe3JldHVybiB0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3J8fCh0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3I9e30pLHRoaXMucHJvdG8uYWN0aW9uRGVzY3JpcHRvci5kZXNjcmlwdGlvbj1lLHRoaXN9Y29sdW1ucyhlKXtyZXR1cm4gdGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yfHwodGhpcy5wcm90by5hY3Rpb25EZXNjcmlwdG9yPXt9KSx0aGlzLnByb3RvLmFjdGlvbkRlc2NyaXB0b3IuY29sdW1ucz1sLkNvbHVtbkRlc2NyaXB0b3JzLm1hcENvbmZpZ1Byb3RvVG9Db21waWxhdGlvblByb3RvKGUpLHRoaXN9ZGF0YWJhc2UoZSl7cmV0dXJuIHRoaXMucHJvdG8udGFyZ2V0PXRoaXMuYXBwbHlTZXNzaW9uVG9UYXJnZXQocC5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLnByb3RvLnRhcmdldCkse2RhdGFiYXNlOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzfXNjaGVtYShlKXtyZXR1cm4gdGhpcy5wcm90by50YXJnZXQ9dGhpcy5hcHBseVNlc3Npb25Ub1RhcmdldChwLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMucHJvdG8udGFyZ2V0KSx7c2NoZW1hOmV9KSksdGhpcy5zZXNzaW9uLnByb2plY3RDb25maWcsdGhpcy5wcm90by5maWxlTmFtZSx7dmFsaWRhdGVUYXJnZXQ6ITB9KSx0aGlzfWFzc2VydGlvbnMoZSl7Y29uc3QgdD10aGlzLmdlbmVyYXRlSW5saW5lQXNzZXJ0aW9ucyhlLHRoaXMucHJvdG8pO3JldHVybiB0aGlzLnVuaXF1ZUtleUFzc2VydGlvbnM9dC51bmlxdWVLZXlBc3NlcnRpb25zLHRoaXMucm93Q29uZGl0aW9uc0Fzc2VydGlvbj10LnJvd0NvbmRpdGlvbnNBc3NlcnRpb24sdGhpc31zZXREZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKGUpe3JldHVybiB0aGlzLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZSx0aGlzfWdldEZpbGVOYW1lKCl7cmV0dXJuIHRoaXMucHJvdG8uZmlsZU5hbWV9Z2V0VGFyZ2V0KCl7cmV0dXJuIHAuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZSh0aGlzLnByb3RvLnRhcmdldCl9Y29tcGlsZSgpe2NvbnN0IGU9bmV3IGYodGhpcyksdD1uZXcgZih0aGlzLCEwKTtyZXR1cm4gdGhpcy5wcm90by5xdWVyeT1lLmFwcGx5KHRoaXMuY29udGV4dGFibGVRdWVyeSksdGhpcy5wcm90by5lbnVtVHlwZT09PXAuZGF0YWZvcm0uVGFibGVUeXBlLklOQ1JFTUVOVEFMJiYodGhpcy5wcm90by5pbmNyZW1lbnRhbFF1ZXJ5PXQuYXBwbHkodGhpcy5jb250ZXh0YWJsZVF1ZXJ5KSx0aGlzLnByb3RvLmluY3JlbWVudGFsUHJlT3BzPXRoaXMuY29udGV4dGlmeU9wcyh0aGlzLmNvbnRleHRhYmxlUHJlT3BzLHQpLHRoaXMucHJvdG8uaW5jcmVtZW50YWxQb3N0T3BzPXRoaXMuY29udGV4dGlmeU9wcyh0aGlzLmNvbnRleHRhYmxlUG9zdE9wcyx0KSksdGhpcy5jb250ZXh0YWJsZVdoZXJlJiYodGhpcy5wcm90by53aGVyZT1lLmFwcGx5KHRoaXMuY29udGV4dGFibGVXaGVyZSkpLHRoaXMucHJvdG8ucHJlT3BzPXRoaXMuY29udGV4dGlmeU9wcyh0aGlzLmNvbnRleHRhYmxlUHJlT3BzLGUpLmZpbHRlcigoZT0+ISFlLnRyaW0oKSkpLHRoaXMucHJvdG8ucG9zdE9wcz10aGlzLmNvbnRleHRpZnlPcHModGhpcy5jb250ZXh0YWJsZVBvc3RPcHMsZSkuZmlsdGVyKChlPT4hIWUudHJpbSgpKSksdS52YWxpZGF0ZVF1ZXJ5U3RyaW5nKHRoaXMuc2Vzc2lvbix0aGlzLnByb3RvLnF1ZXJ5LHRoaXMucHJvdG8uZmlsZU5hbWUpLHUudmFsaWRhdGVRdWVyeVN0cmluZyh0aGlzLnNlc3Npb24sdGhpcy5wcm90by5pbmNyZW1lbnRhbFF1ZXJ5LHRoaXMucHJvdG8uZmlsZU5hbWUpLG8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKHAuZGF0YWZvcm0uVGFibGUsdGhpcy5wcm90byxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU1VHR0VTVF9SRVBPUlRJTkdfVE9fREFUQUZPUk1fVEVBTSl9Y29udGV4dGlmeU9wcyhlLHQpe2xldCByPVtdO3JldHVybiBlLmZvckVhY2goKGU9Pntjb25zdCBuPXQuYXBwbHkoZSk7cj1yLmNvbmNhdCgic3RyaW5nIj09dHlwZW9mIG4/W25dOm4pfSkpLHJ9dmVyaWZ5Q29uZmlnKGUpe3JldHVybiBlLnR5cGUmJihkZWxldGUgZS50eXBlLGUuZGVwZW5kZW5jaWVzJiYoZS5kZXBlbmRlbmN5VGFyZ2V0cz1lLmRlcGVuZGVuY2llcy5tYXAoKGU9PnUucmVzb2x2YWJsZUFzQWN0aW9uQ29uZmlnVGFyZ2V0KGUpKSksZGVsZXRlIGUuZGVwZW5kZW5jaWVzKSxlLmRhdGFiYXNlJiYoZS5wcm9qZWN0PWUuZGF0YWJhc2UsZGVsZXRlIGUuZGF0YWJhc2UpLGUuc2NoZW1hJiYoZS5kYXRhc2V0PWUuc2NoZW1hLGRlbGV0ZSBlLnNjaGVtYSksZS5maWxlTmFtZSYmKGUuZmlsZW5hbWU9ZS5maWxlTmFtZSxkZWxldGUgZS5maWxlTmFtZSksZS5jb2x1bW5zJiYoZS5jb2x1bW5zPWwuQ29sdW1uRGVzY3JpcHRvcnMubWFwTGVnYWN5T2JqZWN0VG9Db25maWdQcm90byhlLmNvbHVtbnMpKSwobnVsbD09KGU9aS5MZWdhY3lDb25maWdDb252ZXJ0ZXIuaW5zZXJ0TGVnYWN5SW5saW5lQXNzZXJ0aW9uc1RvQ29uZmlnUHJvdG8oZSkpP3ZvaWQgMDplLmJpZ3F1ZXJ5KSYmKGUuYmlncXVlcnkubGFiZWxzJiYoZS5sYWJlbHM9ZS5iaWdxdWVyeS5sYWJlbHMsZGVsZXRlIGUuYmlncXVlcnkubGFiZWxzKSxlLmJpZ3F1ZXJ5LmFkZGl0aW9uYWxPcHRpb25zJiYoZS5hZGRpdGlvbmFsT3B0aW9ucz1lLmJpZ3F1ZXJ5LmFkZGl0aW9uYWxPcHRpb25zLGRlbGV0ZSBlLmJpZ3F1ZXJ5LmFkZGl0aW9uYWxPcHRpb25zKSx1LmNoZWNrRXhjZXNzUHJvcGVydGllcygoZT0+e3Rocm93IGV9KSxlLmJpZ3F1ZXJ5LHUuc3RyaWN0S2V5c09mKCkoWyJsYWJlbHMiLCJhZGRpdGlvbmFsT3B0aW9ucyJdKSwiQmlnUXVlcnkgdmlldyBjb25maWciKSkpLG8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKHAuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcsZSxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU0hPV19ET0NTX0xJTkspfX10LlZpZXc9ZDtjbGFzcyBme2NvbnN0cnVjdG9yKGUsdD0hMSl7dGhpcy52aWV3PWUsdGhpcy5pc0luY3JlbWVudGFsPXR9c2VsZigpe3JldHVybiB0aGlzLnJlc29sdmUodGhpcy52aWV3LmdldFRhcmdldCgpKX1uYW1lKCl7cmV0dXJuIHRoaXMudmlldy5zZXNzaW9uLmZpbmFsaXplTmFtZSh0aGlzLnZpZXcuZ2V0VGFyZ2V0KCkubmFtZSl9cmVmKGUsLi4udCl7cmV0dXJuIGU9dS50b1Jlc29sdmFibGUoZSx0KSx1LnJlc29sdmFibGVBc1RhcmdldChlKT8odGhpcy52aWV3LmRlcGVuZGVuY2llcyhlKSx0aGlzLnJlc29sdmUoZSkpOih0aGlzLnZpZXcuc2Vzc2lvbi5jb21waWxlRXJyb3IobmV3IEVycm9yKCJBY3Rpb24gbmFtZSBpcyBub3Qgc3BlY2lmaWVkIikpLCIiKX1yZXNvbHZlKGUsLi4udCl7cmV0dXJuIHRoaXMudmlldy5zZXNzaW9uLnJlc29sdmUoZSwuLi50KX1zY2hlbWEoKXtyZXR1cm4gdGhpcy52aWV3LnNlc3Npb24uZmluYWxpemVTY2hlbWEodGhpcy52aWV3LmdldFRhcmdldCgpLnNjaGVtYSl9ZGF0YWJhc2UoKXtyZXR1cm4gdGhpcy52aWV3LmdldFRhcmdldCgpLmRhdGFiYXNlP3RoaXMudmlldy5zZXNzaW9uLmZpbmFsaXplRGF0YWJhc2UodGhpcy52aWV3LmdldFRhcmdldCgpLmRhdGFiYXNlKToodGhpcy52aWV3LnNlc3Npb24uY29tcGlsZUVycm9yKG5ldyBFcnJvcigiV2FyZWhvdXNlIGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgZGF0YWJhc2VzIikpLCIiKX13aGVyZShlKXtyZXR1cm4gdGhpcy52aWV3LndoZXJlKGUpLCIifXdoZW4oZSx0LHI9IiIpe3JldHVybiBlP3Q6cn1pbmNyZW1lbnRhbCgpe3JldHVybiEhdGhpcy5pc0luY3JlbWVudGFsfXByZU9wcyhlKXtyZXR1cm4gdGhpcy52aWV3LnByZU9wcyhlKSwiIn1wb3N0T3BzKGUpe3JldHVybiB0aGlzLnZpZXcucG9zdE9wcyhlKSwiIn1kaXNhYmxlZCgpe3JldHVybiB0aGlzLnZpZXcuZGlzYWJsZWQoKSwiIn1iaWdxdWVyeShlKXtyZXR1cm4gdGhpcy52aWV3LmJpZ3F1ZXJ5KGUpLCIifWRlcGVuZGVuY2llcyhlKXtyZXR1cm4gdGhpcy52aWV3LmRlcGVuZGVuY2llcyhlKSwiIn1hcHBseShlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT9lKHRoaXMpOmV9dGFncyhlKXtyZXR1cm4gdGhpcy52aWV3LnRhZ3MoZSksIiJ9fXQuVmlld0NvbnRleHQ9Zn0sMjk5OmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKHIoOTIxMSkpLGk9cig4ODY5KTt0LklSZWNvcmREZXNjcmlwdG9yUHJvcGVydGllcz0oKT0+by5zdHJpY3RLZXlzT2YoKShbImRlc2NyaXB0aW9uIiwiY29sdW1ucyIsImRpc3BsYXlOYW1lIiwidGFncyIsImJpZ3F1ZXJ5UG9saWN5VGFncyJdKTtjbGFzcyBhe3N0YXRpYyBtYXBDb25maWdQcm90b1RvQ29tcGlsYXRpb25Qcm90byhlKXtyZXR1cm4gZS5tYXAoKGU9PmkuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvci5jcmVhdGUoe3BhdGg6ZS5wYXRoLGRlc2NyaXB0aW9uOmUuZGVzY3JpcHRpb24sdGFnczplLnRhZ3MsYmlncXVlcnlQb2xpY3lUYWdzOmUuYmlncXVlcnlQb2xpY3lUYWdzfSkpKX1zdGF0aWMgbWFwTGVnYWN5T2JqZWN0VG9Db25maWdQcm90byhlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkubWFwKCh0PT5hLm1hcENvbHVtbkRlc2NyaXB0aW9uVG9Qcm90byhbdF0sZVt0XSkpKS5mbGF0KCl9c3RhdGljIG1hcENvbHVtbkRlc2NyaXB0aW9uVG9Qcm90byhlLHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm5baS5kYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yLmNyZWF0ZSh7ZGVzY3JpcHRpb246dCxwYXRoOmV9KV07Y29uc3Qgcj10P1tpLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLmNyZWF0ZSh7cGF0aDplLGRlc2NyaXB0aW9uOnQuZGVzY3JpcHRpb24sdGFnczoic3RyaW5nIj09dHlwZW9mIHQudGFncz9bdC50YWdzXTp0LnRhZ3MsYmlncXVlcnlQb2xpY3lUYWdzOiJzdHJpbmciPT10eXBlb2YgdC5iaWdxdWVyeVBvbGljeVRhZ3M/W3QuYmlncXVlcnlQb2xpY3lUYWdzXTp0LmJpZ3F1ZXJ5UG9saWN5VGFnc30pXTpbXSxuPXQuY29sdW1ucz9PYmplY3Qua2V5cyh0LmNvbHVtbnMpOltdO3JldHVybiByLmNvbmNhdChuLm1hcCgocj0+YS5tYXBDb2x1bW5EZXNjcmlwdGlvblRvUHJvdG8oZS5jb25jYXQoW3JdKSx0LmNvbHVtbnNbcl0pKSkuZmxhdCgpKX19dC5Db2x1bW5EZXNjcmlwdG9ycz1hO2NsYXNzIHN7c3RhdGljIG1hcFRvQ29sdW1uUHJvdG9BcnJheShlLHQpe3JldHVybiBPYmplY3Qua2V5cyhlKS5tYXAoKHI9PnMubWFwQ29sdW1uRGVzY3JpcHRpb25Ub1Byb3RvKFtyXSxlW3JdLHQpKSkuZmxhdCgpfXN0YXRpYyBtYXBDb2x1bW5EZXNjcmlwdGlvblRvUHJvdG8oZSxyLG4pe2lmKCJzdHJpbmciPT10eXBlb2YgcilyZXR1cm5baS5kYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yLmNyZWF0ZSh7ZGVzY3JpcHRpb246cixwYXRoOmV9KV07by5jaGVja0V4Y2Vzc1Byb3BlcnRpZXMobixyLHQuSVJlY29yZERlc2NyaXB0b3JQcm9wZXJ0aWVzKCksYCR7ZS5qb2luKCIuIil9IGNvbHVtbiBkZXNjcmlwdG9yYCk7Y29uc3QgYT1yP1tpLmRhdGFmb3JtLkNvbHVtbkRlc2NyaXB0b3IuY3JlYXRlKHtwYXRoOmUsZGVzY3JpcHRpb246ci5kZXNjcmlwdGlvbixkaXNwbGF5TmFtZTpyLmRpc3BsYXlOYW1lLHRhZ3M6InN0cmluZyI9PXR5cGVvZiByLnRhZ3M/W3IudGFnc106ci50YWdzLGJpZ3F1ZXJ5UG9saWN5VGFnczoic3RyaW5nIj09dHlwZW9mIHIuYmlncXVlcnlQb2xpY3lUYWdzP1tyLmJpZ3F1ZXJ5UG9saWN5VGFnc106ci5iaWdxdWVyeVBvbGljeVRhZ3N9KV06W10sbD1yLmNvbHVtbnM/T2JqZWN0LmtleXMoci5jb2x1bW5zKTpbXTtyZXR1cm4gYS5jb25jYXQobC5tYXAoKHQ9PnMubWFwQ29sdW1uRGVzY3JpcHRpb25Ub1Byb3RvKGUuY29uY2F0KFt0XSksci5jb2x1bW5zW3RdLG4pKSkuZmxhdCgpKX19dC5MZWdhY3lDb2x1bW5EZXNjcmlwdG9ycz1zfSwzMTgxOihlLHQpPT57InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbXBpbGF0aW9uU3FsPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcm9qZWN0PWUsdGhpcy5kYXRhZm9ybUNvcmVWZXJzaW9uPXR9cmVzb2x2ZVRhcmdldChlKXtjb25zdCB0PWUuZGF0YWJhc2V8fHRoaXMucHJvamVjdC5kZWZhdWx0RGF0YWJhc2U7cmV0dXJuIHQ/YFxgJHt0fS4ke2Uuc2NoZW1hfHx0aGlzLnByb2plY3QuZGVmYXVsdFNjaGVtYX0uJHtlLm5hbWV9XGBgOmBcYCR7ZS5zY2hlbWF8fHRoaXMucHJvamVjdC5kZWZhdWx0U2NoZW1hfS4ke2UubmFtZX1cYGB9c3FsU3RyaW5nKGUpe3JldHVybmAnJHtlLnJlcGxhY2UoL1xcL2csIlxcXFwiKS5yZXBsYWNlKC8nL2csIlxcJyIpfSdgfWluZGV4QXNzZXJ0aW9uKGUsdCl7Y29uc3Qgcj10LmpvaW4oIiwgIik7cmV0dXJuYFxuU0VMRUNUXG4gICpcbkZST00gKFxuICBTRUxFQ1RcbiAgICAke3J9LFxuICAgIENPVU5UKDEpIEFTIGluZGV4X3Jvd19jb3VudFxuICBGUk9NICR7ZX1cbiAgR1JPVVAgQlkgJHtyfVxuICApIEFTIGRhdGFcbldIRVJFIGluZGV4X3Jvd19jb3VudCA+IDFcbmB9cm93Q29uZGl0aW9uc0Fzc2VydGlvbihlLHQpe3JldHVybiB0Lm1hcCgodD0+YFxuU0VMRUNUXG4gICR7dGhpcy5zcWxTdHJpbmcodCl9IEFTIGZhaWxpbmdfcm93X2NvbmRpdGlvbixcbiAgKlxuRlJPTSAke2V9XG5XSEVSRSBOT1QgKCR7dH0pXG5gKSkuam9pbigiVU5JT04gQUxMIil9fX0sODU1NjpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG89cig3MjEwKSxpPW4ocig2MjAzKSksYT1yKDY5NDMpLHM9WyJzZWxmIiwicmVmIiwicmVzb2x2ZSIsIm5hbWUiLCJ3aGVuIiwiaW5jcmVtZW50YWwiLCJzY2hlbWEiLCJkYXRhYmFzZSJdLm1hcCgoZT0+YGNvbnN0ICR7ZX0gPSBjdHguJHtlfSA/IGN0eC4ke2V9LmJpbmQoY3R4KSA6IHVuZGVmaW5lZDtgKSkuam9pbigiXG4iKSxsPVsiRVhQRUNUIl0ubWFwKChlPT5gY29uc3QgJHtlfSA9IGN0eC4ke2V9ID8gY3R4LiR7ZX0gOiB1bmRlZmluZWQ7YCkpLmpvaW4oIlxuIik7ZnVuY3Rpb24gYyhlKXtjb25zdCB0PVsiIl07cmV0dXJuIGUuZm9yRWFjaCgoZT0+eyJzdHJpbmciPT10eXBlb2YgZXx8ZS50eXBlIT09YS5TeW50YXhUcmVlTm9kZVR5cGUuU1FMX1NUQVRFTUVOVF9TRVBBUkFUT1I/dFt0Lmxlbmd0aC0xXSs9ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3UuZ2V0KGEuU3ludGF4VHJlZU5vZGVUeXBlLlNRTF9MSVRFUkFMX1NUUklORykoZSk6ZS5jb25jYXRlbmF0ZSh1KX0oZSk6dC5wdXNoKCIiKX0pKSx0fXQuSU5WQUxJRF9ZQU1MX0VSUk9SX1NUUklORz0iaXMgbm90IGEgdmFsaWQgWUFNTCBmaWxlIix0LmNvbXBpbGU9ZnVuY3Rpb24oZSxyKXtpZigic3FseCI9PT1pLmZpbGVFeHRlbnNpb24ocikpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7Y29uc3R7Y29uZmlnOnIsanM6bixzcWw6byxpbmNyZW1lbnRhbDp1LHByZU9wZXJhdGlvbnM6cCxwb3N0T3BlcmF0aW9uczpkLGlucHV0czpmfT1mdW5jdGlvbihlKXtsZXQgdD0iIixyPSIiO2UuY2hpbGRyZW4oKS5maWx0ZXIoYS5TeW50YXhUcmVlTm9kZS5pc1N5bnRheFRyZWVOb2RlKS5maWx0ZXIoKGU9PmUudHlwZT09PWEuU3ludGF4VHJlZU5vZGVUeXBlLkpBVkFTQ1JJUFQpKS5mb3JFYWNoKChlPT57Y29uc3Qgbj1lLmNvbmNhdGVuYXRlKCk7bi5zdGFydHNXaXRoKCJjb25maWciKT90PW4uc2xpY2UoNyk6cis9bi5zbGljZSg0LC0xKX0pKTtjb25zdCBuPWMoZS5jaGlsZHJlbigpLmZpbHRlcigoZT0+InN0cmluZyI9PXR5cGVvZiBlfHxbYS5TeW50YXhUcmVlTm9kZVR5cGUuSkFWQVNDUklQVF9URU1QTEFURV9TVFJJTkdfUExBQ0VIT0xERVIsYS5TeW50YXhUcmVlTm9kZVR5cGUuU1FMX0NPTU1FTlQsYS5TeW50YXhUcmVlTm9kZVR5cGUuU1FMX0xJVEVSQUxfU1RSSU5HLGEuU3ludGF4VHJlZU5vZGVUeXBlLlNRTF9MSVRFUkFMX01VTFRJTElORV9TVFJJTkcsYS5TeW50YXhUcmVlTm9kZVR5cGUuU1FMX1NUQVRFTUVOVF9TRVBBUkFUT1JdLmluY2x1ZGVzKGUudHlwZSkpKSk7bGV0IG89IiIsaT1bXSxzPVtdO2NvbnN0IGw9W107cmV0dXJuIGUuY2hpbGRyZW4oKS5maWx0ZXIoYS5TeW50YXhUcmVlTm9kZS5pc1N5bnRheFRyZWVOb2RlKS5maWx0ZXIoKGU9PmUudHlwZT09PWEuU3ludGF4VHJlZU5vZGVUeXBlLlNRTCkpLmZvckVhY2goKGU9Pntjb25zdCB0PWUuY2hpbGRyZW4oKVswXSxyPWUuY2hpbGRyZW4oKS5zbGljZSgtMSlbMF0sbj1jKCgxPT09ZS5jaGlsZHJlbigpLmxlbmd0aD9uZXcgYS5TeW50YXhUcmVlTm9kZShhLlN5bnRheFRyZWVOb2RlVHlwZS5TUUwsW3Quc2xpY2UodC5pbmRleE9mKCJ7IikrMSx0Lmxhc3RJbmRleE9mKCJ9IikpXSk6bmV3IGEuU3ludGF4VHJlZU5vZGUoYS5TeW50YXhUcmVlTm9kZVR5cGUuU1FMLFt0LnNsaWNlKHQuaW5kZXhPZigieyIpKzEpLC4uLmUuY2hpbGRyZW4oKS5zbGljZSgxLC0xKSxyLnNsaWNlKDAsci5sYXN0SW5kZXhPZigifSIpKV0pKS5jaGlsZHJlbigpKTtpZih0LnN0YXJ0c1dpdGgoImluY3JlbWVudGFsX3doZXJlIikpe2lmKG4ubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKCInaW5jcmVtZW50YWxfd2hlcmUnIGNvZGUgYmxvY2tzIG1heSBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgU1FMIHN0YXRlbWVudC4iKTtvPW5bMF19ZWxzZSBpZih0LnN0YXJ0c1dpdGgoInByZV9vcGVyYXRpb25zIikpaT1uO2Vsc2UgaWYodC5zdGFydHNXaXRoKCJwb3N0X29wZXJhdGlvbnMiKSlzPW47ZWxzZSBpZih0LnN0YXJ0c1dpdGgoImlucHV0Iikpe2lmKG4ubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKCInaW5wdXQnIGNvZGUgYmxvY2tzIG1heSBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgU1FMIHN0YXRlbWVudC4iKTtjb25zdCBlPXQuc2xpY2UodC5pbmRleE9mKCciJyksdC5sYXN0SW5kZXhPZignIicpKzEpLnNwbGl0KCIsIikubWFwKChlPT5lLnRyaW0oKS5zbGljZSgxLC0xKSkpO2wucHVzaCh7bGFiZWxQYXJ0czplLHZhbHVlOm5bMF19KX19KSkse2NvbmZpZzp0LGpzOnIsc3FsOm4saW5jcmVtZW50YWw6byxwcmVPcGVyYXRpb25zOmkscG9zdE9wZXJhdGlvbnM6cyxpbnB1dHM6bH19KGUpO3JldHVybmBkYXRhZm9ybS5zcWx4QWN0aW9uKHtcbiAgc3FseENvbmZpZzoge1xuICAgIG5hbWU6ICIke2kuZXNjYXBlZEJhc2VuYW1lKHQpfSIsXG4gICAgdHlwZTogIm9wZXJhdGlvbnMiLFxuICAgIC4uLiR7cnx8Int9In1cbiAgfSxcbiAgc3FsU3RhdGVtZW50Q291bnQ6ICR7by5sZW5ndGh9LFxuICBzcWxDb250ZXh0YWJsZTogKGN0eCkgPT4ge1xuICAgICR7c31cbiAgICAke2x9XG4gICAgJHtufVxuICAgIHJldHVybiBbJHtvLm1hcCgoZT0+YFxgJHtlfVxgYCkpfV07XG4gIH0sXG4gIGluY3JlbWVudGFsV2hlcmVDb250ZXh0YWJsZTogJHt1P2AoY3R4KSA9PiB7XG4gICAgJHtzfVxuICAgICR7bH1cbiAgICAke259XG4gICAgcmV0dXJuIFxgJHt1fVxgXG4gIH1gOiJ1bmRlZmluZWQifSxcbiAgcHJlT3BlcmF0aW9uc0NvbnRleHRhYmxlOiAke3AubGVuZ3RoPjA/YChjdHgpID0+IHtcbiAgICAke3N9XG4gICAgJHtsfVxuICAgICR7bn1cbiAgICByZXR1cm4gWyR7cC5tYXAoKGU9PmBcYCR7ZX1cYGApKX1dO1xuICB9YDoidW5kZWZpbmVkIn0sXG4gIHBvc3RPcGVyYXRpb25zQ29udGV4dGFibGU6ICR7ZC5sZW5ndGg+MD9gKGN0eCkgPT4ge1xuICAgICR7c31cbiAgICAke2x9XG4gICAgJHtufVxuICAgIHJldHVybiBbJHtkLm1hcCgoZT0+YFxgJHtlfVxgYCkpfV07XG4gIH1gOiJ1bmRlZmluZWQifSxcbiAgaW5wdXRDb250ZXh0YWJsZXM6IFtcbiAgICAke2YubWFwKCgoe2xhYmVsUGFydHM6ZSx2YWx1ZTp0fSk9PmB7XG4gICAgICAgICAgICByZWZOYW1lOiBbJHtlLm1hcCgoZT0+YCIke2V9ImApKS5qb2luKCIsICIpfV0sXG4gICAgICAgICAgICBjb250ZXh0YWJsZTogKGN0eCkgPT4ge1xuICAgICAgICAgICAgICAke259XG4gICAgICAgICAgICAgIHJldHVybiBcYCR7dH1cYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9YCkpLmpvaW4oIiwiKX1cbiAgXVxufSk7XG5gfShhLlN5bnRheFRyZWVOb2RlLmNyZWF0ZShlKSxyKTtpZigieWFtbCI9PT1pLmZpbGVFeHRlbnNpb24ocikpdHJ5e2NvbnN0IHQ9by5sb2FkKGUpO3JldHVybmBleHBvcnRzLmFzSnNvbiA9ICR7SlNPTi5zdHJpbmdpZnkodCl9YH1jYXRjaChlKXtpZihlIGluc3RhbmNlb2Ygby5ZQU1MRXhjZXB0aW9uKXRocm93IG5ldyBFcnJvcihgJHtyfSAke3QuSU5WQUxJRF9ZQU1MX0VSUk9SX1NUUklOR306ICR7ZX1gKTt0aHJvdyBlfWlmKCJpcHluYiI9PT1pLmZpbGVFeHRlbnNpb24ocikpe2xldCB0PXt9O3RyeXt0PUpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGBFcnJvciBwYXJzaW5nICR7cn0gYXMgSlNPTjogJHtlfWApfXJldHVybmBleHBvcnRzLmFzSnNvbiA9ICR7SlNPTi5zdHJpbmdpZnkodCl9YH1yZXR1cm4ic3FsIj09PWkuZmlsZUV4dGVuc2lvbihyKT9gZXhwb3J0cy5xdWVyeSA9IFxgJHtlLnJlcGxhY2UoL1xcL2csIlxcXFwiKS5yZXBsYWNlKC9gL2csIlxcYCIpLnJlcGxhY2UoL1wkey9nLCJcXCR7Iil9XGA7YDplfSx0LmV4dHJhY3RKc0Jsb2Nrcz1mdW5jdGlvbihlKXtjb25zdCB0PVtdO3JldHVybntzcWw6ZS5yZXBsYWNlKC9eXHMqXC9cKltqSl1bc1NdXHMqW1xyXG5dKygoPzpbXipdfFtcclxuXXwoPzpcKisoPzpbXiovXXxbXHJcbl0pKSkqKVwqK1wvfF5ccypcLVwtW2pKXVtzU11ccyguKikvZ20sKChlLHIsbik9PihyJiZ0LnB1c2gociksbiYmdC5wdXNoKG4pLCIiKSkpLnJlcGxhY2UoLyhbXlxcXSlgL2csKChlLHQpPT50KyJcXGAiKSkudHJpbSgpLGpzOnQubWFwKChlPT5lLnRyaW0oKSkpLmpvaW4oIlxuIil9fTtjb25zdCB1PW5ldyBNYXAoW1thLlN5bnRheFRyZWVOb2RlVHlwZS5TUUxfQ09NTUVOVCxlPT5lLnJlcGxhY2UoL2AvZywiXFxgIikucmVwbGFjZSgvXCR7L2csIlxcJHsiKV0sW2EuU3ludGF4VHJlZU5vZGVUeXBlLlNRTF9MSVRFUkFMX1NUUklORyxlPT5lLnJlcGxhY2UoL1xcL2csIlxcXFwiKS5yZXBsYWNlKC9cYC9nLCJcXGAiKV0sW2EuU3ludGF4VHJlZU5vZGVUeXBlLlNRTF9MSVRFUkFMX01VTFRJTElORV9TVFJJTkcsZT0+ZS5yZXBsYWNlKC9cXC9nLCJcXFxcIikucmVwbGFjZSgvXGAvZywiXFxgIildXSl9LDI2MTg6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbj1yKDg1NTYpO3QuY29tcGlsZXI9bi5jb21waWxlO2NvbnN0IG89cigxNTY1KTt0Lm1haW49by5tYWluO2NvbnN0IGk9cig4ODIyKSxhPXIoMjg5NCk7dC52ZXJzaW9uPWEudmVyc2lvbjtjb25zdCBzPXIoODg2OSksbD0oZ2xvYmFsLl9ERl9TRVNTSU9OfHwoZ2xvYmFsLl9ERl9TRVNTSU9OPW5ldyBpLlNlc3Npb24pLGdsb2JhbC5fREZfU0VTU0lPTik7dC5zZXNzaW9uPWw7Y29uc3QgYz1bcy5kYXRhZm9ybS5TdXBwb3J0ZWRGZWF0dXJlcy5BUlJBWV9CVUZGRVJfSVBDXTt0LnN1cHBvcnRlZEZlYXR1cmVzPWMsdC5pbmRleEZpbGVHZW5lcmF0b3I9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIkBkYXRhZm9ybS9jbGkgXjMuMC4wIHJlcXVpcmVkLiIpfX0sMTU2NTpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG89cig4MTQyKSxpPXIoOTM1MCksYT1yKDYwMTQpLHM9cig1NTAyKSxsPXIoNjIxKSxjPXIoNTE0NSksdT1yKDk3NSkscD1yKDI0MDYpLGQ9cigyNTM3KSxmPW4ocig2MjAzKSksaD1yKDkyMTEpLGc9cig0NTk3KSx5PXIoODg2OSk7dC5tYWluPWZ1bmN0aW9uKGUpe3ZhciB0O2NvbnN0IHI9Z2xvYmFsO2xldCBuO249InN0cmluZyI9PXR5cGVvZiBlP28uZGVjb2RlNjQoeS5kYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVxdWVzdCxlKTp5LmRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXF1ZXN0LmRlY29kZShlKTtjb25zdCBtPW4uY29tcGlsZTtsZXQgYj1nLnJlYWRXb3JrZmxvd1NldHRpbmdzKCk7Y29uc3QgTz1udWxsIT09KHQ9bS5jb21waWxlQ29uZmlnLnByb2plY3RDb25maWdPdmVycmlkZSkmJnZvaWQgMCE9PXQ/dDp7fTtiPXkuZGF0YWZvcm0uUHJvamVjdENvbmZpZy5jcmVhdGUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYiksTykse3ZhcnM6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGIudmFycyksTy52YXJzKX0pKTtjb25zdCBUPWgubmF0aXZlUmVxdWlyZSgiQGRhdGFmb3JtL2NvcmUiKS5zZXNzaW9uO1QuaW5pdChtLmNvbXBpbGVDb25maWcucHJvamVjdERpcixiLGIpLHIuZGF0YWZvcm09VDtjb25zdCB2PXt9O20uY29tcGlsZUNvbmZpZy5maWxlUGF0aHMuZmlsdGVyKChlPT5lLnN0YXJ0c1dpdGgoYGluY2x1ZGVzJHtmLnNlcGFyYXRvcn1gKSkpLmZpbHRlcigoZT0+Mj09PWUuc3BsaXQoZi5zZXBhcmF0b3IpLmxlbmd0aCkpLmZpbHRlcigoZT0+ImpzIj09PWYuZmlsZUV4dGVuc2lvbihlKSkpLmZvckVhY2goKGU9Pnt0cnl7dltmLmJhc2VuYW1lKGUpXT1oLm5hdGl2ZVJlcXVpcmUoZSl9Y2F0Y2godCl7VC5jb21waWxlRXJyb3IodCxlKX19KSksT2JqZWN0LmFzc2lnbihyLHYpLHIucHVibGlzaD1ULnB1Ymxpc2guYmluZChUKSxyLm9wZXJhdGU9VC5vcGVyYXRlLmJpbmQoVCksci5hc3NlcnQ9VC5hc3NlcnQuYmluZChUKSxyLmRlY2xhcmU9VC5kZWNsYXJlLmJpbmQoVCksci5ub3RlYm9vaz1ULm5vdGVib29rLmJpbmQoVCksci50ZXN0PVQudGVzdC5iaW5kKFQpLGZ1bmN0aW9uKGUsdCl7dC5maWx0ZXIoKGU9PmUuc3RhcnRzV2l0aChgZGVmaW5pdGlvbnMke2Yuc2VwYXJhdG9yfWApJiYiYWN0aW9ucyI9PT1mLmJhc2VuYW1lKGUpJiYieWFtbCI9PT1mLmZpbGVFeHRlbnNpb24oZSkpKS5zb3J0KCkuZm9yRWFjaCgodD0+e2NvbnN0IHI9ZnVuY3Rpb24oZSx0KXtsZXQgcj17fTt0cnl7cj1oLm5hdGl2ZVJlcXVpcmUodCkuYXNKc29ufWNhdGNoKHIpe2UuY29tcGlsZUVycm9yKHIsdCl9cmV0dXJuIG8udmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKHkuZGF0YWZvcm0uQWN0aW9uQ29uZmlncyxyLG8uVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TSE9XX0RPQ1NfTElOSykseS5kYXRhZm9ybS5BY3Rpb25Db25maWdzLmZyb21PYmplY3Qocil9KGUsdCk7ci5hY3Rpb25zLmZvckVhY2goKHI9Pntjb25zdCBuPXkuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLmNyZWF0ZShyKTtpZihuLnRhYmxlKWUuYWN0aW9ucy5wdXNoKG5ldyBwLlRhYmxlKGUseS5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcuY3JlYXRlKG4udGFibGUpLHQpKTtlbHNlIGlmKG4udmlldyllLmFjdGlvbnMucHVzaChuZXcgZC5WaWV3KGUseS5kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy5jcmVhdGUobi52aWV3KSx0KSk7ZWxzZSBpZihuLmluY3JlbWVudGFsVGFibGUpZS5hY3Rpb25zLnB1c2gobmV3IGwuSW5jcmVtZW50YWxUYWJsZShlLHkuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcuY3JlYXRlKG4uaW5jcmVtZW50YWxUYWJsZSksdCkpO2Vsc2UgaWYobi5hc3NlcnRpb24pZS5hY3Rpb25zLnB1c2gobmV3IGkuQXNzZXJ0aW9uKGUseS5kYXRhZm9ybS5BY3Rpb25Db25maWcuQXNzZXJ0aW9uQ29uZmlnLmNyZWF0ZShuLmFzc2VydGlvbiksdCkpO2Vsc2UgaWYobi5vcGVyYXRpb24pZS5hY3Rpb25zLnB1c2gobmV3IHUuT3BlcmF0aW9uKGUseS5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLmNyZWF0ZShuLm9wZXJhdGlvbiksdCkpO2Vsc2UgaWYobi5kZWNsYXJhdGlvbillLmFjdGlvbnMucHVzaChuZXcgcy5EZWNsYXJhdGlvbihlLHkuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnLmNyZWF0ZShuLmRlY2xhcmF0aW9uKSkpO2Vsc2UgaWYobi5ub3RlYm9vayllLmFjdGlvbnMucHVzaChuZXcgYy5Ob3RlYm9vayhlLHkuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnLmNyZWF0ZShuLm5vdGVib29rKSx0KSk7ZWxzZXtpZighbi5kYXRhUHJlcGFyYXRpb24pdGhyb3cgRXJyb3IoIkVtcHR5IGFjdGlvbiBjb25maWdzIGFyZSBub3QgcGVybWl0dGVkLiIpO2UuYWN0aW9ucy5wdXNoKG5ldyBhLkRhdGFQcmVwYXJhdGlvbihlLHkuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5jcmVhdGUobi5kYXRhUHJlcGFyYXRpb24pLHQpKX19KSl9KSl9KFQsbS5jb21waWxlQ29uZmlnLmZpbGVQYXRocyksbS5jb21waWxlQ29uZmlnLmZpbGVQYXRocy5maWx0ZXIoKGU9PmUuc3RhcnRzV2l0aChgZGVmaW5pdGlvbnMke2Yuc2VwYXJhdG9yfWApKSkuZmlsdGVyKChlPT4ianMiPT09Zi5maWxlRXh0ZW5zaW9uKGUpfHwic3FseCI9PT1mLmZpbGVFeHRlbnNpb24oZSkpKS5zb3J0KCkuZm9yRWFjaCgoZT0+e3RyeXtoLm5hdGl2ZVJlcXVpcmUoZSl9Y2F0Y2godCl7VC5jb21waWxlRXJyb3IodCxlKX19KSk7Y29uc3Qgdz15LmRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXNwb25zZS5jcmVhdGUoe2NvbXBpbGU6e2NvbXBpbGVkR3JhcGg6VC5jb21waWxlKCl9fSk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP28uZW5jb2RlNjQoeS5kYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVzcG9uc2Usdyk6eS5kYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVzcG9uc2UuZW5jb2RlKHcpLmZpbmlzaCgpfX0sNjIwMzooZSx0KT0+eyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlLnNwbGl0KHQuc2VwYXJhdG9yKS5zbGljZSgtMSlbMF19ZnVuY3Rpb24gbihlKXtjb25zdCB0PXIoZSk7cmV0dXJuIHQuc3Vic3RyaW5nKDAsdC5sYXN0SW5kZXhPZigiLiIpKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5zZXBhcmF0b3I9InVuZGVmaW5lZCIhPXR5cGVvZiBwcm9jZXNzJiYid2luMzIiPT09cHJvY2Vzcy5wbGF0Zm9ybT8iXFwiOiIvIix0LnJlbGF0aXZlUGF0aD1mdW5jdGlvbihlLHIpe2lmKDA9PT1yLmxlbmd0aClyZXR1cm4gZTtjb25zdCBuPWUuc3Vic3RyKHIubGVuZ3RoKTtyZXR1cm4gbi5zdGFydHNXaXRoKHQuc2VwYXJhdG9yKT9uLnN1YnN0cigxKTpufSx0LmZpbGVuYW1lPXIsdC5iYXNlbmFtZT1uLHQuZGlyTmFtZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5zbGljZSgwLGUubGFzdEluZGV4T2YodC5zZXBhcmF0b3IpKX0sdC5qb2luPWZ1bmN0aW9uKC4uLmUpe3JldHVybiBlLm1hcCgoZT0+KGUuc3RhcnRzV2l0aCh0LnNlcGFyYXRvcikmJihlPWUuc2xpY2UoMSkpLGUuZW5kc1dpdGgodC5zZXBhcmF0b3IpJiYoZT1lLnNsaWNlKDAsLTEpKSxlKSkpLmpvaW4odC5zZXBhcmF0b3IpfSx0LmVzY2FwZWRCYXNlbmFtZT1mdW5jdGlvbihlKXtyZXR1cm4gbihlKS5yZXBsYWNlKC9cXC9nLCJcXFxcIil9LHQuZmlsZUV4dGVuc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdCgiLiIpLnNsaWNlKC0xKVswXX0sdC5ub3JtYWxpemU9ZnVuY3Rpb24oZSl7Y29uc3QgdD1bXTtsZXQgcj0wO2Zvcihjb25zdCBuIG9mIGUuc3BsaXQoIi8iKS5maWx0ZXIoKGU9PiEhZSYmIi4iIT09ZSkpKSIuLiI9PT1uPzA9PT10Lmxlbmd0aD9yKys6dC5wb3AoKTp0LnB1c2gobik7aWYoZS5zdGFydHNXaXRoKCIvIikpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4iLyI7dC51bnNoaWZ0KCIiKX1lbHNlIGlmKHQudW5zaGlmdCguLi5uZXcgQXJyYXkocikuZmlsbCgiLi4iKSksMD09PXQubGVuZ3RoKXJldHVybiIuIjtyZXR1cm4gdC5qb2luKCIvIil9fSw4ODIyOmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0sbz10aGlzJiZ0aGlzLl9faW1wb3J0U3Rhcnx8ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBpPW4ocig5MzY0KSksYT1yKDgxNDIpLHM9cig5MzUwKSxsPXIoNjAxNCksYz1yKDU1MDIpLHU9cig2MjEpLHA9cig1MTQ1KSxkPXIoOTc1KSxmPXIoMjQwNiksaD1yKDU5MDApLGc9cigyNTM3KSx5PXIoMzE4MSksbT1yKDI3NDgpLGI9byhyKDkyMTEpKSxPPXIoOTIxMSksVD1yKDI4OTQpLHY9cig4ODY5KSx3PXtkZWZhdWx0U2NoZW1hOiJkYXRhZm9ybSIsYXNzZXJ0aW9uU2NoZW1hOiJkYXRhZm9ybV9hc3NlcnRpb25zIn07ZnVuY3Rpb24gaihlKXtyZXR1cm4idmlldyI9PT1lfHwidGFibGUiPT09ZXx8ImluY3JlbWVudGFsIj09PWV9dC5TZXNzaW9uPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxyKXt0aGlzLmFjdGlvbkFzc2VydGlvbk1hcD1uZXcgQShbXSksdGhpcy5pbml0KGUsdCxyKX1pbml0KGUsdCxyKXt0aGlzLnJvb3REaXI9ZSx0aGlzLnByb2plY3RDb25maWc9di5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmNyZWF0ZSh0fHx3KSx0aGlzLmNhbm9uaWNhbFByb2plY3RDb25maWc9ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZGF0YWZvcm0uUHJvamVjdENvbmZpZy5jcmVhdGUoe3dhcmVob3VzZTplLndhcmVob3VzZSxkZWZhdWx0U2NoZW1hOmUuZGVmYXVsdFNjaGVtYSxkZWZhdWx0RGF0YWJhc2U6ZS5kZWZhdWx0RGF0YWJhc2UsYXNzZXJ0aW9uU2NoZW1hOmUuYXNzZXJ0aW9uU2NoZW1hfSl9KHYuZGF0YWZvcm0uUHJvamVjdENvbmZpZy5jcmVhdGUocnx8dHx8dykpLHRoaXMuYWN0aW9ucz1bXSx0aGlzLnRlc3RzPXt9LHRoaXMuZ3JhcGhFcnJvcnM9e2NvbXBpbGF0aW9uRXJyb3JzOltdfX1jb21waWxhdGlvblNxbCgpe3JldHVybiBuZXcgeS5Db21waWxhdGlvblNxbCh0aGlzLnByb2plY3RDb25maWcsVC52ZXJzaW9uKX1zcWx4QWN0aW9uKGUpe2NvbnN0e3NxbHhDb25maWc6dH09ZSxyPXQuaGFzT3duUHJvcGVydHkoInR5cGUiKT90LnR5cGU6Im9wZXJhdGlvbnMiO3N3aXRjaChlLnNxbFN0YXRlbWVudENvdW50PjEmJiJvcGVyYXRpb25zIiE9PXImJnRoaXMuY29tcGlsZUVycm9yKCJBY3Rpb25zIG1heSBvbmx5IGNvbnRhaW4gbW9yZSB0aGFuIG9uZSBTUUwgc3RhdGVtZW50IGlmIHRoZXkgYXJlIG9mIHR5cGUgJ29wZXJhdGlvbnMnLiIpLHQuaGFzT3duUHJvcGVydHkoInByb3RlY3RlZCIpJiYiaW5jcmVtZW50YWwiIT09ciYmdGhpcy5jb21waWxlRXJyb3IoIkFjdGlvbnMgbWF5IG9ubHkgc3BlY2lmeSAncHJvdGVjdGVkOiB0cnVlJyBpZiB0aGV5IGFyZSBvZiB0eXBlICdpbmNyZW1lbnRhbCcuIiksZS5pbmNyZW1lbnRhbFdoZXJlQ29udGV4dGFibGUmJiJpbmNyZW1lbnRhbCIhPT1yJiZ0aGlzLmNvbXBpbGVFcnJvcigiQWN0aW9ucyBtYXkgb25seSBpbmNsdWRlIGluY3JlbWVudGFsX3doZXJlIGlmIHRoZXkgYXJlIG9mIHR5cGUgJ2luY3JlbWVudGFsJy4iKSx0Lmhhc093blByb3BlcnR5KCJzY2hlbWEiKXx8ImRlY2xhcmF0aW9uIiE9PXJ8fHRoaXMuY29tcGlsZUVycm9yKCJBY3Rpb25zIG9mIHR5cGUgJ2RlY2xhcmF0aW9uJyBtdXN0IHNwZWNpZnkgYSB2YWx1ZSBmb3IgJ3NjaGVtYScuIiksZS5pbnB1dENvbnRleHRhYmxlcy5sZW5ndGg+MCYmInRlc3QiIT09ciYmdGhpcy5jb21waWxlRXJyb3IoIkFjdGlvbnMgbWF5IG9ubHkgaW5jbHVkZSBpbnB1dCBibG9ja3MgaWYgdGhleSBhcmUgb2YgdHlwZSAndGVzdCcuIiksZS5wcmVPcGVyYXRpb25zQ29udGV4dGFibGUmJiFqKHIpJiZ0aGlzLmNvbXBpbGVFcnJvcigiQWN0aW9ucyBtYXkgb25seSBpbmNsdWRlIHByZV9vcGVyYXRpb25zIGlmIHRoZXkgY3JlYXRlIGEgZGF0YXNldC4iKSxlLnBvc3RPcGVyYXRpb25zQ29udGV4dGFibGUmJiFqKHIpJiZ0aGlzLmNvbXBpbGVFcnJvcigiQWN0aW9ucyBtYXkgb25seSBpbmNsdWRlIHBvc3Rfb3BlcmF0aW9ucyBpZiB0aGV5IGNyZWF0ZSBhIGRhdGFzZXQuIikscil7Y2FzZSJ2aWV3Ijp0LmZpbGVuYW1lPWIuZ2V0Q2FsbGVyRmlsZSh0aGlzLnJvb3REaXIpO2NvbnN0IHI9bmV3IGcuVmlldyh0aGlzLHQpLnF1ZXJ5KCh0PT5lLnNxbENvbnRleHRhYmxlKHQpWzBdKSk7ZS5pbmNyZW1lbnRhbFdoZXJlQ29udGV4dGFibGUmJnIud2hlcmUoZS5pbmNyZW1lbnRhbFdoZXJlQ29udGV4dGFibGUpLGUucHJlT3BlcmF0aW9uc0NvbnRleHRhYmxlJiZyLnByZU9wcyhlLnByZU9wZXJhdGlvbnNDb250ZXh0YWJsZSksZS5wb3N0T3BlcmF0aW9uc0NvbnRleHRhYmxlJiZyLnBvc3RPcHMoZS5wb3N0T3BlcmF0aW9uc0NvbnRleHRhYmxlKSx0aGlzLmFjdGlvbnMucHVzaChyKTticmVhaztjYXNlImluY3JlbWVudGFsIjp0LmZpbGVuYW1lPWIuZ2V0Q2FsbGVyRmlsZSh0aGlzLnJvb3REaXIpO2NvbnN0IG49bmV3IHUuSW5jcmVtZW50YWxUYWJsZSh0aGlzLHQpLnF1ZXJ5KCh0PT5lLnNxbENvbnRleHRhYmxlKHQpWzBdKSk7ZS5pbmNyZW1lbnRhbFdoZXJlQ29udGV4dGFibGUmJm4ud2hlcmUoZS5pbmNyZW1lbnRhbFdoZXJlQ29udGV4dGFibGUpLGUucHJlT3BlcmF0aW9uc0NvbnRleHRhYmxlJiZuLnByZU9wcyhlLnByZU9wZXJhdGlvbnNDb250ZXh0YWJsZSksZS5wb3N0T3BlcmF0aW9uc0NvbnRleHRhYmxlJiZuLnBvc3RPcHMoZS5wb3N0T3BlcmF0aW9uc0NvbnRleHRhYmxlKSx0aGlzLmFjdGlvbnMucHVzaChuKTticmVhaztjYXNlInRhYmxlIjp0LmZpbGVuYW1lPWIuZ2V0Q2FsbGVyRmlsZSh0aGlzLnJvb3REaXIpO2NvbnN0IG89bmV3IGYuVGFibGUodGhpcyx0KS5xdWVyeSgodD0+ZS5zcWxDb250ZXh0YWJsZSh0KVswXSkpO2UuaW5jcmVtZW50YWxXaGVyZUNvbnRleHRhYmxlJiZvLndoZXJlKGUuaW5jcmVtZW50YWxXaGVyZUNvbnRleHRhYmxlKSxlLnByZU9wZXJhdGlvbnNDb250ZXh0YWJsZSYmby5wcmVPcHMoZS5wcmVPcGVyYXRpb25zQ29udGV4dGFibGUpLGUucG9zdE9wZXJhdGlvbnNDb250ZXh0YWJsZSYmby5wb3N0T3BzKGUucG9zdE9wZXJhdGlvbnNDb250ZXh0YWJsZSksdGhpcy5hY3Rpb25zLnB1c2gobyk7YnJlYWs7Y2FzZSJhc3NlcnRpb24iOnQuZmlsZW5hbWU9Yi5nZXRDYWxsZXJGaWxlKHRoaXMucm9vdERpciksdGhpcy5hY3Rpb25zLnB1c2gobmV3IHMuQXNzZXJ0aW9uKHRoaXMsdCkucXVlcnkoKHQ9PmUuc3FsQ29udGV4dGFibGUodClbMF0pKSk7YnJlYWs7Y2FzZSJkYXRhUHJlcGFyYXRpb24iOnQuZmlsZW5hbWU9Yi5nZXRDYWxsZXJGaWxlKHRoaXMucm9vdERpcik7Y29uc3QgaT1uZXcgbC5EYXRhUHJlcGFyYXRpb24odGhpcyx0KS5xdWVyeSgodD0+ZS5zcWxDb250ZXh0YWJsZSh0KVswXSkpO3RoaXMuYWN0aW9ucy5wdXNoKGkpO2JyZWFrO2Nhc2Uib3BlcmF0aW9ucyI6dC5maWxlbmFtZT1iLmdldENhbGxlckZpbGUodGhpcy5yb290RGlyKSx0aGlzLmFjdGlvbnMucHVzaChuZXcgZC5PcGVyYXRpb24odGhpcyx0KS5xdWVyaWVzKGUuc3FsQ29udGV4dGFibGUpKTticmVhaztjYXNlImRlY2xhcmF0aW9uIjpjb25zdCBhPW5ldyBjLkRlY2xhcmF0aW9uKHRoaXMsdCxiLmdldENhbGxlckZpbGUodGhpcy5yb290RGlyKSk7dGhpcy5hY3Rpb25zLnB1c2goYSk7YnJlYWs7Y2FzZSJ0ZXN0Ijpjb25zdCBwPXRoaXMudGVzdCh0Lm5hbWUpLmNvbmZpZyh0KS5leHBlY3QoKHQ9PmUuc3FsQ29udGV4dGFibGUodClbMF0pKTtlLmlucHV0Q29udGV4dGFibGVzLmZvckVhY2goKCh7cmVmTmFtZTplLGNvbnRleHRhYmxlOnR9KT0+e3AuaW5wdXQoZSx0KX0pKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGFjdGlvbiB0eXBlOiAke3QudHlwZX1gKX19cmVzb2x2ZShlLC4uLnQpe2U9Ty50b1Jlc29sdmFibGUoZSx0KTtjb25zdCByPXRoaXMuaW5kZXhlZEFjdGlvbnMuZmluZChiLnJlc29sdmFibGVBc1RhcmdldChlKSk7aWYoci5sZW5ndGg+MSlyZXR1cm4gdGhpcy5jb21waWxlRXJyb3IobmV3IEVycm9yKGIuYW1iaWd1b3VzQWN0aW9uTmFtZU1zZyhlLHIpKSksIiI7Y29uc3Qgbj1yLmxlbmd0aD4wP3JbMF06dm9pZCAwO3JldHVybiBuJiZuIGluc3RhbmNlb2YgZC5PcGVyYXRpb24mJiFuLmdldEhhc091dHB1dCgpPyh0aGlzLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoIkFjdGlvbnMgY2Fubm90IHJlc29sdmUgb3BlcmF0aW9ucyB3aGljaCBkbyBub3QgcHJvZHVjZSBvdXRwdXQuIikpLCIiKTpuP24gaW5zdGFuY2VvZiBjLkRlY2xhcmF0aW9uP3RoaXMuY29tcGlsYXRpb25TcWwoKS5yZXNvbHZlVGFyZ2V0KG4uZ2V0VGFyZ2V0KCkpOnRoaXMuY29tcGlsYXRpb25TcWwoKS5yZXNvbHZlVGFyZ2V0KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxuLmdldFRhcmdldCgpKSx7ZGF0YWJhc2U6bi5nZXRUYXJnZXQoKS5kYXRhYmFzZSYmdGhpcy5maW5hbGl6ZURhdGFiYXNlKG4uZ2V0VGFyZ2V0KCkuZGF0YWJhc2UpLHNjaGVtYTp0aGlzLmZpbmFsaXplU2NoZW1hKG4uZ2V0VGFyZ2V0KCkuc2NoZW1hKSxuYW1lOnRoaXMuZmluYWxpemVOYW1lKG4uZ2V0VGFyZ2V0KCkubmFtZSl9KSk6KHRoaXMuY29tcGlsZUVycm9yKG5ldyBFcnJvcihgQ291bGQgbm90IHJlc29sdmUgJHtKU09OLnN0cmluZ2lmeShlKX1gKSksIiIpfW9wZXJhdGUoZSx0KXtjb25zdCByPWIuZ2V0Q2FsbGVyRmlsZSh0aGlzLnJvb3REaXIpO2xldCBuO3JldHVybiB0JiYib2JqZWN0Ij09dHlwZW9mIHQ/bj1uZXcgZC5PcGVyYXRpb24odGhpcyxPYmplY3QuYXNzaWduKHtuYW1lOmUsZmlsZW5hbWU6cn0sdCkpOihuPW5ldyBkLk9wZXJhdGlvbih0aGlzLHtuYW1lOmUsZmlsZW5hbWU6cn0pLHQmJm4ucXVlcmllcyh0KSksdGhpcy5hY3Rpb25zLnB1c2gobiksbn1wdWJsaXNoKGUsdCl7Y29uc3Qgcj1iLmdldENhbGxlckZpbGUodGhpcy5yb290RGlyKTtsZXQgbj1uZXcgZy5WaWV3KHRoaXMse3R5cGU6InZpZXciLG5hbWU6ZSxmaWxlbmFtZTpyfSk7aWYodClpZigib2JqZWN0Ij09dHlwZW9mIHQpaWYoInZpZXciPT09KG51bGw9PXQ/dm9pZCAwOnQudHlwZSl8fHZvaWQgMD09PXQudHlwZSluPW5ldyBnLlZpZXcodGhpcyxPYmplY3QuYXNzaWduKHt0eXBlOiJ2aWV3IixuYW1lOmUsZmlsZW5hbWU6cn0sdCkpO2Vsc2UgaWYoImluY3JlbWVudGFsIj09PShudWxsPT10P3ZvaWQgMDp0LnR5cGUpKW49bmV3IHUuSW5jcmVtZW50YWxUYWJsZSh0aGlzLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7dHlwZToiaW5jcmVtZW50YWwiLG5hbWU6ZX0sdCkse2ZpbGVuYW1lOnJ9KSk7ZWxzZXtpZigidGFibGUiIT09KG51bGw9PXQ/dm9pZCAwOnQudHlwZSkpdGhyb3cgRXJyb3IoYFVucmVjb2duaXplZCB0YWJsZSB0eXBlOiAke3QudHlwZX1gKTtuPW5ldyBmLlRhYmxlKHRoaXMsT2JqZWN0LmFzc2lnbih7dHlwZToidGFibGUiLG5hbWU6ZSxmaWxlbmFtZTpyfSx0KSl9ZWxzZSBuLnF1ZXJ5KHQpO3JldHVybiB0aGlzLmFjdGlvbnMucHVzaChuKSxufWFzc2VydChlLHQpe2NvbnN0IHI9Yi5nZXRDYWxsZXJGaWxlKHRoaXMucm9vdERpcik7bGV0IG47cmV0dXJuIHQmJiJvYmplY3QiPT10eXBlb2YgdD9uPW5ldyBzLkFzc2VydGlvbih0aGlzLE9iamVjdC5hc3NpZ24oe25hbWU6ZSxmaWxlbmFtZTpyfSx0KSk6KG49bmV3IHMuQXNzZXJ0aW9uKHRoaXMse25hbWU6ZSxmaWxlbmFtZTpyfSksdCYmbi5xdWVyeSh0KSksdGhpcy5hY3Rpb25zLnB1c2gobiksbn1kZWNsYXJlKGUpe2NvbnN0IHQ9bmV3IGMuRGVjbGFyYXRpb24odGhpcyxlLGIuZ2V0Q2FsbGVyRmlsZSh0aGlzLnJvb3REaXIpKTtyZXR1cm4gdGhpcy5hY3Rpb25zLnB1c2godCksdH10ZXN0KGUpe2NvbnN0IHQ9bmV3IGguVGVzdCh0aGlzLHtuYW1lOmV9KTtyZXR1cm4gdC5zZXNzaW9uPXRoaXMsdC5zZXRGaWxlbmFtZShiLmdldENhbGxlckZpbGUodGhpcy5yb290RGlyKSksdGhpcy50ZXN0c1tlXT10LHR9bm90ZWJvb2soZSl7Y29uc3QgdD1iLmdldENhbGxlckZpbGUodGhpcy5yb290RGlyKSxyPW5ldyBwLk5vdGVib29rKHRoaXMsZSx0KTtyZXR1cm4gdGhpcy5hY3Rpb25zLnB1c2gocikscn1jb21waWxlRXJyb3IoZSx0LHIpe2NvbnN0IG49dHx8Yi5nZXRDYWxsZXJGaWxlKHRoaXMucm9vdERpcil8fF9fZmlsZW5hbWUsbz12LmRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3IuY3JlYXRlKHtmaWxlTmFtZTpuLGFjdGlvbk5hbWU6cj9tLnRhcmdldEFzUmVhZGFibGVTdHJpbmcocik6dm9pZCAwLGFjdGlvblRhcmdldDpyfSk7InN0cmluZyI9PXR5cGVvZiBlP28ubWVzc2FnZT1lOihvLm1lc3NhZ2U9ZS5tZXNzYWdlLG8uc3RhY2s9ZS5zdGFjayksdGhpcy5ncmFwaEVycm9ycy5jb21waWxhdGlvbkVycm9ycy5wdXNoKG8pfWNvbXBpbGUoKXtpZih0aGlzLmluZGV4ZWRBY3Rpb25zPW5ldyBBKHRoaXMuYWN0aW9ucyksImJpZ3F1ZXJ5IiE9PXRoaXMucHJvamVjdENvbmZpZy53YXJlaG91c2UmJiIiIT09dGhpcy5wcm9qZWN0Q29uZmlnLndhcmVob3VzZXx8dGhpcy5wcm9qZWN0Q29uZmlnLmRlZmF1bHRMb2NhdGlvbnx8dGhpcy5jb21waWxlRXJyb3IoIkEgZGVmYXVsdExvY2F0aW9uIGlzIHJlcXVpcmVkIGZvciBCaWdRdWVyeS4gVGhpcyBjYW4gYmUgY29uZmlndXJlZCBpbiB3b3JrZmxvd19zZXR0aW5ncy55YW1sLiIsIndvcmtmbG93X3NldHRpbmdzLnlhbWwiKSx0aGlzLnByb2plY3RDb25maWcudmFycyYmIU9iamVjdC52YWx1ZXModGhpcy5wcm9qZWN0Q29uZmlnLnZhcnMpLmV2ZXJ5KChlPT4ic3RyaW5nIj09dHlwZW9mIGUpKSl0aHJvdyBuZXcgRXJyb3IoIkN1c3RvbSB2YXJpYWJsZXMgZGVmaW5lZCBpbiB3b3JrZmxvdyBzZXR0aW5ncyBjYW4gb25seSBiZSBzdHJpbmdzLiIpO2NvbnN0IGU9di5kYXRhZm9ybS5Db21waWxlZEdyYXBoLmNyZWF0ZSh7cHJvamVjdENvbmZpZzp0aGlzLnByb2plY3RDb25maWcsdGFibGVzOnRoaXMuY29tcGlsZUdyYXBoQ2h1bmsodGhpcy5hY3Rpb25zLmZpbHRlcigoZT0+ZSBpbnN0YW5jZW9mIGYuVGFibGV8fGUgaW5zdGFuY2VvZiBnLlZpZXd8fGUgaW5zdGFuY2VvZiB1LkluY3JlbWVudGFsVGFibGUpKSksb3BlcmF0aW9uczp0aGlzLmNvbXBpbGVHcmFwaENodW5rKHRoaXMuYWN0aW9ucy5maWx0ZXIoKGU9PmUgaW5zdGFuY2VvZiBkLk9wZXJhdGlvbikpKSxhc3NlcnRpb25zOnRoaXMuY29tcGlsZUdyYXBoQ2h1bmsodGhpcy5hY3Rpb25zLmZpbHRlcigoZT0+ZSBpbnN0YW5jZW9mIHMuQXNzZXJ0aW9uKSkpLGRlY2xhcmF0aW9uczp0aGlzLmNvbXBpbGVHcmFwaENodW5rKHRoaXMuYWN0aW9ucy5maWx0ZXIoKGU9PmUgaW5zdGFuY2VvZiBjLkRlY2xhcmF0aW9uKSkpLHRlc3RzOnRoaXMuY29tcGlsZUdyYXBoQ2h1bmsoT2JqZWN0LnZhbHVlcyh0aGlzLnRlc3RzKSksbm90ZWJvb2tzOnRoaXMuY29tcGlsZUdyYXBoQ2h1bmsodGhpcy5hY3Rpb25zLmZpbHRlcigoZT0+ZSBpbnN0YW5jZW9mIHAuTm90ZWJvb2spKSksZGF0YVByZXBhcmF0aW9uczp0aGlzLmNvbXBpbGVHcmFwaENodW5rKHRoaXMuYWN0aW9ucy5maWx0ZXIoKGU9PmUgaW5zdGFuY2VvZiBsLkRhdGFQcmVwYXJhdGlvbikpKSxncmFwaEVycm9yczp0aGlzLmdyYXBoRXJyb3JzLGRhdGFmb3JtQ29yZVZlcnNpb246VC52ZXJzaW9uLHRhcmdldHM6dGhpcy5hY3Rpb25zLm1hcCgoZT0+ZS5nZXRUYXJnZXQoKSkpfSk7cmV0dXJuIHRoaXMuZnVsbHlRdWFsaWZ5RGVwZW5kZW5jaWVzKFtdLmNvbmNhdChlLnRhYmxlcyxlLmFzc2VydGlvbnMsZS5vcGVyYXRpb25zLGUubm90ZWJvb2tzLGUuZGF0YVByZXBhcmF0aW9ucykpLHRoaXMuYWx0ZXJBY3Rpb25OYW1lKFtdLmNvbmNhdChlLnRhYmxlcyxlLmFzc2VydGlvbnMsZS5vcGVyYXRpb25zLGUubm90ZWJvb2tzLGUuZGF0YVByZXBhcmF0aW9ucyksW10uY29uY2F0KGUuZGVjbGFyYXRpb25zLm1hcCgoZT0+ZS50YXJnZXQpKSkpLHRoaXMucmVtb3ZlTm9uVW5pcXVlQWN0aW9uc0Zyb21Db21waWxlZEdyYXBoKGUpLHRoaXMuY2hlY2tUZXN0TmFtZVVuaXF1ZW5lc3MoZS50ZXN0cyksdGhpcy5jaGVja0NpcmN1bGFyaXR5KFtdLmNvbmNhdChlLnRhYmxlcyxlLmFzc2VydGlvbnMsZS5vcGVyYXRpb25zLGUubm90ZWJvb2tzLGUuZGF0YVByZXBhcmF0aW9ucykpLGEudmVyaWZ5T2JqZWN0TWF0Y2hlc1Byb3RvKHYuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaCxlLGEuVmVyaWZ5UHJvdG9FcnJvckJlaGF2aW91ci5TVUdHRVNUX1JFUE9SVElOR19UT19EQVRBRk9STV9URUFNKSxlfWNvbXBpbGVUb0Jhc2U2NCgpe3JldHVybiBhLmVuY29kZTY0KHYuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaCx0aGlzLmNvbXBpbGUoKSl9ZmluYWxpemVEYXRhYmFzZShlKXtyZXR1cm5gJHtlfSR7dGhpcy5nZXREYXRhYmFzZVN1ZmZpeFdpdGhVbmRlcnNjb3JlKCl9YH1maW5hbGl6ZVNjaGVtYShlKXtyZXR1cm5gJHtlfSR7dGhpcy5nZXRTY2hlbWFTdWZmaXhXaXRoVW5kZXJzY29yZSgpfWB9ZmluYWxpemVOYW1lKGUpe3JldHVybmAke3RoaXMuZ2V0VGFibGVQcmVmaXhXaXRoVW5kZXJzY29yZSgpfSR7ZX1gfWdldERhdGFiYXNlU3VmZml4V2l0aFVuZGVyc2NvcmUoKXtyZXR1cm4gdGhpcy5wcm9qZWN0Q29uZmlnLmRhdGFiYXNlU3VmZml4P2BfJHt0aGlzLnByb2plY3RDb25maWcuZGF0YWJhc2VTdWZmaXh9YDoiIn1nZXRTY2hlbWFTdWZmaXhXaXRoVW5kZXJzY29yZSgpe3JldHVybiB0aGlzLnByb2plY3RDb25maWcuc2NoZW1hU3VmZml4P2BfJHt0aGlzLnByb2plY3RDb25maWcuc2NoZW1hU3VmZml4fWA6IiJ9Z2V0VGFibGVQcmVmaXhXaXRoVW5kZXJzY29yZSgpe3JldHVybiB0aGlzLnByb2plY3RDb25maWcudGFibGVQcmVmaXg/YCR7dGhpcy5wcm9qZWN0Q29uZmlnLnRhYmxlUHJlZml4fV9gOiIifWNvbXBpbGVHcmFwaENodW5rKGUpe2NvbnN0IHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+e3RyeXtjb25zdCByPWUuY29tcGlsZSgpO3QucHVzaChyKX1jYXRjaCh0KXt0aGlzLmNvbXBpbGVFcnJvcih0LGUuZ2V0RmlsZU5hbWUoKSxlLmdldFRhcmdldCgpKX19KSksdH1mdWxseVF1YWxpZnlEZXBlbmRlbmNpZXMoZSl7ZS5mb3JFYWNoKChlPT57Y29uc3QgdD17fTtpZighKGUgaW5zdGFuY2VvZiB2LmRhdGFmb3JtLkRlY2xhcmF0aW9uKSYmZS5kZXBlbmRlbmN5VGFyZ2V0cyl7Zm9yKGNvbnN0IHIgb2YgZS5kZXBlbmRlbmN5VGFyZ2V0cyl7Y29uc3Qgbj10aGlzLmluZGV4ZWRBY3Rpb25zLmZpbmQocik7aWYoMD09PW4ubGVuZ3RoKXRoaXMuY29tcGlsZUVycm9yKG5ldyBFcnJvcihgTWlzc2luZyBkZXBlbmRlbmN5IGRldGVjdGVkOiBBY3Rpb24gIiR7bS50YXJnZXRBc1JlYWRhYmxlU3RyaW5nKGUudGFyZ2V0KX0iIGRlcGVuZHMgb24gIiR7Yi5zdHJpbmdpZnlSZXNvbHZhYmxlKHIpfSIgd2hpY2ggZG9lcyBub3QgZXhpc3RgKSxlLmZpbGVOYW1lLGUudGFyZ2V0KTtlbHNlIGlmKDE9PT1uLmxlbmd0aCl7Y29uc3QgZT1uWzBdLmdldFRhcmdldCgpO3RbbS50YXJnZXRBc1JlYWRhYmxlU3RyaW5nKGUpXT1lLHIuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMmJnRoaXMuYWN0aW9uQXNzZXJ0aW9uTWFwLmZpbmQocikuZm9yRWFjaCgoZT0+dFttLnRhcmdldEFzUmVhZGFibGVTdHJpbmcoZS5nZXRUYXJnZXQoKSldPWUuZ2V0VGFyZ2V0KCkpKX1lbHNlIHRoaXMuY29tcGlsZUVycm9yKG5ldyBFcnJvcihiLmFtYmlndW91c0FjdGlvbk5hbWVNc2cocixuKSksZS5maWxlTmFtZSxlLnRhcmdldCl9ZS5kZXBlbmRlbmN5VGFyZ2V0cz1PYmplY3QudmFsdWVzKHQpfX0pKX1hbHRlckFjdGlvbk5hbWUoZSx0KXtjb25zdHt0YWJsZVByZWZpeDpyLHNjaGVtYVN1ZmZpeDpuLGRhdGFiYXNlU3VmZml4Om99PXRoaXMucHJvamVjdENvbmZpZztpZighciYmIW4mJiFvKXJldHVybjtjb25zdCBpPW5ldyBNYXA7dC5mb3JFYWNoKChlPT5pLnNldChtLnRhcmdldFN0cmluZ2lmaWVyLnN0cmluZ2lmeShlKSxlKSkpLGUuZm9yRWFjaCgoZT0+e2kuc2V0KG0udGFyZ2V0U3RyaW5naWZpZXIuc3RyaW5naWZ5KGUudGFyZ2V0KSxPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZS50YXJnZXQpLHtkYXRhYmFzZTplLnRhcmdldC5kYXRhYmFzZSYmYCR7ZS50YXJnZXQuZGF0YWJhc2V9JHt0aGlzLmdldERhdGFiYXNlU3VmZml4V2l0aFVuZGVyc2NvcmUoKX1gLHNjaGVtYTpgJHtlLnRhcmdldC5zY2hlbWF9JHt0aGlzLmdldFNjaGVtYVN1ZmZpeFdpdGhVbmRlcnNjb3JlKCl9YCxuYW1lOmAke3RoaXMuZ2V0VGFibGVQcmVmaXhXaXRoVW5kZXJzY29yZSgpfSR7ZS50YXJnZXQubmFtZX1gfSkpLGUudGFyZ2V0PWkuZ2V0KG0udGFyZ2V0U3RyaW5naWZpZXIuc3RyaW5naWZ5KGUudGFyZ2V0KSl9KSk7Y29uc3QgYT1lPT5pLmhhcyhtLnRhcmdldFN0cmluZ2lmaWVyLnN0cmluZ2lmeShlKSk/aS5nZXQobS50YXJnZXRTdHJpbmdpZmllci5zdHJpbmdpZnkoZSkpOmU7ZS5mb3JFYWNoKChlPT57ZSBpbnN0YW5jZW9mIHYuZGF0YWZvcm0uRGVjbGFyYXRpb258fChlLmRlcGVuZGVuY3lUYXJnZXRzPShlLmRlcGVuZGVuY3lUYXJnZXRzfHxbXSkubWFwKGEpKSxlIGluc3RhbmNlb2Ygdi5kYXRhZm9ybS5Bc3NlcnRpb24mJmUucGFyZW50QWN0aW9uJiYoZS5wYXJlbnRBY3Rpb249YShlLnBhcmVudEFjdGlvbikpfSkpfWNoZWNrVGVzdE5hbWVVbmlxdWVuZXNzKGUpe2NvbnN0IHQ9W107ZS5mb3JFYWNoKChlPT57dC5pbmNsdWRlcyhlLm5hbWUpJiZ0aGlzLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoYER1cGxpY2F0ZSB0ZXN0IG5hbWUgZGV0ZWN0ZWQ6ICIke2UubmFtZX0iYCksZS5maWxlTmFtZSksdC5wdXNoKGUubmFtZSl9KSl9Y2hlY2tDaXJjdWxhcml0eShlKXtjb25zdCB0PW5ldyBNYXAoZS5tYXAoKGU9PlttLnRhcmdldFN0cmluZ2lmaWVyLnN0cmluZ2lmeShlLnRhcmdldCksZV0pKSkscj1uZXcgaS5kZWZhdWx0O2UuZm9yRWFjaCgoZT0+e2NvbnN0IG49KGUgaW5zdGFuY2VvZiB2LmRhdGFmb3JtLkRlY2xhcmF0aW9ufHwhZS5kZXBlbmRlbmN5VGFyZ2V0cz9bXTplLmRlcGVuZGVuY3lUYXJnZXRzKS5maWx0ZXIoKGU9PiEhdC5nZXQobS50YXJnZXRTdHJpbmdpZmllci5zdHJpbmdpZnkoZSkpKSk7ci5hZGQobS50YXJnZXRTdHJpbmdpZmllci5zdHJpbmdpZnkoZS50YXJnZXQpLG4ubWFwKChlPT5tLnRhcmdldFN0cmluZ2lmaWVyLnN0cmluZ2lmeShlKSkpKX0pKSxyLmdldEN5Y2xlcygpLmZvckVhY2goKGU9Pntjb25zdCByPXQuZ2V0KGVbMF0ubmFtZSksbj1gQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3RlZCBpbiBjaGFpbjogWyR7ZS5tYXAoKGU9PmUubmFtZSkpLmpvaW4oIiA+ICIpfSA+ICR7bS50YXJnZXRBc1JlYWRhYmxlU3RyaW5nKHIudGFyZ2V0KX1dYDt0aGlzLmNvbXBpbGVFcnJvcihuZXcgRXJyb3Iobiksci5maWxlTmFtZSxyLnRhcmdldCl9KSl9cmVtb3ZlTm9uVW5pcXVlQWN0aW9uc0Zyb21Db21waWxlZEdyYXBoKGUpe2Z1bmN0aW9uIHQoZSl7Y29uc3QgdD1uZXcgU2V0LHI9bmV3IFNldDtyZXR1cm4gZS5mb3JFYWNoKChlPT57dC5oYXMobS50YXJnZXRTdHJpbmdpZmllci5zdHJpbmdpZnkoZSkpJiZyLmFkZChtLnRhcmdldFN0cmluZ2lmaWVyLnN0cmluZ2lmeShlKSksdC5hZGQobS50YXJnZXRTdHJpbmdpZmllci5zdHJpbmdpZnkoZSkpfSkpLHJ9Y29uc3Qgcj1bXS5jb25jYXQoZS50YWJsZXMsZS5hc3NlcnRpb25zLGUub3BlcmF0aW9ucyxlLmRlY2xhcmF0aW9ucyxlLm5vdGVib29rcyxlLmRhdGFQcmVwYXJhdGlvbnMpLG49dChyLm1hcCgoZT0+ZS50YXJnZXQpKSksbz10KHIubWFwKChlPT5lLmNhbm9uaWNhbFRhcmdldCkpKSxpPWU9Pntjb25zdCB0PW4uaGFzKG0udGFyZ2V0U3RyaW5naWZpZXIuc3RyaW5naWZ5KGUudGFyZ2V0KSkscj1vLmhhcyhtLnRhcmdldFN0cmluZ2lmaWVyLnN0cmluZ2lmeShlLmNhbm9uaWNhbFRhcmdldCkpO3JldHVybiB0JiZ0aGlzLmNvbXBpbGVFcnJvcihuZXcgRXJyb3IoYER1cGxpY2F0ZSBhY3Rpb24gbmFtZSBkZXRlY3RlZC4gTmFtZXMgd2l0aGluIGEgc2NoZW1hIG11c3QgYmUgdW5pcXVlIGFjcm9zcyB0YWJsZXMsIGRlY2xhcmF0aW9ucywgYXNzZXJ0aW9ucywgYW5kIG9wZXJhdGlvbnM6XG4iJHtKU09OLnN0cmluZ2lmeShlLnRhcmdldCl9ImApLGUuZmlsZU5hbWUsZS50YXJnZXQpLHImJnRoaXMuY29tcGlsZUVycm9yKG5ldyBFcnJvcihgRHVwbGljYXRlIGNhbm9uaWNhbCB0YXJnZXQgZGV0ZWN0ZWQuIENhbm9uaWNhbCB0YXJnZXRzIG11c3QgYmUgdW5pcXVlIGFjcm9zcyB0YWJsZXMsIGRlY2xhcmF0aW9ucywgYXNzZXJ0aW9ucywgYW5kIG9wZXJhdGlvbnM6XG4iJHtKU09OLnN0cmluZ2lmeShlLmNhbm9uaWNhbFRhcmdldCl9ImApLGUuZmlsZU5hbWUsZS50YXJnZXQpLCF0JiYhcn07ZS50YWJsZXM9ZS50YWJsZXMuZmlsdGVyKGkpLGUub3BlcmF0aW9ucz1lLm9wZXJhdGlvbnMuZmlsdGVyKGkpLGUuZGVjbGFyYXRpb25zPWUuZGVjbGFyYXRpb25zLmZpbHRlcihpKSxlLmFzc2VydGlvbnM9ZS5hc3NlcnRpb25zLmZpbHRlcihpKSxlLm5vdGVib29rcz1lLm5vdGVib29rcy5maWx0ZXIoaSksZS5kYXRhUHJlcGFyYXRpb25zPWUuZGF0YVByZXBhcmF0aW9ucy5maWx0ZXIoaSl9fTtjbGFzcyBBe2NvbnN0cnVjdG9yKGUpe3RoaXMuYnlOYW1lPW5ldyBNYXAsdGhpcy5ieVNjaGVtYUFuZE5hbWU9bmV3IE1hcCx0aGlzLmJ5RGF0YWJhc2VBbmROYW1lPW5ldyBNYXAsdGhpcy5ieURhdGFiYXNlU2NoZW1hQW5kTmFtZT1uZXcgTWFwO2Zvcihjb25zdCB0IG9mIGUpdGhpcy5zZXQodC5nZXRUYXJnZXQoKSx0KX1zZXQoZSx0KXtpZih0aGlzLnNldEJ5TmFtZUxldmVsKHRoaXMuYnlOYW1lLGUubmFtZSx0KSxlLnNjaGVtYSYmdGhpcy5zZXRCeVNjaGVtYUxldmVsKHRoaXMuYnlTY2hlbWFBbmROYW1lLGUsdCksZS5kYXRhYmFzZSl7dGhpcy5ieURhdGFiYXNlQW5kTmFtZS5oYXMoZS5kYXRhYmFzZSl8fHRoaXMuYnlEYXRhYmFzZUFuZE5hbWUuc2V0KGUuZGF0YWJhc2UsbmV3IE1hcCk7Y29uc3Qgcj10aGlzLmJ5RGF0YWJhc2VBbmROYW1lLmdldChlLmRhdGFiYXNlKTtpZih0aGlzLnNldEJ5TmFtZUxldmVsKHIsZS5uYW1lLHQpLGUuc2NoZW1hKXt0aGlzLmJ5RGF0YWJhc2VTY2hlbWFBbmROYW1lLmhhcyhlLmRhdGFiYXNlKXx8dGhpcy5ieURhdGFiYXNlU2NoZW1hQW5kTmFtZS5zZXQoZS5kYXRhYmFzZSxuZXcgTWFwKTtjb25zdCByPXRoaXMuYnlEYXRhYmFzZVNjaGVtYUFuZE5hbWUuZ2V0KGUuZGF0YWJhc2UpO3RoaXMuc2V0QnlTY2hlbWFMZXZlbChyLGUsdCl9fX1maW5kKGUpe3ZhciB0LHIsbixvO3JldHVybiBlLmRhdGFiYXNlP2Uuc2NoZW1hPyhudWxsPT09KHI9bnVsbD09PSh0PXRoaXMuYnlEYXRhYmFzZVNjaGVtYUFuZE5hbWUuZ2V0KGUuZGF0YWJhc2UpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXQoZS5zY2hlbWEpKXx8dm9pZCAwPT09cj92b2lkIDA6ci5nZXQoZS5uYW1lKSl8fFtdOihudWxsPT09KG49dGhpcy5ieURhdGFiYXNlQW5kTmFtZS5nZXQoZS5kYXRhYmFzZSkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmdldChlLm5hbWUpKXx8W106ZS5zY2hlbWE/KG51bGw9PT0obz10aGlzLmJ5U2NoZW1hQW5kTmFtZS5nZXQoZS5zY2hlbWEpKXx8dm9pZCAwPT09bz92b2lkIDA6by5nZXQoZS5uYW1lKSl8fFtdOnRoaXMuYnlOYW1lLmdldChlLm5hbWUpfHxbXX1zZXRCeU5hbWVMZXZlbChlLHQscil7ZS5oYXModCl8fGUuc2V0KHQsW10pLGUuZ2V0KHQpLnB1c2gocil9c2V0QnlTY2hlbWFMZXZlbChlLHQscil7ZS5oYXModC5zY2hlbWEpfHxlLnNldCh0LnNjaGVtYSxuZXcgTWFwKTtjb25zdCBuPWUuZ2V0KHQuc2NoZW1hKTt0aGlzLnNldEJ5TmFtZUxldmVsKG4sdC5uYW1lLHIpfX19LDI3NDg6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbj1yKDMxODcpO3QudGFyZ2V0U3RyaW5naWZpZXI9bmV3IG4uSlNPTk9iamVjdFN0cmluZ2lmaWVyLHQudGFyZ2V0QXNSZWFkYWJsZVN0cmluZz1mdW5jdGlvbihlKXtjb25zdCB0PVtlLm5hbWUsZS5zY2hlbWFdO3JldHVybiBlLmRhdGFiYXNlJiZ0LnB1c2goZS5kYXRhYmFzZSksdC5yZXZlcnNlKCkuam9pbigiLiIpfX0sOTIxMTpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG89cig2MDE0KSxpPW4ocig2MjAzKSksYT1yKDg4NjkpO3QubmF0aXZlUmVxdWlyZT1yZXF1aXJlLHQubWF0Y2hQYXR0ZXJucz1mdW5jdGlvbihlLHQpe2NvbnN0IHI9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+e2lmKGUuaW5jbHVkZXMoIi4iKSl0LmluY2x1ZGVzKGUpJiZyLnB1c2goZSk7ZWxzZXtjb25zdCBuPXQuZmlsdGVyKCh0PT5lPT09dC5zcGxpdCgiLiIpLnNsaWNlKC0xKVswXSkpO2lmKDA9PT1uLmxlbmd0aClyZXR1cm47aWYobi5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IocChlLG4pKTtyLnB1c2goblswXSl9fSkpLHJ9LHQuZ2V0Q2FsbGVyRmlsZT1mdW5jdGlvbihlKXtsZXQgdDtjb25zdCByPWZ1bmN0aW9uKCl7Y29uc3QgZT1FcnJvci5zdGFja1RyYWNlTGltaXQsdD1FcnJvci5wcmVwYXJlU3RhY2tUcmFjZTt0cnl7cmV0dXJuIEVycm9yLnN0YWNrVHJhY2VMaW1pdD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U9KGUsdCk9PnQsKG5ldyBFcnJvcikuc3RhY2t9ZmluYWxseXtFcnJvci5zdGFja1RyYWNlTGltaXQ9ZSxFcnJvci5wcmVwYXJlU3RhY2tUcmFjZT10fX0oKTtmb3IoO3IubGVuZ3RoOyl7Y29uc3Qgbj1yLnNoaWZ0KCkuZ2V0RmlsZU5hbWUoKTtpZihuJiZuLmluY2x1ZGVzKGUpJiYhbi5pbmNsdWRlcygibm9kZV9tb2R1bGVzIikmJih0PW4sbi5pbmNsdWRlcyhgZGVmaW5pdGlvbnMke2kuc2VwYXJhdG9yfWApfHxuLmluY2x1ZGVzKGBtb2RlbHMke2kuc2VwYXJhdG9yfWApKSlicmVha31pZighdCl0aHJvdyBuZXcgRXJyb3IoIlVuYWJsZSB0byBmaW5kIHZhbGlkIGNhbGxlciBmaWxlOyBwbGVhc2UgcmVwb3J0IHRoaXMgaXNzdWUuIik7cmV0dXJuIGkucmVsYXRpdmVQYXRoKHQsZSl9LHQuZ3JhcGhIYXNFcnJvcnM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKG51bGw9PT0odD1lLmdyYXBoRXJyb3JzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb21waWxhdGlvbkVycm9ycy5sZW5ndGgpPjB9O2NvbnN0IHM9IkludmFsaWQgaW5wdXQuIEFjY2VwdGVkIGlucHV0cyBpbmNsdWRlOiBhIHNpbmdsZSBvYmplY3QgY29udGFpbmluZyBhbiAob3B0aW9uYWwpICdkYXRhYmFzZScsIChvcHRpb25hbCkgJ3NjaGVtYScsIGFuZCAnbmFtZScsIG9yIDEtMyBpbnB1dHMgY29uc2lzdGluZyBvZiBhbiAob3B0aW9uYWwpIGRhdGFiYXNlLCAob3B0aW9uYWwpIHNjaGVtYSwgYW5kICduYW1lJy4iO2Z1bmN0aW9uIGwoZSl7cmV0dXJuIWUuc29tZSgoZT0+InN0cmluZyIhPXR5cGVvZiBlKSkmJmUubGVuZ3RoPjAmJmUubGVuZ3RoPD0zfWZ1bmN0aW9uIGMoZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBhLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUoe25hbWU6ZX0pO2NvbnN0IHQ9ZTtyZXR1cm4gdCBpbnN0YW5jZW9mIGEuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldHx8dm9pZCAwIT09dC5kYXRhc2V0fHx2b2lkIDAhPT10LnByb2plY3Q/YS5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHtuYW1lOnQubmFtZSxzY2hlbWE6dC5kYXRhc2V0LGRhdGFiYXNlOnQucHJvamVjdCxpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9uczp0LmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zfSk6YS5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKGUpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP2U6SlNPTi5zdHJpbmdpZnkoZSl9ZnVuY3Rpb24gcChlLHQpe2NvbnN0IHI9InN0cmluZyI9PXR5cGVvZiB0WzBdP3Q6dC5tYXAoKGU9PmAke2UuZ2V0VGFyZ2V0KCkuc2NoZW1hfS4ke2UuZ2V0VGFyZ2V0KCkubmFtZX1gKSk7cmV0dXJuYEFtYmlndW91cyBBY3Rpb24gbmFtZTogJHt1KGUpfS4gRGlkIHlvdSBtZWFuIG9uZSBvZjogJHtyLmpvaW4oIiwgIil9LmB9ZnVuY3Rpb24gZChlLHQpe3N3aXRjaChlKXtjYXNlInRhYmxlIjpyZXR1cm4gYS5kYXRhZm9ybS5UYWJsZVR5cGUuVEFCTEU7Y2FzZSJpbmNyZW1lbnRhbCI6cmV0dXJuIGEuZGF0YWZvcm0uVGFibGVUeXBlLklOQ1JFTUVOVEFMO2Nhc2UidmlldyI6cmV0dXJuIGEuZGF0YWZvcm0uVGFibGVUeXBlLlZJRVc7ZGVmYXVsdDppZih0KXRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0YWJsZSB0eXBlOiAke2V9YCk7cmV0dXJuIGEuZGF0YWZvcm0uVGFibGVUeXBlLlVOS05PV05fVFlQRX19ZnVuY3Rpb24gZihlKXtyZXR1cm4gYS5kYXRhZm9ybS5UYWJsZVR5cGVbZV0udG9Mb3dlckNhc2UoKX10LnRvUmVzb2x2YWJsZT1mdW5jdGlvbihlLHQ9W10pe2lmKEFycmF5LmlzQXJyYXkoZSkmJnQubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKHMpO2lmKDA9PT10Lmxlbmd0aCYmIUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7Y29uc3Qgcj1BcnJheS5pc0FycmF5KGUpP2UucmV2ZXJzZSgpOltlLC4uLnRdLnJldmVyc2UoKTtpZighbChyKSl0aHJvdyBuZXcgRXJyb3Iocyk7Y29uc3RbbixvLGldPXI7cmV0dXJue2RhdGFiYXNlOmksc2NoZW1hOm8sbmFtZTpufX0sdC5yZXNvbHZhYmxlQXNUYXJnZXQ9Yyx0LnJlc29sdmFibGVBc0FjdGlvbkNvbmZpZ1RhcmdldD1mdW5jdGlvbihlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpe2NvbnN0IHQ9ZS5zcGxpdCgiLiIpLnJldmVyc2UoKTtpZighbCh0KSl0aHJvdyBuZXcgRXJyb3Iocyk7Y29uc3RbcixuLG9dPXQ7cmV0dXJue25hbWU6cixkYXRhc2V0Om4scHJvamVjdDpvfX1yZXR1cm4gZX0sdC5zdHJpbmdpZnlSZXNvbHZhYmxlPXUsdC5hbWJpZ3VvdXNBY3Rpb25OYW1lTXNnPXAsdC50YXJnZXQ9ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIGEuZGF0YWZvcm0uVGFyZ2V0LmNyZWF0ZSh7bmFtZTp0LHNjaGVtYTpyfHxlLmRlZmF1bHRTY2hlbWF8fHZvaWQgMCxkYXRhYmFzZTpufHxlLmRlZmF1bHREYXRhYmFzZXx8dm9pZCAwfSl9LHQuc3RyaWN0S2V5c09mPWZ1bmN0aW9uKCl7cmV0dXJuIGU9PmV9LHQuY2hlY2tFeGNlc3NQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCxyLG4pe2NvbnN0IG89T2JqZWN0LmtleXModCkuZmlsdGVyKChlPT4hci5pbmNsdWRlcyhlKSkpO28ubGVuZ3RoPjAmJmUobmV3IEVycm9yKGBVbmV4cGVjdGVkIHByb3BlcnR5ICIke29bMF19IiR7bj9gIGluICR7bn1gOiIifS4gU3VwcG9ydGVkIHByb3BlcnRpZXMgYXJlOiAke0pTT04uc3RyaW5naWZ5KHIpfWApKX0sdC52YWxpZGF0ZVF1ZXJ5U3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXsiOyI9PT0obnVsbD09dD92b2lkIDA6dC50cmltKCkuc2xpY2UoLTEpKSYmZS5jb21waWxlRXJyb3IobmV3IEVycm9yKCJTZW1pLWNvbG9ucyBhcmUgbm90IGFsbG93ZWQgYXQgdGhlIGVuZCBvZiBTUUwgc3RhdGVtZW50cy4iKSxyKX0sdC50YWJsZVR5cGVTdHJpbmdUb0VudW09ZCx0LnRhYmxlVHlwZUVudW1Ub1N0cmluZz1mLHQuc2V0T3JWYWxpZGF0ZVRhYmxlRW51bVR5cGU9ZnVuY3Rpb24oZSl7bGV0IHQ9bnVsbDtpZigiIiE9PWUudHlwZSYmdm9pZCAwIT09ZS50eXBlJiYodD1kKGUudHlwZSwhMCkpLGUuZW51bVR5cGU9PT1hLmRhdGFmb3JtLlRhYmxlVHlwZS5VTktOT1dOX1RZUEV8fHZvaWQgMD09PWUuZW51bVR5cGUpZS5lbnVtVHlwZT10O2Vsc2UgaWYobnVsbCE9PXQmJmUuZW51bVR5cGUhPT10KXRocm93IG5ldyBFcnJvcihgVGFibGUgc3RyIHR5cGUgIiR7ZS50eXBlfSIgYW5kIGVudW1UeXBlICIke2YoZS5lbnVtVHlwZSl9IiBhcmUgbm90IGVxdWl2YWxlbnQuYCl9LHQuZXh0cmFjdEFjdGlvbkRldGFpbHNGcm9tRmlsZU5hbWU9ZnVuY3Rpb24oZSl7Y29uc3QgdD1pLmJhc2VuYW1lKGUpO3JldHVybntmaWxlRXh0ZW5zaW9uOmkuZmlsZUV4dGVuc2lvbihlKSxmaWxlTmFtZUFzVGFyZ2V0TmFtZTp0fX0sdC5jb25maWdUYXJnZXRUb0NvbXBpbGVkR3JhcGhUYXJnZXQ9ZnVuY3Rpb24oZSl7Y29uc3QgdD17bmFtZTplLm5hbWV9O3JldHVybiBlLnByb2plY3QmJih0LmRhdGFiYXNlPWUucHJvamVjdCksZS5kYXRhc2V0JiYodC5zY2hlbWE9ZS5kYXRhc2V0KSxlLmhhc093blByb3BlcnR5KCJpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyIpJiYodC5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz1lLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zKSxhLmRhdGFmb3JtLlRhcmdldC5jcmVhdGUodCl9LHQuYWN0aW9uQ29uZmlnVG9Db21waWxlZEdyYXBoVGFyZ2V0PWZ1bmN0aW9uKGUpe2NvbnN0IHQ9YS5kYXRhZm9ybS5UYXJnZXQuY3JlYXRlKHtuYW1lOmUubmFtZX0pO3JldHVybiJwcm9qZWN0ImluIGUmJnZvaWQgMCE9PWUucHJvamVjdCYmKHQuZGF0YWJhc2U9ZS5wcm9qZWN0KSwibG9jYXRpb24iaW4gZSYmdm9pZCAwIT09ZS5sb2NhdGlvbiYmKHQuc2NoZW1hPWUubG9jYXRpb24pLCJkYXRhc2V0ImluIGUmJnZvaWQgMCE9PWUuZGF0YXNldCYmKHQuc2NoZW1hPWUuZGF0YXNldCksdH0sdC5yZXNvbHZlQWN0aW9uc0NvbmZpZ0ZpbGVuYW1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkubm9ybWFsaXplKGkuam9pbihpLmRpck5hbWUodCksZSkpfSx0LmNoZWNrQXNzZXJ0aW9uc0ZvckRlcGVuZGVuY3k9ZnVuY3Rpb24oZSx0KXtjb25zdCByPWModCk7ci5oYXNPd25Qcm9wZXJ0eSgiaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMiKXx8ZSBpbnN0YW5jZW9mIG8uRGF0YVByZXBhcmF0aW9ufHwoci5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpO2NvbnN0IG49ZS5zZXNzaW9uLmNvbXBpbGF0aW9uU3FsKCkucmVzb2x2ZVRhcmdldChyKTtpZighZS5pbmNsdWRlQXNzZXJ0aW9uc0ZvckRlcGVuZGVuY3kuaGFzKG4pfHxlLmluY2x1ZGVBc3NlcnRpb25zRm9yRGVwZW5kZW5jeS5nZXQobik9PT1yLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zKXJldHVybiBlLmluY2x1ZGVBc3NlcnRpb25zRm9yRGVwZW5kZW5jeS5zZXQobixyLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zKSxyO2Uuc2Vzc2lvbi5jb21waWxlRXJyb3IoYENvbmZsaWN0aW5nICJpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyIgcHJvcGVydGllcyBhcmUgbm90IGFsbG93ZWQuIERlcGVuZGVuY3kgJHtyLm5hbWV9IGhhcyBkaWZmZXJlbnQgdmFsdWVzIHNldCBmb3IgdGhpcyBwcm9wZXJ0eS5gLGUuZ2V0RmlsZU5hbWUoKSxlLmdldFRhcmdldCgpKX19LDI4OTQ6KGUsdCk9PnsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQudmVyc2lvbj0iMy4wLjIwIn0sNDU5NzooZSx0LHIpPT57InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBuPXIoNzIxMCksbz1yKDgxNDIpLGk9cig4NTU2KSxhPXIoMjg5NCkscz1yKDg4NjkpLGw9cmVxdWlyZTtmdW5jdGlvbiBjKGUpe3ZhciB0O3RyeXtyZXR1cm4gbChlKX1jYXRjaChlKXtpZihlIGluc3RhbmNlb2YgU3ludGF4RXJyb3J8fGUgaW5zdGFuY2VvZiBuLllBTUxFeGNlcHRpb24pdGhyb3cgZTtpZihudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pbmNsdWRlcyhpLklOVkFMSURfWUFNTF9FUlJPUl9TVFJJTkcpKXRocm93IGU7cmV0dXJufX1mdW5jdGlvbiB1KGUpe2NvbnN0IHQ9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmNyZWF0ZSgpO3JldHVybiBlLmRlZmF1bHRQcm9qZWN0JiYodC5kZWZhdWx0RGF0YWJhc2U9ZS5kZWZhdWx0UHJvamVjdCksZS5kZWZhdWx0RGF0YXNldCYmKHQuZGVmYXVsdFNjaGVtYT1lLmRlZmF1bHREYXRhc2V0KSxlLmRlZmF1bHRMb2NhdGlvbiYmKHQuZGVmYXVsdExvY2F0aW9uPWUuZGVmYXVsdExvY2F0aW9uKSxlLmRlZmF1bHRBc3NlcnRpb25EYXRhc2V0JiYodC5hc3NlcnRpb25TY2hlbWE9ZS5kZWZhdWx0QXNzZXJ0aW9uRGF0YXNldCksZS52YXJzJiYodC52YXJzPWUudmFycyksZS5wcm9qZWN0U3VmZml4JiYodC5kYXRhYmFzZVN1ZmZpeD1lLnByb2plY3RTdWZmaXgpLGUuZGF0YXNldFN1ZmZpeCYmKHQuc2NoZW1hU3VmZml4PWUuZGF0YXNldFN1ZmZpeCksZS5uYW1lUHJlZml4JiYodC50YWJsZVByZWZpeD1lLm5hbWVQcmVmaXgpLGUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgmJih0LmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4PWUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgpLGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMmJih0LmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zPXt9LGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMub3V0cHV0QnVja2V0JiYodC5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucy5vdXRwdXRCdWNrZXQ9ZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucy5vdXRwdXRCdWNrZXQpLGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMucnVudGltZVRlbXBsYXRlTmFtZSYmKHQuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMucnVudGltZVRlbXBsYXRlTmFtZT1lLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLnJ1bnRpbWVUZW1wbGF0ZU5hbWUpKSx0LndhcmVob3VzZT0iYmlncXVlcnkiLHR9dC5yZWFkV29ya2Zsb3dTZXR0aW5ncz1mdW5jdGlvbigpe2NvbnN0IGU9Yygid29ya2Zsb3dfc2V0dGluZ3MueWFtbCIpLHQ9YygiZGF0YWZvcm0uanNvbiIpO2lmKGUmJnQpdGhyb3cgRXJyb3IoImRhdGFmb3JtLmpzb24gaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgY2Fubm90IGJlIGRlZmluZWQgYWxvbmdzaWRlIHdvcmtmbG93X3NldHRpbmdzLnlhbWwiKTtpZihlKXtjb25zdCB0PWUuYXNKc29uO2lmKCF0KXRocm93IEVycm9yKCJ3b3JrZmxvd19zZXR0aW5ncy55YW1sIGlzIGludmFsaWQiKTtyZXR1cm4gdShmdW5jdGlvbihlKXtsZXQgdD1zLmRhdGFmb3JtLldvcmtmbG93U2V0dGluZ3MuY3JlYXRlKCk7dHJ5e3Q9cy5kYXRhZm9ybS5Xb3JrZmxvd1NldHRpbmdzLmNyZWF0ZShvLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byhzLmRhdGFmb3JtLldvcmtmbG93U2V0dGluZ3MsZSxvLlZlcmlmeVByb3RvRXJyb3JCZWhhdmlvdXIuU0hPV19ET0NTX0xJTkspKX1jYXRjaChlKXtpZihlIGluc3RhbmNlb2YgUmVmZXJlbmNlRXJyb3IpdGhyb3cgUmVmZXJlbmNlRXJyb3IoYFdvcmtmbG93IHNldHRpbmdzIGVycm9yOiAke2UubWVzc2FnZX1gKTt0aHJvdyBlfWlmKHQuZGF0YWZvcm1Db3JlVmVyc2lvbiYmdC5kYXRhZm9ybUNvcmVWZXJzaW9uIT09YS52ZXJzaW9uKXRocm93IEVycm9yKGBWZXJzaW9uIG1pc21hdGNoOiB3b3JrZmxvdyBzZXR0aW5ncyBzcGVjaWZpZXMgdmVyc2lvbiAke3QuZGF0YWZvcm1Db3JlVmVyc2lvbn0sIGJ1dCAke2EudmVyc2lvbn0gd2FzIGZvdW5kYCk7cmV0dXJuIHR9KHQpKX1pZih0KXRyeXtyZXR1cm4gcy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmNyZWF0ZShvLnZlcmlmeU9iamVjdE1hdGNoZXNQcm90byhzLmRhdGFmb3JtLlByb2plY3RDb25maWcsdCkpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvcil0aHJvdyBSZWZlcmVuY2VFcnJvcihgRGF0YWZvcm0ganNvbiBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7dGhyb3cgZX10aHJvdyBFcnJvcigiRmFpbGVkIHRvIHJlc29sdmUgd29ya2Zsb3dfc2V0dGluZ3MueWFtbCIpfSx0LndvcmtmbG93U2V0dGluZ3NBc1Byb2plY3RDb25maWc9dX0sODg2OTpmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpO289W3IoNDU2NSldLHZvaWQgMD09PShpPSJmdW5jdGlvbiI9PXR5cGVvZihuPWZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdCxyLG4sbz1lLlJlYWRlcixpPWUuV3JpdGVyLGE9ZS51dGlsLHM9ZS5yb290cy5kZWZhdWx0fHwoZS5yb290cy5kZWZhdWx0PXt9KTtyZXR1cm4gcy5kYXRhZm9ybT0oKG49e30pLldvcmtmbG93U2V0dGluZ3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMudmFycz17fSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLmRhdGFmb3JtQ29yZVZlcnNpb249IiIsdC5wcm90b3R5cGUuZGVmYXVsdFByb2plY3Q9IiIsdC5wcm90b3R5cGUuZGVmYXVsdERhdGFzZXQ9IiIsdC5wcm90b3R5cGUuZGVmYXVsdExvY2F0aW9uPSIiLHQucHJvdG90eXBlLmRlZmF1bHRBc3NlcnRpb25EYXRhc2V0PSIiLHQucHJvdG90eXBlLnZhcnM9YS5lbXB0eU9iamVjdCx0LnByb3RvdHlwZS5wcm9qZWN0U3VmZml4PSIiLHQucHJvdG90eXBlLmRhdGFzZXRTdWZmaXg9IiIsdC5wcm90b3R5cGUubmFtZVByZWZpeD0iIix0LnByb3RvdHlwZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz1udWxsLHQucHJvdG90eXBlLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4PSIiLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLmRhdGFmb3JtQ29yZVZlcnNpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRhdGFmb3JtQ29yZVZlcnNpb24iKSYmdC51aW50MzIoMTApLnN0cmluZyhlLmRhdGFmb3JtQ29yZVZlcnNpb24pLG51bGwhPWUuZGVmYXVsdFByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHRQcm9qZWN0IikmJnQudWludDMyKDE4KS5zdHJpbmcoZS5kZWZhdWx0UHJvamVjdCksbnVsbCE9ZS5kZWZhdWx0RGF0YXNldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdERhdGFzZXQiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLmRlZmF1bHREYXRhc2V0KSxudWxsIT1lLmRlZmF1bHRMb2NhdGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdExvY2F0aW9uIikmJnQudWludDMyKDM0KS5zdHJpbmcoZS5kZWZhdWx0TG9jYXRpb24pLG51bGwhPWUuZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHRBc3NlcnRpb25EYXRhc2V0IikmJnQudWludDMyKDQyKS5zdHJpbmcoZS5kZWZhdWx0QXNzZXJ0aW9uRGF0YXNldCksbnVsbCE9ZS52YXJzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ2YXJzIikpZm9yKHZhciByPU9iamVjdC5rZXlzKGUudmFycyksbj0wO248ci5sZW5ndGg7KytuKXQudWludDMyKDUwKS5mb3JrKCkudWludDMyKDEwKS5zdHJpbmcocltuXSkudWludDMyKDE4KS5zdHJpbmcoZS52YXJzW3Jbbl1dKS5sZGVsaW0oKTtyZXR1cm4gbnVsbCE9ZS5wcm9qZWN0U3VmZml4JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJwcm9qZWN0U3VmZml4IikmJnQudWludDMyKDU4KS5zdHJpbmcoZS5wcm9qZWN0U3VmZml4KSxudWxsIT1lLmRhdGFzZXRTdWZmaXgmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRhdGFzZXRTdWZmaXgiKSYmdC51aW50MzIoNjYpLnN0cmluZyhlLmRhdGFzZXRTdWZmaXgpLG51bGwhPWUubmFtZVByZWZpeCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibmFtZVByZWZpeCIpJiZ0LnVpbnQzMig3NCkuc3RyaW5nKGUubmFtZVByZWZpeCksbnVsbCE9ZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMiKSYmcy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnLmVuY29kZShlLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLHQudWludDMyKDgyKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4IikmJnQudWludDMyKDkwKS5zdHJpbmcoZS5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcixuLGk9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGw9bmV3IHMuZGF0YWZvcm0uV29ya2Zsb3dTZXR0aW5ncztlLnBvczxpOyl7dmFyIGM9ZS51aW50MzIoKTtzd2l0Y2goYz4+PjMpe2Nhc2UgMTpsLmRhdGFmb3JtQ29yZVZlcnNpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bC5kZWZhdWx0UHJvamVjdD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzpsLmRlZmF1bHREYXRhc2V0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0OmwuZGVmYXVsdExvY2F0aW9uPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA1OmwuZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ9ZS5zdHJpbmcoKTticmVhaztjYXNlIDY6bC52YXJzPT09YS5lbXB0eU9iamVjdCYmKGwudmFycz17fSk7dmFyIHU9ZS51aW50MzIoKStlLnBvcztmb3Iocj0iIixuPSIiO2UucG9zPHU7KXt2YXIgcD1lLnVpbnQzMigpO3N3aXRjaChwPj4+Myl7Y2FzZSAxOnI9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bj1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JnApfX1sLnZhcnNbcl09bjticmVhaztjYXNlIDc6bC5wcm9qZWN0U3VmZml4PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA4OmwuZGF0YXNldFN1ZmZpeD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgOTpsLm5hbWVQcmVmaXg9ZS5zdHJpbmcoKTticmVhaztjYXNlIDEwOmwuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnM9cy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMTE6bC5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeD1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmMpfX1yZXR1cm4gbH0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLmRhdGFmb3JtQ29yZVZlcnNpb24mJmUuaGFzT3duUHJvcGVydHkoImRhdGFmb3JtQ29yZVZlcnNpb24iKSYmIWEuaXNTdHJpbmcoZS5kYXRhZm9ybUNvcmVWZXJzaW9uKSlyZXR1cm4iZGF0YWZvcm1Db3JlVmVyc2lvbjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlZmF1bHRQcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJkZWZhdWx0UHJvamVjdCIpJiYhYS5pc1N0cmluZyhlLmRlZmF1bHRQcm9qZWN0KSlyZXR1cm4iZGVmYXVsdFByb2plY3Q6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kZWZhdWx0RGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdERhdGFzZXQiKSYmIWEuaXNTdHJpbmcoZS5kZWZhdWx0RGF0YXNldCkpcmV0dXJuImRlZmF1bHREYXRhc2V0OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGVmYXVsdExvY2F0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZWZhdWx0TG9jYXRpb24iKSYmIWEuaXNTdHJpbmcoZS5kZWZhdWx0TG9jYXRpb24pKXJldHVybiJkZWZhdWx0TG9jYXRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kZWZhdWx0QXNzZXJ0aW9uRGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQiKSYmIWEuaXNTdHJpbmcoZS5kZWZhdWx0QXNzZXJ0aW9uRGF0YXNldCkpcmV0dXJuImRlZmF1bHRBc3NlcnRpb25EYXRhc2V0OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUudmFycyYmZS5oYXNPd25Qcm9wZXJ0eSgidmFycyIpKXtpZighYS5pc09iamVjdChlLnZhcnMpKXJldHVybiJ2YXJzOiBvYmplY3QgZXhwZWN0ZWQiO2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlLnZhcnMpLHI9MDtyPHQubGVuZ3RoOysrcilpZighYS5pc1N0cmluZyhlLnZhcnNbdFtyXV0pKXJldHVybiJ2YXJzOiBzdHJpbmd7azpzdHJpbmd9IGV4cGVjdGVkIn1pZihudWxsIT1lLnByb2plY3RTdWZmaXgmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3RTdWZmaXgiKSYmIWEuaXNTdHJpbmcoZS5wcm9qZWN0U3VmZml4KSlyZXR1cm4icHJvamVjdFN1ZmZpeDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRhdGFzZXRTdWZmaXgmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXRTdWZmaXgiKSYmIWEuaXNTdHJpbmcoZS5kYXRhc2V0U3VmZml4KSlyZXR1cm4iZGF0YXNldFN1ZmZpeDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLm5hbWVQcmVmaXgmJmUuaGFzT3duUHJvcGVydHkoIm5hbWVQcmVmaXgiKSYmIWEuaXNTdHJpbmcoZS5uYW1lUHJlZml4KSlyZXR1cm4ibmFtZVByZWZpeDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyIpKXt2YXIgbj1zLmRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcudmVyaWZ5KGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMpO2lmKG4pcmV0dXJuImRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLiIrbn1yZXR1cm4gbnVsbCE9ZS5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCYmZS5oYXNPd25Qcm9wZXJ0eSgiYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgiKSYmIWEuaXNTdHJpbmcoZS5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCk/ImJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4OiBzdHJpbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5Xb3JrZmxvd1NldHRpbmdzKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLldvcmtmbG93U2V0dGluZ3M7aWYobnVsbCE9ZS5kYXRhZm9ybUNvcmVWZXJzaW9uJiYodC5kYXRhZm9ybUNvcmVWZXJzaW9uPVN0cmluZyhlLmRhdGFmb3JtQ29yZVZlcnNpb24pKSxudWxsIT1lLmRlZmF1bHRQcm9qZWN0JiYodC5kZWZhdWx0UHJvamVjdD1TdHJpbmcoZS5kZWZhdWx0UHJvamVjdCkpLG51bGwhPWUuZGVmYXVsdERhdGFzZXQmJih0LmRlZmF1bHREYXRhc2V0PVN0cmluZyhlLmRlZmF1bHREYXRhc2V0KSksbnVsbCE9ZS5kZWZhdWx0TG9jYXRpb24mJih0LmRlZmF1bHRMb2NhdGlvbj1TdHJpbmcoZS5kZWZhdWx0TG9jYXRpb24pKSxudWxsIT1lLmRlZmF1bHRBc3NlcnRpb25EYXRhc2V0JiYodC5kZWZhdWx0QXNzZXJ0aW9uRGF0YXNldD1TdHJpbmcoZS5kZWZhdWx0QXNzZXJ0aW9uRGF0YXNldCkpLGUudmFycyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnZhcnMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uV29ya2Zsb3dTZXR0aW5ncy52YXJzOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnZhcnM9e307Zm9yKHZhciByPU9iamVjdC5rZXlzKGUudmFycyksbj0wO248ci5sZW5ndGg7KytuKXQudmFyc1tyW25dXT1TdHJpbmcoZS52YXJzW3Jbbl1dKX1pZihudWxsIT1lLnByb2plY3RTdWZmaXgmJih0LnByb2plY3RTdWZmaXg9U3RyaW5nKGUucHJvamVjdFN1ZmZpeCkpLG51bGwhPWUuZGF0YXNldFN1ZmZpeCYmKHQuZGF0YXNldFN1ZmZpeD1TdHJpbmcoZS5kYXRhc2V0U3VmZml4KSksbnVsbCE9ZS5uYW1lUHJlZml4JiYodC5uYW1lUHJlZml4PVN0cmluZyhlLm5hbWVQcmVmaXgpKSxudWxsIT1lLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uV29ya2Zsb3dTZXR0aW5ncy5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9uczogb2JqZWN0IGV4cGVjdGVkIik7dC5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz1zLmRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcuZnJvbU9iamVjdChlLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zKX1yZXR1cm4gbnVsbCE9ZS5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCYmKHQuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXg9U3RyaW5nKGUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByLG49e307aWYoKHQub2JqZWN0c3x8dC5kZWZhdWx0cykmJihuLnZhcnM9e30pLHQuZGVmYXVsdHMmJihuLmRhdGFmb3JtQ29yZVZlcnNpb249IiIsbi5kZWZhdWx0UHJvamVjdD0iIixuLmRlZmF1bHREYXRhc2V0PSIiLG4uZGVmYXVsdExvY2F0aW9uPSIiLG4uZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ9IiIsbi5wcm9qZWN0U3VmZml4PSIiLG4uZGF0YXNldFN1ZmZpeD0iIixuLm5hbWVQcmVmaXg9IiIsbi5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz1udWxsLG4uYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXg9IiIpLG51bGwhPWUuZGF0YWZvcm1Db3JlVmVyc2lvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YWZvcm1Db3JlVmVyc2lvbiIpJiYobi5kYXRhZm9ybUNvcmVWZXJzaW9uPWUuZGF0YWZvcm1Db3JlVmVyc2lvbiksbnVsbCE9ZS5kZWZhdWx0UHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdFByb2plY3QiKSYmKG4uZGVmYXVsdFByb2plY3Q9ZS5kZWZhdWx0UHJvamVjdCksbnVsbCE9ZS5kZWZhdWx0RGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdERhdGFzZXQiKSYmKG4uZGVmYXVsdERhdGFzZXQ9ZS5kZWZhdWx0RGF0YXNldCksbnVsbCE9ZS5kZWZhdWx0TG9jYXRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlZmF1bHRMb2NhdGlvbiIpJiYobi5kZWZhdWx0TG9jYXRpb249ZS5kZWZhdWx0TG9jYXRpb24pLG51bGwhPWUuZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRlZmF1bHRBc3NlcnRpb25EYXRhc2V0IikmJihuLmRlZmF1bHRBc3NlcnRpb25EYXRhc2V0PWUuZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQpLGUudmFycyYmKHI9T2JqZWN0LmtleXMoZS52YXJzKSkubGVuZ3RoKXtuLnZhcnM9e307Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDsrK28pbi52YXJzW3Jbb11dPWUudmFyc1tyW29dXX1yZXR1cm4gbnVsbCE9ZS5wcm9qZWN0U3VmZml4JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0U3VmZml4IikmJihuLnByb2plY3RTdWZmaXg9ZS5wcm9qZWN0U3VmZml4KSxudWxsIT1lLmRhdGFzZXRTdWZmaXgmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXRTdWZmaXgiKSYmKG4uZGF0YXNldFN1ZmZpeD1lLmRhdGFzZXRTdWZmaXgpLG51bGwhPWUubmFtZVByZWZpeCYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZVByZWZpeCIpJiYobi5uYW1lUHJlZml4PWUubmFtZVByZWZpeCksbnVsbCE9ZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMiKSYmKG4uZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnM9cy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnLnRvT2JqZWN0KGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMsdCkpLG51bGwhPWUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgmJmUuaGFzT3duUHJvcGVydHkoImJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4IikmJihuLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4PWUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgpLG59LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLldvcmtmbG93U2V0dGluZ3MifSx0fSgpLG4uQWN0aW9uQ29uZmlncz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5hY3Rpb25zPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUuYWN0aW9ucz1hLmVtcHR5QXJyYXksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUuYWN0aW9ucyYmZS5hY3Rpb25zLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuYWN0aW9ucy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLmVuY29kZShlLmFjdGlvbnNbcl0sdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7cmV0dXJuIHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlncztlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtpPj4+Mz09MT8obi5hY3Rpb25zJiZuLmFjdGlvbnMubGVuZ3RofHwobi5hY3Rpb25zPVtdKSxuLmFjdGlvbnMucHVzaChzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5kZWNvZGUoZSxlLnVpbnQzMigpKSkpOmUuc2tpcFR5cGUoNyZpKX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLmFjdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5hY3Rpb25zKSlyZXR1cm4iYWN0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS5hY3Rpb25zLmxlbmd0aDsrK3Qpe3ZhciByPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLnZlcmlmeShlLmFjdGlvbnNbdF0pO2lmKHIpcmV0dXJuImFjdGlvbnMuIityfX1yZXR1cm4gbnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZ3MpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlncztpZihlLmFjdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUuYWN0aW9ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlncy5hY3Rpb25zOiBhcnJheSBleHBlY3RlZCIpO3QuYWN0aW9ucz1bXTtmb3IodmFyIHI9MDtyPGUuYWN0aW9ucy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYWN0aW9uc1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWdzLmFjdGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO3QuYWN0aW9uc1tyXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5mcm9tT2JqZWN0KGUuYWN0aW9uc1tyXSl9fXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLmFjdGlvbnM9W10pLGUuYWN0aW9ucyYmZS5hY3Rpb25zLmxlbmd0aCl7ci5hY3Rpb25zPVtdO2Zvcih2YXIgbj0wO248ZS5hY3Rpb25zLmxlbmd0aDsrK24pci5hY3Rpb25zW25dPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLnRvT2JqZWN0KGUuYWN0aW9uc1tuXSx0KX1yZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlncyJ9LHR9KCksbi5BY3Rpb25Db25maWc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX12YXIgcixuLGw7cmV0dXJuIHQucHJvdG90eXBlLnRhYmxlPW51bGwsdC5wcm90b3R5cGUudmlldz1udWxsLHQucHJvdG90eXBlLmluY3JlbWVudGFsVGFibGU9bnVsbCx0LnByb3RvdHlwZS5hc3NlcnRpb249bnVsbCx0LnByb3RvdHlwZS5vcGVyYXRpb249bnVsbCx0LnByb3RvdHlwZS5kZWNsYXJhdGlvbj1udWxsLHQucHJvdG90eXBlLm5vdGVib29rPW51bGwsdC5wcm90b3R5cGUuZGF0YVByZXBhcmF0aW9uPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJhY3Rpb24iLHtnZXQ6YS5vbmVPZkdldHRlcihyPVsidGFibGUiLCJ2aWV3IiwiaW5jcmVtZW50YWxUYWJsZSIsImFzc2VydGlvbiIsIm9wZXJhdGlvbiIsImRlY2xhcmF0aW9uIiwibm90ZWJvb2siLCJkYXRhUHJlcGFyYXRpb24iXSksc2V0OmEub25lT2ZTZXR0ZXIocil9KSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudGFibGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRhYmxlIikmJnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLmVuY29kZShlLnRhYmxlLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUudmlldyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidmlldyIpJiZzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnLmVuY29kZShlLnZpZXcsdC51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5pbmNyZW1lbnRhbFRhYmxlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJpbmNyZW1lbnRhbFRhYmxlIikmJnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcuZW5jb2RlKGUuaW5jcmVtZW50YWxUYWJsZSx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmFzc2VydGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYXNzZXJ0aW9uIikmJnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZy5lbmNvZGUoZS5hc3NlcnRpb24sdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5vcGVyYXRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm9wZXJhdGlvbiIpJiZzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcuZW5jb2RlKGUub3BlcmF0aW9uLHQudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuZGVjbGFyYXRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlY2xhcmF0aW9uIikmJnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnLmVuY29kZShlLmRlY2xhcmF0aW9uLHQudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUubm90ZWJvb2smJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm5vdGVib29rIikmJnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnLmVuY29kZShlLm5vdGVib29rLHQudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuZGF0YVByZXBhcmF0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhUHJlcGFyYXRpb24iKSYmcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLmVuY29kZShlLmRhdGFQcmVwYXJhdGlvbix0LnVpbnQzMig2NikuZm9yaygpKS5sZGVsaW0oKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZztlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLnRhYmxlPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMjpuLnZpZXc9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDM6bi5pbmNyZW1lbnRhbFRhYmxlPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA0Om4uYXNzZXJ0aW9uPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDU6bi5vcGVyYXRpb249cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgNjpuLmRlY2xhcmF0aW9uPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgNzpuLm5vdGVib29rPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgODpuLmRhdGFQcmVwYXJhdGlvbj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO3ZhciB0PXt9O2lmKG51bGwhPWUudGFibGUmJmUuaGFzT3duUHJvcGVydHkoInRhYmxlIikmJih0LmFjdGlvbj0xLHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcudmVyaWZ5KGUudGFibGUpKSlyZXR1cm4idGFibGUuIityO2lmKG51bGwhPWUudmlldyYmZS5oYXNPd25Qcm9wZXJ0eSgidmlldyIpKXtpZigxPT09dC5hY3Rpb24pcmV0dXJuImFjdGlvbjogbXVsdGlwbGUgdmFsdWVzIjtpZih0LmFjdGlvbj0xLHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy52ZXJpZnkoZS52aWV3KSlyZXR1cm4idmlldy4iK3J9aWYobnVsbCE9ZS5pbmNyZW1lbnRhbFRhYmxlJiZlLmhhc093blByb3BlcnR5KCJpbmNyZW1lbnRhbFRhYmxlIikpe2lmKDE9PT10LmFjdGlvbilyZXR1cm4iYWN0aW9uOiBtdWx0aXBsZSB2YWx1ZXMiO2lmKHQuYWN0aW9uPTEscj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLnZlcmlmeShlLmluY3JlbWVudGFsVGFibGUpKXJldHVybiJpbmNyZW1lbnRhbFRhYmxlLiIrcn1pZihudWxsIT1lLmFzc2VydGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIikpe2lmKDE9PT10LmFjdGlvbilyZXR1cm4iYWN0aW9uOiBtdWx0aXBsZSB2YWx1ZXMiO2lmKHQuYWN0aW9uPTEscj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcudmVyaWZ5KGUuYXNzZXJ0aW9uKSlyZXR1cm4iYXNzZXJ0aW9uLiIrcn1pZihudWxsIT1lLm9wZXJhdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgib3BlcmF0aW9uIikpe2lmKDE9PT10LmFjdGlvbilyZXR1cm4iYWN0aW9uOiBtdWx0aXBsZSB2YWx1ZXMiO2lmKHQuYWN0aW9uPTEscj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcudmVyaWZ5KGUub3BlcmF0aW9uKSlyZXR1cm4ib3BlcmF0aW9uLiIrcn1pZihudWxsIT1lLmRlY2xhcmF0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZWNsYXJhdGlvbiIpKXtpZigxPT09dC5hY3Rpb24pcmV0dXJuImFjdGlvbjogbXVsdGlwbGUgdmFsdWVzIjtpZih0LmFjdGlvbj0xLHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGVjbGFyYXRpb25Db25maWcudmVyaWZ5KGUuZGVjbGFyYXRpb24pKXJldHVybiJkZWNsYXJhdGlvbi4iK3J9aWYobnVsbCE9ZS5ub3RlYm9vayYmZS5oYXNPd25Qcm9wZXJ0eSgibm90ZWJvb2siKSl7aWYoMT09PXQuYWN0aW9uKXJldHVybiJhY3Rpb246IG11bHRpcGxlIHZhbHVlcyI7aWYodC5hY3Rpb249MSxyPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnLnZlcmlmeShlLm5vdGVib29rKSlyZXR1cm4ibm90ZWJvb2suIityfWlmKG51bGwhPWUuZGF0YVByZXBhcmF0aW9uJiZlLmhhc093blByb3BlcnR5KCJkYXRhUHJlcGFyYXRpb24iKSl7aWYoMT09PXQuYWN0aW9uKXJldHVybiJhY3Rpb246IG11bHRpcGxlIHZhbHVlcyI7dmFyIHI7aWYodC5hY3Rpb249MSxyPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy52ZXJpZnkoZS5kYXRhUHJlcGFyYXRpb24pKXJldHVybiJkYXRhUHJlcGFyYXRpb24uIityfXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZztpZihudWxsIT1lLnRhYmxlKXtpZigib2JqZWN0IiE9dHlwZW9mIGUudGFibGUpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLnRhYmxlOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnRhYmxlPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLmZyb21PYmplY3QoZS50YWJsZSl9aWYobnVsbCE9ZS52aWV3KXtpZigib2JqZWN0IiE9dHlwZW9mIGUudmlldyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcudmlldzogb2JqZWN0IGV4cGVjdGVkIik7dC52aWV3PXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcuZnJvbU9iamVjdChlLnZpZXcpfWlmKG51bGwhPWUuaW5jcmVtZW50YWxUYWJsZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmluY3JlbWVudGFsVGFibGUpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLmluY3JlbWVudGFsVGFibGU6IG9iamVjdCBleHBlY3RlZCIpO3QuaW5jcmVtZW50YWxUYWJsZT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLmZyb21PYmplY3QoZS5pbmNyZW1lbnRhbFRhYmxlKX1pZihudWxsIT1lLmFzc2VydGlvbil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmFzc2VydGlvbil0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuYXNzZXJ0aW9uOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFzc2VydGlvbj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcuZnJvbU9iamVjdChlLmFzc2VydGlvbil9aWYobnVsbCE9ZS5vcGVyYXRpb24pe2lmKCJvYmplY3QiIT10eXBlb2YgZS5vcGVyYXRpb24pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLm9wZXJhdGlvbjogb2JqZWN0IGV4cGVjdGVkIik7dC5vcGVyYXRpb249cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLmZyb21PYmplY3QoZS5vcGVyYXRpb24pfWlmKG51bGwhPWUuZGVjbGFyYXRpb24pe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZWNsYXJhdGlvbil0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuZGVjbGFyYXRpb246IG9iamVjdCBleHBlY3RlZCIpO3QuZGVjbGFyYXRpb249cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGVjbGFyYXRpb25Db25maWcuZnJvbU9iamVjdChlLmRlY2xhcmF0aW9uKX1pZihudWxsIT1lLm5vdGVib29rKXtpZigib2JqZWN0IiE9dHlwZW9mIGUubm90ZWJvb2spdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLm5vdGVib29rOiBvYmplY3QgZXhwZWN0ZWQiKTt0Lm5vdGVib29rPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnLmZyb21PYmplY3QoZS5ub3RlYm9vayl9aWYobnVsbCE9ZS5kYXRhUHJlcGFyYXRpb24pe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kYXRhUHJlcGFyYXRpb24pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLmRhdGFQcmVwYXJhdGlvbjogb2JqZWN0IGV4cGVjdGVkIik7dC5kYXRhUHJlcGFyYXRpb249cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLmZyb21PYmplY3QoZS5kYXRhUHJlcGFyYXRpb24pfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiBudWxsIT1lLnRhYmxlJiZlLmhhc093blByb3BlcnR5KCJ0YWJsZSIpJiYoci50YWJsZT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZy50b09iamVjdChlLnRhYmxlLHQpLHQub25lb2ZzJiYoci5hY3Rpb249InRhYmxlIikpLG51bGwhPWUudmlldyYmZS5oYXNPd25Qcm9wZXJ0eSgidmlldyIpJiYoci52aWV3PXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcudG9PYmplY3QoZS52aWV3LHQpLHQub25lb2ZzJiYoci5hY3Rpb249InZpZXciKSksbnVsbCE9ZS5pbmNyZW1lbnRhbFRhYmxlJiZlLmhhc093blByb3BlcnR5KCJpbmNyZW1lbnRhbFRhYmxlIikmJihyLmluY3JlbWVudGFsVGFibGU9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy50b09iamVjdChlLmluY3JlbWVudGFsVGFibGUsdCksdC5vbmVvZnMmJihyLmFjdGlvbj0iaW5jcmVtZW50YWxUYWJsZSIpKSxudWxsIT1lLmFzc2VydGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIikmJihyLmFzc2VydGlvbj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcudG9PYmplY3QoZS5hc3NlcnRpb24sdCksdC5vbmVvZnMmJihyLmFjdGlvbj0iYXNzZXJ0aW9uIikpLG51bGwhPWUub3BlcmF0aW9uJiZlLmhhc093blByb3BlcnR5KCJvcGVyYXRpb24iKSYmKHIub3BlcmF0aW9uPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9wZXJhdGlvbkNvbmZpZy50b09iamVjdChlLm9wZXJhdGlvbix0KSx0Lm9uZW9mcyYmKHIuYWN0aW9uPSJvcGVyYXRpb24iKSksbnVsbCE9ZS5kZWNsYXJhdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVjbGFyYXRpb24iKSYmKHIuZGVjbGFyYXRpb249cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGVjbGFyYXRpb25Db25maWcudG9PYmplY3QoZS5kZWNsYXJhdGlvbix0KSx0Lm9uZW9mcyYmKHIuYWN0aW9uPSJkZWNsYXJhdGlvbiIpKSxudWxsIT1lLm5vdGVib29rJiZlLmhhc093blByb3BlcnR5KCJub3RlYm9vayIpJiYoci5ub3RlYm9vaz1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZy50b09iamVjdChlLm5vdGVib29rLHQpLHQub25lb2ZzJiYoci5hY3Rpb249Im5vdGVib29rIikpLG51bGwhPWUuZGF0YVByZXBhcmF0aW9uJiZlLmhhc093blByb3BlcnR5KCJkYXRhUHJlcGFyYXRpb24iKSYmKHIuZGF0YVByZXBhcmF0aW9uPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy50b09iamVjdChlLmRhdGFQcmVwYXJhdGlvbix0KSx0Lm9uZW9mcyYmKHIuYWN0aW9uPSJkYXRhUHJlcGFyYXRpb24iKSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlnIn0sdC5UYXJnZXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUucHJvamVjdD0iIix0LnByb3RvdHlwZS5kYXRhc2V0PSIiLHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM9ITEsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3QiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLnByb2plY3QpLG51bGwhPWUuZGF0YXNldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGF0YXNldCIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuZGF0YXNldCksbnVsbCE9ZS5uYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJuYW1lIikmJnQudWludDMyKDM0KS5zdHJpbmcoZS5uYW1lKSxudWxsIT1lLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyIpJiZ0LnVpbnQzMig0MCkuYm9vbChlLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQ7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5wcm9qZWN0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4uZGF0YXNldD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNDpuLm5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDU6bi5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz1lLmJvb2woKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWU/Im9iamVjdCBleHBlY3RlZCI6bnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJiFhLmlzU3RyaW5nKGUucHJvamVjdCk/InByb2plY3Q6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5kYXRhc2V0JiZlLmhhc093blByb3BlcnR5KCJkYXRhc2V0IikmJiFhLmlzU3RyaW5nKGUuZGF0YXNldCk/ImRhdGFzZXQ6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJiFhLmlzU3RyaW5nKGUubmFtZSk/Im5hbWU6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz8iaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM6IGJvb2xlYW4gZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0KXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQ7cmV0dXJuIG51bGwhPWUucHJvamVjdCYmKHQucHJvamVjdD1TdHJpbmcoZS5wcm9qZWN0KSksbnVsbCE9ZS5kYXRhc2V0JiYodC5kYXRhc2V0PVN0cmluZyhlLmRhdGFzZXQpKSxudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMmJih0LmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zPUJvb2xlYW4oZS5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucykpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLnByb2plY3Q9IiIsci5kYXRhc2V0PSIiLHIubmFtZT0iIixyLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zPSExKSxudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmKHIucHJvamVjdD1lLnByb2plY3QpLG51bGwhPWUuZGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiYoci5kYXRhc2V0PWUuZGF0YXNldCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihyLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyIpJiYoci5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz1lLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0In0sdH0oKSx0LkNvbHVtbkRlc2NyaXB0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMucGF0aD1bXSx0aGlzLmJpZ3F1ZXJ5UG9saWN5VGFncz1bXSx0aGlzLnRhZ3M9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5wYXRoPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5kZXNjcmlwdGlvbj0iIix0LnByb3RvdHlwZS5iaWdxdWVyeVBvbGljeVRhZ3M9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnRhZ3M9YS5lbXB0eUFycmF5LHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnBhdGgmJmUucGF0aC5sZW5ndGgpZm9yKHZhciByPTA7cjxlLnBhdGgubGVuZ3RoOysrcil0LnVpbnQzMigxMCkuc3RyaW5nKGUucGF0aFtyXSk7aWYobnVsbCE9ZS5kZXNjcmlwdGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVzY3JpcHRpb24iKSYmdC51aW50MzIoMTgpLnN0cmluZyhlLmRlc2NyaXB0aW9uKSxudWxsIT1lLmJpZ3F1ZXJ5UG9saWN5VGFncyYmZS5iaWdxdWVyeVBvbGljeVRhZ3MubGVuZ3RoKWZvcihyPTA7cjxlLmJpZ3F1ZXJ5UG9saWN5VGFncy5sZW5ndGg7KytyKXQudWludDMyKDI2KS5zdHJpbmcoZS5iaWdxdWVyeVBvbGljeVRhZ3Nbcl0pO2lmKG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoMzQpLnN0cmluZyhlLnRhZ3Nbcl0pO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4ucGF0aCYmbi5wYXRoLmxlbmd0aHx8KG4ucGF0aD1bXSksbi5wYXRoLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAyOm4uZGVzY3JpcHRpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDM6bi5iaWdxdWVyeVBvbGljeVRhZ3MmJm4uYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aHx8KG4uYmlncXVlcnlQb2xpY3lUYWdzPVtdKSxuLmJpZ3F1ZXJ5UG9saWN5VGFncy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgNDpuLnRhZ3MmJm4udGFncy5sZW5ndGh8fChuLnRhZ3M9W10pLG4udGFncy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLnBhdGgmJmUuaGFzT3duUHJvcGVydHkoInBhdGgiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5wYXRoKSlyZXR1cm4icGF0aDogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS5wYXRoLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5wYXRoW3RdKSlyZXR1cm4icGF0aDogc3RyaW5nW10gZXhwZWN0ZWQifWlmKG51bGwhPWUuZGVzY3JpcHRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlc2NyaXB0aW9uIikmJiFhLmlzU3RyaW5nKGUuZGVzY3JpcHRpb24pKXJldHVybiJkZXNjcmlwdGlvbjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmJpZ3F1ZXJ5UG9saWN5VGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgiYmlncXVlcnlQb2xpY3lUYWdzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuYmlncXVlcnlQb2xpY3lUYWdzKSlyZXR1cm4iYmlncXVlcnlQb2xpY3lUYWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUuYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5iaWdxdWVyeVBvbGljeVRhZ3NbdF0pKXJldHVybiJiaWdxdWVyeVBvbGljeVRhZ3M6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLnRhZ3MmJmUuaGFzT3duUHJvcGVydHkoInRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSlyZXR1cm4idGFnczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnRhZ3NbdF0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvcilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvcjtpZihlLnBhdGgpe2lmKCFBcnJheS5pc0FycmF5KGUucGF0aCkpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IucGF0aDogYXJyYXkgZXhwZWN0ZWQiKTt0LnBhdGg9W107Zm9yKHZhciByPTA7cjxlLnBhdGgubGVuZ3RoOysrcil0LnBhdGhbcl09U3RyaW5nKGUucGF0aFtyXSl9aWYobnVsbCE9ZS5kZXNjcmlwdGlvbiYmKHQuZGVzY3JpcHRpb249U3RyaW5nKGUuZGVzY3JpcHRpb24pKSxlLmJpZ3F1ZXJ5UG9saWN5VGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS5iaWdxdWVyeVBvbGljeVRhZ3MpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLmJpZ3F1ZXJ5UG9saWN5VGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5iaWdxdWVyeVBvbGljeVRhZ3M9W10scj0wO3I8ZS5iaWdxdWVyeVBvbGljeVRhZ3MubGVuZ3RoOysrcil0LmJpZ3F1ZXJ5UG9saWN5VGFnc1tyXT1TdHJpbmcoZS5iaWdxdWVyeVBvbGljeVRhZ3Nbcl0pfWlmKGUudGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci50YWdzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhZ3M9W10scj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC50YWdzW3JdPVN0cmluZyhlLnRhZ3Nbcl0pfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLnBhdGg9W10sci5iaWdxdWVyeVBvbGljeVRhZ3M9W10sci50YWdzPVtdKSx0LmRlZmF1bHRzJiYoci5kZXNjcmlwdGlvbj0iIiksZS5wYXRoJiZlLnBhdGgubGVuZ3RoKXtyLnBhdGg9W107Zm9yKHZhciBuPTA7bjxlLnBhdGgubGVuZ3RoOysrbilyLnBhdGhbbl09ZS5wYXRoW25dfWlmKG51bGwhPWUuZGVzY3JpcHRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlc2NyaXB0aW9uIikmJihyLmRlc2NyaXB0aW9uPWUuZGVzY3JpcHRpb24pLGUuYmlncXVlcnlQb2xpY3lUYWdzJiZlLmJpZ3F1ZXJ5UG9saWN5VGFncy5sZW5ndGgpZm9yKHIuYmlncXVlcnlQb2xpY3lUYWdzPVtdLG49MDtuPGUuYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aDsrK24pci5iaWdxdWVyeVBvbGljeVRhZ3Nbbl09ZS5iaWdxdWVyeVBvbGljeVRhZ3Nbbl07aWYoZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyLnRhZ3M9W10sbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXTtyZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IifSx0fSgpLHQuVGFibGVBc3NlcnRpb25zQ29uZmlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLnVuaXF1ZUtleT1bXSx0aGlzLnVuaXF1ZUtleXM9W10sdGhpcy5ub25OdWxsPVtdLHRoaXMucm93Q29uZGl0aW9ucz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnVuaXF1ZUtleT1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUudW5pcXVlS2V5cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUubm9uTnVsbD1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUucm93Q29uZGl0aW9ucz1hLmVtcHR5QXJyYXksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudW5pcXVlS2V5JiZlLnVuaXF1ZUtleS5sZW5ndGgpZm9yKHZhciByPTA7cjxlLnVuaXF1ZUtleS5sZW5ndGg7KytyKXQudWludDMyKDEwKS5zdHJpbmcoZS51bmlxdWVLZXlbcl0pO2lmKG51bGwhPWUudW5pcXVlS2V5cyYmZS51bmlxdWVLZXlzLmxlbmd0aClmb3Iocj0wO3I8ZS51bmlxdWVLZXlzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleS5lbmNvZGUoZS51bmlxdWVLZXlzW3JdLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUubm9uTnVsbCYmZS5ub25OdWxsLmxlbmd0aClmb3Iocj0wO3I8ZS5ub25OdWxsLmxlbmd0aDsrK3IpdC51aW50MzIoMjYpLnN0cmluZyhlLm5vbk51bGxbcl0pO2lmKG51bGwhPWUucm93Q29uZGl0aW9ucyYmZS5yb3dDb25kaXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5yb3dDb25kaXRpb25zLmxlbmd0aDsrK3IpdC51aW50MzIoMzQpLnN0cmluZyhlLnJvd0NvbmRpdGlvbnNbcl0pO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi51bmlxdWVLZXkmJm4udW5pcXVlS2V5Lmxlbmd0aHx8KG4udW5pcXVlS2V5PVtdKSxuLnVuaXF1ZUtleS5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgMjpuLnVuaXF1ZUtleXMmJm4udW5pcXVlS2V5cy5sZW5ndGh8fChuLnVuaXF1ZUtleXM9W10pLG4udW5pcXVlS2V5cy5wdXNoKHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXkuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMzpuLm5vbk51bGwmJm4ubm9uTnVsbC5sZW5ndGh8fChuLm5vbk51bGw9W10pLG4ubm9uTnVsbC5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgNDpuLnJvd0NvbmRpdGlvbnMmJm4ucm93Q29uZGl0aW9ucy5sZW5ndGh8fChuLnJvd0NvbmRpdGlvbnM9W10pLG4ucm93Q29uZGl0aW9ucy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLnVuaXF1ZUtleSYmZS5oYXNPd25Qcm9wZXJ0eSgidW5pcXVlS2V5Iikpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5KSlyZXR1cm4idW5pcXVlS2V5OiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLnVuaXF1ZUtleS5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudW5pcXVlS2V5W3RdKSlyZXR1cm4idW5pcXVlS2V5OiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS51bmlxdWVLZXlzJiZlLmhhc093blByb3BlcnR5KCJ1bmlxdWVLZXlzIikpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5cykpcmV0dXJuInVuaXF1ZUtleXM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS51bmlxdWVLZXlzLmxlbmd0aDsrK3Qpe3ZhciByPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXkudmVyaWZ5KGUudW5pcXVlS2V5c1t0XSk7aWYocilyZXR1cm4idW5pcXVlS2V5cy4iK3J9fWlmKG51bGwhPWUubm9uTnVsbCYmZS5oYXNPd25Qcm9wZXJ0eSgibm9uTnVsbCIpKXtpZighQXJyYXkuaXNBcnJheShlLm5vbk51bGwpKXJldHVybiJub25OdWxsOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUubm9uTnVsbC5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUubm9uTnVsbFt0XSkpcmV0dXJuIm5vbk51bGw6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLnJvd0NvbmRpdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoInJvd0NvbmRpdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5yb3dDb25kaXRpb25zKSlyZXR1cm4icm93Q29uZGl0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnJvd0NvbmRpdGlvbnMubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnJvd0NvbmRpdGlvbnNbdF0pKXJldHVybiJyb3dDb25kaXRpb25zOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWc7aWYoZS51bmlxdWVLZXkpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5KSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLnVuaXF1ZUtleTogYXJyYXkgZXhwZWN0ZWQiKTt0LnVuaXF1ZUtleT1bXTtmb3IodmFyIHI9MDtyPGUudW5pcXVlS2V5Lmxlbmd0aDsrK3IpdC51bmlxdWVLZXlbcl09U3RyaW5nKGUudW5pcXVlS2V5W3JdKX1pZihlLnVuaXF1ZUtleXMpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy51bmlxdWVLZXlzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnVuaXF1ZUtleXM9W10scj0wO3I8ZS51bmlxdWVLZXlzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS51bmlxdWVLZXlzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcudW5pcXVlS2V5czogb2JqZWN0IGV4cGVjdGVkIik7dC51bmlxdWVLZXlzW3JdPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXkuZnJvbU9iamVjdChlLnVuaXF1ZUtleXNbcl0pfX1pZihlLm5vbk51bGwpe2lmKCFBcnJheS5pc0FycmF5KGUubm9uTnVsbCkpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5ub25OdWxsOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0Lm5vbk51bGw9W10scj0wO3I8ZS5ub25OdWxsLmxlbmd0aDsrK3IpdC5ub25OdWxsW3JdPVN0cmluZyhlLm5vbk51bGxbcl0pfWlmKGUucm93Q29uZGl0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5yb3dDb25kaXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLnJvd0NvbmRpdGlvbnM6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQucm93Q29uZGl0aW9ucz1bXSxyPTA7cjxlLnJvd0NvbmRpdGlvbnMubGVuZ3RoOysrcil0LnJvd0NvbmRpdGlvbnNbcl09U3RyaW5nKGUucm93Q29uZGl0aW9uc1tyXSl9cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIudW5pcXVlS2V5PVtdLHIudW5pcXVlS2V5cz1bXSxyLm5vbk51bGw9W10sci5yb3dDb25kaXRpb25zPVtdKSxlLnVuaXF1ZUtleSYmZS51bmlxdWVLZXkubGVuZ3RoKXtyLnVuaXF1ZUtleT1bXTtmb3IodmFyIG49MDtuPGUudW5pcXVlS2V5Lmxlbmd0aDsrK24pci51bmlxdWVLZXlbbl09ZS51bmlxdWVLZXlbbl19aWYoZS51bmlxdWVLZXlzJiZlLnVuaXF1ZUtleXMubGVuZ3RoKWZvcihyLnVuaXF1ZUtleXM9W10sbj0wO248ZS51bmlxdWVLZXlzLmxlbmd0aDsrK24pci51bmlxdWVLZXlzW25dPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXkudG9PYmplY3QoZS51bmlxdWVLZXlzW25dLHQpO2lmKGUubm9uTnVsbCYmZS5ub25OdWxsLmxlbmd0aClmb3Ioci5ub25OdWxsPVtdLG49MDtuPGUubm9uTnVsbC5sZW5ndGg7KytuKXIubm9uTnVsbFtuXT1lLm5vbk51bGxbbl07aWYoZS5yb3dDb25kaXRpb25zJiZlLnJvd0NvbmRpdGlvbnMubGVuZ3RoKWZvcihyLnJvd0NvbmRpdGlvbnM9W10sbj0wO248ZS5yb3dDb25kaXRpb25zLmxlbmd0aDsrK24pci5yb3dDb25kaXRpb25zW25dPWUucm93Q29uZGl0aW9uc1tuXTtyZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZyJ9LHQuVW5pcXVlS2V5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLnVuaXF1ZUtleT1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnVuaXF1ZUtleT1hLmVtcHR5QXJyYXksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudW5pcXVlS2V5JiZlLnVuaXF1ZUtleS5sZW5ndGgpZm9yKHZhciByPTA7cjxlLnVuaXF1ZUtleS5sZW5ndGg7KytyKXQudWludDMyKDEwKS5zdHJpbmcoZS51bmlxdWVLZXlbcl0pO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuVW5pcXVlS2V5O2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2k+Pj4zPT0xPyhuLnVuaXF1ZUtleSYmbi51bmlxdWVLZXkubGVuZ3RofHwobi51bmlxdWVLZXk9W10pLG4udW5pcXVlS2V5LnB1c2goZS5zdHJpbmcoKSkpOmUuc2tpcFR5cGUoNyZpKX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLnVuaXF1ZUtleSYmZS5oYXNPd25Qcm9wZXJ0eSgidW5pcXVlS2V5Iikpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5KSlyZXR1cm4idW5pcXVlS2V5OiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLnVuaXF1ZUtleS5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudW5pcXVlS2V5W3RdKSlyZXR1cm4idW5pcXVlS2V5OiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleSlyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleTtpZihlLnVuaXF1ZUtleSl7aWYoIUFycmF5LmlzQXJyYXkoZS51bmlxdWVLZXkpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuVW5pcXVlS2V5LnVuaXF1ZUtleTogYXJyYXkgZXhwZWN0ZWQiKTt0LnVuaXF1ZUtleT1bXTtmb3IodmFyIHI9MDtyPGUudW5pcXVlS2V5Lmxlbmd0aDsrK3IpdC51bmlxdWVLZXlbcl09U3RyaW5nKGUudW5pcXVlS2V5W3JdKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci51bmlxdWVLZXk9W10pLGUudW5pcXVlS2V5JiZlLnVuaXF1ZUtleS5sZW5ndGgpe3IudW5pcXVlS2V5PVtdO2Zvcih2YXIgbj0wO248ZS51bmlxdWVLZXkubGVuZ3RoOysrbilyLnVuaXF1ZUtleVtuXT1lLnVuaXF1ZUtleVtuXX1yZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXkifSx0fSgpLHR9KCksdC5UYWJsZUNvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5kZXBlbmRlbmN5VGFyZ2V0cz1bXSx0aGlzLnRhZ3M9W10sdGhpcy5wcmVPcGVyYXRpb25zPVtdLHRoaXMucG9zdE9wZXJhdGlvbnM9W10sdGhpcy5jb2x1bW5zPVtdLHRoaXMuY2x1c3RlckJ5PVtdLHRoaXMubGFiZWxzPXt9LHRoaXMuYWRkaXRpb25hbE9wdGlvbnM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5uYW1lPSIiLHQucHJvdG90eXBlLmRhdGFzZXQ9IiIsdC5wcm90b3R5cGUucHJvamVjdD0iIix0LnByb3RvdHlwZS5kZXBlbmRlbmN5VGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZmlsZW5hbWU9IiIsdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGlzYWJsZWQ9ITEsdC5wcm90b3R5cGUucHJlT3BlcmF0aW9ucz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUucG9zdE9wZXJhdGlvbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmRlc2NyaXB0aW9uPSIiLHQucHJvdG90eXBlLmNvbHVtbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnBhcnRpdGlvbkJ5PSIiLHQucHJvdG90eXBlLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzPTAsdC5wcm90b3R5cGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj0hMSx0LnByb3RvdHlwZS5jbHVzdGVyQnk9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmxhYmVscz1hLmVtcHR5T2JqZWN0LHQucHJvdG90eXBlLmFkZGl0aW9uYWxPcHRpb25zPWEuZW1wdHlPYmplY3QsdC5wcm90b3R5cGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSx0LnByb3RvdHlwZS5hc3NlcnRpb25zPW51bGwsdC5wcm90b3R5cGUuaGVybWV0aWM9ITEsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUubmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibmFtZSIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUubmFtZSksbnVsbCE9ZS5kYXRhc2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhc2V0IikmJnQudWludDMyKDE4KS5zdHJpbmcoZS5kYXRhc2V0KSxudWxsIT1lLnByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3QiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLnByb2plY3QpLG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5lbmNvZGUoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSx0LnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmZpbGVuYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlbmFtZSIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUuZmlsZW5hbWUpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNTApLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDU2KS5ib29sKGUuZGlzYWJsZWQpLG51bGwhPWUucHJlT3BlcmF0aW9ucyYmZS5wcmVPcGVyYXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5wcmVPcGVyYXRpb25zLmxlbmd0aDsrK3IpdC51aW50MzIoNjYpLnN0cmluZyhlLnByZU9wZXJhdGlvbnNbcl0pO2lmKG51bGwhPWUucG9zdE9wZXJhdGlvbnMmJmUucG9zdE9wZXJhdGlvbnMubGVuZ3RoKWZvcihyPTA7cjxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK3IpdC51aW50MzIoNzQpLnN0cmluZyhlLnBvc3RPcGVyYXRpb25zW3JdKTtpZihudWxsIT1lLmRlc2NyaXB0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXNjcmlwdGlvbiIpJiZ0LnVpbnQzMig4Mikuc3RyaW5nKGUuZGVzY3JpcHRpb24pLG51bGwhPWUuY29sdW1ucyYmZS5jb2x1bW5zLmxlbmd0aClmb3Iocj0wO3I8ZS5jb2x1bW5zLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5lbmNvZGUoZS5jb2x1bW5zW3JdLHQudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUucGFydGl0aW9uQnkmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInBhcnRpdGlvbkJ5IikmJnQudWludDMyKDk4KS5zdHJpbmcoZS5wYXJ0aXRpb25CeSksbnVsbCE9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiKSYmdC51aW50MzIoMTA0KS5pbnQzMihlLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzKSxudWxsIT1lLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXImJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIiKSYmdC51aW50MzIoMTEyKS5ib29sKGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlciksbnVsbCE9ZS5jbHVzdGVyQnkmJmUuY2x1c3RlckJ5Lmxlbmd0aClmb3Iocj0wO3I8ZS5jbHVzdGVyQnkubGVuZ3RoOysrcil0LnVpbnQzMigxMjIpLnN0cmluZyhlLmNsdXN0ZXJCeVtyXSk7aWYobnVsbCE9ZS5sYWJlbHMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImxhYmVscyIpKXt2YXIgbj1PYmplY3Qua2V5cyhlLmxhYmVscyk7Zm9yKHI9MDtyPG4ubGVuZ3RoOysrcil0LnVpbnQzMigxMzApLmZvcmsoKS51aW50MzIoMTApLnN0cmluZyhuW3JdKS51aW50MzIoMTgpLnN0cmluZyhlLmxhYmVsc1tuW3JdXSkubGRlbGltKCl9aWYobnVsbCE9ZS5hZGRpdGlvbmFsT3B0aW9ucyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYWRkaXRpb25hbE9wdGlvbnMiKSlmb3Iobj1PYmplY3Qua2V5cyhlLmFkZGl0aW9uYWxPcHRpb25zKSxyPTA7cjxuLmxlbmd0aDsrK3IpdC51aW50MzIoMTM4KS5mb3JrKCkudWludDMyKDEwKS5zdHJpbmcobltyXSkudWludDMyKDE4KS5zdHJpbmcoZS5hZGRpdGlvbmFsT3B0aW9uc1tuW3JdXSkubGRlbGltKCk7cmV0dXJuIG51bGwhPWUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyIpJiZ0LnVpbnQzMigxNDQpLmJvb2woZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSxudWxsIT1lLmFzc2VydGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImFzc2VydGlvbnMiKSYmcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLmVuY29kZShlLmFzc2VydGlvbnMsdC51aW50MzIoMTU0KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuaGVybWV0aWMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImhlcm1ldGljIikmJnQudWludDMyKDE2MCkuYm9vbChlLmhlcm1ldGljKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByLG4saT12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsbD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWc7ZS5wb3M8aTspe3ZhciBjPWUudWludDMyKCk7c3dpdGNoKGM+Pj4zKXtjYXNlIDE6bC5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOmwuZGF0YXNldD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzpsLnByb2plY3Q9ZS5zdHJpbmcoKTticmVhaztjYXNlIDQ6bC5kZXBlbmRlbmN5VGFyZ2V0cyYmbC5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGh8fChsLmRlcGVuZGVuY3lUYXJnZXRzPVtdKSxsLmRlcGVuZGVuY3lUYXJnZXRzLnB1c2gocy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDU6bC5maWxlbmFtZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNjpsLnRhZ3MmJmwudGFncy5sZW5ndGh8fChsLnRhZ3M9W10pLGwudGFncy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgNzpsLmRpc2FibGVkPWUuYm9vbCgpO2JyZWFrO2Nhc2UgODpsLnByZU9wZXJhdGlvbnMmJmwucHJlT3BlcmF0aW9ucy5sZW5ndGh8fChsLnByZU9wZXJhdGlvbnM9W10pLGwucHJlT3BlcmF0aW9ucy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgOTpsLnBvc3RPcGVyYXRpb25zJiZsLnBvc3RPcGVyYXRpb25zLmxlbmd0aHx8KGwucG9zdE9wZXJhdGlvbnM9W10pLGwucG9zdE9wZXJhdGlvbnMucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDEwOmwuZGVzY3JpcHRpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDExOmwuY29sdW1ucyYmbC5jb2x1bW5zLmxlbmd0aHx8KGwuY29sdW1ucz1bXSksbC5jb2x1bW5zLnB1c2gocy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAxMjpsLnBhcnRpdGlvbkJ5PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxMzpsLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzPWUuaW50MzIoKTticmVhaztjYXNlIDE0OmwucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj1lLmJvb2woKTticmVhaztjYXNlIDE1OmwuY2x1c3RlckJ5JiZsLmNsdXN0ZXJCeS5sZW5ndGh8fChsLmNsdXN0ZXJCeT1bXSksbC5jbHVzdGVyQnkucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDE2OmwubGFiZWxzPT09YS5lbXB0eU9iamVjdCYmKGwubGFiZWxzPXt9KTt2YXIgdT1lLnVpbnQzMigpK2UucG9zO2ZvcihyPSIiLG49IiI7ZS5wb3M8dTspc3dpdGNoKChwPWUudWludDMyKCkpPj4+Myl7Y2FzZSAxOnI9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bj1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JnApfWwubGFiZWxzW3JdPW47YnJlYWs7Y2FzZSAxNzpmb3IobC5hZGRpdGlvbmFsT3B0aW9ucz09PWEuZW1wdHlPYmplY3QmJihsLmFkZGl0aW9uYWxPcHRpb25zPXt9KSx1PWUudWludDMyKCkrZS5wb3Mscj0iIixuPSIiO2UucG9zPHU7KXt2YXIgcDtzd2l0Y2goKHA9ZS51aW50MzIoKSk+Pj4zKXtjYXNlIDE6cj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuPWUuc3RyaW5nKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmcCl9fWwuYWRkaXRpb25hbE9wdGlvbnNbcl09bjticmVhaztjYXNlIDE4OmwuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1lLmJvb2woKTticmVhaztjYXNlIDE5OmwuYXNzZXJ0aW9ucz1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAyMDpsLmhlcm1ldGljPWUuYm9vbCgpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmMpfX1yZXR1cm4gbH0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmIWEuaXNTdHJpbmcoZS5uYW1lKSlyZXR1cm4ibmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmIWEuaXNTdHJpbmcoZS5kYXRhc2V0KSlyZXR1cm4iZGF0YXNldDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmIWEuaXNTdHJpbmcoZS5wcm9qZWN0KSlyZXR1cm4icHJvamVjdDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRlbmN5VGFyZ2V0cyIpKXtpZighQXJyYXkuaXNBcnJheShlLmRlcGVuZGVuY3lUYXJnZXRzKSlyZXR1cm4iZGVwZW5kZW5jeVRhcmdldHM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrdClpZihuPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC52ZXJpZnkoZS5kZXBlbmRlbmN5VGFyZ2V0c1t0XSkpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzLiIrbn1pZihudWxsIT1lLmZpbGVuYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlbmFtZSIpJiYhYS5pc1N0cmluZyhlLmZpbGVuYW1lKSlyZXR1cm4iZmlsZW5hbWU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS50YWdzJiZlLmhhc093blByb3BlcnR5KCJ0YWdzIikpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpcmV0dXJuInRhZ3M6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS50YWdzLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS50YWdzW3RdKSlyZXR1cm4idGFnczogc3RyaW5nW10gZXhwZWN0ZWQifWlmKG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGlzYWJsZWQpcmV0dXJuImRpc2FibGVkOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLnByZU9wZXJhdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoInByZU9wZXJhdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5wcmVPcGVyYXRpb25zKSlyZXR1cm4icHJlT3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnByZU9wZXJhdGlvbnMubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnByZU9wZXJhdGlvbnNbdF0pKXJldHVybiJwcmVPcGVyYXRpb25zOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5wb3N0T3BlcmF0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgicG9zdE9wZXJhdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5wb3N0T3BlcmF0aW9ucykpcmV0dXJuInBvc3RPcGVyYXRpb25zOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUucG9zdE9wZXJhdGlvbnMubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnBvc3RPcGVyYXRpb25zW3RdKSlyZXR1cm4icG9zdE9wZXJhdGlvbnM6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb2x1bW5zJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW5zIikpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpcmV0dXJuImNvbHVtbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5jb2x1bW5zLmxlbmd0aDsrK3QpaWYobj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnZlcmlmeShlLmNvbHVtbnNbdF0pKXJldHVybiJjb2x1bW5zLiIrbn1pZihudWxsIT1lLnBhcnRpdGlvbkJ5JiZlLmhhc093blByb3BlcnR5KCJwYXJ0aXRpb25CeSIpJiYhYS5pc1N0cmluZyhlLnBhcnRpdGlvbkJ5KSlyZXR1cm4icGFydGl0aW9uQnk6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmZS5oYXNPd25Qcm9wZXJ0eSgicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiKSYmIWEuaXNJbnRlZ2VyKGUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMpKXJldHVybiJwYXJ0aXRpb25FeHBpcmF0aW9uRGF5czogaW50ZWdlciBleHBlY3RlZCI7aWYobnVsbCE9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiZlLmhhc093blByb3BlcnR5KCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIikmJiJib29sZWFuIiE9dHlwZW9mIGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlcilyZXR1cm4icmVxdWlyZVBhcnRpdGlvbkZpbHRlcjogYm9vbGVhbiBleHBlY3RlZCI7aWYobnVsbCE9ZS5jbHVzdGVyQnkmJmUuaGFzT3duUHJvcGVydHkoImNsdXN0ZXJCeSIpKXtpZighQXJyYXkuaXNBcnJheShlLmNsdXN0ZXJCeSkpcmV0dXJuImNsdXN0ZXJCeTogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLmNsdXN0ZXJCeS5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuY2x1c3RlckJ5W3RdKSlyZXR1cm4iY2x1c3RlckJ5OiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5sYWJlbHMmJmUuaGFzT3duUHJvcGVydHkoImxhYmVscyIpKXtpZighYS5pc09iamVjdChlLmxhYmVscykpcmV0dXJuImxhYmVsczogb2JqZWN0IGV4cGVjdGVkIjt2YXIgcj1PYmplY3Qua2V5cyhlLmxhYmVscyk7Zm9yKHQ9MDt0PHIubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLmxhYmVsc1tyW3RdXSkpcmV0dXJuImxhYmVsczogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5hZGRpdGlvbmFsT3B0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiYWRkaXRpb25hbE9wdGlvbnMiKSl7aWYoIWEuaXNPYmplY3QoZS5hZGRpdGlvbmFsT3B0aW9ucykpcmV0dXJuImFkZGl0aW9uYWxPcHRpb25zOiBvYmplY3QgZXhwZWN0ZWQiO2ZvcihyPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpLHQ9MDt0PHIubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLmFkZGl0aW9uYWxPcHRpb25zW3JbdF1dKSlyZXR1cm4iYWRkaXRpb25hbE9wdGlvbnM6IHN0cmluZ3trOnN0cmluZ30gZXhwZWN0ZWQifXJldHVybiBudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPyJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLmFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbnMiKSYmKG49cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLnZlcmlmeShlLmFzc2VydGlvbnMpKT8iYXNzZXJ0aW9ucy4iK246bnVsbCE9ZS5oZXJtZXRpYyYmZS5oYXNPd25Qcm9wZXJ0eSgiaGVybWV0aWMiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5oZXJtZXRpYz8iaGVybWV0aWM6IGJvb2xlYW4gZXhwZWN0ZWQiOm51bGw7dmFyIG59LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5kYXRhc2V0JiYodC5kYXRhc2V0PVN0cmluZyhlLmRhdGFzZXQpKSxudWxsIT1lLnByb2plY3QmJih0LnByb2plY3Q9U3RyaW5nKGUucHJvamVjdCkpLGUuZGVwZW5kZW5jeVRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZy5kZXBlbmRlbmN5VGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiKTt0LmRlcGVuZGVuY3lUYXJnZXRzPVtdO2Zvcih2YXIgcj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmRlcGVuZGVuY3lUYXJnZXRzW3JdPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5mcm9tT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pfX1pZihudWxsIT1lLmZpbGVuYW1lJiYodC5maWxlbmFtZT1TdHJpbmcoZS5maWxlbmFtZSkpLGUudGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcudGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC50YWdzPVtdLHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudGFnc1tyXT1TdHJpbmcoZS50YWdzW3JdKX1pZihudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxlLnByZU9wZXJhdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUucHJlT3BlcmF0aW9ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLnByZU9wZXJhdGlvbnM6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQucHJlT3BlcmF0aW9ucz1bXSxyPTA7cjxlLnByZU9wZXJhdGlvbnMubGVuZ3RoOysrcil0LnByZU9wZXJhdGlvbnNbcl09U3RyaW5nKGUucHJlT3BlcmF0aW9uc1tyXSl9aWYoZS5wb3N0T3BlcmF0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5wb3N0T3BlcmF0aW9ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLnBvc3RPcGVyYXRpb25zOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnBvc3RPcGVyYXRpb25zPVtdLHI9MDtyPGUucG9zdE9wZXJhdGlvbnMubGVuZ3RoOysrcil0LnBvc3RPcGVyYXRpb25zW3JdPVN0cmluZyhlLnBvc3RPcGVyYXRpb25zW3JdKX1pZihudWxsIT1lLmRlc2NyaXB0aW9uJiYodC5kZXNjcmlwdGlvbj1TdHJpbmcoZS5kZXNjcmlwdGlvbikpLGUuY29sdW1ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5jb2x1bW5zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcuY29sdW1uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5jb2x1bW5zPVtdLHI9MDtyPGUuY29sdW1ucy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuY29sdW1uc1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcuY29sdW1uczogb2JqZWN0IGV4cGVjdGVkIik7dC5jb2x1bW5zW3JdPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZnJvbU9iamVjdChlLmNvbHVtbnNbcl0pfX1pZihudWxsIT1lLnBhcnRpdGlvbkJ5JiYodC5wYXJ0aXRpb25CeT1TdHJpbmcoZS5wYXJ0aXRpb25CeSkpLG51bGwhPWUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMmJih0LnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzPTB8ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyksbnVsbCE9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiYodC5yZXF1aXJlUGFydGl0aW9uRmlsdGVyPUJvb2xlYW4oZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyKSksZS5jbHVzdGVyQnkpe2lmKCFBcnJheS5pc0FycmF5KGUuY2x1c3RlckJ5KSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcuY2x1c3RlckJ5OiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LmNsdXN0ZXJCeT1bXSxyPTA7cjxlLmNsdXN0ZXJCeS5sZW5ndGg7KytyKXQuY2x1c3RlckJ5W3JdPVN0cmluZyhlLmNsdXN0ZXJCeVtyXSl9aWYoZS5sYWJlbHMpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5sYWJlbHMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLmxhYmVsczogb2JqZWN0IGV4cGVjdGVkIik7dC5sYWJlbHM9e307dmFyIG49T2JqZWN0LmtleXMoZS5sYWJlbHMpO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3IpdC5sYWJlbHNbbltyXV09U3RyaW5nKGUubGFiZWxzW25bcl1dKX1pZihlLmFkZGl0aW9uYWxPcHRpb25zKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYWRkaXRpb25hbE9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnLmFkZGl0aW9uYWxPcHRpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTtmb3IodC5hZGRpdGlvbmFsT3B0aW9ucz17fSxuPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpLHI9MDtyPG4ubGVuZ3RoOysrcil0LmFkZGl0aW9uYWxPcHRpb25zW25bcl1dPVN0cmluZyhlLmFkZGl0aW9uYWxPcHRpb25zW25bcl1dKX1pZihudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJih0LmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9Qm9vbGVhbihlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpKSxudWxsIT1lLmFzc2VydGlvbnMpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hc3NlcnRpb25zKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZy5hc3NlcnRpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFzc2VydGlvbnM9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLmZyb21PYmplY3QoZS5hc3NlcnRpb25zKX1yZXR1cm4gbnVsbCE9ZS5oZXJtZXRpYyYmKHQuaGVybWV0aWM9Qm9vbGVhbihlLmhlcm1ldGljKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcixuPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihuLmRlcGVuZGVuY3lUYXJnZXRzPVtdLG4udGFncz1bXSxuLnByZU9wZXJhdGlvbnM9W10sbi5wb3N0T3BlcmF0aW9ucz1bXSxuLmNvbHVtbnM9W10sbi5jbHVzdGVyQnk9W10pLCh0Lm9iamVjdHN8fHQuZGVmYXVsdHMpJiYobi5sYWJlbHM9e30sbi5hZGRpdGlvbmFsT3B0aW9ucz17fSksdC5kZWZhdWx0cyYmKG4ubmFtZT0iIixuLmRhdGFzZXQ9IiIsbi5wcm9qZWN0PSIiLG4uZmlsZW5hbWU9IiIsbi5kaXNhYmxlZD0hMSxuLmRlc2NyaXB0aW9uPSIiLG4ucGFydGl0aW9uQnk9IiIsbi5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz0wLG4ucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj0hMSxuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ITEsbi5hc3NlcnRpb25zPW51bGwsbi5oZXJtZXRpYz0hMSksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihuLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmKG4uZGF0YXNldD1lLmRhdGFzZXQpLG51bGwhPWUucHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdCIpJiYobi5wcm9qZWN0PWUucHJvamVjdCksZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpe24uZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciBvPTA7bzxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK28pbi5kZXBlbmRlbmN5VGFyZ2V0c1tvXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudG9PYmplY3QoZS5kZXBlbmRlbmN5VGFyZ2V0c1tvXSx0KX1pZihudWxsIT1lLmZpbGVuYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlbmFtZSIpJiYobi5maWxlbmFtZT1lLmZpbGVuYW1lKSxlLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKG4udGFncz1bXSxvPTA7bzxlLnRhZ3MubGVuZ3RoOysrbyluLnRhZ3Nbb109ZS50YWdzW29dO2lmKG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJihuLmRpc2FibGVkPWUuZGlzYWJsZWQpLGUucHJlT3BlcmF0aW9ucyYmZS5wcmVPcGVyYXRpb25zLmxlbmd0aClmb3Iobi5wcmVPcGVyYXRpb25zPVtdLG89MDtvPGUucHJlT3BlcmF0aW9ucy5sZW5ndGg7KytvKW4ucHJlT3BlcmF0aW9uc1tvXT1lLnByZU9wZXJhdGlvbnNbb107aWYoZS5wb3N0T3BlcmF0aW9ucyYmZS5wb3N0T3BlcmF0aW9ucy5sZW5ndGgpZm9yKG4ucG9zdE9wZXJhdGlvbnM9W10sbz0wO288ZS5wb3N0T3BlcmF0aW9ucy5sZW5ndGg7KytvKW4ucG9zdE9wZXJhdGlvbnNbb109ZS5wb3N0T3BlcmF0aW9uc1tvXTtpZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYobi5kZXNjcmlwdGlvbj1lLmRlc2NyaXB0aW9uKSxlLmNvbHVtbnMmJmUuY29sdW1ucy5sZW5ndGgpZm9yKG4uY29sdW1ucz1bXSxvPTA7bzxlLmNvbHVtbnMubGVuZ3RoOysrbyluLmNvbHVtbnNbb109cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci50b09iamVjdChlLmNvbHVtbnNbb10sdCk7aWYobnVsbCE9ZS5wYXJ0aXRpb25CeSYmZS5oYXNPd25Qcm9wZXJ0eSgicGFydGl0aW9uQnkiKSYmKG4ucGFydGl0aW9uQnk9ZS5wYXJ0aXRpb25CeSksbnVsbCE9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmZS5oYXNPd25Qcm9wZXJ0eSgicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiKSYmKG4ucGFydGl0aW9uRXhwaXJhdGlvbkRheXM9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyksbnVsbCE9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiZlLmhhc093blByb3BlcnR5KCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIikmJihuLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyKSxlLmNsdXN0ZXJCeSYmZS5jbHVzdGVyQnkubGVuZ3RoKWZvcihuLmNsdXN0ZXJCeT1bXSxvPTA7bzxlLmNsdXN0ZXJCeS5sZW5ndGg7KytvKW4uY2x1c3RlckJ5W29dPWUuY2x1c3RlckJ5W29dO2lmKGUubGFiZWxzJiYocj1PYmplY3Qua2V5cyhlLmxhYmVscykpLmxlbmd0aClmb3Iobi5sYWJlbHM9e30sbz0wO288ci5sZW5ndGg7KytvKW4ubGFiZWxzW3Jbb11dPWUubGFiZWxzW3Jbb11dO2lmKGUuYWRkaXRpb25hbE9wdGlvbnMmJihyPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpKS5sZW5ndGgpZm9yKG4uYWRkaXRpb25hbE9wdGlvbnM9e30sbz0wO288ci5sZW5ndGg7KytvKW4uYWRkaXRpb25hbE9wdGlvbnNbcltvXV09ZS5hZGRpdGlvbmFsT3B0aW9uc1tyW29dXTtyZXR1cm4gbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJihuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSxudWxsIT1lLmFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbnMiKSYmKG4uYXNzZXJ0aW9ucz1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcudG9PYmplY3QoZS5hc3NlcnRpb25zLHQpKSxudWxsIT1lLmhlcm1ldGljJiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpYyIpJiYobi5oZXJtZXRpYz1lLmhlcm1ldGljKSxufSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcifSx0fSgpLHQuVmlld0NvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5kZXBlbmRlbmN5VGFyZ2V0cz1bXSx0aGlzLnRhZ3M9W10sdGhpcy5wcmVPcGVyYXRpb25zPVtdLHRoaXMucG9zdE9wZXJhdGlvbnM9W10sdGhpcy5jb2x1bW5zPVtdLHRoaXMubGFiZWxzPXt9LHRoaXMuYWRkaXRpb25hbE9wdGlvbnM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5uYW1lPSIiLHQucHJvdG90eXBlLmRhdGFzZXQ9IiIsdC5wcm90b3R5cGUucHJvamVjdD0iIix0LnByb3RvdHlwZS5kZXBlbmRlbmN5VGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZmlsZW5hbWU9IiIsdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGlzYWJsZWQ9ITEsdC5wcm90b3R5cGUucHJlT3BlcmF0aW9ucz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUucG9zdE9wZXJhdGlvbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLm1hdGVyaWFsaXplZD0hMSx0LnByb3RvdHlwZS5kZXNjcmlwdGlvbj0iIix0LnByb3RvdHlwZS5jb2x1bW5zPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5sYWJlbHM9YS5lbXB0eU9iamVjdCx0LnByb3RvdHlwZS5hZGRpdGlvbmFsT3B0aW9ucz1hLmVtcHR5T2JqZWN0LHQucHJvdG90eXBlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ITEsdC5wcm90b3R5cGUuaGVybWV0aWM9ITEsdC5wcm90b3R5cGUuYXNzZXJ0aW9ucz1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm5hbWUiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLm5hbWUpLG51bGwhPWUuZGF0YXNldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGF0YXNldCIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuZGF0YXNldCksbnVsbCE9ZS5wcm9qZWN0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJwcm9qZWN0IikmJnQudWludDMyKDI2KS5zdHJpbmcoZS5wcm9qZWN0KSxudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZW5jb2RlKGUuZGVwZW5kZW5jeVRhcmdldHNbcl0sdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5maWxlbmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZmlsZW5hbWUiKSYmdC51aW50MzIoNDIpLnN0cmluZyhlLmZpbGVuYW1lKSxudWxsIT1lLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudWludDMyKDUwKS5zdHJpbmcoZS50YWdzW3JdKTtpZihudWxsIT1lLmRpc2FibGVkJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkaXNhYmxlZCIpJiZ0LnVpbnQzMig1NikuYm9vbChlLmRpc2FibGVkKSxudWxsIT1lLnByZU9wZXJhdGlvbnMmJmUucHJlT3BlcmF0aW9ucy5sZW5ndGgpZm9yKHI9MDtyPGUucHJlT3BlcmF0aW9ucy5sZW5ndGg7KytyKXQudWludDMyKDY2KS5zdHJpbmcoZS5wcmVPcGVyYXRpb25zW3JdKTtpZihudWxsIT1lLnBvc3RPcGVyYXRpb25zJiZlLnBvc3RPcGVyYXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5wb3N0T3BlcmF0aW9ucy5sZW5ndGg7KytyKXQudWludDMyKDc0KS5zdHJpbmcoZS5wb3N0T3BlcmF0aW9uc1tyXSk7aWYobnVsbCE9ZS5tYXRlcmlhbGl6ZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm1hdGVyaWFsaXplZCIpJiZ0LnVpbnQzMig4MCkuYm9vbChlLm1hdGVyaWFsaXplZCksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVzY3JpcHRpb24iKSYmdC51aW50MzIoOTApLnN0cmluZyhlLmRlc2NyaXB0aW9uKSxudWxsIT1lLmNvbHVtbnMmJmUuY29sdW1ucy5sZW5ndGgpZm9yKHI9MDtyPGUuY29sdW1ucy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZW5jb2RlKGUuY29sdW1uc1tyXSx0LnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmxhYmVscyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibGFiZWxzIikpe3ZhciBuPU9iamVjdC5rZXlzKGUubGFiZWxzKTtmb3Iocj0wO3I8bi5sZW5ndGg7KytyKXQudWludDMyKDEwNikuZm9yaygpLnVpbnQzMigxMCkuc3RyaW5nKG5bcl0pLnVpbnQzMigxOCkuc3RyaW5nKGUubGFiZWxzW25bcl1dKS5sZGVsaW0oKX1pZihudWxsIT1lLmFkZGl0aW9uYWxPcHRpb25zJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJhZGRpdGlvbmFsT3B0aW9ucyIpKWZvcihuPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpLHI9MDtyPG4ubGVuZ3RoOysrcil0LnVpbnQzMigxMTQpLmZvcmsoKS51aW50MzIoMTApLnN0cmluZyhuW3JdKS51aW50MzIoMTgpLnN0cmluZyhlLmFkZGl0aW9uYWxPcHRpb25zW25bcl1dKS5sZGVsaW0oKTtyZXR1cm4gbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJnQudWludDMyKDEyMCkuYm9vbChlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpLG51bGwhPWUuaGVybWV0aWMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImhlcm1ldGljIikmJnQudWludDMyKDEyOCkuYm9vbChlLmhlcm1ldGljKSxudWxsIT1lLmFzc2VydGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImFzc2VydGlvbnMiKSYmcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLmVuY29kZShlLmFzc2VydGlvbnMsdC51aW50MzIoMTM4KS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHIsbixpPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxsPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnO2UucG9zPGk7KXt2YXIgYz1lLnVpbnQzMigpO3N3aXRjaChjPj4+Myl7Y2FzZSAxOmwubmFtZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpsLmRhdGFzZXQ9ZS5zdHJpbmcoKTticmVhaztjYXNlIDM6bC5wcm9qZWN0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0OmwuZGVwZW5kZW5jeVRhcmdldHMmJmwuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RofHwobC5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksbC5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSA1OmwuZmlsZW5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDY6bC50YWdzJiZsLnRhZ3MubGVuZ3RofHwobC50YWdzPVtdKSxsLnRhZ3MucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDc6bC5kaXNhYmxlZD1lLmJvb2woKTticmVhaztjYXNlIDg6bC5wcmVPcGVyYXRpb25zJiZsLnByZU9wZXJhdGlvbnMubGVuZ3RofHwobC5wcmVPcGVyYXRpb25zPVtdKSxsLnByZU9wZXJhdGlvbnMucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDk6bC5wb3N0T3BlcmF0aW9ucyYmbC5wb3N0T3BlcmF0aW9ucy5sZW5ndGh8fChsLnBvc3RPcGVyYXRpb25zPVtdKSxsLnBvc3RPcGVyYXRpb25zLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAxMDpsLm1hdGVyaWFsaXplZD1lLmJvb2woKTticmVhaztjYXNlIDExOmwuZGVzY3JpcHRpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDEyOmwuY29sdW1ucyYmbC5jb2x1bW5zLmxlbmd0aHx8KGwuY29sdW1ucz1bXSksbC5jb2x1bW5zLnB1c2gocy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAxMzpsLmxhYmVscz09PWEuZW1wdHlPYmplY3QmJihsLmxhYmVscz17fSk7dmFyIHU9ZS51aW50MzIoKStlLnBvcztmb3Iocj0iIixuPSIiO2UucG9zPHU7KXN3aXRjaCgocD1lLnVpbnQzMigpKT4+PjMpe2Nhc2UgMTpyPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm49ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZwKX1sLmxhYmVsc1tyXT1uO2JyZWFrO2Nhc2UgMTQ6Zm9yKGwuYWRkaXRpb25hbE9wdGlvbnM9PT1hLmVtcHR5T2JqZWN0JiYobC5hZGRpdGlvbmFsT3B0aW9ucz17fSksdT1lLnVpbnQzMigpK2UucG9zLHI9IiIsbj0iIjtlLnBvczx1Oyl7dmFyIHA7c3dpdGNoKChwPWUudWludDMyKCkpPj4+Myl7Y2FzZSAxOnI9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bj1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JnApfX1sLmFkZGl0aW9uYWxPcHRpb25zW3JdPW47YnJlYWs7Y2FzZSAxNTpsLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5ib29sKCk7YnJlYWs7Y2FzZSAxNjpsLmhlcm1ldGljPWUuYm9vbCgpO2JyZWFrO2Nhc2UgMTc6bC5hc3NlcnRpb25zPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZjKX19cmV0dXJuIGx9LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJiFhLmlzU3RyaW5nKGUubmFtZSkpcmV0dXJuIm5hbWU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kYXRhc2V0JiZlLmhhc093blByb3BlcnR5KCJkYXRhc2V0IikmJiFhLmlzU3RyaW5nKGUuZGF0YXNldCkpcmV0dXJuImRhdGFzZXQ6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJiFhLmlzU3RyaW5nKGUucHJvamVjdCkpcmV0dXJuInByb2plY3Q6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3QpaWYobj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudmVyaWZ5KGUuZGVwZW5kZW5jeVRhcmdldHNbdF0pKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0cy4iK259aWYobnVsbCE9ZS5maWxlbmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZW5hbWUiKSYmIWEuaXNTdHJpbmcoZS5maWxlbmFtZSkpcmV0dXJuImZpbGVuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXJldHVybiJ0YWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudGFncy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudGFnc1t0XSkpcmV0dXJuInRhZ3M6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmRpc2FibGVkKXJldHVybiJkaXNhYmxlZDogYm9vbGVhbiBleHBlY3RlZCI7aWYobnVsbCE9ZS5wcmVPcGVyYXRpb25zJiZlLmhhc093blByb3BlcnR5KCJwcmVPcGVyYXRpb25zIikpe2lmKCFBcnJheS5pc0FycmF5KGUucHJlT3BlcmF0aW9ucykpcmV0dXJuInByZU9wZXJhdGlvbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5wcmVPcGVyYXRpb25zLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5wcmVPcGVyYXRpb25zW3RdKSlyZXR1cm4icHJlT3BlcmF0aW9uczogc3RyaW5nW10gZXhwZWN0ZWQifWlmKG51bGwhPWUucG9zdE9wZXJhdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoInBvc3RPcGVyYXRpb25zIikpe2lmKCFBcnJheS5pc0FycmF5KGUucG9zdE9wZXJhdGlvbnMpKXJldHVybiJwb3N0T3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5wb3N0T3BlcmF0aW9uc1t0XSkpcmV0dXJuInBvc3RPcGVyYXRpb25zOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5tYXRlcmlhbGl6ZWQmJmUuaGFzT3duUHJvcGVydHkoIm1hdGVyaWFsaXplZCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLm1hdGVyaWFsaXplZClyZXR1cm4ibWF0ZXJpYWxpemVkOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb2x1bW5zJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW5zIikpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpcmV0dXJuImNvbHVtbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5jb2x1bW5zLmxlbmd0aDsrK3QpaWYobj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnZlcmlmeShlLmNvbHVtbnNbdF0pKXJldHVybiJjb2x1bW5zLiIrbn1pZihudWxsIT1lLmxhYmVscyYmZS5oYXNPd25Qcm9wZXJ0eSgibGFiZWxzIikpe2lmKCFhLmlzT2JqZWN0KGUubGFiZWxzKSlyZXR1cm4ibGFiZWxzOiBvYmplY3QgZXhwZWN0ZWQiO3ZhciByPU9iamVjdC5rZXlzKGUubGFiZWxzKTtmb3IodD0wO3Q8ci5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUubGFiZWxzW3JbdF1dKSlyZXR1cm4ibGFiZWxzOiBzdHJpbmd7azpzdHJpbmd9IGV4cGVjdGVkIn1pZihudWxsIT1lLmFkZGl0aW9uYWxPcHRpb25zJiZlLmhhc093blByb3BlcnR5KCJhZGRpdGlvbmFsT3B0aW9ucyIpKXtpZighYS5pc09iamVjdChlLmFkZGl0aW9uYWxPcHRpb25zKSlyZXR1cm4iYWRkaXRpb25hbE9wdGlvbnM6IG9iamVjdCBleHBlY3RlZCI7Zm9yKHI9T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucyksdD0wO3Q8ci5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuYWRkaXRpb25hbE9wdGlvbnNbclt0XV0pKXJldHVybiJhZGRpdGlvbmFsT3B0aW9uczogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM/ImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM6IGJvb2xlYW4gZXhwZWN0ZWQiOm51bGwhPWUuaGVybWV0aWMmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljIikmJiJib29sZWFuIiE9dHlwZW9mIGUuaGVybWV0aWM/Imhlcm1ldGljOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLmFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbnMiKSYmKG49cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLnZlcmlmeShlLmFzc2VydGlvbnMpKT8iYXNzZXJ0aW9ucy4iK246bnVsbDt2YXIgbn0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5kYXRhc2V0JiYodC5kYXRhc2V0PVN0cmluZyhlLmRhdGFzZXQpKSxudWxsIT1lLnByb2plY3QmJih0LnByb2plY3Q9U3RyaW5nKGUucHJvamVjdCkpLGUuZGVwZW5kZW5jeVRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy5kZXBlbmRlbmN5VGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5kZXBlbmRlbmN5VGFyZ2V0c1tyXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19aWYobnVsbCE9ZS5maWxlbmFtZSYmKHQuZmlsZW5hbWU9U3RyaW5nKGUuZmlsZW5hbWUpKSxlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcudGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC50YWdzPVtdLHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudGFnc1tyXT1TdHJpbmcoZS50YWdzW3JdKX1pZihudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxlLnByZU9wZXJhdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUucHJlT3BlcmF0aW9ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcucHJlT3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5wcmVPcGVyYXRpb25zPVtdLHI9MDtyPGUucHJlT3BlcmF0aW9ucy5sZW5ndGg7KytyKXQucHJlT3BlcmF0aW9uc1tyXT1TdHJpbmcoZS5wcmVPcGVyYXRpb25zW3JdKX1pZihlLnBvc3RPcGVyYXRpb25zKXtpZighQXJyYXkuaXNBcnJheShlLnBvc3RPcGVyYXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy5wb3N0T3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5wb3N0T3BlcmF0aW9ucz1bXSxyPTA7cjxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK3IpdC5wb3N0T3BlcmF0aW9uc1tyXT1TdHJpbmcoZS5wb3N0T3BlcmF0aW9uc1tyXSl9aWYobnVsbCE9ZS5tYXRlcmlhbGl6ZWQmJih0Lm1hdGVyaWFsaXplZD1Cb29sZWFuKGUubWF0ZXJpYWxpemVkKSksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmKHQuZGVzY3JpcHRpb249U3RyaW5nKGUuZGVzY3JpcHRpb24pKSxlLmNvbHVtbnMpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcuY29sdW1uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5jb2x1bW5zPVtdLHI9MDtyPGUuY29sdW1ucy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuY29sdW1uc1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy5jb2x1bW5zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNvbHVtbnNbcl09cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5mcm9tT2JqZWN0KGUuY29sdW1uc1tyXSl9fWlmKGUubGFiZWxzKXtpZigib2JqZWN0IiE9dHlwZW9mIGUubGFiZWxzKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnLmxhYmVsczogb2JqZWN0IGV4cGVjdGVkIik7dC5sYWJlbHM9e307dmFyIG49T2JqZWN0LmtleXMoZS5sYWJlbHMpO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3IpdC5sYWJlbHNbbltyXV09U3RyaW5nKGUubGFiZWxzW25bcl1dKX1pZihlLmFkZGl0aW9uYWxPcHRpb25zKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYWRkaXRpb25hbE9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcuYWRkaXRpb25hbE9wdGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO2Zvcih0LmFkZGl0aW9uYWxPcHRpb25zPXt9LG49T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucykscj0wO3I8bi5sZW5ndGg7KytyKXQuYWRkaXRpb25hbE9wdGlvbnNbbltyXV09U3RyaW5nKGUuYWRkaXRpb25hbE9wdGlvbnNbbltyXV0pfWlmKG51bGwhPWUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyYmKHQuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1Cb29sZWFuKGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucykpLG51bGwhPWUuaGVybWV0aWMmJih0Lmhlcm1ldGljPUJvb2xlYW4oZS5oZXJtZXRpYykpLG51bGwhPWUuYXNzZXJ0aW9ucyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmFzc2VydGlvbnMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWcuYXNzZXJ0aW9uczogb2JqZWN0IGV4cGVjdGVkIik7dC5hc3NlcnRpb25zPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5mcm9tT2JqZWN0KGUuYXNzZXJ0aW9ucyl9cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHIsbj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYobi5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxuLnRhZ3M9W10sbi5wcmVPcGVyYXRpb25zPVtdLG4ucG9zdE9wZXJhdGlvbnM9W10sbi5jb2x1bW5zPVtdKSwodC5vYmplY3RzfHx0LmRlZmF1bHRzKSYmKG4ubGFiZWxzPXt9LG4uYWRkaXRpb25hbE9wdGlvbnM9e30pLHQuZGVmYXVsdHMmJihuLm5hbWU9IiIsbi5kYXRhc2V0PSIiLG4ucHJvamVjdD0iIixuLmZpbGVuYW1lPSIiLG4uZGlzYWJsZWQ9ITEsbi5tYXRlcmlhbGl6ZWQ9ITEsbi5kZXNjcmlwdGlvbj0iIixuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ITEsbi5oZXJtZXRpYz0hMSxuLmFzc2VydGlvbnM9bnVsbCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihuLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmKG4uZGF0YXNldD1lLmRhdGFzZXQpLG51bGwhPWUucHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdCIpJiYobi5wcm9qZWN0PWUucHJvamVjdCksZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpe24uZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciBvPTA7bzxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK28pbi5kZXBlbmRlbmN5VGFyZ2V0c1tvXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudG9PYmplY3QoZS5kZXBlbmRlbmN5VGFyZ2V0c1tvXSx0KX1pZihudWxsIT1lLmZpbGVuYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlbmFtZSIpJiYobi5maWxlbmFtZT1lLmZpbGVuYW1lKSxlLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKG4udGFncz1bXSxvPTA7bzxlLnRhZ3MubGVuZ3RoOysrbyluLnRhZ3Nbb109ZS50YWdzW29dO2lmKG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJihuLmRpc2FibGVkPWUuZGlzYWJsZWQpLGUucHJlT3BlcmF0aW9ucyYmZS5wcmVPcGVyYXRpb25zLmxlbmd0aClmb3Iobi5wcmVPcGVyYXRpb25zPVtdLG89MDtvPGUucHJlT3BlcmF0aW9ucy5sZW5ndGg7KytvKW4ucHJlT3BlcmF0aW9uc1tvXT1lLnByZU9wZXJhdGlvbnNbb107aWYoZS5wb3N0T3BlcmF0aW9ucyYmZS5wb3N0T3BlcmF0aW9ucy5sZW5ndGgpZm9yKG4ucG9zdE9wZXJhdGlvbnM9W10sbz0wO288ZS5wb3N0T3BlcmF0aW9ucy5sZW5ndGg7KytvKW4ucG9zdE9wZXJhdGlvbnNbb109ZS5wb3N0T3BlcmF0aW9uc1tvXTtpZihudWxsIT1lLm1hdGVyaWFsaXplZCYmZS5oYXNPd25Qcm9wZXJ0eSgibWF0ZXJpYWxpemVkIikmJihuLm1hdGVyaWFsaXplZD1lLm1hdGVyaWFsaXplZCksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVzY3JpcHRpb24iKSYmKG4uZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS5jb2x1bW5zJiZlLmNvbHVtbnMubGVuZ3RoKWZvcihuLmNvbHVtbnM9W10sbz0wO288ZS5jb2x1bW5zLmxlbmd0aDsrK28pbi5jb2x1bW5zW29dPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IudG9PYmplY3QoZS5jb2x1bW5zW29dLHQpO2lmKGUubGFiZWxzJiYocj1PYmplY3Qua2V5cyhlLmxhYmVscykpLmxlbmd0aClmb3Iobi5sYWJlbHM9e30sbz0wO288ci5sZW5ndGg7KytvKW4ubGFiZWxzW3Jbb11dPWUubGFiZWxzW3Jbb11dO2lmKGUuYWRkaXRpb25hbE9wdGlvbnMmJihyPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpKS5sZW5ndGgpZm9yKG4uYWRkaXRpb25hbE9wdGlvbnM9e30sbz0wO288ci5sZW5ndGg7KytvKW4uYWRkaXRpb25hbE9wdGlvbnNbcltvXV09ZS5hZGRpdGlvbmFsT3B0aW9uc1tyW29dXTtyZXR1cm4gbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJihuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSxudWxsIT1lLmhlcm1ldGljJiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpYyIpJiYobi5oZXJtZXRpYz1lLmhlcm1ldGljKSxudWxsIT1lLmFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbnMiKSYmKG4uYXNzZXJ0aW9ucz1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcudG9PYmplY3QoZS5hc3NlcnRpb25zLHQpKSxufSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZyJ9LHR9KCksdC5PblNjaGVtYUNoYW5nZT0obj17fSwobD1PYmplY3QuY3JlYXRlKG4pKVtuWzBdPSJJR05PUkUiXT0wLGxbblsxXT0iRkFJTCJdPTEsbFtuWzJdPSJFWFRFTkQiXT0yLGxbblszXT0iU1lOQ0hST05JWkUiXT0zLGwpLHQuSW5jcmVtZW50YWxUYWJsZUNvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5kZXBlbmRlbmN5VGFyZ2V0cz1bXSx0aGlzLnRhZ3M9W10sdGhpcy5wcmVPcGVyYXRpb25zPVtdLHRoaXMucG9zdE9wZXJhdGlvbnM9W10sdGhpcy51bmlxdWVLZXk9W10sdGhpcy5jb2x1bW5zPVtdLHRoaXMuY2x1c3RlckJ5PVtdLHRoaXMubGFiZWxzPXt9LHRoaXMuYWRkaXRpb25hbE9wdGlvbnM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5uYW1lPSIiLHQucHJvdG90eXBlLmRhdGFzZXQ9IiIsdC5wcm90b3R5cGUucHJvamVjdD0iIix0LnByb3RvdHlwZS5kZXBlbmRlbmN5VGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZmlsZW5hbWU9IiIsdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGlzYWJsZWQ9ITEsdC5wcm90b3R5cGUucHJlT3BlcmF0aW9ucz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUucG9zdE9wZXJhdGlvbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnByb3RlY3RlZD0hMSx0LnByb3RvdHlwZS51bmlxdWVLZXk9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmRlc2NyaXB0aW9uPSIiLHQucHJvdG90eXBlLmNvbHVtbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnBhcnRpdGlvbkJ5PSIiLHQucHJvdG90eXBlLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzPTAsdC5wcm90b3R5cGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj0hMSx0LnByb3RvdHlwZS51cGRhdGVQYXJ0aXRpb25GaWx0ZXI9IiIsdC5wcm90b3R5cGUuY2x1c3RlckJ5PWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5sYWJlbHM9YS5lbXB0eU9iamVjdCx0LnByb3RvdHlwZS5hZGRpdGlvbmFsT3B0aW9ucz1hLmVtcHR5T2JqZWN0LHQucHJvdG90eXBlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ITEsdC5wcm90b3R5cGUuYXNzZXJ0aW9ucz1udWxsLHQucHJvdG90eXBlLmhlcm1ldGljPSExLHQucHJvdG90eXBlLm9uU2NoZW1hQ2hhbmdlPTAsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUubmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibmFtZSIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUubmFtZSksbnVsbCE9ZS5kYXRhc2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhc2V0IikmJnQudWludDMyKDE4KS5zdHJpbmcoZS5kYXRhc2V0KSxudWxsIT1lLnByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3QiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLnByb2plY3QpLG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5lbmNvZGUoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSx0LnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmZpbGVuYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlbmFtZSIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUuZmlsZW5hbWUpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNTApLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDU2KS5ib29sKGUuZGlzYWJsZWQpLG51bGwhPWUucHJlT3BlcmF0aW9ucyYmZS5wcmVPcGVyYXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5wcmVPcGVyYXRpb25zLmxlbmd0aDsrK3IpdC51aW50MzIoNjYpLnN0cmluZyhlLnByZU9wZXJhdGlvbnNbcl0pO2lmKG51bGwhPWUucG9zdE9wZXJhdGlvbnMmJmUucG9zdE9wZXJhdGlvbnMubGVuZ3RoKWZvcihyPTA7cjxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK3IpdC51aW50MzIoNzQpLnN0cmluZyhlLnBvc3RPcGVyYXRpb25zW3JdKTtpZihudWxsIT1lLnByb3RlY3RlZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicHJvdGVjdGVkIikmJnQudWludDMyKDgwKS5ib29sKGUucHJvdGVjdGVkKSxudWxsIT1lLnVuaXF1ZUtleSYmZS51bmlxdWVLZXkubGVuZ3RoKWZvcihyPTA7cjxlLnVuaXF1ZUtleS5sZW5ndGg7KytyKXQudWludDMyKDkwKS5zdHJpbmcoZS51bmlxdWVLZXlbcl0pO2lmKG51bGwhPWUuZGVzY3JpcHRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlc2NyaXB0aW9uIikmJnQudWludDMyKDk4KS5zdHJpbmcoZS5kZXNjcmlwdGlvbiksbnVsbCE9ZS5jb2x1bW5zJiZlLmNvbHVtbnMubGVuZ3RoKWZvcihyPTA7cjxlLmNvbHVtbnMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLmVuY29kZShlLmNvbHVtbnNbcl0sdC51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUucGFydGl0aW9uQnkmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInBhcnRpdGlvbkJ5IikmJnQudWludDMyKDExNCkuc3RyaW5nKGUucGFydGl0aW9uQnkpLG51bGwhPWUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInBhcnRpdGlvbkV4cGlyYXRpb25EYXlzIikmJnQudWludDMyKDEyMCkuaW50MzIoZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyksbnVsbCE9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIikmJnQudWludDMyKDEyOCkuYm9vbChlLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIpLG51bGwhPWUudXBkYXRlUGFydGl0aW9uRmlsdGVyJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ1cGRhdGVQYXJ0aXRpb25GaWx0ZXIiKSYmdC51aW50MzIoMTM4KS5zdHJpbmcoZS51cGRhdGVQYXJ0aXRpb25GaWx0ZXIpLG51bGwhPWUuY2x1c3RlckJ5JiZlLmNsdXN0ZXJCeS5sZW5ndGgpZm9yKHI9MDtyPGUuY2x1c3RlckJ5Lmxlbmd0aDsrK3IpdC51aW50MzIoMTQ2KS5zdHJpbmcoZS5jbHVzdGVyQnlbcl0pO2lmKG51bGwhPWUubGFiZWxzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJsYWJlbHMiKSl7dmFyIG49T2JqZWN0LmtleXMoZS5sYWJlbHMpO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3IpdC51aW50MzIoMTU0KS5mb3JrKCkudWludDMyKDEwKS5zdHJpbmcobltyXSkudWludDMyKDE4KS5zdHJpbmcoZS5sYWJlbHNbbltyXV0pLmxkZWxpbSgpfWlmKG51bGwhPWUuYWRkaXRpb25hbE9wdGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImFkZGl0aW9uYWxPcHRpb25zIikpZm9yKG49T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucykscj0wO3I8bi5sZW5ndGg7KytyKXQudWludDMyKDE2MikuZm9yaygpLnVpbnQzMigxMCkuc3RyaW5nKG5bcl0pLnVpbnQzMigxOCkuc3RyaW5nKGUuYWRkaXRpb25hbE9wdGlvbnNbbltyXV0pLmxkZWxpbSgpO3JldHVybiBudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMiKSYmdC51aW50MzIoMTY4KS5ib29sKGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyksbnVsbCE9ZS5hc3NlcnRpb25zJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJhc3NlcnRpb25zIikmJnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5lbmNvZGUoZS5hc3NlcnRpb25zLHQudWludDMyKDE3OCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmhlcm1ldGljJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJoZXJtZXRpYyIpJiZ0LnVpbnQzMigxODQpLmJvb2woZS5oZXJtZXRpYyksbnVsbCE9ZS5vblNjaGVtYUNoYW5nZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwib25TY2hlbWFDaGFuZ2UiKSYmdC51aW50MzIoMTkyKS5pbnQzMihlLm9uU2NoZW1hQ2hhbmdlKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByLG4saT12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsbD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZztlLnBvczxpOyl7dmFyIGM9ZS51aW50MzIoKTtzd2l0Y2goYz4+PjMpe2Nhc2UgMTpsLm5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bC5kYXRhc2V0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAzOmwucHJvamVjdD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNDpsLmRlcGVuZGVuY3lUYXJnZXRzJiZsLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aHx8KGwuZGVwZW5kZW5jeVRhcmdldHM9W10pLGwuZGVwZW5kZW5jeVRhcmdldHMucHVzaChzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgNTpsLmZpbGVuYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA2OmwudGFncyYmbC50YWdzLmxlbmd0aHx8KGwudGFncz1bXSksbC50YWdzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA3OmwuZGlzYWJsZWQ9ZS5ib29sKCk7YnJlYWs7Y2FzZSA4OmwucHJlT3BlcmF0aW9ucyYmbC5wcmVPcGVyYXRpb25zLmxlbmd0aHx8KGwucHJlT3BlcmF0aW9ucz1bXSksbC5wcmVPcGVyYXRpb25zLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA5OmwucG9zdE9wZXJhdGlvbnMmJmwucG9zdE9wZXJhdGlvbnMubGVuZ3RofHwobC5wb3N0T3BlcmF0aW9ucz1bXSksbC5wb3N0T3BlcmF0aW9ucy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgMTA6bC5wcm90ZWN0ZWQ9ZS5ib29sKCk7YnJlYWs7Y2FzZSAxMTpsLnVuaXF1ZUtleSYmbC51bmlxdWVLZXkubGVuZ3RofHwobC51bmlxdWVLZXk9W10pLGwudW5pcXVlS2V5LnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAxMjpsLmRlc2NyaXB0aW9uPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxMzpsLmNvbHVtbnMmJmwuY29sdW1ucy5sZW5ndGh8fChsLmNvbHVtbnM9W10pLGwuY29sdW1ucy5wdXNoKHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMTQ6bC5wYXJ0aXRpb25CeT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMTU6bC5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz1lLmludDMyKCk7YnJlYWs7Y2FzZSAxNjpsLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI9ZS5ib29sKCk7YnJlYWs7Y2FzZSAxNzpsLnVwZGF0ZVBhcnRpdGlvbkZpbHRlcj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMTg6bC5jbHVzdGVyQnkmJmwuY2x1c3RlckJ5Lmxlbmd0aHx8KGwuY2x1c3RlckJ5PVtdKSxsLmNsdXN0ZXJCeS5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgMTk6bC5sYWJlbHM9PT1hLmVtcHR5T2JqZWN0JiYobC5sYWJlbHM9e30pO3ZhciB1PWUudWludDMyKCkrZS5wb3M7Zm9yKHI9IiIsbj0iIjtlLnBvczx1Oylzd2l0Y2goKHA9ZS51aW50MzIoKSk+Pj4zKXtjYXNlIDE6cj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuPWUuc3RyaW5nKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmcCl9bC5sYWJlbHNbcl09bjticmVhaztjYXNlIDIwOmZvcihsLmFkZGl0aW9uYWxPcHRpb25zPT09YS5lbXB0eU9iamVjdCYmKGwuYWRkaXRpb25hbE9wdGlvbnM9e30pLHU9ZS51aW50MzIoKStlLnBvcyxyPSIiLG49IiI7ZS5wb3M8dTspe3ZhciBwO3N3aXRjaCgocD1lLnVpbnQzMigpKT4+PjMpe2Nhc2UgMTpyPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm49ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZwKX19bC5hZGRpdGlvbmFsT3B0aW9uc1tyXT1uO2JyZWFrO2Nhc2UgMjE6bC5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPWUuYm9vbCgpO2JyZWFrO2Nhc2UgMjI6bC5hc3NlcnRpb25zPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDIzOmwuaGVybWV0aWM9ZS5ib29sKCk7YnJlYWs7Y2FzZSAyNDpsLm9uU2NoZW1hQ2hhbmdlPWUuaW50MzIoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZjKX19cmV0dXJuIGx9LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJiFhLmlzU3RyaW5nKGUubmFtZSkpcmV0dXJuIm5hbWU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kYXRhc2V0JiZlLmhhc093blByb3BlcnR5KCJkYXRhc2V0IikmJiFhLmlzU3RyaW5nKGUuZGF0YXNldCkpcmV0dXJuImRhdGFzZXQ6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJiFhLmlzU3RyaW5nKGUucHJvamVjdCkpcmV0dXJuInByb2plY3Q6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3QpaWYobj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudmVyaWZ5KGUuZGVwZW5kZW5jeVRhcmdldHNbdF0pKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0cy4iK259aWYobnVsbCE9ZS5maWxlbmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZW5hbWUiKSYmIWEuaXNTdHJpbmcoZS5maWxlbmFtZSkpcmV0dXJuImZpbGVuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXJldHVybiJ0YWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudGFncy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudGFnc1t0XSkpcmV0dXJuInRhZ3M6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmRpc2FibGVkKXJldHVybiJkaXNhYmxlZDogYm9vbGVhbiBleHBlY3RlZCI7aWYobnVsbCE9ZS5wcmVPcGVyYXRpb25zJiZlLmhhc093blByb3BlcnR5KCJwcmVPcGVyYXRpb25zIikpe2lmKCFBcnJheS5pc0FycmF5KGUucHJlT3BlcmF0aW9ucykpcmV0dXJuInByZU9wZXJhdGlvbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5wcmVPcGVyYXRpb25zLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5wcmVPcGVyYXRpb25zW3RdKSlyZXR1cm4icHJlT3BlcmF0aW9uczogc3RyaW5nW10gZXhwZWN0ZWQifWlmKG51bGwhPWUucG9zdE9wZXJhdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoInBvc3RPcGVyYXRpb25zIikpe2lmKCFBcnJheS5pc0FycmF5KGUucG9zdE9wZXJhdGlvbnMpKXJldHVybiJwb3N0T3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5wb3N0T3BlcmF0aW9uc1t0XSkpcmV0dXJuInBvc3RPcGVyYXRpb25zOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5wcm90ZWN0ZWQmJmUuaGFzT3duUHJvcGVydHkoInByb3RlY3RlZCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLnByb3RlY3RlZClyZXR1cm4icHJvdGVjdGVkOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLnVuaXF1ZUtleSYmZS5oYXNPd25Qcm9wZXJ0eSgidW5pcXVlS2V5Iikpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5KSlyZXR1cm4idW5pcXVlS2V5OiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudW5pcXVlS2V5Lmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS51bmlxdWVLZXlbdF0pKXJldHVybiJ1bmlxdWVLZXk6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb2x1bW5zJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW5zIikpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpcmV0dXJuImNvbHVtbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5jb2x1bW5zLmxlbmd0aDsrK3QpaWYobj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnZlcmlmeShlLmNvbHVtbnNbdF0pKXJldHVybiJjb2x1bW5zLiIrbn1pZihudWxsIT1lLnBhcnRpdGlvbkJ5JiZlLmhhc093blByb3BlcnR5KCJwYXJ0aXRpb25CeSIpJiYhYS5pc1N0cmluZyhlLnBhcnRpdGlvbkJ5KSlyZXR1cm4icGFydGl0aW9uQnk6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmZS5oYXNPd25Qcm9wZXJ0eSgicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiKSYmIWEuaXNJbnRlZ2VyKGUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMpKXJldHVybiJwYXJ0aXRpb25FeHBpcmF0aW9uRGF5czogaW50ZWdlciBleHBlY3RlZCI7aWYobnVsbCE9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiZlLmhhc093blByb3BlcnR5KCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIikmJiJib29sZWFuIiE9dHlwZW9mIGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlcilyZXR1cm4icmVxdWlyZVBhcnRpdGlvbkZpbHRlcjogYm9vbGVhbiBleHBlY3RlZCI7aWYobnVsbCE9ZS51cGRhdGVQYXJ0aXRpb25GaWx0ZXImJmUuaGFzT3duUHJvcGVydHkoInVwZGF0ZVBhcnRpdGlvbkZpbHRlciIpJiYhYS5pc1N0cmluZyhlLnVwZGF0ZVBhcnRpdGlvbkZpbHRlcikpcmV0dXJuInVwZGF0ZVBhcnRpdGlvbkZpbHRlcjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmNsdXN0ZXJCeSYmZS5oYXNPd25Qcm9wZXJ0eSgiY2x1c3RlckJ5Iikpe2lmKCFBcnJheS5pc0FycmF5KGUuY2x1c3RlckJ5KSlyZXR1cm4iY2x1c3RlckJ5OiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUuY2x1c3RlckJ5Lmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5jbHVzdGVyQnlbdF0pKXJldHVybiJjbHVzdGVyQnk6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmxhYmVscyYmZS5oYXNPd25Qcm9wZXJ0eSgibGFiZWxzIikpe2lmKCFhLmlzT2JqZWN0KGUubGFiZWxzKSlyZXR1cm4ibGFiZWxzOiBvYmplY3QgZXhwZWN0ZWQiO3ZhciByPU9iamVjdC5rZXlzKGUubGFiZWxzKTtmb3IodD0wO3Q8ci5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUubGFiZWxzW3JbdF1dKSlyZXR1cm4ibGFiZWxzOiBzdHJpbmd7azpzdHJpbmd9IGV4cGVjdGVkIn1pZihudWxsIT1lLmFkZGl0aW9uYWxPcHRpb25zJiZlLmhhc093blByb3BlcnR5KCJhZGRpdGlvbmFsT3B0aW9ucyIpKXtpZighYS5pc09iamVjdChlLmFkZGl0aW9uYWxPcHRpb25zKSlyZXR1cm4iYWRkaXRpb25hbE9wdGlvbnM6IG9iamVjdCBleHBlY3RlZCI7Zm9yKHI9T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucyksdD0wO3Q8ci5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuYWRkaXRpb25hbE9wdGlvbnNbclt0XV0pKXJldHVybiJhZGRpdGlvbmFsT3B0aW9uczogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucylyZXR1cm4iZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbiBleHBlY3RlZCI7dmFyIG47aWYobnVsbCE9ZS5hc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJhc3NlcnRpb25zIikmJihuPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy52ZXJpZnkoZS5hc3NlcnRpb25zKSkpcmV0dXJuImFzc2VydGlvbnMuIituO2lmKG51bGwhPWUuaGVybWV0aWMmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljIikmJiJib29sZWFuIiE9dHlwZW9mIGUuaGVybWV0aWMpcmV0dXJuImhlcm1ldGljOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLm9uU2NoZW1hQ2hhbmdlJiZlLmhhc093blByb3BlcnR5KCJvblNjaGVtYUNoYW5nZSIpKXN3aXRjaChlLm9uU2NoZW1hQ2hhbmdlKXtkZWZhdWx0OnJldHVybiJvblNjaGVtYUNoYW5nZTogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSAzOn1yZXR1cm4gbnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5kYXRhc2V0JiYodC5kYXRhc2V0PVN0cmluZyhlLmRhdGFzZXQpKSxudWxsIT1lLnByb2plY3QmJih0LnByb2plY3Q9U3RyaW5nKGUucHJvamVjdCkpLGUuZGVwZW5kZW5jeVRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy5kZXBlbmRlbmN5VGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5kZXBlbmRlbmN5VGFyZ2V0c1tyXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19aWYobnVsbCE9ZS5maWxlbmFtZSYmKHQuZmlsZW5hbWU9U3RyaW5nKGUuZmlsZW5hbWUpKSxlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcudGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC50YWdzPVtdLHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudGFnc1tyXT1TdHJpbmcoZS50YWdzW3JdKX1pZihudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxlLnByZU9wZXJhdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUucHJlT3BlcmF0aW9ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcucHJlT3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5wcmVPcGVyYXRpb25zPVtdLHI9MDtyPGUucHJlT3BlcmF0aW9ucy5sZW5ndGg7KytyKXQucHJlT3BlcmF0aW9uc1tyXT1TdHJpbmcoZS5wcmVPcGVyYXRpb25zW3JdKX1pZihlLnBvc3RPcGVyYXRpb25zKXtpZighQXJyYXkuaXNBcnJheShlLnBvc3RPcGVyYXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy5wb3N0T3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5wb3N0T3BlcmF0aW9ucz1bXSxyPTA7cjxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK3IpdC5wb3N0T3BlcmF0aW9uc1tyXT1TdHJpbmcoZS5wb3N0T3BlcmF0aW9uc1tyXSl9aWYobnVsbCE9ZS5wcm90ZWN0ZWQmJih0LnByb3RlY3RlZD1Cb29sZWFuKGUucHJvdGVjdGVkKSksZS51bmlxdWVLZXkpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5KSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy51bmlxdWVLZXk6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQudW5pcXVlS2V5PVtdLHI9MDtyPGUudW5pcXVlS2V5Lmxlbmd0aDsrK3IpdC51bmlxdWVLZXlbcl09U3RyaW5nKGUudW5pcXVlS2V5W3JdKX1pZihudWxsIT1lLmRlc2NyaXB0aW9uJiYodC5kZXNjcmlwdGlvbj1TdHJpbmcoZS5kZXNjcmlwdGlvbikpLGUuY29sdW1ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5jb2x1bW5zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy5jb2x1bW5zOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LmNvbHVtbnM9W10scj0wO3I8ZS5jb2x1bW5zLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jb2x1bW5zW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLmNvbHVtbnM6IG9iamVjdCBleHBlY3RlZCIpO3QuY29sdW1uc1tyXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLmZyb21PYmplY3QoZS5jb2x1bW5zW3JdKX19aWYobnVsbCE9ZS5wYXJ0aXRpb25CeSYmKHQucGFydGl0aW9uQnk9U3RyaW5nKGUucGFydGl0aW9uQnkpKSxudWxsIT1lLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzJiYodC5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz0wfGUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMpLG51bGwhPWUucmVxdWlyZVBhcnRpdGlvbkZpbHRlciYmKHQucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj1Cb29sZWFuKGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlcikpLG51bGwhPWUudXBkYXRlUGFydGl0aW9uRmlsdGVyJiYodC51cGRhdGVQYXJ0aXRpb25GaWx0ZXI9U3RyaW5nKGUudXBkYXRlUGFydGl0aW9uRmlsdGVyKSksZS5jbHVzdGVyQnkpe2lmKCFBcnJheS5pc0FycmF5KGUuY2x1c3RlckJ5KSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy5jbHVzdGVyQnk6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQuY2x1c3RlckJ5PVtdLHI9MDtyPGUuY2x1c3RlckJ5Lmxlbmd0aDsrK3IpdC5jbHVzdGVyQnlbcl09U3RyaW5nKGUuY2x1c3RlckJ5W3JdKX1pZihlLmxhYmVscyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmxhYmVscyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZy5sYWJlbHM6IG9iamVjdCBleHBlY3RlZCIpO3QubGFiZWxzPXt9O3ZhciBuPU9iamVjdC5rZXlzKGUubGFiZWxzKTtmb3Iocj0wO3I8bi5sZW5ndGg7KytyKXQubGFiZWxzW25bcl1dPVN0cmluZyhlLmxhYmVsc1tuW3JdXSl9aWYoZS5hZGRpdGlvbmFsT3B0aW9ucyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmFkZGl0aW9uYWxPcHRpb25zKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLmFkZGl0aW9uYWxPcHRpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTtmb3IodC5hZGRpdGlvbmFsT3B0aW9ucz17fSxuPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpLHI9MDtyPG4ubGVuZ3RoOysrcil0LmFkZGl0aW9uYWxPcHRpb25zW25bcl1dPVN0cmluZyhlLmFkZGl0aW9uYWxPcHRpb25zW25bcl1dKX1pZihudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJih0LmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9Qm9vbGVhbihlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpKSxudWxsIT1lLmFzc2VydGlvbnMpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hc3NlcnRpb25zKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLmFzc2VydGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO3QuYXNzZXJ0aW9ucz1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuZnJvbU9iamVjdChlLmFzc2VydGlvbnMpfXN3aXRjaChudWxsIT1lLmhlcm1ldGljJiYodC5oZXJtZXRpYz1Cb29sZWFuKGUuaGVybWV0aWMpKSxlLm9uU2NoZW1hQ2hhbmdlKXtkZWZhdWx0OmlmKCJudW1iZXIiPT10eXBlb2YgZS5vblNjaGVtYUNoYW5nZSl7dC5vblNjaGVtYUNoYW5nZT1lLm9uU2NoZW1hQ2hhbmdlO2JyZWFrfWJyZWFrO2Nhc2UiSUdOT1JFIjpjYXNlIDA6dC5vblNjaGVtYUNoYW5nZT0wO2JyZWFrO2Nhc2UiRkFJTCI6Y2FzZSAxOnQub25TY2hlbWFDaGFuZ2U9MTticmVhaztjYXNlIkVYVEVORCI6Y2FzZSAyOnQub25TY2hlbWFDaGFuZ2U9MjticmVhaztjYXNlIlNZTkNIUk9OSVpFIjpjYXNlIDM6dC5vblNjaGVtYUNoYW5nZT0zfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByLG49e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG4uZGVwZW5kZW5jeVRhcmdldHM9W10sbi50YWdzPVtdLG4ucHJlT3BlcmF0aW9ucz1bXSxuLnBvc3RPcGVyYXRpb25zPVtdLG4udW5pcXVlS2V5PVtdLG4uY29sdW1ucz1bXSxuLmNsdXN0ZXJCeT1bXSksKHQub2JqZWN0c3x8dC5kZWZhdWx0cykmJihuLmxhYmVscz17fSxuLmFkZGl0aW9uYWxPcHRpb25zPXt9KSx0LmRlZmF1bHRzJiYobi5uYW1lPSIiLG4uZGF0YXNldD0iIixuLnByb2plY3Q9IiIsbi5maWxlbmFtZT0iIixuLmRpc2FibGVkPSExLG4ucHJvdGVjdGVkPSExLG4uZGVzY3JpcHRpb249IiIsbi5wYXJ0aXRpb25CeT0iIixuLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzPTAsbi5yZXF1aXJlUGFydGl0aW9uRmlsdGVyPSExLG4udXBkYXRlUGFydGl0aW9uRmlsdGVyPSIiLG4uZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSxuLmFzc2VydGlvbnM9bnVsbCxuLmhlcm1ldGljPSExLG4ub25TY2hlbWFDaGFuZ2U9dC5lbnVtcz09PVN0cmluZz8iSUdOT1JFIjowKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmKG4ubmFtZT1lLm5hbWUpLG51bGwhPWUuZGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiYobi5kYXRhc2V0PWUuZGF0YXNldCksbnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJihuLnByb2plY3Q9ZS5wcm9qZWN0KSxlLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aCl7bi5kZXBlbmRlbmN5VGFyZ2V0cz1bXTtmb3IodmFyIG89MDtvPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrbyluLmRlcGVuZGVuY3lUYXJnZXRzW29dPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC50b09iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW29dLHQpfWlmKG51bGwhPWUuZmlsZW5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVuYW1lIikmJihuLmZpbGVuYW1lPWUuZmlsZW5hbWUpLGUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iobi50YWdzPVtdLG89MDtvPGUudGFncy5sZW5ndGg7KytvKW4udGFnc1tvXT1lLnRhZ3Nbb107aWYobnVsbCE9ZS5kaXNhYmxlZCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzYWJsZWQiKSYmKG4uZGlzYWJsZWQ9ZS5kaXNhYmxlZCksZS5wcmVPcGVyYXRpb25zJiZlLnByZU9wZXJhdGlvbnMubGVuZ3RoKWZvcihuLnByZU9wZXJhdGlvbnM9W10sbz0wO288ZS5wcmVPcGVyYXRpb25zLmxlbmd0aDsrK28pbi5wcmVPcGVyYXRpb25zW29dPWUucHJlT3BlcmF0aW9uc1tvXTtpZihlLnBvc3RPcGVyYXRpb25zJiZlLnBvc3RPcGVyYXRpb25zLmxlbmd0aClmb3Iobi5wb3N0T3BlcmF0aW9ucz1bXSxvPTA7bzxlLnBvc3RPcGVyYXRpb25zLmxlbmd0aDsrK28pbi5wb3N0T3BlcmF0aW9uc1tvXT1lLnBvc3RPcGVyYXRpb25zW29dO2lmKG51bGwhPWUucHJvdGVjdGVkJiZlLmhhc093blByb3BlcnR5KCJwcm90ZWN0ZWQiKSYmKG4ucHJvdGVjdGVkPWUucHJvdGVjdGVkKSxlLnVuaXF1ZUtleSYmZS51bmlxdWVLZXkubGVuZ3RoKWZvcihuLnVuaXF1ZUtleT1bXSxvPTA7bzxlLnVuaXF1ZUtleS5sZW5ndGg7KytvKW4udW5pcXVlS2V5W29dPWUudW5pcXVlS2V5W29dO2lmKG51bGwhPWUuZGVzY3JpcHRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlc2NyaXB0aW9uIikmJihuLmRlc2NyaXB0aW9uPWUuZGVzY3JpcHRpb24pLGUuY29sdW1ucyYmZS5jb2x1bW5zLmxlbmd0aClmb3Iobi5jb2x1bW5zPVtdLG89MDtvPGUuY29sdW1ucy5sZW5ndGg7KytvKW4uY29sdW1uc1tvXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnRvT2JqZWN0KGUuY29sdW1uc1tvXSx0KTtpZihudWxsIT1lLnBhcnRpdGlvbkJ5JiZlLmhhc093blByb3BlcnR5KCJwYXJ0aXRpb25CeSIpJiYobi5wYXJ0aXRpb25CeT1lLnBhcnRpdGlvbkJ5KSxudWxsIT1lLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzJiZlLmhhc093blByb3BlcnR5KCJwYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyIpJiYobi5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz1lLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzKSxudWxsIT1lLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXImJmUuaGFzT3duUHJvcGVydHkoInJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIiKSYmKG4ucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj1lLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIpLG51bGwhPWUudXBkYXRlUGFydGl0aW9uRmlsdGVyJiZlLmhhc093blByb3BlcnR5KCJ1cGRhdGVQYXJ0aXRpb25GaWx0ZXIiKSYmKG4udXBkYXRlUGFydGl0aW9uRmlsdGVyPWUudXBkYXRlUGFydGl0aW9uRmlsdGVyKSxlLmNsdXN0ZXJCeSYmZS5jbHVzdGVyQnkubGVuZ3RoKWZvcihuLmNsdXN0ZXJCeT1bXSxvPTA7bzxlLmNsdXN0ZXJCeS5sZW5ndGg7KytvKW4uY2x1c3RlckJ5W29dPWUuY2x1c3RlckJ5W29dO2lmKGUubGFiZWxzJiYocj1PYmplY3Qua2V5cyhlLmxhYmVscykpLmxlbmd0aClmb3Iobi5sYWJlbHM9e30sbz0wO288ci5sZW5ndGg7KytvKW4ubGFiZWxzW3Jbb11dPWUubGFiZWxzW3Jbb11dO2lmKGUuYWRkaXRpb25hbE9wdGlvbnMmJihyPU9iamVjdC5rZXlzKGUuYWRkaXRpb25hbE9wdGlvbnMpKS5sZW5ndGgpZm9yKG4uYWRkaXRpb25hbE9wdGlvbnM9e30sbz0wO288ci5sZW5ndGg7KytvKW4uYWRkaXRpb25hbE9wdGlvbnNbcltvXV09ZS5hZGRpdGlvbmFsT3B0aW9uc1tyW29dXTtyZXR1cm4gbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJihuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSxudWxsIT1lLmFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbnMiKSYmKG4uYXNzZXJ0aW9ucz1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcudG9PYmplY3QoZS5hc3NlcnRpb25zLHQpKSxudWxsIT1lLmhlcm1ldGljJiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpYyIpJiYobi5oZXJtZXRpYz1lLmhlcm1ldGljKSxudWxsIT1lLm9uU2NoZW1hQ2hhbmdlJiZlLmhhc093blByb3BlcnR5KCJvblNjaGVtYUNoYW5nZSIpJiYobi5vblNjaGVtYUNoYW5nZT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9uU2NoZW1hQ2hhbmdlW2Uub25TY2hlbWFDaGFuZ2VdP2Uub25TY2hlbWFDaGFuZ2U6cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuT25TY2hlbWFDaGFuZ2VbZS5vblNjaGVtYUNoYW5nZV06ZS5vblNjaGVtYUNoYW5nZSksbn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcifSx0fSgpLHQuQXNzZXJ0aW9uQ29uZmlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLHRoaXMudGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUuZGF0YXNldD0iIix0LnByb3RvdHlwZS5wcm9qZWN0PSIiLHQucHJvdG90eXBlLmRlcGVuZGVuY3lUYXJnZXRzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5maWxlbmFtZT0iIix0LnByb3RvdHlwZS50YWdzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5kaXNhYmxlZD0hMSx0LnByb3RvdHlwZS5kZXNjcmlwdGlvbj0iIix0LnByb3RvdHlwZS5oZXJtZXRpYz0hMSx0LnByb3RvdHlwZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPSExLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm5hbWUiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLm5hbWUpLG51bGwhPWUuZGF0YXNldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGF0YXNldCIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuZGF0YXNldCksbnVsbCE9ZS5wcm9qZWN0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJwcm9qZWN0IikmJnQudWludDMyKDI2KS5zdHJpbmcoZS5wcm9qZWN0KSxudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZW5jb2RlKGUuZGVwZW5kZW5jeVRhcmdldHNbcl0sdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5maWxlbmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZmlsZW5hbWUiKSYmdC51aW50MzIoNDIpLnN0cmluZyhlLmZpbGVuYW1lKSxudWxsIT1lLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudWludDMyKDUwKS5zdHJpbmcoZS50YWdzW3JdKTtyZXR1cm4gbnVsbCE9ZS5kaXNhYmxlZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGlzYWJsZWQiKSYmdC51aW50MzIoNTYpLmJvb2woZS5kaXNhYmxlZCksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVzY3JpcHRpb24iKSYmdC51aW50MzIoNjYpLnN0cmluZyhlLmRlc2NyaXB0aW9uKSxudWxsIT1lLmhlcm1ldGljJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJoZXJtZXRpYyIpJiZ0LnVpbnQzMig3MikuYm9vbChlLmhlcm1ldGljKSxudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMiKSYmdC51aW50MzIoODApLmJvb2woZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4uZGF0YXNldD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzpuLnByb2plY3Q9ZS5zdHJpbmcoKTticmVhaztjYXNlIDQ6bi5kZXBlbmRlbmN5VGFyZ2V0cyYmbi5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGh8fChuLmRlcGVuZGVuY3lUYXJnZXRzPVtdKSxuLmRlcGVuZGVuY3lUYXJnZXRzLnB1c2gocy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDU6bi5maWxlbmFtZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNjpuLnRhZ3MmJm4udGFncy5sZW5ndGh8fChuLnRhZ3M9W10pLG4udGFncy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgNzpuLmRpc2FibGVkPWUuYm9vbCgpO2JyZWFrO2Nhc2UgODpuLmRlc2NyaXB0aW9uPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA5Om4uaGVybWV0aWM9ZS5ib29sKCk7YnJlYWs7Y2FzZSAxMDpuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5ib29sKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYhYS5pc1N0cmluZyhlLm5hbWUpKXJldHVybiJuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiYhYS5pc1N0cmluZyhlLmRhdGFzZXQpKXJldHVybiJkYXRhc2V0OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUucHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdCIpJiYhYS5pc1N0cmluZyhlLnByb2plY3QpKXJldHVybiJwcm9qZWN0OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZGVuY3lUYXJnZXRzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7Kyt0KXt2YXIgcj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudmVyaWZ5KGUuZGVwZW5kZW5jeVRhcmdldHNbdF0pO2lmKHIpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzLiIrcn19aWYobnVsbCE9ZS5maWxlbmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZW5hbWUiKSYmIWEuaXNTdHJpbmcoZS5maWxlbmFtZSkpcmV0dXJuImZpbGVuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXJldHVybiJ0YWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudGFncy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudGFnc1t0XSkpcmV0dXJuInRhZ3M6IHN0cmluZ1tdIGV4cGVjdGVkIn1yZXR1cm4gbnVsbCE9ZS5kaXNhYmxlZCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzYWJsZWQiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5kaXNhYmxlZD8iZGlzYWJsZWQ6IGJvb2xlYW4gZXhwZWN0ZWQiOm51bGwhPWUuZGVzY3JpcHRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlc2NyaXB0aW9uIikmJiFhLmlzU3RyaW5nKGUuZGVzY3JpcHRpb24pPyJkZXNjcmlwdGlvbjogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLmhlcm1ldGljJiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpYyIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmhlcm1ldGljPyJoZXJtZXRpYzogYm9vbGVhbiBleHBlY3RlZCI6bnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz8iZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbiBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZztpZihudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUuZGF0YXNldCYmKHQuZGF0YXNldD1TdHJpbmcoZS5kYXRhc2V0KSksbnVsbCE9ZS5wcm9qZWN0JiYodC5wcm9qZWN0PVN0cmluZyhlLnByb2plY3QpKSxlLmRlcGVuZGVuY3lUYXJnZXRzKXtpZighQXJyYXkuaXNBcnJheShlLmRlcGVuZGVuY3lUYXJnZXRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuQXNzZXJ0aW9uQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuQXNzZXJ0aW9uQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmRlcGVuZGVuY3lUYXJnZXRzW3JdPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5mcm9tT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pfX1pZihudWxsIT1lLmZpbGVuYW1lJiYodC5maWxlbmFtZT1TdHJpbmcoZS5maWxlbmFtZSkpLGUudGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuQXNzZXJ0aW9uQ29uZmlnLnRhZ3M6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQudGFncz1bXSxyPTA7cjxlLnRhZ3MubGVuZ3RoOysrcil0LnRhZ3Nbcl09U3RyaW5nKGUudGFnc1tyXSl9cmV0dXJuIG51bGwhPWUuZGlzYWJsZWQmJih0LmRpc2FibGVkPUJvb2xlYW4oZS5kaXNhYmxlZCkpLG51bGwhPWUuZGVzY3JpcHRpb24mJih0LmRlc2NyaXB0aW9uPVN0cmluZyhlLmRlc2NyaXB0aW9uKSksbnVsbCE9ZS5oZXJtZXRpYyYmKHQuaGVybWV0aWM9Qm9vbGVhbihlLmhlcm1ldGljKSksbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiYodC5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPUJvb2xlYW4oZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxyLnRhZ3M9W10pLHQuZGVmYXVsdHMmJihyLm5hbWU9IiIsci5kYXRhc2V0PSIiLHIucHJvamVjdD0iIixyLmZpbGVuYW1lPSIiLHIuZGlzYWJsZWQ9ITEsci5kZXNjcmlwdGlvbj0iIixyLmhlcm1ldGljPSExLHIuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihyLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmKHIuZGF0YXNldD1lLmRhdGFzZXQpLG51bGwhPWUucHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdCIpJiYoci5wcm9qZWN0PWUucHJvamVjdCksZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpe3IuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciBuPTA7bjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK24pci5kZXBlbmRlbmN5VGFyZ2V0c1tuXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudG9PYmplY3QoZS5kZXBlbmRlbmN5VGFyZ2V0c1tuXSx0KX1pZihudWxsIT1lLmZpbGVuYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlbmFtZSIpJiYoci5maWxlbmFtZT1lLmZpbGVuYW1lKSxlLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKHIudGFncz1bXSxuPTA7bjxlLnRhZ3MubGVuZ3RoOysrbilyLnRhZ3Nbbl09ZS50YWdzW25dO3JldHVybiBudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYoci5kZXNjcmlwdGlvbj1lLmRlc2NyaXB0aW9uKSxudWxsIT1lLmhlcm1ldGljJiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpYyIpJiYoci5oZXJtZXRpYz1lLmhlcm1ldGljKSxudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMiKSYmKHIuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcifSx0fSgpLHQuT3BlcmF0aW9uQ29uZmlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLHRoaXMudGFncz1bXSx0aGlzLmNvbHVtbnM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5uYW1lPSIiLHQucHJvdG90eXBlLmRhdGFzZXQ9IiIsdC5wcm90b3R5cGUucHJvamVjdD0iIix0LnByb3RvdHlwZS5kZXBlbmRlbmN5VGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZmlsZW5hbWU9IiIsdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGlzYWJsZWQ9ITEsdC5wcm90b3R5cGUuaGFzT3V0cHV0PSExLHQucHJvdG90eXBlLmRlc2NyaXB0aW9uPSIiLHQucHJvdG90eXBlLmNvbHVtbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ITEsdC5wcm90b3R5cGUuaGVybWV0aWM9ITEsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUubmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibmFtZSIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUubmFtZSksbnVsbCE9ZS5kYXRhc2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhc2V0IikmJnQudWludDMyKDE4KS5zdHJpbmcoZS5kYXRhc2V0KSxudWxsIT1lLnByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3QiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLnByb2plY3QpLG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5lbmNvZGUoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSx0LnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmZpbGVuYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlbmFtZSIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUuZmlsZW5hbWUpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNTApLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDU2KS5ib29sKGUuZGlzYWJsZWQpLG51bGwhPWUuaGFzT3V0cHV0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJoYXNPdXRwdXQiKSYmdC51aW50MzIoNjQpLmJvb2woZS5oYXNPdXRwdXQpLG51bGwhPWUuZGVzY3JpcHRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlc2NyaXB0aW9uIikmJnQudWludDMyKDc0KS5zdHJpbmcoZS5kZXNjcmlwdGlvbiksbnVsbCE9ZS5jb2x1bW5zJiZlLmNvbHVtbnMubGVuZ3RoKWZvcihyPTA7cjxlLmNvbHVtbnMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLmVuY29kZShlLmNvbHVtbnNbcl0sdC51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7cmV0dXJuIG51bGwhPWUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyIpJiZ0LnVpbnQzMig4OCkuYm9vbChlLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpLG51bGwhPWUuaGVybWV0aWMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImhlcm1ldGljIikmJnQudWludDMyKDk2KS5ib29sKGUuaGVybWV0aWMpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9wZXJhdGlvbkNvbmZpZztlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLm5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bi5kYXRhc2V0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAzOm4ucHJvamVjdD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNDpuLmRlcGVuZGVuY3lUYXJnZXRzJiZuLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aHx8KG4uZGVwZW5kZW5jeVRhcmdldHM9W10pLG4uZGVwZW5kZW5jeVRhcmdldHMucHVzaChzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgNTpuLmZpbGVuYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA2Om4udGFncyYmbi50YWdzLmxlbmd0aHx8KG4udGFncz1bXSksbi50YWdzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA3Om4uZGlzYWJsZWQ9ZS5ib29sKCk7YnJlYWs7Y2FzZSA4Om4uaGFzT3V0cHV0PWUuYm9vbCgpO2JyZWFrO2Nhc2UgOTpuLmRlc2NyaXB0aW9uPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxMDpuLmNvbHVtbnMmJm4uY29sdW1ucy5sZW5ndGh8fChuLmNvbHVtbnM9W10pLG4uY29sdW1ucy5wdXNoKHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMTE6bi5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPWUuYm9vbCgpO2JyZWFrO2Nhc2UgMTI6bi5oZXJtZXRpYz1lLmJvb2woKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJiFhLmlzU3RyaW5nKGUubmFtZSkpcmV0dXJuIm5hbWU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kYXRhc2V0JiZlLmhhc093blByb3BlcnR5KCJkYXRhc2V0IikmJiFhLmlzU3RyaW5nKGUuZGF0YXNldCkpcmV0dXJuImRhdGFzZXQ6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJiFhLmlzU3RyaW5nKGUucHJvamVjdCkpcmV0dXJuInByb2plY3Q6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3QpaWYocj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudmVyaWZ5KGUuZGVwZW5kZW5jeVRhcmdldHNbdF0pKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0cy4iK3J9aWYobnVsbCE9ZS5maWxlbmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZW5hbWUiKSYmIWEuaXNTdHJpbmcoZS5maWxlbmFtZSkpcmV0dXJuImZpbGVuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXJldHVybiJ0YWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudGFncy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudGFnc1t0XSkpcmV0dXJuInRhZ3M6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmRpc2FibGVkKXJldHVybiJkaXNhYmxlZDogYm9vbGVhbiBleHBlY3RlZCI7aWYobnVsbCE9ZS5oYXNPdXRwdXQmJmUuaGFzT3duUHJvcGVydHkoImhhc091dHB1dCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmhhc091dHB1dClyZXR1cm4iaGFzT3V0cHV0OiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb2x1bW5zJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW5zIikpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpcmV0dXJuImNvbHVtbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5jb2x1bW5zLmxlbmd0aDsrK3Qpe3ZhciByO2lmKHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci52ZXJpZnkoZS5jb2x1bW5zW3RdKSlyZXR1cm4iY29sdW1ucy4iK3J9fXJldHVybiBudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPyJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLmhlcm1ldGljJiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpYyIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmhlcm1ldGljPyJoZXJtZXRpYzogYm9vbGVhbiBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9wZXJhdGlvbkNvbmZpZztpZihudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUuZGF0YXNldCYmKHQuZGF0YXNldD1TdHJpbmcoZS5kYXRhc2V0KSksbnVsbCE9ZS5wcm9qZWN0JiYodC5wcm9qZWN0PVN0cmluZyhlLnByb2plY3QpKSxlLmRlcGVuZGVuY3lUYXJnZXRzKXtpZighQXJyYXkuaXNBcnJheShlLmRlcGVuZGVuY3lUYXJnZXRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmRlcGVuZGVuY3lUYXJnZXRzW3JdPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5mcm9tT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pfX1pZihudWxsIT1lLmZpbGVuYW1lJiYodC5maWxlbmFtZT1TdHJpbmcoZS5maWxlbmFtZSkpLGUudGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnLnRhZ3M6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQudGFncz1bXSxyPTA7cjxlLnRhZ3MubGVuZ3RoOysrcil0LnRhZ3Nbcl09U3RyaW5nKGUudGFnc1tyXSl9aWYobnVsbCE9ZS5kaXNhYmxlZCYmKHQuZGlzYWJsZWQ9Qm9vbGVhbihlLmRpc2FibGVkKSksbnVsbCE9ZS5oYXNPdXRwdXQmJih0Lmhhc091dHB1dD1Cb29sZWFuKGUuaGFzT3V0cHV0KSksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmKHQuZGVzY3JpcHRpb249U3RyaW5nKGUuZGVzY3JpcHRpb24pKSxlLmNvbHVtbnMpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9wZXJhdGlvbkNvbmZpZy5jb2x1bW5zOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LmNvbHVtbnM9W10scj0wO3I8ZS5jb2x1bW5zLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jb2x1bW5zW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcuY29sdW1uczogb2JqZWN0IGV4cGVjdGVkIik7dC5jb2x1bW5zW3JdPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZnJvbU9iamVjdChlLmNvbHVtbnNbcl0pfX1yZXR1cm4gbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiYodC5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPUJvb2xlYW4oZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSksbnVsbCE9ZS5oZXJtZXRpYyYmKHQuaGVybWV0aWM9Qm9vbGVhbihlLmhlcm1ldGljKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxyLnRhZ3M9W10sci5jb2x1bW5zPVtdKSx0LmRlZmF1bHRzJiYoci5uYW1lPSIiLHIuZGF0YXNldD0iIixyLnByb2plY3Q9IiIsci5maWxlbmFtZT0iIixyLmRpc2FibGVkPSExLHIuaGFzT3V0cHV0PSExLHIuZGVzY3JpcHRpb249IiIsci5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPSExLHIuaGVybWV0aWM9ITEpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYoci5uYW1lPWUubmFtZSksbnVsbCE9ZS5kYXRhc2V0JiZlLmhhc093blByb3BlcnR5KCJkYXRhc2V0IikmJihyLmRhdGFzZXQ9ZS5kYXRhc2V0KSxudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmKHIucHJvamVjdD1lLnByb2plY3QpLGUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKXtyLmRlcGVuZGVuY3lUYXJnZXRzPVtdO2Zvcih2YXIgbj0wO248ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytuKXIuZGVwZW5kZW5jeVRhcmdldHNbbl09cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LnRvT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbbl0sdCl9aWYobnVsbCE9ZS5maWxlbmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZW5hbWUiKSYmKHIuZmlsZW5hbWU9ZS5maWxlbmFtZSksZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyLnRhZ3M9W10sbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXTtpZihudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxudWxsIT1lLmhhc091dHB1dCYmZS5oYXNPd25Qcm9wZXJ0eSgiaGFzT3V0cHV0IikmJihyLmhhc091dHB1dD1lLmhhc091dHB1dCksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVzY3JpcHRpb24iKSYmKHIuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS5jb2x1bW5zJiZlLmNvbHVtbnMubGVuZ3RoKWZvcihyLmNvbHVtbnM9W10sbj0wO248ZS5jb2x1bW5zLmxlbmd0aDsrK24pci5jb2x1bW5zW25dPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IudG9PYmplY3QoZS5jb2x1bW5zW25dLHQpO3JldHVybiBudWxsIT1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMiKSYmKHIuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1lLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMpLG51bGwhPWUuaGVybWV0aWMmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljIikmJihyLmhlcm1ldGljPWUuaGVybWV0aWMpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcifSx0fSgpLHQuRGVjbGFyYXRpb25Db25maWc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuY29sdW1ucz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUuZGF0YXNldD0iIix0LnByb3RvdHlwZS5wcm9qZWN0PSIiLHQucHJvdG90eXBlLmRlc2NyaXB0aW9uPSIiLHQucHJvdG90eXBlLmNvbHVtbnM9YS5lbXB0eUFycmF5LHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm5hbWUiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLm5hbWUpLG51bGwhPWUuZGF0YXNldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGF0YXNldCIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuZGF0YXNldCksbnVsbCE9ZS5wcm9qZWN0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJwcm9qZWN0IikmJnQudWludDMyKDI2KS5zdHJpbmcoZS5wcm9qZWN0KSxudWxsIT1lLmRlc2NyaXB0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXNjcmlwdGlvbiIpJiZ0LnVpbnQzMigzNCkuc3RyaW5nKGUuZGVzY3JpcHRpb24pLG51bGwhPWUuY29sdW1ucyYmZS5jb2x1bW5zLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuY29sdW1ucy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZW5jb2RlKGUuY29sdW1uc1tyXSx0LnVpbnQzMig0MikuZm9yaygpKS5sZGVsaW0oKTtyZXR1cm4gdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGVjbGFyYXRpb25Db25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4uZGF0YXNldD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzpuLnByb2plY3Q9ZS5zdHJpbmcoKTticmVhaztjYXNlIDQ6bi5kZXNjcmlwdGlvbj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNTpuLmNvbHVtbnMmJm4uY29sdW1ucy5sZW5ndGh8fChuLmNvbHVtbnM9W10pLG4uY29sdW1ucy5wdXNoKHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmIWEuaXNTdHJpbmcoZS5uYW1lKSlyZXR1cm4ibmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmIWEuaXNTdHJpbmcoZS5kYXRhc2V0KSlyZXR1cm4iZGF0YXNldDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmIWEuaXNTdHJpbmcoZS5wcm9qZWN0KSlyZXR1cm4icHJvamVjdDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb2x1bW5zJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW5zIikpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpcmV0dXJuImNvbHVtbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUuY29sdW1ucy5sZW5ndGg7Kyt0KXt2YXIgcj1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnZlcmlmeShlLmNvbHVtbnNbdF0pO2lmKHIpcmV0dXJuImNvbHVtbnMuIityfX1yZXR1cm4gbnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZylyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGVjbGFyYXRpb25Db25maWc7aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxudWxsIT1lLmRhdGFzZXQmJih0LmRhdGFzZXQ9U3RyaW5nKGUuZGF0YXNldCkpLG51bGwhPWUucHJvamVjdCYmKHQucHJvamVjdD1TdHJpbmcoZS5wcm9qZWN0KSksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmKHQuZGVzY3JpcHRpb249U3RyaW5nKGUuZGVzY3JpcHRpb24pKSxlLmNvbHVtbnMpe2lmKCFBcnJheS5pc0FycmF5KGUuY29sdW1ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnLmNvbHVtbnM6IGFycmF5IGV4cGVjdGVkIik7dC5jb2x1bW5zPVtdO2Zvcih2YXIgcj0wO3I8ZS5jb2x1bW5zLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jb2x1bW5zW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZy5jb2x1bW5zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNvbHVtbnNbcl09cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvci5mcm9tT2JqZWN0KGUuY29sdW1uc1tyXSl9fXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLmNvbHVtbnM9W10pLHQuZGVmYXVsdHMmJihyLm5hbWU9IiIsci5kYXRhc2V0PSIiLHIucHJvamVjdD0iIixyLmRlc2NyaXB0aW9uPSIiKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmKHIubmFtZT1lLm5hbWUpLG51bGwhPWUuZGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiYoci5kYXRhc2V0PWUuZGF0YXNldCksbnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJihyLnByb2plY3Q9ZS5wcm9qZWN0KSxudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYoci5kZXNjcmlwdGlvbj1lLmRlc2NyaXB0aW9uKSxlLmNvbHVtbnMmJmUuY29sdW1ucy5sZW5ndGgpe3IuY29sdW1ucz1bXTtmb3IodmFyIG49MDtuPGUuY29sdW1ucy5sZW5ndGg7KytuKXIuY29sdW1uc1tuXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnRvT2JqZWN0KGUuY29sdW1uc1tuXSx0KX1yZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnIn0sdH0oKSx0Lk5vdGVib29rQ29uZmlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLHRoaXMudGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUubG9jYXRpb249IiIsdC5wcm90b3R5cGUucHJvamVjdD0iIix0LnByb3RvdHlwZS5kZXBlbmRlbmN5VGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZmlsZW5hbWU9IiIsdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGlzYWJsZWQ9ITEsdC5wcm90b3R5cGUuZGVzY3JpcHRpb249IiIsdC5wcm90b3R5cGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5uYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJuYW1lIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5uYW1lKSxudWxsIT1lLmxvY2F0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJsb2NhdGlvbiIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUubG9jYXRpb24pLG51bGwhPWUucHJvamVjdCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicHJvamVjdCIpJiZ0LnVpbnQzMigyNikuc3RyaW5nKGUucHJvamVjdCksbnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LmVuY29kZShlLmRlcGVuZGVuY3lUYXJnZXRzW3JdLHQudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUuZmlsZW5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImZpbGVuYW1lIikmJnQudWludDMyKDQyKS5zdHJpbmcoZS5maWxlbmFtZSksbnVsbCE9ZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyPTA7cjxlLnRhZ3MubGVuZ3RoOysrcil0LnVpbnQzMig1MCkuc3RyaW5nKGUudGFnc1tyXSk7cmV0dXJuIG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDU2KS5ib29sKGUuZGlzYWJsZWQpLG51bGwhPWUuZGVzY3JpcHRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlc2NyaXB0aW9uIikmJnQudWludDMyKDY2KS5zdHJpbmcoZS5kZXNjcmlwdGlvbiksbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJnQudWludDMyKDcyKS5ib29sKGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuTm90ZWJvb2tDb25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4ubG9jYXRpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDM6bi5wcm9qZWN0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0Om4uZGVwZW5kZW5jeVRhcmdldHMmJm4uZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RofHwobi5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksbi5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSA1Om4uZmlsZW5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDY6bi50YWdzJiZuLnRhZ3MubGVuZ3RofHwobi50YWdzPVtdKSxuLnRhZ3MucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDc6bi5kaXNhYmxlZD1lLmJvb2woKTticmVhaztjYXNlIDg6bi5kZXNjcmlwdGlvbj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgOTpuLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5ib29sKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYhYS5pc1N0cmluZyhlLm5hbWUpKXJldHVybiJuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUubG9jYXRpb24mJmUuaGFzT3duUHJvcGVydHkoImxvY2F0aW9uIikmJiFhLmlzU3RyaW5nKGUubG9jYXRpb24pKXJldHVybiJsb2NhdGlvbjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmIWEuaXNTdHJpbmcoZS5wcm9qZWN0KSlyZXR1cm4icHJvamVjdDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRlbmN5VGFyZ2V0cyIpKXtpZighQXJyYXkuaXNBcnJheShlLmRlcGVuZGVuY3lUYXJnZXRzKSlyZXR1cm4iZGVwZW5kZW5jeVRhcmdldHM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrdCl7dmFyIHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LnZlcmlmeShlLmRlcGVuZGVuY3lUYXJnZXRzW3RdKTtpZihyKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0cy4iK3J9fWlmKG51bGwhPWUuZmlsZW5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVuYW1lIikmJiFhLmlzU3RyaW5nKGUuZmlsZW5hbWUpKXJldHVybiJmaWxlbmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnRhZ3MmJmUuaGFzT3duUHJvcGVydHkoInRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSlyZXR1cm4idGFnczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnRhZ3NbdF0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGlzYWJsZWQ/ImRpc2FibGVkOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKT8iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz8iZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbiBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZylyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuTm90ZWJvb2tDb25maWc7aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxudWxsIT1lLmxvY2F0aW9uJiYodC5sb2NhdGlvbj1TdHJpbmcoZS5sb2NhdGlvbikpLG51bGwhPWUucHJvamVjdCYmKHQucHJvamVjdD1TdHJpbmcoZS5wcm9qZWN0KSksZS5kZXBlbmRlbmN5VGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuTm90ZWJvb2tDb25maWcuZGVwZW5kZW5jeVRhcmdldHM6IG9iamVjdCBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHNbcl09cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LmZyb21PYmplY3QoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl9fWlmKG51bGwhPWUuZmlsZW5hbWUmJih0LmZpbGVuYW1lPVN0cmluZyhlLmZpbGVuYW1lKSksZS50YWdzKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZy50YWdzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhZ3M9W10scj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC50YWdzW3JdPVN0cmluZyhlLnRhZ3Nbcl0pfXJldHVybiBudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxudWxsIT1lLmRlc2NyaXB0aW9uJiYodC5kZXNjcmlwdGlvbj1TdHJpbmcoZS5kZXNjcmlwdGlvbikpLG51bGwhPWUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyYmKHQuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz1Cb29sZWFuKGUuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucykpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIuZGVwZW5kZW5jeVRhcmdldHM9W10sci50YWdzPVtdKSx0LmRlZmF1bHRzJiYoci5uYW1lPSIiLHIubG9jYXRpb249IiIsci5wcm9qZWN0PSIiLHIuZmlsZW5hbWU9IiIsci5kaXNhYmxlZD0hMSxyLmRlc2NyaXB0aW9uPSIiLHIuZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz0hMSksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihyLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmxvY2F0aW9uJiZlLmhhc093blByb3BlcnR5KCJsb2NhdGlvbiIpJiYoci5sb2NhdGlvbj1lLmxvY2F0aW9uKSxudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmKHIucHJvamVjdD1lLnByb2plY3QpLGUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKXtyLmRlcGVuZGVuY3lUYXJnZXRzPVtdO2Zvcih2YXIgbj0wO248ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytuKXIuZGVwZW5kZW5jeVRhcmdldHNbbl09cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LnRvT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbbl0sdCl9aWYobnVsbCE9ZS5maWxlbmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZW5hbWUiKSYmKHIuZmlsZW5hbWU9ZS5maWxlbmFtZSksZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyLnRhZ3M9W10sbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXTtyZXR1cm4gbnVsbCE9ZS5kaXNhYmxlZCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzYWJsZWQiKSYmKHIuZGlzYWJsZWQ9ZS5kaXNhYmxlZCksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVzY3JpcHRpb24iKSYmKHIuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksbnVsbCE9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zIikmJihyLmRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM9ZS5kZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuTm90ZWJvb2tDb25maWcifSx0fSgpLHQuRGF0YVByZXBhcmF0aW9uQ29uZmlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLHRoaXMudGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUuZGF0YXNldD0iIix0LnByb3RvdHlwZS5wcm9qZWN0PSIiLHQucHJvdG90eXBlLmRlcGVuZGVuY3lUYXJnZXRzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5maWxlbmFtZT0iIix0LnByb3RvdHlwZS50YWdzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5kaXNhYmxlZD0hMSx0LnByb3RvdHlwZS5kZXNjcmlwdGlvbj0iIix0LnByb3RvdHlwZS5lcnJvclRhYmxlPW51bGwsdC5wcm90b3R5cGUubG9hZE1vZGU9bnVsbCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5uYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJuYW1lIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5uYW1lKSxudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZW5jb2RlKGUuZGVwZW5kZW5jeVRhcmdldHNbcl0sdC51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5maWxlbmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZmlsZW5hbWUiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLmZpbGVuYW1lKSxudWxsIT1lLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudWludDMyKDM0KS5zdHJpbmcoZS50YWdzW3JdKTtyZXR1cm4gbnVsbCE9ZS5kaXNhYmxlZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGlzYWJsZWQiKSYmdC51aW50MzIoNTYpLmJvb2woZS5kaXNhYmxlZCksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVzY3JpcHRpb24iKSYmdC51aW50MzIoNjYpLnN0cmluZyhlLmRlc2NyaXB0aW9uKSxudWxsIT1lLmVycm9yVGFibGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImVycm9yVGFibGUiKSYmcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLkVycm9yVGFibGVDb25maWcuZW5jb2RlKGUuZXJyb3JUYWJsZSx0LnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmxvYWRNb2RlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJsb2FkTW9kZSIpJiZzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Mb2FkTW9kZUNvbmZpZy5lbmNvZGUoZS5sb2FkTW9kZSx0LnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmRhdGFzZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRhdGFzZXQiKSYmdC51aW50MzIoMTA2KS5zdHJpbmcoZS5kYXRhc2V0KSxudWxsIT1lLnByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3QiKSYmdC51aW50MzIoMTE0KS5zdHJpbmcoZS5wcm9qZWN0KSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxMzpuLmRhdGFzZXQ9ZS5zdHJpbmcoKTticmVhaztjYXNlIDE0Om4ucHJvamVjdD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuLmRlcGVuZGVuY3lUYXJnZXRzJiZuLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aHx8KG4uZGVwZW5kZW5jeVRhcmdldHM9W10pLG4uZGVwZW5kZW5jeVRhcmdldHMucHVzaChzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMzpuLmZpbGVuYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0Om4udGFncyYmbi50YWdzLmxlbmd0aHx8KG4udGFncz1bXSksbi50YWdzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA3Om4uZGlzYWJsZWQ9ZS5ib29sKCk7YnJlYWs7Y2FzZSA4Om4uZGVzY3JpcHRpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDExOm4uZXJyb3JUYWJsZT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDEyOm4ubG9hZE1vZGU9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGVDb25maWcuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYhYS5pc1N0cmluZyhlLm5hbWUpKXJldHVybiJuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiYhYS5pc1N0cmluZyhlLmRhdGFzZXQpKXJldHVybiJkYXRhc2V0OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUucHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdCIpJiYhYS5pc1N0cmluZyhlLnByb2plY3QpKXJldHVybiJwcm9qZWN0OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZGVuY3lUYXJnZXRzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LnZlcmlmeShlLmRlcGVuZGVuY3lUYXJnZXRzW3RdKSlyZXR1cm4iZGVwZW5kZW5jeVRhcmdldHMuIityfWlmKG51bGwhPWUuZmlsZW5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVuYW1lIikmJiFhLmlzU3RyaW5nKGUuZmlsZW5hbWUpKXJldHVybiJmaWxlbmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnRhZ3MmJmUuaGFzT3duUHJvcGVydHkoInRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSlyZXR1cm4idGFnczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnRhZ3NbdF0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGlzYWJsZWQ/ImRpc2FibGVkOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKT8iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5lcnJvclRhYmxlJiZlLmhhc093blByb3BlcnR5KCJlcnJvclRhYmxlIikmJihyPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5FcnJvclRhYmxlQ29uZmlnLnZlcmlmeShlLmVycm9yVGFibGUpKT8iZXJyb3JUYWJsZS4iK3I6bnVsbCE9ZS5sb2FkTW9kZSYmZS5oYXNPd25Qcm9wZXJ0eSgibG9hZE1vZGUiKSYmKHI9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGVDb25maWcudmVyaWZ5KGUubG9hZE1vZGUpKT8ibG9hZE1vZGUuIityOm51bGw7dmFyIHJ9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWc7aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxudWxsIT1lLmRhdGFzZXQmJih0LmRhdGFzZXQ9U3RyaW5nKGUuZGF0YXNldCkpLG51bGwhPWUucHJvamVjdCYmKHQucHJvamVjdD1TdHJpbmcoZS5wcm9qZWN0KSksZS5kZXBlbmRlbmN5VGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5kZXBlbmRlbmN5VGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiKTt0LmRlcGVuZGVuY3lUYXJnZXRzPVtdO2Zvcih2YXIgcj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5kZXBlbmRlbmN5VGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5kZXBlbmRlbmN5VGFyZ2V0c1tyXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19aWYobnVsbCE9ZS5maWxlbmFtZSYmKHQuZmlsZW5hbWU9U3RyaW5nKGUuZmlsZW5hbWUpKSxlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy50YWdzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhZ3M9W10scj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC50YWdzW3JdPVN0cmluZyhlLnRhZ3Nbcl0pfWlmKG51bGwhPWUuZGlzYWJsZWQmJih0LmRpc2FibGVkPUJvb2xlYW4oZS5kaXNhYmxlZCkpLG51bGwhPWUuZGVzY3JpcHRpb24mJih0LmRlc2NyaXB0aW9uPVN0cmluZyhlLmRlc2NyaXB0aW9uKSksbnVsbCE9ZS5lcnJvclRhYmxlKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZXJyb3JUYWJsZSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLmVycm9yVGFibGU6IG9iamVjdCBleHBlY3RlZCIpO3QuZXJyb3JUYWJsZT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZy5mcm9tT2JqZWN0KGUuZXJyb3JUYWJsZSl9aWYobnVsbCE9ZS5sb2FkTW9kZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmxvYWRNb2RlKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcubG9hZE1vZGU6IG9iamVjdCBleHBlY3RlZCIpO3QubG9hZE1vZGU9cy5kYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGVDb25maWcuZnJvbU9iamVjdChlLmxvYWRNb2RlKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxyLnRhZ3M9W10pLHQuZGVmYXVsdHMmJihyLm5hbWU9IiIsci5maWxlbmFtZT0iIixyLmRpc2FibGVkPSExLHIuZGVzY3JpcHRpb249IiIsci5lcnJvclRhYmxlPW51bGwsci5sb2FkTW9kZT1udWxsLHIuZGF0YXNldD0iIixyLnByb2plY3Q9IiIpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYoci5uYW1lPWUubmFtZSksZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpe3IuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciBuPTA7bjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK24pci5kZXBlbmRlbmN5VGFyZ2V0c1tuXT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudG9PYmplY3QoZS5kZXBlbmRlbmN5VGFyZ2V0c1tuXSx0KX1pZihudWxsIT1lLmZpbGVuYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlbmFtZSIpJiYoci5maWxlbmFtZT1lLmZpbGVuYW1lKSxlLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKHIudGFncz1bXSxuPTA7bjxlLnRhZ3MubGVuZ3RoOysrbilyLnRhZ3Nbbl09ZS50YWdzW25dO3JldHVybiBudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYoci5kZXNjcmlwdGlvbj1lLmRlc2NyaXB0aW9uKSxudWxsIT1lLmVycm9yVGFibGUmJmUuaGFzT3duUHJvcGVydHkoImVycm9yVGFibGUiKSYmKHIuZXJyb3JUYWJsZT1zLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZy50b09iamVjdChlLmVycm9yVGFibGUsdCkpLG51bGwhPWUubG9hZE1vZGUmJmUuaGFzT3duUHJvcGVydHkoImxvYWRNb2RlIikmJihyLmxvYWRNb2RlPXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnLnRvT2JqZWN0KGUubG9hZE1vZGUsdCkpLG51bGwhPWUuZGF0YXNldCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YXNldCIpJiYoci5kYXRhc2V0PWUuZGF0YXNldCksbnVsbCE9ZS5wcm9qZWN0JiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0IikmJihyLnByb2plY3Q9ZS5wcm9qZWN0KSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnIn0sdC5FcnJvclRhYmxlQ29uZmlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUuZGF0YXNldD0iIix0LnByb3RvdHlwZS5wcm9qZWN0PSIiLHQucHJvdG90eXBlLnJldGVudGlvbkRheXM9MCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUubmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibmFtZSIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUubmFtZSksbnVsbCE9ZS5kYXRhc2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhc2V0IikmJnQudWludDMyKDE4KS5zdHJpbmcoZS5kYXRhc2V0KSxudWxsIT1lLnByb2plY3QmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3QiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLnByb2plY3QpLG51bGwhPWUucmV0ZW50aW9uRGF5cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicmV0ZW50aW9uRGF5cyIpJiZ0LnVpbnQzMigzMikuaW50MzIoZS5yZXRlbnRpb25EYXlzKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZztlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLm5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bi5kYXRhc2V0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAzOm4ucHJvamVjdD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNDpuLnJldGVudGlvbkRheXM9ZS5pbnQzMigpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZT8ib2JqZWN0IGV4cGVjdGVkIjpudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmIWEuaXNTdHJpbmcoZS5uYW1lKT8ibmFtZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmIWEuaXNTdHJpbmcoZS5kYXRhc2V0KT8iZGF0YXNldDogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLnByb2plY3QmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3QiKSYmIWEuaXNTdHJpbmcoZS5wcm9qZWN0KT8icHJvamVjdDogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLnJldGVudGlvbkRheXMmJmUuaGFzT3duUHJvcGVydHkoInJldGVudGlvbkRheXMiKSYmIWEuaXNJbnRlZ2VyKGUucmV0ZW50aW9uRGF5cyk/InJldGVudGlvbkRheXM6IGludGVnZXIgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLkVycm9yVGFibGVDb25maWcpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5FcnJvclRhYmxlQ29uZmlnO3JldHVybiBudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUuZGF0YXNldCYmKHQuZGF0YXNldD1TdHJpbmcoZS5kYXRhc2V0KSksbnVsbCE9ZS5wcm9qZWN0JiYodC5wcm9qZWN0PVN0cmluZyhlLnByb2plY3QpKSxudWxsIT1lLnJldGVudGlvbkRheXMmJih0LnJldGVudGlvbkRheXM9MHxlLnJldGVudGlvbkRheXMpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLm5hbWU9IiIsci5kYXRhc2V0PSIiLHIucHJvamVjdD0iIixyLnJldGVudGlvbkRheXM9MCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihyLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmRhdGFzZXQmJmUuaGFzT3duUHJvcGVydHkoImRhdGFzZXQiKSYmKHIuZGF0YXNldD1lLmRhdGFzZXQpLG51bGwhPWUucHJvamVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdCIpJiYoci5wcm9qZWN0PWUucHJvamVjdCksbnVsbCE9ZS5yZXRlbnRpb25EYXlzJiZlLmhhc093blByb3BlcnR5KCJyZXRlbnRpb25EYXlzIikmJihyLnJldGVudGlvbkRheXM9ZS5yZXRlbnRpb25EYXlzKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLkVycm9yVGFibGVDb25maWcifSx0fSgpLHR9KCksdC5Mb2FkTW9kZUNvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5tb2RlPTAsdC5wcm90b3R5cGUuaW5jcmVtZW50YWxDb2x1bW49IiIsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm1vZGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm1vZGUiKSYmdC51aW50MzIoOCkuaW50MzIoZS5tb2RlKSxudWxsIT1lLmluY3JlbWVudGFsQ29sdW1uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJpbmNyZW1lbnRhbENvbHVtbiIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuaW5jcmVtZW50YWxDb2x1bW4pLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4ubW9kZT1lLmludDMyKCk7YnJlYWs7Y2FzZSAyOm4uaW5jcmVtZW50YWxDb2x1bW49ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5tb2RlJiZlLmhhc093blByb3BlcnR5KCJtb2RlIikpc3dpdGNoKGUubW9kZSl7ZGVmYXVsdDpyZXR1cm4ibW9kZTogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSAzOn1yZXR1cm4gbnVsbCE9ZS5pbmNyZW1lbnRhbENvbHVtbiYmZS5oYXNPd25Qcm9wZXJ0eSgiaW5jcmVtZW50YWxDb2x1bW4iKSYmIWEuaXNTdHJpbmcoZS5pbmNyZW1lbnRhbENvbHVtbik/ImluY3JlbWVudGFsQ29sdW1uOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGVDb25maWcpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnO3N3aXRjaChlLm1vZGUpe2RlZmF1bHQ6aWYoIm51bWJlciI9PXR5cGVvZiBlLm1vZGUpe3QubW9kZT1lLm1vZGU7YnJlYWt9YnJlYWs7Y2FzZSJSRVBMQUNFX1RBQkxFIjpjYXNlIDA6dC5tb2RlPTA7YnJlYWs7Y2FzZSJBUFBFTkQiOmNhc2UgMTp0Lm1vZGU9MTticmVhaztjYXNlIk1BWElNVU0iOmNhc2UgMjp0Lm1vZGU9MjticmVhaztjYXNlIlVOSVFVRSI6Y2FzZSAzOnQubW9kZT0zfXJldHVybiBudWxsIT1lLmluY3JlbWVudGFsQ29sdW1uJiYodC5pbmNyZW1lbnRhbENvbHVtbj1TdHJpbmcoZS5pbmNyZW1lbnRhbENvbHVtbikpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLm1vZGU9dC5lbnVtcz09PVN0cmluZz8iUkVQTEFDRV9UQUJMRSI6MCxyLmluY3JlbWVudGFsQ29sdW1uPSIiKSxudWxsIT1lLm1vZGUmJmUuaGFzT3duUHJvcGVydHkoIm1vZGUiKSYmKHIubW9kZT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlW2UubW9kZV0/ZS5tb2RlOnMuZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlW2UubW9kZV06ZS5tb2RlKSxudWxsIT1lLmluY3JlbWVudGFsQ29sdW1uJiZlLmhhc093blByb3BlcnR5KCJpbmNyZW1lbnRhbENvbHVtbiIpJiYoci5pbmNyZW1lbnRhbENvbHVtbj1lLmluY3JlbWVudGFsQ29sdW1uKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGVDb25maWcifSx0fSgpLHQuTG9hZE1vZGU9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIHRbZVswXT0iUkVQTEFDRV9UQUJMRSJdPTAsdFtlWzFdPSJBUFBFTkQiXT0xLHRbZVsyXT0iTUFYSU1VTSJdPTIsdFtlWzNdPSJVTklRVUUiXT0zLHR9KCksdH0oKSxuLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX12YXIgcjtyZXR1cm4gdC5wcm90b3R5cGUub3V0cHV0QnVja2V0PW51bGwsdC5wcm90b3R5cGUucnVudGltZVRlbXBsYXRlTmFtZT0iIixPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm91dHB1dFNpbmsiLHtnZXQ6YS5vbmVPZkdldHRlcihyPVsib3V0cHV0QnVja2V0Il0pLHNldDphLm9uZU9mU2V0dGVyKHIpfSksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm91dHB1dEJ1Y2tldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwib3V0cHV0QnVja2V0IikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5vdXRwdXRCdWNrZXQpLG51bGwhPWUucnVudGltZVRlbXBsYXRlTmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicnVudGltZVRlbXBsYXRlTmFtZSIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUucnVudGltZVRlbXBsYXRlTmFtZSksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4ub3V0cHV0QnVja2V0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4ucnVudGltZVRlbXBsYXRlTmFtZT1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtyZXR1cm4gbnVsbCE9ZS5vdXRwdXRCdWNrZXQmJmUuaGFzT3duUHJvcGVydHkoIm91dHB1dEJ1Y2tldCIpJiYhYS5pc1N0cmluZyhlLm91dHB1dEJ1Y2tldCk/Im91dHB1dEJ1Y2tldDogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLnJ1bnRpbWVUZW1wbGF0ZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoInJ1bnRpbWVUZW1wbGF0ZU5hbWUiKSYmIWEuaXNTdHJpbmcoZS5ydW50aW1lVGVtcGxhdGVOYW1lKT8icnVudGltZVRlbXBsYXRlTmFtZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZylyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnO3JldHVybiBudWxsIT1lLm91dHB1dEJ1Y2tldCYmKHQub3V0cHV0QnVja2V0PVN0cmluZyhlLm91dHB1dEJ1Y2tldCkpLG51bGwhPWUucnVudGltZVRlbXBsYXRlTmFtZSYmKHQucnVudGltZVRlbXBsYXRlTmFtZT1TdHJpbmcoZS5ydW50aW1lVGVtcGxhdGVOYW1lKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIucnVudGltZVRlbXBsYXRlTmFtZT0iIiksbnVsbCE9ZS5vdXRwdXRCdWNrZXQmJmUuaGFzT3duUHJvcGVydHkoIm91dHB1dEJ1Y2tldCIpJiYoci5vdXRwdXRCdWNrZXQ9ZS5vdXRwdXRCdWNrZXQsdC5vbmVvZnMmJihyLm91dHB1dFNpbms9Im91dHB1dEJ1Y2tldCIpKSxudWxsIT1lLnJ1bnRpbWVUZW1wbGF0ZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoInJ1bnRpbWVUZW1wbGF0ZU5hbWUiKSYmKHIucnVudGltZVRlbXBsYXRlTmFtZT1lLnJ1bnRpbWVUZW1wbGF0ZU5hbWUpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcifSx0fSgpLG4uUHJvamVjdENvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy52YXJzPXt9LGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUud2FyZWhvdXNlPSIiLHQucHJvdG90eXBlLmRlZmF1bHREYXRhYmFzZT0iIix0LnByb3RvdHlwZS5kZWZhdWx0U2NoZW1hPSIiLHQucHJvdG90eXBlLmRlZmF1bHRMb2NhdGlvbj0iIix0LnByb3RvdHlwZS5hc3NlcnRpb25TY2hlbWE9IiIsdC5wcm90b3R5cGUudmFycz1hLmVtcHR5T2JqZWN0LHQucHJvdG90eXBlLmRhdGFiYXNlU3VmZml4PSIiLHQucHJvdG90eXBlLnNjaGVtYVN1ZmZpeD0iIix0LnByb3RvdHlwZS50YWJsZVByZWZpeD0iIix0LnByb3RvdHlwZS5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeD0iIix0LnByb3RvdHlwZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLndhcmVob3VzZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwid2FyZWhvdXNlIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS53YXJlaG91c2UpLG51bGwhPWUuZGVmYXVsdFNjaGVtYSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdFNjaGVtYSIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuZGVmYXVsdFNjaGVtYSksbnVsbCE9ZS5hc3NlcnRpb25TY2hlbWEmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImFzc2VydGlvblNjaGVtYSIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUuYXNzZXJ0aW9uU2NoZW1hKSxudWxsIT1lLnNjaGVtYVN1ZmZpeCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwic2NoZW1hU3VmZml4IikmJnQudWludDMyKDU4KS5zdHJpbmcoZS5zY2hlbWFTdWZmaXgpLG51bGwhPWUuZGVmYXVsdERhdGFiYXNlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZWZhdWx0RGF0YWJhc2UiKSYmdC51aW50MzIoNzQpLnN0cmluZyhlLmRlZmF1bHREYXRhYmFzZSksbnVsbCE9ZS50YWJsZVByZWZpeCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidGFibGVQcmVmaXgiKSYmdC51aW50MzIoOTApLnN0cmluZyhlLnRhYmxlUHJlZml4KSxudWxsIT1lLnZhcnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInZhcnMiKSlmb3IodmFyIHI9T2JqZWN0LmtleXMoZS52YXJzKSxuPTA7bjxyLmxlbmd0aDsrK24pdC51aW50MzIoMTE0KS5mb3JrKCkudWludDMyKDEwKS5zdHJpbmcocltuXSkudWludDMyKDE4KS5zdHJpbmcoZS52YXJzW3Jbbl1dKS5sZGVsaW0oKTtyZXR1cm4gbnVsbCE9ZS5kYXRhYmFzZVN1ZmZpeCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGF0YWJhc2VTdWZmaXgiKSYmdC51aW50MzIoMTIyKS5zdHJpbmcoZS5kYXRhYmFzZVN1ZmZpeCksbnVsbCE9ZS5kZWZhdWx0TG9jYXRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHRMb2NhdGlvbiIpJiZ0LnVpbnQzMigxMzApLnN0cmluZyhlLmRlZmF1bHRMb2NhdGlvbiksbnVsbCE9ZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMiKSYmcy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zLmVuY29kZShlLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLHQudWludDMyKDEzOCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJidWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCIpJiZ0LnVpbnQzMigxNDYpLnN0cmluZyhlLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4KSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByLG4saT12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsbD1uZXcgcy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnO2UucG9zPGk7KXt2YXIgYz1lLnVpbnQzMigpO3N3aXRjaChjPj4+Myl7Y2FzZSAxOmwud2FyZWhvdXNlPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA5OmwuZGVmYXVsdERhdGFiYXNlPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOmwuZGVmYXVsdFNjaGVtYT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMTY6bC5kZWZhdWx0TG9jYXRpb249ZS5zdHJpbmcoKTticmVhaztjYXNlIDU6bC5hc3NlcnRpb25TY2hlbWE9ZS5zdHJpbmcoKTticmVhaztjYXNlIDE0OmwudmFycz09PWEuZW1wdHlPYmplY3QmJihsLnZhcnM9e30pO3ZhciB1PWUudWludDMyKCkrZS5wb3M7Zm9yKHI9IiIsbj0iIjtlLnBvczx1Oyl7dmFyIHA9ZS51aW50MzIoKTtzd2l0Y2gocD4+PjMpe2Nhc2UgMTpyPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm49ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZwKX19bC52YXJzW3JdPW47YnJlYWs7Y2FzZSAxNTpsLmRhdGFiYXNlU3VmZml4PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA3Omwuc2NoZW1hU3VmZml4PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxMTpsLnRhYmxlUHJlZml4PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxODpsLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxNzpsLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zPXMuZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9ucy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZjKX19cmV0dXJuIGx9LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS53YXJlaG91c2UmJmUuaGFzT3duUHJvcGVydHkoIndhcmVob3VzZSIpJiYhYS5pc1N0cmluZyhlLndhcmVob3VzZSkpcmV0dXJuIndhcmVob3VzZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlZmF1bHREYXRhYmFzZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdERhdGFiYXNlIikmJiFhLmlzU3RyaW5nKGUuZGVmYXVsdERhdGFiYXNlKSlyZXR1cm4iZGVmYXVsdERhdGFiYXNlOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGVmYXVsdFNjaGVtYSYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdFNjaGVtYSIpJiYhYS5pc1N0cmluZyhlLmRlZmF1bHRTY2hlbWEpKXJldHVybiJkZWZhdWx0U2NoZW1hOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGVmYXVsdExvY2F0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZWZhdWx0TG9jYXRpb24iKSYmIWEuaXNTdHJpbmcoZS5kZWZhdWx0TG9jYXRpb24pKXJldHVybiJkZWZhdWx0TG9jYXRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5hc3NlcnRpb25TY2hlbWEmJmUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvblNjaGVtYSIpJiYhYS5pc1N0cmluZyhlLmFzc2VydGlvblNjaGVtYSkpcmV0dXJuImFzc2VydGlvblNjaGVtYTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnZhcnMmJmUuaGFzT3duUHJvcGVydHkoInZhcnMiKSl7aWYoIWEuaXNPYmplY3QoZS52YXJzKSlyZXR1cm4idmFyczogb2JqZWN0IGV4cGVjdGVkIjtmb3IodmFyIHQ9T2JqZWN0LmtleXMoZS52YXJzKSxyPTA7cjx0Lmxlbmd0aDsrK3IpaWYoIWEuaXNTdHJpbmcoZS52YXJzW3Rbcl1dKSlyZXR1cm4idmFyczogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5kYXRhYmFzZVN1ZmZpeCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YWJhc2VTdWZmaXgiKSYmIWEuaXNTdHJpbmcoZS5kYXRhYmFzZVN1ZmZpeCkpcmV0dXJuImRhdGFiYXNlU3VmZml4OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuc2NoZW1hU3VmZml4JiZlLmhhc093blByb3BlcnR5KCJzY2hlbWFTdWZmaXgiKSYmIWEuaXNTdHJpbmcoZS5zY2hlbWFTdWZmaXgpKXJldHVybiJzY2hlbWFTdWZmaXg6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS50YWJsZVByZWZpeCYmZS5oYXNPd25Qcm9wZXJ0eSgidGFibGVQcmVmaXgiKSYmIWEuaXNTdHJpbmcoZS50YWJsZVByZWZpeCkpcmV0dXJuInRhYmxlUHJlZml4OiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgmJmUuaGFzT3duUHJvcGVydHkoImJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4IikmJiFhLmlzU3RyaW5nKGUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgpKXJldHVybiJidWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeDogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyIpKXt2YXIgbj1zLmRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnMudmVyaWZ5KGUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMpO2lmKG4pcmV0dXJuImRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLiIrbn1yZXR1cm4gbnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlByb2plY3RDb25maWcpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uUHJvamVjdENvbmZpZztpZihudWxsIT1lLndhcmVob3VzZSYmKHQud2FyZWhvdXNlPVN0cmluZyhlLndhcmVob3VzZSkpLG51bGwhPWUuZGVmYXVsdERhdGFiYXNlJiYodC5kZWZhdWx0RGF0YWJhc2U9U3RyaW5nKGUuZGVmYXVsdERhdGFiYXNlKSksbnVsbCE9ZS5kZWZhdWx0U2NoZW1hJiYodC5kZWZhdWx0U2NoZW1hPVN0cmluZyhlLmRlZmF1bHRTY2hlbWEpKSxudWxsIT1lLmRlZmF1bHRMb2NhdGlvbiYmKHQuZGVmYXVsdExvY2F0aW9uPVN0cmluZyhlLmRlZmF1bHRMb2NhdGlvbikpLG51bGwhPWUuYXNzZXJ0aW9uU2NoZW1hJiYodC5hc3NlcnRpb25TY2hlbWE9U3RyaW5nKGUuYXNzZXJ0aW9uU2NoZW1hKSksZS52YXJzKXtpZigib2JqZWN0IiE9dHlwZW9mIGUudmFycyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLnZhcnM6IG9iamVjdCBleHBlY3RlZCIpO3QudmFycz17fTtmb3IodmFyIHI9T2JqZWN0LmtleXMoZS52YXJzKSxuPTA7bjxyLmxlbmd0aDsrK24pdC52YXJzW3Jbbl1dPVN0cmluZyhlLnZhcnNbcltuXV0pfWlmKG51bGwhPWUuZGF0YWJhc2VTdWZmaXgmJih0LmRhdGFiYXNlU3VmZml4PVN0cmluZyhlLmRhdGFiYXNlU3VmZml4KSksbnVsbCE9ZS5zY2hlbWFTdWZmaXgmJih0LnNjaGVtYVN1ZmZpeD1TdHJpbmcoZS5zY2hlbWFTdWZmaXgpKSxudWxsIT1lLnRhYmxlUHJlZml4JiYodC50YWJsZVByZWZpeD1TdHJpbmcoZS50YWJsZVByZWZpeCkpLG51bGwhPWUuYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXgmJih0LmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4PVN0cmluZyhlLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4KSksbnVsbCE9ZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlByb2plY3RDb25maWcuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO3QuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnM9cy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zLmZyb21PYmplY3QoZS5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucyl9cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHIsbj17fTtpZigodC5vYmplY3RzfHx0LmRlZmF1bHRzKSYmKG4udmFycz17fSksdC5kZWZhdWx0cyYmKG4ud2FyZWhvdXNlPSIiLG4uZGVmYXVsdFNjaGVtYT0iIixuLmFzc2VydGlvblNjaGVtYT0iIixuLnNjaGVtYVN1ZmZpeD0iIixuLmRlZmF1bHREYXRhYmFzZT0iIixuLnRhYmxlUHJlZml4PSIiLG4uZGF0YWJhc2VTdWZmaXg9IiIsbi5kZWZhdWx0TG9jYXRpb249IiIsbi5kZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz1udWxsLG4uYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXg9IiIpLG51bGwhPWUud2FyZWhvdXNlJiZlLmhhc093blByb3BlcnR5KCJ3YXJlaG91c2UiKSYmKG4ud2FyZWhvdXNlPWUud2FyZWhvdXNlKSxudWxsIT1lLmRlZmF1bHRTY2hlbWEmJmUuaGFzT3duUHJvcGVydHkoImRlZmF1bHRTY2hlbWEiKSYmKG4uZGVmYXVsdFNjaGVtYT1lLmRlZmF1bHRTY2hlbWEpLG51bGwhPWUuYXNzZXJ0aW9uU2NoZW1hJiZlLmhhc093blByb3BlcnR5KCJhc3NlcnRpb25TY2hlbWEiKSYmKG4uYXNzZXJ0aW9uU2NoZW1hPWUuYXNzZXJ0aW9uU2NoZW1hKSxudWxsIT1lLnNjaGVtYVN1ZmZpeCYmZS5oYXNPd25Qcm9wZXJ0eSgic2NoZW1hU3VmZml4IikmJihuLnNjaGVtYVN1ZmZpeD1lLnNjaGVtYVN1ZmZpeCksbnVsbCE9ZS5kZWZhdWx0RGF0YWJhc2UmJmUuaGFzT3duUHJvcGVydHkoImRlZmF1bHREYXRhYmFzZSIpJiYobi5kZWZhdWx0RGF0YWJhc2U9ZS5kZWZhdWx0RGF0YWJhc2UpLG51bGwhPWUudGFibGVQcmVmaXgmJmUuaGFzT3duUHJvcGVydHkoInRhYmxlUHJlZml4IikmJihuLnRhYmxlUHJlZml4PWUudGFibGVQcmVmaXgpLGUudmFycyYmKHI9T2JqZWN0LmtleXMoZS52YXJzKSkubGVuZ3RoKXtuLnZhcnM9e307Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDsrK28pbi52YXJzW3Jbb11dPWUudmFyc1tyW29dXX1yZXR1cm4gbnVsbCE9ZS5kYXRhYmFzZVN1ZmZpeCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YWJhc2VTdWZmaXgiKSYmKG4uZGF0YWJhc2VTdWZmaXg9ZS5kYXRhYmFzZVN1ZmZpeCksbnVsbCE9ZS5kZWZhdWx0TG9jYXRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlZmF1bHRMb2NhdGlvbiIpJiYobi5kZWZhdWx0TG9jYXRpb249ZS5kZWZhdWx0TG9jYXRpb24pLG51bGwhPWUuZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zIikmJihuLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zPXMuZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9ucy50b09iamVjdChlLmRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLHQpKSxudWxsIT1lLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4JiZlLmhhc093blByb3BlcnR5KCJidWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCIpJiYobi5idWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeD1lLmJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4KSxufSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnIn0sdH0oKSxuLkNvbXBpbGVDb25maWc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuZmlsZVBhdGhzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUucHJvamVjdERpcj0iIix0LnByb3RvdHlwZS5maWxlUGF0aHM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnByb2plY3RDb25maWdPdmVycmlkZT1udWxsLHQucHJvdG90eXBlLnRpbWVvdXRNaWxsaXM9MCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5wcm9qZWN0RGlyJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJwcm9qZWN0RGlyIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5wcm9qZWN0RGlyKSxudWxsIT1lLnByb2plY3RDb25maWdPdmVycmlkZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicHJvamVjdENvbmZpZ092ZXJyaWRlIikmJnMuZGF0YWZvcm0uUHJvamVjdENvbmZpZy5lbmNvZGUoZS5wcm9qZWN0Q29uZmlnT3ZlcnJpZGUsdC51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS50aW1lb3V0TWlsbGlzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0aW1lb3V0TWlsbGlzIikmJnQudWludDMyKDQ4KS5pbnQzMihlLnRpbWVvdXRNaWxsaXMpLG51bGwhPWUuZmlsZVBhdGhzJiZlLmZpbGVQYXRocy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLmZpbGVQYXRocy5sZW5ndGg7KytyKXQudWludDMyKDY2KS5zdHJpbmcoZS5maWxlUGF0aHNbcl0pO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkNvbXBpbGVDb25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5wcm9qZWN0RGlyPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA4Om4uZmlsZVBhdGhzJiZuLmZpbGVQYXRocy5sZW5ndGh8fChuLmZpbGVQYXRocz1bXSksbi5maWxlUGF0aHMucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDM6bi5wcm9qZWN0Q29uZmlnT3ZlcnJpZGU9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgNjpuLnRpbWVvdXRNaWxsaXM9ZS5pbnQzMigpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLnByb2plY3REaXImJmUuaGFzT3duUHJvcGVydHkoInByb2plY3REaXIiKSYmIWEuaXNTdHJpbmcoZS5wcm9qZWN0RGlyKSlyZXR1cm4icHJvamVjdERpcjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmZpbGVQYXRocyYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZVBhdGhzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuZmlsZVBhdGhzKSlyZXR1cm4iZmlsZVBhdGhzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmZpbGVQYXRocy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuZmlsZVBhdGhzW3RdKSlyZXR1cm4iZmlsZVBhdGhzOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5wcm9qZWN0Q29uZmlnT3ZlcnJpZGUmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3RDb25maWdPdmVycmlkZSIpKXt2YXIgcj1zLmRhdGFmb3JtLlByb2plY3RDb25maWcudmVyaWZ5KGUucHJvamVjdENvbmZpZ092ZXJyaWRlKTtpZihyKXJldHVybiJwcm9qZWN0Q29uZmlnT3ZlcnJpZGUuIityfXJldHVybiBudWxsIT1lLnRpbWVvdXRNaWxsaXMmJmUuaGFzT3duUHJvcGVydHkoInRpbWVvdXRNaWxsaXMiKSYmIWEuaXNJbnRlZ2VyKGUudGltZW91dE1pbGxpcyk/InRpbWVvdXRNaWxsaXM6IGludGVnZXIgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5Db21waWxlQ29uZmlnKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkNvbXBpbGVDb25maWc7aWYobnVsbCE9ZS5wcm9qZWN0RGlyJiYodC5wcm9qZWN0RGlyPVN0cmluZyhlLnByb2plY3REaXIpKSxlLmZpbGVQYXRocyl7aWYoIUFycmF5LmlzQXJyYXkoZS5maWxlUGF0aHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVDb25maWcuZmlsZVBhdGhzOiBhcnJheSBleHBlY3RlZCIpO3QuZmlsZVBhdGhzPVtdO2Zvcih2YXIgcj0wO3I8ZS5maWxlUGF0aHMubGVuZ3RoOysrcil0LmZpbGVQYXRoc1tyXT1TdHJpbmcoZS5maWxlUGF0aHNbcl0pfWlmKG51bGwhPWUucHJvamVjdENvbmZpZ092ZXJyaWRlKXtpZigib2JqZWN0IiE9dHlwZW9mIGUucHJvamVjdENvbmZpZ092ZXJyaWRlKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVDb25maWcucHJvamVjdENvbmZpZ092ZXJyaWRlOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnByb2plY3RDb25maWdPdmVycmlkZT1zLmRhdGFmb3JtLlByb2plY3RDb25maWcuZnJvbU9iamVjdChlLnByb2plY3RDb25maWdPdmVycmlkZSl9cmV0dXJuIG51bGwhPWUudGltZW91dE1pbGxpcyYmKHQudGltZW91dE1pbGxpcz0wfGUudGltZW91dE1pbGxpcyksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5maWxlUGF0aHM9W10pLHQuZGVmYXVsdHMmJihyLnByb2plY3REaXI9IiIsci5wcm9qZWN0Q29uZmlnT3ZlcnJpZGU9bnVsbCxyLnRpbWVvdXRNaWxsaXM9MCksbnVsbCE9ZS5wcm9qZWN0RGlyJiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0RGlyIikmJihyLnByb2plY3REaXI9ZS5wcm9qZWN0RGlyKSxudWxsIT1lLnByb2plY3RDb25maWdPdmVycmlkZSYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdENvbmZpZ092ZXJyaWRlIikmJihyLnByb2plY3RDb25maWdPdmVycmlkZT1zLmRhdGFmb3JtLlByb2plY3RDb25maWcudG9PYmplY3QoZS5wcm9qZWN0Q29uZmlnT3ZlcnJpZGUsdCkpLG51bGwhPWUudGltZW91dE1pbGxpcyYmZS5oYXNPd25Qcm9wZXJ0eSgidGltZW91dE1pbGxpcyIpJiYoci50aW1lb3V0TWlsbGlzPWUudGltZW91dE1pbGxpcyksZS5maWxlUGF0aHMmJmUuZmlsZVBhdGhzLmxlbmd0aCl7ci5maWxlUGF0aHM9W107Zm9yKHZhciBuPTA7bjxlLmZpbGVQYXRocy5sZW5ndGg7KytuKXIuZmlsZVBhdGhzW25dPWUuZmlsZVBhdGhzW25dfXJldHVybiByfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5Db21waWxlQ29uZmlnIn0sdH0oKSxuLlRhcmdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5kYXRhYmFzZT0iIix0LnByb3RvdHlwZS5zY2hlbWE9IiIsdC5wcm90b3R5cGUubmFtZT0iIix0LnByb3RvdHlwZS5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz0hMSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUuc2NoZW1hJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJzY2hlbWEiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLnNjaGVtYSksbnVsbCE9ZS5uYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJuYW1lIikmJnQudWludDMyKDE4KS5zdHJpbmcoZS5uYW1lKSxudWxsIT1lLmRhdGFiYXNlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhYmFzZSIpJiZ0LnVpbnQzMigyNikuc3RyaW5nKGUuZGF0YWJhc2UpLG51bGwhPWUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zIikmJnQudWludDMyKDMyKS5ib29sKGUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uVGFyZ2V0O2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAzOm4uZGF0YWJhc2U9ZS5zdHJpbmcoKTticmVhaztjYXNlIDE6bi5zY2hlbWE9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0Om4uaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM9ZS5ib29sKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lPyJvYmplY3QgZXhwZWN0ZWQiOm51bGwhPWUuZGF0YWJhc2UmJmUuaGFzT3duUHJvcGVydHkoImRhdGFiYXNlIikmJiFhLmlzU3RyaW5nKGUuZGF0YWJhc2UpPyJkYXRhYmFzZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLnNjaGVtYSYmZS5oYXNPd25Qcm9wZXJ0eSgic2NoZW1hIikmJiFhLmlzU3RyaW5nKGUuc2NoZW1hKT8ic2NoZW1hOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYhYS5pc1N0cmluZyhlLm5hbWUpPyJuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGwhPWUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zIikmJiJib29sZWFuIiE9dHlwZW9mIGUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM/ImluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zOiBib29sZWFuIGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uVGFyZ2V0KXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLlRhcmdldDtyZXR1cm4gbnVsbCE9ZS5kYXRhYmFzZSYmKHQuZGF0YWJhc2U9U3RyaW5nKGUuZGF0YWJhc2UpKSxudWxsIT1lLnNjaGVtYSYmKHQuc2NoZW1hPVN0cmluZyhlLnNjaGVtYSkpLG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5pbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyYmKHQuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM9Qm9vbGVhbihlLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIuc2NoZW1hPSIiLHIubmFtZT0iIixyLmRhdGFiYXNlPSIiLHIuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM9ITEpLG51bGwhPWUuc2NoZW1hJiZlLmhhc093blByb3BlcnR5KCJzY2hlbWEiKSYmKHIuc2NoZW1hPWUuc2NoZW1hKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmKHIubmFtZT1lLm5hbWUpLG51bGwhPWUuZGF0YWJhc2UmJmUuaGFzT3duUHJvcGVydHkoImRhdGFiYXNlIikmJihyLmRhdGFiYXNlPWUuZGF0YWJhc2UpLG51bGwhPWUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zIikmJihyLmluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zPWUuaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnMpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLlRhcmdldCJ9LHR9KCksbi5CaWdRdWVyeU9wdGlvbnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuY2x1c3RlckJ5PVtdLHRoaXMubGFiZWxzPXt9LHRoaXMuYWRkaXRpb25hbE9wdGlvbnM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5wYXJ0aXRpb25CeT0iIix0LnByb3RvdHlwZS5jbHVzdGVyQnk9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnVwZGF0ZVBhcnRpdGlvbkZpbHRlcj0iIix0LnByb3RvdHlwZS5sYWJlbHM9YS5lbXB0eU9iamVjdCx0LnByb3RvdHlwZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz0wLHQucHJvdG90eXBlLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI9ITEsdC5wcm90b3R5cGUuYWRkaXRpb25hbE9wdGlvbnM9YS5lbXB0eU9iamVjdCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5wYXJ0aXRpb25CeSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicGFydGl0aW9uQnkiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLnBhcnRpdGlvbkJ5KSxudWxsIT1lLmNsdXN0ZXJCeSYmZS5jbHVzdGVyQnkubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5jbHVzdGVyQnkubGVuZ3RoOysrcil0LnVpbnQzMigxOCkuc3RyaW5nKGUuY2x1c3RlckJ5W3JdKTtpZihudWxsIT1lLnVwZGF0ZVBhcnRpdGlvbkZpbHRlciYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidXBkYXRlUGFydGl0aW9uRmlsdGVyIikmJnQudWludDMyKDI2KS5zdHJpbmcoZS51cGRhdGVQYXJ0aXRpb25GaWx0ZXIpLG51bGwhPWUubGFiZWxzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJsYWJlbHMiKSl7dmFyIG49T2JqZWN0LmtleXMoZS5sYWJlbHMpO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3IpdC51aW50MzIoMzQpLmZvcmsoKS51aW50MzIoMTApLnN0cmluZyhuW3JdKS51aW50MzIoMTgpLnN0cmluZyhlLmxhYmVsc1tuW3JdXSkubGRlbGltKCl9aWYobnVsbCE9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiKSYmdC51aW50MzIoNDApLmludDMyKGUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMpLG51bGwhPWUucmVxdWlyZVBhcnRpdGlvbkZpbHRlciYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicmVxdWlyZVBhcnRpdGlvbkZpbHRlciIpJiZ0LnVpbnQzMig0OCkuYm9vbChlLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIpLG51bGwhPWUuYWRkaXRpb25hbE9wdGlvbnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImFkZGl0aW9uYWxPcHRpb25zIikpZm9yKG49T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucykscj0wO3I8bi5sZW5ndGg7KytyKXQudWludDMyKDU4KS5mb3JrKCkudWludDMyKDEwKS5zdHJpbmcobltyXSkudWludDMyKDE4KS5zdHJpbmcoZS5hZGRpdGlvbmFsT3B0aW9uc1tuW3JdXSkubGRlbGltKCk7cmV0dXJuIHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHIsbixpPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxsPW5ldyBzLmRhdGFmb3JtLkJpZ1F1ZXJ5T3B0aW9ucztlLnBvczxpOyl7dmFyIGM9ZS51aW50MzIoKTtzd2l0Y2goYz4+PjMpe2Nhc2UgMTpsLnBhcnRpdGlvbkJ5PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOmwuY2x1c3RlckJ5JiZsLmNsdXN0ZXJCeS5sZW5ndGh8fChsLmNsdXN0ZXJCeT1bXSksbC5jbHVzdGVyQnkucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDM6bC51cGRhdGVQYXJ0aXRpb25GaWx0ZXI9ZS5zdHJpbmcoKTticmVhaztjYXNlIDQ6bC5sYWJlbHM9PT1hLmVtcHR5T2JqZWN0JiYobC5sYWJlbHM9e30pO3ZhciB1PWUudWludDMyKCkrZS5wb3M7Zm9yKHI9IiIsbj0iIjtlLnBvczx1Oylzd2l0Y2goKHA9ZS51aW50MzIoKSk+Pj4zKXtjYXNlIDE6cj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuPWUuc3RyaW5nKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmcCl9bC5sYWJlbHNbcl09bjticmVhaztjYXNlIDU6bC5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz1lLmludDMyKCk7YnJlYWs7Y2FzZSA2OmwucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj1lLmJvb2woKTticmVhaztjYXNlIDc6Zm9yKGwuYWRkaXRpb25hbE9wdGlvbnM9PT1hLmVtcHR5T2JqZWN0JiYobC5hZGRpdGlvbmFsT3B0aW9ucz17fSksdT1lLnVpbnQzMigpK2UucG9zLHI9IiIsbj0iIjtlLnBvczx1Oyl7dmFyIHA7c3dpdGNoKChwPWUudWludDMyKCkpPj4+Myl7Y2FzZSAxOnI9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bj1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JnApfX1sLmFkZGl0aW9uYWxPcHRpb25zW3JdPW47YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmYyl9fXJldHVybiBsfSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUucGFydGl0aW9uQnkmJmUuaGFzT3duUHJvcGVydHkoInBhcnRpdGlvbkJ5IikmJiFhLmlzU3RyaW5nKGUucGFydGl0aW9uQnkpKXJldHVybiJwYXJ0aXRpb25CeTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmNsdXN0ZXJCeSYmZS5oYXNPd25Qcm9wZXJ0eSgiY2x1c3RlckJ5Iikpe2lmKCFBcnJheS5pc0FycmF5KGUuY2x1c3RlckJ5KSlyZXR1cm4iY2x1c3RlckJ5OiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmNsdXN0ZXJCeS5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuY2x1c3RlckJ5W3RdKSlyZXR1cm4iY2x1c3RlckJ5OiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS51cGRhdGVQYXJ0aXRpb25GaWx0ZXImJmUuaGFzT3duUHJvcGVydHkoInVwZGF0ZVBhcnRpdGlvbkZpbHRlciIpJiYhYS5pc1N0cmluZyhlLnVwZGF0ZVBhcnRpdGlvbkZpbHRlcikpcmV0dXJuInVwZGF0ZVBhcnRpdGlvbkZpbHRlcjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmxhYmVscyYmZS5oYXNPd25Qcm9wZXJ0eSgibGFiZWxzIikpe2lmKCFhLmlzT2JqZWN0KGUubGFiZWxzKSlyZXR1cm4ibGFiZWxzOiBvYmplY3QgZXhwZWN0ZWQiO3ZhciByPU9iamVjdC5rZXlzKGUubGFiZWxzKTtmb3IodD0wO3Q8ci5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUubGFiZWxzW3JbdF1dKSlyZXR1cm4ibGFiZWxzOiBzdHJpbmd7azpzdHJpbmd9IGV4cGVjdGVkIn1pZihudWxsIT1lLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzJiZlLmhhc093blByb3BlcnR5KCJwYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyIpJiYhYS5pc0ludGVnZXIoZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cykpcmV0dXJuInBhcnRpdGlvbkV4cGlyYXRpb25EYXlzOiBpbnRlZ2VyIGV4cGVjdGVkIjtpZihudWxsIT1lLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXImJmUuaGFzT3duUHJvcGVydHkoInJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyKXJldHVybiJyZXF1aXJlUGFydGl0aW9uRmlsdGVyOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLmFkZGl0aW9uYWxPcHRpb25zJiZlLmhhc093blByb3BlcnR5KCJhZGRpdGlvbmFsT3B0aW9ucyIpKXtpZighYS5pc09iamVjdChlLmFkZGl0aW9uYWxPcHRpb25zKSlyZXR1cm4iYWRkaXRpb25hbE9wdGlvbnM6IG9iamVjdCBleHBlY3RlZCI7Zm9yKHI9T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucyksdD0wO3Q8ci5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuYWRkaXRpb25hbE9wdGlvbnNbclt0XV0pKXJldHVybiJhZGRpdGlvbmFsT3B0aW9uczogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZCJ9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQmlnUXVlcnlPcHRpb25zO2lmKG51bGwhPWUucGFydGl0aW9uQnkmJih0LnBhcnRpdGlvbkJ5PVN0cmluZyhlLnBhcnRpdGlvbkJ5KSksZS5jbHVzdGVyQnkpe2lmKCFBcnJheS5pc0FycmF5KGUuY2x1c3RlckJ5KSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMuY2x1c3RlckJ5OiBhcnJheSBleHBlY3RlZCIpO3QuY2x1c3RlckJ5PVtdO2Zvcih2YXIgcj0wO3I8ZS5jbHVzdGVyQnkubGVuZ3RoOysrcil0LmNsdXN0ZXJCeVtyXT1TdHJpbmcoZS5jbHVzdGVyQnlbcl0pfWlmKG51bGwhPWUudXBkYXRlUGFydGl0aW9uRmlsdGVyJiYodC51cGRhdGVQYXJ0aXRpb25GaWx0ZXI9U3RyaW5nKGUudXBkYXRlUGFydGl0aW9uRmlsdGVyKSksZS5sYWJlbHMpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5sYWJlbHMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQmlnUXVlcnlPcHRpb25zLmxhYmVsczogb2JqZWN0IGV4cGVjdGVkIik7dC5sYWJlbHM9e307dmFyIG49T2JqZWN0LmtleXMoZS5sYWJlbHMpO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3IpdC5sYWJlbHNbbltyXV09U3RyaW5nKGUubGFiZWxzW25bcl1dKX1pZihudWxsIT1lLnBhcnRpdGlvbkV4cGlyYXRpb25EYXlzJiYodC5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz0wfGUucGFydGl0aW9uRXhwaXJhdGlvbkRheXMpLG51bGwhPWUucmVxdWlyZVBhcnRpdGlvbkZpbHRlciYmKHQucmVxdWlyZVBhcnRpdGlvbkZpbHRlcj1Cb29sZWFuKGUucmVxdWlyZVBhcnRpdGlvbkZpbHRlcikpLGUuYWRkaXRpb25hbE9wdGlvbnMpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hZGRpdGlvbmFsT3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMuYWRkaXRpb25hbE9wdGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO2Zvcih0LmFkZGl0aW9uYWxPcHRpb25zPXt9LG49T2JqZWN0LmtleXMoZS5hZGRpdGlvbmFsT3B0aW9ucykscj0wO3I8bi5sZW5ndGg7KytyKXQuYWRkaXRpb25hbE9wdGlvbnNbbltyXV09U3RyaW5nKGUuYWRkaXRpb25hbE9wdGlvbnNbbltyXV0pfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByLG49e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG4uY2x1c3RlckJ5PVtdKSwodC5vYmplY3RzfHx0LmRlZmF1bHRzKSYmKG4ubGFiZWxzPXt9LG4uYWRkaXRpb25hbE9wdGlvbnM9e30pLHQuZGVmYXVsdHMmJihuLnBhcnRpdGlvbkJ5PSIiLG4udXBkYXRlUGFydGl0aW9uRmlsdGVyPSIiLG4ucGFydGl0aW9uRXhwaXJhdGlvbkRheXM9MCxuLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI9ITEpLG51bGwhPWUucGFydGl0aW9uQnkmJmUuaGFzT3duUHJvcGVydHkoInBhcnRpdGlvbkJ5IikmJihuLnBhcnRpdGlvbkJ5PWUucGFydGl0aW9uQnkpLGUuY2x1c3RlckJ5JiZlLmNsdXN0ZXJCeS5sZW5ndGgpe24uY2x1c3RlckJ5PVtdO2Zvcih2YXIgbz0wO288ZS5jbHVzdGVyQnkubGVuZ3RoOysrbyluLmNsdXN0ZXJCeVtvXT1lLmNsdXN0ZXJCeVtvXX1pZihudWxsIT1lLnVwZGF0ZVBhcnRpdGlvbkZpbHRlciYmZS5oYXNPd25Qcm9wZXJ0eSgidXBkYXRlUGFydGl0aW9uRmlsdGVyIikmJihuLnVwZGF0ZVBhcnRpdGlvbkZpbHRlcj1lLnVwZGF0ZVBhcnRpdGlvbkZpbHRlciksZS5sYWJlbHMmJihyPU9iamVjdC5rZXlzKGUubGFiZWxzKSkubGVuZ3RoKWZvcihuLmxhYmVscz17fSxvPTA7bzxyLmxlbmd0aDsrK28pbi5sYWJlbHNbcltvXV09ZS5sYWJlbHNbcltvXV07aWYobnVsbCE9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyYmZS5oYXNPd25Qcm9wZXJ0eSgicGFydGl0aW9uRXhwaXJhdGlvbkRheXMiKSYmKG4ucGFydGl0aW9uRXhwaXJhdGlvbkRheXM9ZS5wYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyksbnVsbCE9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyJiZlLmhhc093blByb3BlcnR5KCJyZXF1aXJlUGFydGl0aW9uRmlsdGVyIikmJihuLnJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI9ZS5yZXF1aXJlUGFydGl0aW9uRmlsdGVyKSxlLmFkZGl0aW9uYWxPcHRpb25zJiYocj1PYmplY3Qua2V5cyhlLmFkZGl0aW9uYWxPcHRpb25zKSkubGVuZ3RoKWZvcihuLmFkZGl0aW9uYWxPcHRpb25zPXt9LG89MDtvPHIubGVuZ3RoOysrbyluLmFkZGl0aW9uYWxPcHRpb25zW3Jbb11dPWUuYWRkaXRpb25hbE9wdGlvbnNbcltvXV07cmV0dXJuIG59LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkJpZ1F1ZXJ5T3B0aW9ucyJ9LHR9KCksbi5HcmFwaEVycm9ycz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5jb21waWxhdGlvbkVycm9ycz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLmNvbXBpbGF0aW9uRXJyb3JzPWEuZW1wdHlBcnJheSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5jb21waWxhdGlvbkVycm9ycyYmZS5jb21waWxhdGlvbkVycm9ycy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLmNvbXBpbGF0aW9uRXJyb3JzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5Db21waWxhdGlvbkVycm9yLmVuY29kZShlLmNvbXBpbGF0aW9uRXJyb3JzW3JdLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkdyYXBoRXJyb3JzO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2k+Pj4zPT0xPyhuLmNvbXBpbGF0aW9uRXJyb3JzJiZuLmNvbXBpbGF0aW9uRXJyb3JzLmxlbmd0aHx8KG4uY29tcGlsYXRpb25FcnJvcnM9W10pLG4uY29tcGlsYXRpb25FcnJvcnMucHVzaChzLmRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3IuZGVjb2RlKGUsZS51aW50MzIoKSkpKTplLnNraXBUeXBlKDcmaSl9cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb21waWxhdGlvbkVycm9ycyYmZS5oYXNPd25Qcm9wZXJ0eSgiY29tcGlsYXRpb25FcnJvcnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5jb21waWxhdGlvbkVycm9ycykpcmV0dXJuImNvbXBpbGF0aW9uRXJyb3JzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmNvbXBpbGF0aW9uRXJyb3JzLmxlbmd0aDsrK3Qpe3ZhciByPXMuZGF0YWZvcm0uQ29tcGlsYXRpb25FcnJvci52ZXJpZnkoZS5jb21waWxhdGlvbkVycm9yc1t0XSk7aWYocilyZXR1cm4iY29tcGlsYXRpb25FcnJvcnMuIityfX1yZXR1cm4gbnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkdyYXBoRXJyb3JzKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkdyYXBoRXJyb3JzO2lmKGUuY29tcGlsYXRpb25FcnJvcnMpe2lmKCFBcnJheS5pc0FycmF5KGUuY29tcGlsYXRpb25FcnJvcnMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkdyYXBoRXJyb3JzLmNvbXBpbGF0aW9uRXJyb3JzOiBhcnJheSBleHBlY3RlZCIpO3QuY29tcGlsYXRpb25FcnJvcnM9W107Zm9yKHZhciByPTA7cjxlLmNvbXBpbGF0aW9uRXJyb3JzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jb21waWxhdGlvbkVycm9yc1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5HcmFwaEVycm9ycy5jb21waWxhdGlvbkVycm9yczogb2JqZWN0IGV4cGVjdGVkIik7dC5jb21waWxhdGlvbkVycm9yc1tyXT1zLmRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3IuZnJvbU9iamVjdChlLmNvbXBpbGF0aW9uRXJyb3JzW3JdKX19cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIuY29tcGlsYXRpb25FcnJvcnM9W10pLGUuY29tcGlsYXRpb25FcnJvcnMmJmUuY29tcGlsYXRpb25FcnJvcnMubGVuZ3RoKXtyLmNvbXBpbGF0aW9uRXJyb3JzPVtdO2Zvcih2YXIgbj0wO248ZS5jb21waWxhdGlvbkVycm9ycy5sZW5ndGg7KytuKXIuY29tcGlsYXRpb25FcnJvcnNbbl09cy5kYXRhZm9ybS5Db21waWxhdGlvbkVycm9yLnRvT2JqZWN0KGUuY29tcGlsYXRpb25FcnJvcnNbbl0sdCl9cmV0dXJuIHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkdyYXBoRXJyb3JzIn0sdH0oKSxuLkNvbXBpbGF0aW9uRXJyb3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUuZmlsZU5hbWU9IiIsdC5wcm90b3R5cGUuYWN0aW9uTmFtZT0iIix0LnByb3RvdHlwZS5hY3Rpb25UYXJnZXQ9bnVsbCx0LnByb3RvdHlwZS5tZXNzYWdlPSIiLHQucHJvdG90eXBlLnN0YWNrPSIiLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5maWxlTmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZmlsZU5hbWUiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLmZpbGVOYW1lKSxudWxsIT1lLm1lc3NhZ2UmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm1lc3NhZ2UiKSYmdC51aW50MzIoMTgpLnN0cmluZyhlLm1lc3NhZ2UpLG51bGwhPWUuc3RhY2smJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInN0YWNrIikmJnQudWludDMyKDI2KS5zdHJpbmcoZS5zdGFjayksbnVsbCE9ZS5hY3Rpb25OYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJhY3Rpb25OYW1lIikmJnQudWludDMyKDM0KS5zdHJpbmcoZS5hY3Rpb25OYW1lKSxudWxsIT1lLmFjdGlvblRhcmdldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYWN0aW9uVGFyZ2V0IikmJnMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLmFjdGlvblRhcmdldCx0LnVpbnQzMig0MikuZm9yaygpKS5sZGVsaW0oKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3I7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5maWxlTmFtZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNDpuLmFjdGlvbk5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDU6bi5hY3Rpb25UYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAyOm4ubWVzc2FnZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzpuLnN0YWNrPWUuc3RyaW5nKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZmlsZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVOYW1lIikmJiFhLmlzU3RyaW5nKGUuZmlsZU5hbWUpKXJldHVybiJmaWxlTmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmFjdGlvbk5hbWUmJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbk5hbWUiKSYmIWEuaXNTdHJpbmcoZS5hY3Rpb25OYW1lKSlyZXR1cm4iYWN0aW9uTmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmFjdGlvblRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9uVGFyZ2V0Iikpe3ZhciB0PXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmFjdGlvblRhcmdldCk7aWYodClyZXR1cm4iYWN0aW9uVGFyZ2V0LiIrdH1yZXR1cm4gbnVsbCE9ZS5tZXNzYWdlJiZlLmhhc093blByb3BlcnR5KCJtZXNzYWdlIikmJiFhLmlzU3RyaW5nKGUubWVzc2FnZSk/Im1lc3NhZ2U6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5zdGFjayYmZS5oYXNPd25Qcm9wZXJ0eSgic3RhY2siKSYmIWEuaXNTdHJpbmcoZS5zdGFjayk/InN0YWNrOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5Db21waWxhdGlvbkVycm9yKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3I7aWYobnVsbCE9ZS5maWxlTmFtZSYmKHQuZmlsZU5hbWU9U3RyaW5nKGUuZmlsZU5hbWUpKSxudWxsIT1lLmFjdGlvbk5hbWUmJih0LmFjdGlvbk5hbWU9U3RyaW5nKGUuYWN0aW9uTmFtZSkpLG51bGwhPWUuYWN0aW9uVGFyZ2V0KXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYWN0aW9uVGFyZ2V0KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3IuYWN0aW9uVGFyZ2V0OiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFjdGlvblRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUuYWN0aW9uVGFyZ2V0KX1yZXR1cm4gbnVsbCE9ZS5tZXNzYWdlJiYodC5tZXNzYWdlPVN0cmluZyhlLm1lc3NhZ2UpKSxudWxsIT1lLnN0YWNrJiYodC5zdGFjaz1TdHJpbmcoZS5zdGFjaykpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLmZpbGVOYW1lPSIiLHIubWVzc2FnZT0iIixyLnN0YWNrPSIiLHIuYWN0aW9uTmFtZT0iIixyLmFjdGlvblRhcmdldD1udWxsKSxudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYoci5maWxlTmFtZT1lLmZpbGVOYW1lKSxudWxsIT1lLm1lc3NhZ2UmJmUuaGFzT3duUHJvcGVydHkoIm1lc3NhZ2UiKSYmKHIubWVzc2FnZT1lLm1lc3NhZ2UpLG51bGwhPWUuc3RhY2smJmUuaGFzT3duUHJvcGVydHkoInN0YWNrIikmJihyLnN0YWNrPWUuc3RhY2spLG51bGwhPWUuYWN0aW9uTmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9uTmFtZSIpJiYoci5hY3Rpb25OYW1lPWUuYWN0aW9uTmFtZSksbnVsbCE9ZS5hY3Rpb25UYXJnZXQmJmUuaGFzT3duUHJvcGVydHkoImFjdGlvblRhcmdldCIpJiYoci5hY3Rpb25UYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS5hY3Rpb25UYXJnZXQsdCkpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3IifSx0fSgpLG4uQWN0aW9uRGVzY3JpcHRvcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5jb2x1bW5zPVtdLHRoaXMuYmlncXVlcnlMYWJlbHM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5kZXNjcmlwdGlvbj0iIix0LnByb3RvdHlwZS5jb2x1bW5zPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5iaWdxdWVyeUxhYmVscz1hLmVtcHR5T2JqZWN0LHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLmRlc2NyaXB0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXNjcmlwdGlvbiIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUuZGVzY3JpcHRpb24pLG51bGwhPWUuY29sdW1ucyYmZS5jb2x1bW5zLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuY29sdW1ucy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvci5lbmNvZGUoZS5jb2x1bW5zW3JdLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUuYmlncXVlcnlMYWJlbHMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImJpZ3F1ZXJ5TGFiZWxzIikpe3ZhciBuPU9iamVjdC5rZXlzKGUuYmlncXVlcnlMYWJlbHMpO2ZvcihyPTA7cjxuLmxlbmd0aDsrK3IpdC51aW50MzIoMjYpLmZvcmsoKS51aW50MzIoMTApLnN0cmluZyhuW3JdKS51aW50MzIoMTgpLnN0cmluZyhlLmJpZ3F1ZXJ5TGFiZWxzW25bcl1dKS5sZGVsaW0oKX1yZXR1cm4gdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcixuLGk9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGw9bmV3IHMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvcjtlLnBvczxpOyl7dmFyIGM9ZS51aW50MzIoKTtzd2l0Y2goYz4+PjMpe2Nhc2UgMTpsLmRlc2NyaXB0aW9uPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOmwuY29sdW1ucyYmbC5jb2x1bW5zLmxlbmd0aHx8KGwuY29sdW1ucz1bXSksbC5jb2x1bW5zLnB1c2gocy5kYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yLmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDM6bC5iaWdxdWVyeUxhYmVscz09PWEuZW1wdHlPYmplY3QmJihsLmJpZ3F1ZXJ5TGFiZWxzPXt9KTt2YXIgdT1lLnVpbnQzMigpK2UucG9zO2ZvcihyPSIiLG49IiI7ZS5wb3M8dTspe3ZhciBwPWUudWludDMyKCk7c3dpdGNoKHA+Pj4zKXtjYXNlIDE6cj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuPWUuc3RyaW5nKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmcCl9fWwuYmlncXVlcnlMYWJlbHNbcl09bjticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZjKX19cmV0dXJuIGx9LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5kZXNjcmlwdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVzY3JpcHRpb24iKSYmIWEuaXNTdHJpbmcoZS5kZXNjcmlwdGlvbikpcmV0dXJuImRlc2NyaXB0aW9uOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuY29sdW1ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiY29sdW1ucyIpKXtpZighQXJyYXkuaXNBcnJheShlLmNvbHVtbnMpKXJldHVybiJjb2x1bW5zOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmNvbHVtbnMubGVuZ3RoOysrdCl7dmFyIHI9cy5kYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yLnZlcmlmeShlLmNvbHVtbnNbdF0pO2lmKHIpcmV0dXJuImNvbHVtbnMuIityfX1pZihudWxsIT1lLmJpZ3F1ZXJ5TGFiZWxzJiZlLmhhc093blByb3BlcnR5KCJiaWdxdWVyeUxhYmVscyIpKXtpZighYS5pc09iamVjdChlLmJpZ3F1ZXJ5TGFiZWxzKSlyZXR1cm4iYmlncXVlcnlMYWJlbHM6IG9iamVjdCBleHBlY3RlZCI7dmFyIG49T2JqZWN0LmtleXMoZS5iaWdxdWVyeUxhYmVscyk7Zm9yKHQ9MDt0PG4ubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLmJpZ3F1ZXJ5TGFiZWxzW25bdF1dKSlyZXR1cm4iYmlncXVlcnlMYWJlbHM6IHN0cmluZ3trOnN0cmluZ30gZXhwZWN0ZWQifXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvcilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yO2lmKG51bGwhPWUuZGVzY3JpcHRpb24mJih0LmRlc2NyaXB0aW9uPVN0cmluZyhlLmRlc2NyaXB0aW9uKSksZS5jb2x1bW5zKXtpZighQXJyYXkuaXNBcnJheShlLmNvbHVtbnMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuY29sdW1uczogYXJyYXkgZXhwZWN0ZWQiKTt0LmNvbHVtbnM9W107Zm9yKHZhciByPTA7cjxlLmNvbHVtbnMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmNvbHVtbnNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci5jb2x1bW5zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNvbHVtbnNbcl09cy5kYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yLmZyb21PYmplY3QoZS5jb2x1bW5zW3JdKX19aWYoZS5iaWdxdWVyeUxhYmVscyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmJpZ3F1ZXJ5TGFiZWxzKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuYmlncXVlcnlMYWJlbHM6IG9iamVjdCBleHBlY3RlZCIpO3QuYmlncXVlcnlMYWJlbHM9e307dmFyIG49T2JqZWN0LmtleXMoZS5iaWdxdWVyeUxhYmVscyk7Zm9yKHI9MDtyPG4ubGVuZ3RoOysrcil0LmJpZ3F1ZXJ5TGFiZWxzW25bcl1dPVN0cmluZyhlLmJpZ3F1ZXJ5TGFiZWxzW25bcl1dKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcixuPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihuLmNvbHVtbnM9W10pLCh0Lm9iamVjdHN8fHQuZGVmYXVsdHMpJiYobi5iaWdxdWVyeUxhYmVscz17fSksdC5kZWZhdWx0cyYmKG4uZGVzY3JpcHRpb249IiIpLG51bGwhPWUuZGVzY3JpcHRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlc2NyaXB0aW9uIikmJihuLmRlc2NyaXB0aW9uPWUuZGVzY3JpcHRpb24pLGUuY29sdW1ucyYmZS5jb2x1bW5zLmxlbmd0aCl7bi5jb2x1bW5zPVtdO2Zvcih2YXIgbz0wO288ZS5jb2x1bW5zLmxlbmd0aDsrK28pbi5jb2x1bW5zW29dPXMuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvci50b09iamVjdChlLmNvbHVtbnNbb10sdCl9aWYoZS5iaWdxdWVyeUxhYmVscyYmKHI9T2JqZWN0LmtleXMoZS5iaWdxdWVyeUxhYmVscykpLmxlbmd0aClmb3Iobi5iaWdxdWVyeUxhYmVscz17fSxvPTA7bzxyLmxlbmd0aDsrK28pbi5iaWdxdWVyeUxhYmVsc1tyW29dXT1lLmJpZ3F1ZXJ5TGFiZWxzW3Jbb11dO3JldHVybiBufSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yIn0sdH0oKSxuLkNvbHVtbkRlc2NyaXB0b3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMucGF0aD1bXSx0aGlzLnRhZ3M9W10sdGhpcy5iaWdxdWVyeVBvbGljeVRhZ3M9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5kZXNjcmlwdGlvbj0iIix0LnByb3RvdHlwZS5wYXRoPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5kaXNwbGF5TmFtZT0iIix0LnByb3RvdHlwZS50YWdzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5iaWdxdWVyeVBvbGljeVRhZ3M9YS5lbXB0eUFycmF5LHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLmRlc2NyaXB0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXNjcmlwdGlvbiIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUuZGVzY3JpcHRpb24pLG51bGwhPWUucGF0aCYmZS5wYXRoLmxlbmd0aClmb3IodmFyIHI9MDtyPGUucGF0aC5sZW5ndGg7KytyKXQudWludDMyKDE4KS5zdHJpbmcoZS5wYXRoW3JdKTtpZihudWxsIT1lLmRpc3BsYXlOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkaXNwbGF5TmFtZSIpJiZ0LnVpbnQzMigyNikuc3RyaW5nKGUuZGlzcGxheU5hbWUpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNTgpLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuYmlncXVlcnlQb2xpY3lUYWdzJiZlLmJpZ3F1ZXJ5UG9saWN5VGFncy5sZW5ndGgpZm9yKHI9MDtyPGUuYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNjYpLnN0cmluZyhlLmJpZ3F1ZXJ5UG9saWN5VGFnc1tyXSk7cmV0dXJuIHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvcjtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLmRlc2NyaXB0aW9uPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4ucGF0aCYmbi5wYXRoLmxlbmd0aHx8KG4ucGF0aD1bXSksbi5wYXRoLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAzOm4uZGlzcGxheU5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDc6bi50YWdzJiZuLnRhZ3MubGVuZ3RofHwobi50YWdzPVtdKSxuLnRhZ3MucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDg6bi5iaWdxdWVyeVBvbGljeVRhZ3MmJm4uYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aHx8KG4uYmlncXVlcnlQb2xpY3lUYWdzPVtdKSxuLmJpZ3F1ZXJ5UG9saWN5VGFncy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5wYXRoJiZlLmhhc093blByb3BlcnR5KCJwYXRoIikpe2lmKCFBcnJheS5pc0FycmF5KGUucGF0aCkpcmV0dXJuInBhdGg6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUucGF0aC5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUucGF0aFt0XSkpcmV0dXJuInBhdGg6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLmRpc3BsYXlOYW1lJiZlLmhhc093blByb3BlcnR5KCJkaXNwbGF5TmFtZSIpJiYhYS5pc1N0cmluZyhlLmRpc3BsYXlOYW1lKSlyZXR1cm4iZGlzcGxheU5hbWU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS50YWdzJiZlLmhhc093blByb3BlcnR5KCJ0YWdzIikpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpcmV0dXJuInRhZ3M6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS50YWdzLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS50YWdzW3RdKSlyZXR1cm4idGFnczogc3RyaW5nW10gZXhwZWN0ZWQifWlmKG51bGwhPWUuYmlncXVlcnlQb2xpY3lUYWdzJiZlLmhhc093blByb3BlcnR5KCJiaWdxdWVyeVBvbGljeVRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5iaWdxdWVyeVBvbGljeVRhZ3MpKXJldHVybiJiaWdxdWVyeVBvbGljeVRhZ3M6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5iaWdxdWVyeVBvbGljeVRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLmJpZ3F1ZXJ5UG9saWN5VGFnc1t0XSkpcmV0dXJuImJpZ3F1ZXJ5UG9saWN5VGFnczogc3RyaW5nW10gZXhwZWN0ZWQifXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvcilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yO2lmKG51bGwhPWUuZGVzY3JpcHRpb24mJih0LmRlc2NyaXB0aW9uPVN0cmluZyhlLmRlc2NyaXB0aW9uKSksZS5wYXRoKXtpZighQXJyYXkuaXNBcnJheShlLnBhdGgpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbHVtbkRlc2NyaXB0b3IucGF0aDogYXJyYXkgZXhwZWN0ZWQiKTt0LnBhdGg9W107Zm9yKHZhciByPTA7cjxlLnBhdGgubGVuZ3RoOysrcil0LnBhdGhbcl09U3RyaW5nKGUucGF0aFtyXSl9aWYobnVsbCE9ZS5kaXNwbGF5TmFtZSYmKHQuZGlzcGxheU5hbWU9U3RyaW5nKGUuZGlzcGxheU5hbWUpKSxlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvci50YWdzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhZ3M9W10scj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC50YWdzW3JdPVN0cmluZyhlLnRhZ3Nbcl0pfWlmKGUuYmlncXVlcnlQb2xpY3lUYWdzKXtpZighQXJyYXkuaXNBcnJheShlLmJpZ3F1ZXJ5UG9saWN5VGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvci5iaWdxdWVyeVBvbGljeVRhZ3M6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQuYmlncXVlcnlQb2xpY3lUYWdzPVtdLHI9MDtyPGUuYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aDsrK3IpdC5iaWdxdWVyeVBvbGljeVRhZ3Nbcl09U3RyaW5nKGUuYmlncXVlcnlQb2xpY3lUYWdzW3JdKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5wYXRoPVtdLHIudGFncz1bXSxyLmJpZ3F1ZXJ5UG9saWN5VGFncz1bXSksdC5kZWZhdWx0cyYmKHIuZGVzY3JpcHRpb249IiIsci5kaXNwbGF5TmFtZT0iIiksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVzY3JpcHRpb24iKSYmKHIuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS5wYXRoJiZlLnBhdGgubGVuZ3RoKXtyLnBhdGg9W107Zm9yKHZhciBuPTA7bjxlLnBhdGgubGVuZ3RoOysrbilyLnBhdGhbbl09ZS5wYXRoW25dfWlmKG51bGwhPWUuZGlzcGxheU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImRpc3BsYXlOYW1lIikmJihyLmRpc3BsYXlOYW1lPWUuZGlzcGxheU5hbWUpLGUudGFncyYmZS50YWdzLmxlbmd0aClmb3Ioci50YWdzPVtdLG49MDtuPGUudGFncy5sZW5ndGg7KytuKXIudGFnc1tuXT1lLnRhZ3Nbbl07aWYoZS5iaWdxdWVyeVBvbGljeVRhZ3MmJmUuYmlncXVlcnlQb2xpY3lUYWdzLmxlbmd0aClmb3Ioci5iaWdxdWVyeVBvbGljeVRhZ3M9W10sbj0wO248ZS5iaWdxdWVyeVBvbGljeVRhZ3MubGVuZ3RoOysrbilyLmJpZ3F1ZXJ5UG9saWN5VGFnc1tuXT1lLmJpZ3F1ZXJ5UG9saWN5VGFnc1tuXTtyZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvciJ9LHR9KCksbi5UYWJsZVR5cGU9KHQ9e30sKHI9T2JqZWN0LmNyZWF0ZSh0KSlbdFswXT0iVU5LTk9XTl9UWVBFIl09MCxyW3RbMV09IlRBQkxFIl09MSxyW3RbMl09IklOQ1JFTUVOVEFMIl09MixyW3RbM109IlZJRVciXT0zLHIpLG4uT25TY2hlbWFDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIHRbZVswXT0iSUdOT1JFIl09MCx0W2VbMV09IkZBSUwiXT0xLHRbZVsyXT0iRVhURU5EIl09Mix0W2VbM109IlNZTkNIUk9OSVpFIl09Myx0fSgpLG4uVGFibGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuZGVwZW5kZW5jeVRhcmdldHM9W10sdGhpcy50YWdzPVtdLHRoaXMudW5pcXVlS2V5PVtdLHRoaXMucHJlT3BzPVtdLHRoaXMucG9zdE9wcz1bXSx0aGlzLmluY3JlbWVudGFsUHJlT3BzPVtdLHRoaXMuaW5jcmVtZW50YWxQb3N0T3BzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUuZW51bVR5cGU9MCx0LnByb3RvdHlwZS50YXJnZXQ9bnVsbCx0LnByb3RvdHlwZS5jYW5vbmljYWxUYXJnZXQ9bnVsbCx0LnByb3RvdHlwZS5kZXBlbmRlbmN5VGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuaGVybWV0aWNpdHk9MCx0LnByb3RvdHlwZS5kaXNhYmxlZD0hMSx0LnByb3RvdHlwZS50eXBlPSIiLHQucHJvdG90eXBlLnF1ZXJ5PSIiLHQucHJvdG90eXBlLnByb3RlY3RlZD0hMSx0LnByb3RvdHlwZS5tYXRlcmlhbGl6ZWQ9ITEsdC5wcm90b3R5cGUuYWN0aW9uRGVzY3JpcHRvcj1udWxsLHQucHJvdG90eXBlLnRhZ3M9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLndoZXJlPSIiLHQucHJvdG90eXBlLmluY3JlbWVudGFsUXVlcnk9IiIsdC5wcm90b3R5cGUudW5pcXVlS2V5PWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5vblNjaGVtYUNoYW5nZT0wLHQucHJvdG90eXBlLnByZU9wcz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUucG9zdE9wcz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuaW5jcmVtZW50YWxQcmVPcHM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmluY3JlbWVudGFsUG9zdE9wcz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuYmlncXVlcnk9bnVsbCx0LnByb3RvdHlwZS5maWxlTmFtZT0iIix0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS50eXBlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0eXBlIikmJnQudWludDMyKDI2KS5zdHJpbmcoZS50eXBlKSxudWxsIT1lLnRhcmdldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidGFyZ2V0IikmJnMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLnRhcmdldCx0LnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLnF1ZXJ5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJxdWVyeSIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUucXVlcnkpLG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDQ4KS5ib29sKGUuZGlzYWJsZWQpLG51bGwhPWUud2hlcmUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIndoZXJlIikmJnQudWludDMyKDY2KS5zdHJpbmcoZS53aGVyZSksbnVsbCE9ZS5wcm90ZWN0ZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb3RlY3RlZCIpJiZ0LnVpbnQzMig3MikuYm9vbChlLnByb3RlY3RlZCksbnVsbCE9ZS5wcmVPcHMmJmUucHJlT3BzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUucHJlT3BzLmxlbmd0aDsrK3IpdC51aW50MzIoMTA2KS5zdHJpbmcoZS5wcmVPcHNbcl0pO2lmKG51bGwhPWUucG9zdE9wcyYmZS5wb3N0T3BzLmxlbmd0aClmb3Iocj0wO3I8ZS5wb3N0T3BzLmxlbmd0aDsrK3IpdC51aW50MzIoMTE0KS5zdHJpbmcoZS5wb3N0T3BzW3JdKTtpZihudWxsIT1lLmZpbGVOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlTmFtZSIpJiZ0LnVpbnQzMigxNDYpLnN0cmluZyhlLmZpbGVOYW1lKSxudWxsIT1lLmJpZ3F1ZXJ5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJiaWdxdWVyeSIpJiZzLmRhdGFmb3JtLkJpZ1F1ZXJ5T3B0aW9ucy5lbmNvZGUoZS5iaWdxdWVyeSx0LnVpbnQzMigxNzgpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyPTA7cjxlLnRhZ3MubGVuZ3RoOysrcil0LnVpbnQzMigxODYpLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYWN0aW9uRGVzY3JpcHRvciIpJiZzLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZW5jb2RlKGUuYWN0aW9uRGVzY3JpcHRvcix0LnVpbnQzMigxOTQpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5pbmNyZW1lbnRhbFF1ZXJ5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJpbmNyZW1lbnRhbFF1ZXJ5IikmJnQudWludDMyKDIxMCkuc3RyaW5nKGUuaW5jcmVtZW50YWxRdWVyeSksbnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpZm9yKHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSx0LnVpbnQzMigyMTgpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5pbmNyZW1lbnRhbFByZU9wcyYmZS5pbmNyZW1lbnRhbFByZU9wcy5sZW5ndGgpZm9yKHI9MDtyPGUuaW5jcmVtZW50YWxQcmVPcHMubGVuZ3RoOysrcil0LnVpbnQzMigyMjYpLnN0cmluZyhlLmluY3JlbWVudGFsUHJlT3BzW3JdKTtpZihudWxsIT1lLmluY3JlbWVudGFsUG9zdE9wcyYmZS5pbmNyZW1lbnRhbFBvc3RPcHMubGVuZ3RoKWZvcihyPTA7cjxlLmluY3JlbWVudGFsUG9zdE9wcy5sZW5ndGg7KytyKXQudWludDMyKDIzNCkuc3RyaW5nKGUuaW5jcmVtZW50YWxQb3N0T3BzW3JdKTtpZihudWxsIT1lLnVuaXF1ZUtleSYmZS51bmlxdWVLZXkubGVuZ3RoKWZvcihyPTA7cjxlLnVuaXF1ZUtleS5sZW5ndGg7KytyKXQudWludDMyKDI0Mikuc3RyaW5nKGUudW5pcXVlS2V5W3JdKTtyZXR1cm4gbnVsbCE9ZS5oZXJtZXRpY2l0eSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiaGVybWV0aWNpdHkiKSYmdC51aW50MzIoMjQ4KS5pbnQzMihlLmhlcm1ldGljaXR5KSxudWxsIT1lLmNhbm9uaWNhbFRhcmdldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiY2Fub25pY2FsVGFyZ2V0IikmJnMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLmNhbm9uaWNhbFRhcmdldCx0LnVpbnQzMigyNTgpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5tYXRlcmlhbGl6ZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm1hdGVyaWFsaXplZCIpJiZ0LnVpbnQzMigyODApLmJvb2woZS5tYXRlcmlhbGl6ZWQpLG51bGwhPWUuZW51bVR5cGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImVudW1UeXBlIikmJnQudWludDMyKDI4OCkuaW50MzIoZS5lbnVtVHlwZSksbnVsbCE9ZS5vblNjaGVtYUNoYW5nZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwib25TY2hlbWFDaGFuZ2UiKSYmdC51aW50MzIoMjk2KS5pbnQzMihlLm9uU2NoZW1hQ2hhbmdlKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLlRhYmxlO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAzNjpuLmVudW1UeXBlPWUuaW50MzIoKTticmVhaztjYXNlIDQ6bi50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzMjpuLmNhbm9uaWNhbFRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDI3Om4uZGVwZW5kZW5jeVRhcmdldHMmJm4uZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RofHwobi5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksbi5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHMuZGF0YWZvcm0uVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDMxOm4uaGVybWV0aWNpdHk9ZS5pbnQzMigpO2JyZWFrO2Nhc2UgNjpuLmRpc2FibGVkPWUuYm9vbCgpO2JyZWFrO2Nhc2UgMzpuLnR5cGU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDU6bi5xdWVyeT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgOTpuLnByb3RlY3RlZD1lLmJvb2woKTticmVhaztjYXNlIDM1Om4ubWF0ZXJpYWxpemVkPWUuYm9vbCgpO2JyZWFrO2Nhc2UgMjQ6bi5hY3Rpb25EZXNjcmlwdG9yPXMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDIzOm4udGFncyYmbi50YWdzLmxlbmd0aHx8KG4udGFncz1bXSksbi50YWdzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA4Om4ud2hlcmU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI2Om4uaW5jcmVtZW50YWxRdWVyeT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzA6bi51bmlxdWVLZXkmJm4udW5pcXVlS2V5Lmxlbmd0aHx8KG4udW5pcXVlS2V5PVtdKSxuLnVuaXF1ZUtleS5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgMzc6bi5vblNjaGVtYUNoYW5nZT1lLmludDMyKCk7YnJlYWs7Y2FzZSAxMzpuLnByZU9wcyYmbi5wcmVPcHMubGVuZ3RofHwobi5wcmVPcHM9W10pLG4ucHJlT3BzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAxNDpuLnBvc3RPcHMmJm4ucG9zdE9wcy5sZW5ndGh8fChuLnBvc3RPcHM9W10pLG4ucG9zdE9wcy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgMjg6bi5pbmNyZW1lbnRhbFByZU9wcyYmbi5pbmNyZW1lbnRhbFByZU9wcy5sZW5ndGh8fChuLmluY3JlbWVudGFsUHJlT3BzPVtdKSxuLmluY3JlbWVudGFsUHJlT3BzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAyOTpuLmluY3JlbWVudGFsUG9zdE9wcyYmbi5pbmNyZW1lbnRhbFBvc3RPcHMubGVuZ3RofHwobi5pbmNyZW1lbnRhbFBvc3RPcHM9W10pLG4uaW5jcmVtZW50YWxQb3N0T3BzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAyMjpuLmJpZ3F1ZXJ5PXMuZGF0YWZvcm0uQmlnUXVlcnlPcHRpb25zLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMTg6bi5maWxlTmFtZT1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLmVudW1UeXBlJiZlLmhhc093blByb3BlcnR5KCJlbnVtVHlwZSIpKXN3aXRjaChlLmVudW1UeXBlKXtkZWZhdWx0OnJldHVybiJlbnVtVHlwZTogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSAzOn1pZihudWxsIT1lLnRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgidGFyZ2V0IikmJihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLnRhcmdldCkpKXJldHVybiJ0YXJnZXQuIityO2lmKG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJjYW5vbmljYWxUYXJnZXQiKSYmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUuY2Fub25pY2FsVGFyZ2V0KSkpcmV0dXJuImNhbm9uaWNhbFRhcmdldC4iK3I7aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Qpe3ZhciByO2lmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUuZGVwZW5kZW5jeVRhcmdldHNbdF0pKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0cy4iK3J9fWlmKG51bGwhPWUuaGVybWV0aWNpdHkmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljaXR5Iikpc3dpdGNoKGUuaGVybWV0aWNpdHkpe2RlZmF1bHQ6cmV0dXJuImhlcm1ldGljaXR5OiBlbnVtIHZhbHVlIGV4cGVjdGVkIjtjYXNlIDA6Y2FzZSAxOmNhc2UgMjp9aWYobnVsbCE9ZS5kaXNhYmxlZCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzYWJsZWQiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5kaXNhYmxlZClyZXR1cm4iZGlzYWJsZWQ6IGJvb2xlYW4gZXhwZWN0ZWQiO2lmKG51bGwhPWUudHlwZSYmZS5oYXNPd25Qcm9wZXJ0eSgidHlwZSIpJiYhYS5pc1N0cmluZyhlLnR5cGUpKXJldHVybiJ0eXBlOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUucXVlcnkmJmUuaGFzT3duUHJvcGVydHkoInF1ZXJ5IikmJiFhLmlzU3RyaW5nKGUucXVlcnkpKXJldHVybiJxdWVyeTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnByb3RlY3RlZCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvdGVjdGVkIikmJiJib29sZWFuIiE9dHlwZW9mIGUucHJvdGVjdGVkKXJldHVybiJwcm90ZWN0ZWQ6IGJvb2xlYW4gZXhwZWN0ZWQiO2lmKG51bGwhPWUubWF0ZXJpYWxpemVkJiZlLmhhc093blByb3BlcnR5KCJtYXRlcmlhbGl6ZWQiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5tYXRlcmlhbGl6ZWQpcmV0dXJuIm1hdGVyaWFsaXplZDogYm9vbGVhbiBleHBlY3RlZCI7aWYobnVsbCE9ZS5hY3Rpb25EZXNjcmlwdG9yJiZlLmhhc093blByb3BlcnR5KCJhY3Rpb25EZXNjcmlwdG9yIikmJihyPXMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci52ZXJpZnkoZS5hY3Rpb25EZXNjcmlwdG9yKSkpcmV0dXJuImFjdGlvbkRlc2NyaXB0b3IuIityO2lmKG51bGwhPWUudGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXJldHVybiJ0YWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudGFncy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudGFnc1t0XSkpcmV0dXJuInRhZ3M6IHN0cmluZ1tdIGV4cGVjdGVkIn1pZihudWxsIT1lLndoZXJlJiZlLmhhc093blByb3BlcnR5KCJ3aGVyZSIpJiYhYS5pc1N0cmluZyhlLndoZXJlKSlyZXR1cm4id2hlcmU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5pbmNyZW1lbnRhbFF1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJpbmNyZW1lbnRhbFF1ZXJ5IikmJiFhLmlzU3RyaW5nKGUuaW5jcmVtZW50YWxRdWVyeSkpcmV0dXJuImluY3JlbWVudGFsUXVlcnk6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS51bmlxdWVLZXkmJmUuaGFzT3duUHJvcGVydHkoInVuaXF1ZUtleSIpKXtpZighQXJyYXkuaXNBcnJheShlLnVuaXF1ZUtleSkpcmV0dXJuInVuaXF1ZUtleTogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnVuaXF1ZUtleS5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUudW5pcXVlS2V5W3RdKSlyZXR1cm4idW5pcXVlS2V5OiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5vblNjaGVtYUNoYW5nZSYmZS5oYXNPd25Qcm9wZXJ0eSgib25TY2hlbWFDaGFuZ2UiKSlzd2l0Y2goZS5vblNjaGVtYUNoYW5nZSl7ZGVmYXVsdDpyZXR1cm4ib25TY2hlbWFDaGFuZ2U6IGVudW0gdmFsdWUgZXhwZWN0ZWQiO2Nhc2UgMDpjYXNlIDE6Y2FzZSAyOmNhc2UgMzp9aWYobnVsbCE9ZS5wcmVPcHMmJmUuaGFzT3duUHJvcGVydHkoInByZU9wcyIpKXtpZighQXJyYXkuaXNBcnJheShlLnByZU9wcykpcmV0dXJuInByZU9wczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnByZU9wcy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUucHJlT3BzW3RdKSlyZXR1cm4icHJlT3BzOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5wb3N0T3BzJiZlLmhhc093blByb3BlcnR5KCJwb3N0T3BzIikpe2lmKCFBcnJheS5pc0FycmF5KGUucG9zdE9wcykpcmV0dXJuInBvc3RPcHM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5wb3N0T3BzLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5wb3N0T3BzW3RdKSlyZXR1cm4icG9zdE9wczogc3RyaW5nW10gZXhwZWN0ZWQifWlmKG51bGwhPWUuaW5jcmVtZW50YWxQcmVPcHMmJmUuaGFzT3duUHJvcGVydHkoImluY3JlbWVudGFsUHJlT3BzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuaW5jcmVtZW50YWxQcmVPcHMpKXJldHVybiJpbmNyZW1lbnRhbFByZU9wczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLmluY3JlbWVudGFsUHJlT3BzLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS5pbmNyZW1lbnRhbFByZU9wc1t0XSkpcmV0dXJuImluY3JlbWVudGFsUHJlT3BzOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5pbmNyZW1lbnRhbFBvc3RPcHMmJmUuaGFzT3duUHJvcGVydHkoImluY3JlbWVudGFsUG9zdE9wcyIpKXtpZighQXJyYXkuaXNBcnJheShlLmluY3JlbWVudGFsUG9zdE9wcykpcmV0dXJuImluY3JlbWVudGFsUG9zdE9wczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLmluY3JlbWVudGFsUG9zdE9wcy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUuaW5jcmVtZW50YWxQb3N0T3BzW3RdKSlyZXR1cm4iaW5jcmVtZW50YWxQb3N0T3BzOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUuYmlncXVlcnkmJmUuaGFzT3duUHJvcGVydHkoImJpZ3F1ZXJ5IikmJihyPXMuZGF0YWZvcm0uQmlnUXVlcnlPcHRpb25zLnZlcmlmeShlLmJpZ3F1ZXJ5KSk/ImJpZ3F1ZXJ5LiIrcjpudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYhYS5pc1N0cmluZyhlLmZpbGVOYW1lKT8iZmlsZU5hbWU6IHN0cmluZyBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlRhYmxlKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLlRhYmxlO3N3aXRjaChlLmVudW1UeXBlKXtkZWZhdWx0OmlmKCJudW1iZXIiPT10eXBlb2YgZS5lbnVtVHlwZSl7dC5lbnVtVHlwZT1lLmVudW1UeXBlO2JyZWFrfWJyZWFrO2Nhc2UiVU5LTk9XTl9UWVBFIjpjYXNlIDA6dC5lbnVtVHlwZT0wO2JyZWFrO2Nhc2UiVEFCTEUiOmNhc2UgMTp0LmVudW1UeXBlPTE7YnJlYWs7Y2FzZSJJTkNSRU1FTlRBTCI6Y2FzZSAyOnQuZW51bVR5cGU9MjticmVhaztjYXNlIlZJRVciOmNhc2UgMzp0LmVudW1UeXBlPTN9aWYobnVsbCE9ZS50YXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS50YXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGFibGUudGFyZ2V0OiBvYmplY3QgZXhwZWN0ZWQiKTt0LnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUudGFyZ2V0KX1pZihudWxsIT1lLmNhbm9uaWNhbFRhcmdldCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmNhbm9uaWNhbFRhcmdldCl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZS5jYW5vbmljYWxUYXJnZXQ6IG9iamVjdCBleHBlY3RlZCIpO3QuY2Fub25pY2FsVGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LmZyb21PYmplY3QoZS5jYW5vbmljYWxUYXJnZXQpfWlmKGUuZGVwZW5kZW5jeVRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlRhYmxlLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZS5kZXBlbmRlbmN5VGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5kZXBlbmRlbmN5VGFyZ2V0c1tyXT1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pfX1zd2l0Y2goZS5oZXJtZXRpY2l0eSl7ZGVmYXVsdDppZigibnVtYmVyIj09dHlwZW9mIGUuaGVybWV0aWNpdHkpe3QuaGVybWV0aWNpdHk9ZS5oZXJtZXRpY2l0eTticmVha31icmVhaztjYXNlIlVOS05PV04iOmNhc2UgMDp0Lmhlcm1ldGljaXR5PTA7YnJlYWs7Y2FzZSJIRVJNRVRJQyI6Y2FzZSAxOnQuaGVybWV0aWNpdHk9MTticmVhaztjYXNlIk5PTl9IRVJNRVRJQyI6Y2FzZSAyOnQuaGVybWV0aWNpdHk9Mn1pZihudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxudWxsIT1lLnR5cGUmJih0LnR5cGU9U3RyaW5nKGUudHlwZSkpLG51bGwhPWUucXVlcnkmJih0LnF1ZXJ5PVN0cmluZyhlLnF1ZXJ5KSksbnVsbCE9ZS5wcm90ZWN0ZWQmJih0LnByb3RlY3RlZD1Cb29sZWFuKGUucHJvdGVjdGVkKSksbnVsbCE9ZS5tYXRlcmlhbGl6ZWQmJih0Lm1hdGVyaWFsaXplZD1Cb29sZWFuKGUubWF0ZXJpYWxpemVkKSksbnVsbCE9ZS5hY3Rpb25EZXNjcmlwdG9yKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYWN0aW9uRGVzY3JpcHRvcil0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZS5hY3Rpb25EZXNjcmlwdG9yOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFjdGlvbkRlc2NyaXB0b3I9cy5kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLmZyb21PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yKX1pZihlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGFibGUudGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC50YWdzPVtdLHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudGFnc1tyXT1TdHJpbmcoZS50YWdzW3JdKX1pZihudWxsIT1lLndoZXJlJiYodC53aGVyZT1TdHJpbmcoZS53aGVyZSkpLG51bGwhPWUuaW5jcmVtZW50YWxRdWVyeSYmKHQuaW5jcmVtZW50YWxRdWVyeT1TdHJpbmcoZS5pbmNyZW1lbnRhbFF1ZXJ5KSksZS51bmlxdWVLZXkpe2lmKCFBcnJheS5pc0FycmF5KGUudW5pcXVlS2V5KSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZS51bmlxdWVLZXk6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQudW5pcXVlS2V5PVtdLHI9MDtyPGUudW5pcXVlS2V5Lmxlbmd0aDsrK3IpdC51bmlxdWVLZXlbcl09U3RyaW5nKGUudW5pcXVlS2V5W3JdKX1zd2l0Y2goZS5vblNjaGVtYUNoYW5nZSl7ZGVmYXVsdDppZigibnVtYmVyIj09dHlwZW9mIGUub25TY2hlbWFDaGFuZ2Upe3Qub25TY2hlbWFDaGFuZ2U9ZS5vblNjaGVtYUNoYW5nZTticmVha31icmVhaztjYXNlIklHTk9SRSI6Y2FzZSAwOnQub25TY2hlbWFDaGFuZ2U9MDticmVhaztjYXNlIkZBSUwiOmNhc2UgMTp0Lm9uU2NoZW1hQ2hhbmdlPTE7YnJlYWs7Y2FzZSJFWFRFTkQiOmNhc2UgMjp0Lm9uU2NoZW1hQ2hhbmdlPTI7YnJlYWs7Y2FzZSJTWU5DSFJPTklaRSI6Y2FzZSAzOnQub25TY2hlbWFDaGFuZ2U9M31pZihlLnByZU9wcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5wcmVPcHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlRhYmxlLnByZU9wczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5wcmVPcHM9W10scj0wO3I8ZS5wcmVPcHMubGVuZ3RoOysrcil0LnByZU9wc1tyXT1TdHJpbmcoZS5wcmVPcHNbcl0pfWlmKGUucG9zdE9wcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5wb3N0T3BzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZS5wb3N0T3BzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnBvc3RPcHM9W10scj0wO3I8ZS5wb3N0T3BzLmxlbmd0aDsrK3IpdC5wb3N0T3BzW3JdPVN0cmluZyhlLnBvc3RPcHNbcl0pfWlmKGUuaW5jcmVtZW50YWxQcmVPcHMpe2lmKCFBcnJheS5pc0FycmF5KGUuaW5jcmVtZW50YWxQcmVPcHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlRhYmxlLmluY3JlbWVudGFsUHJlT3BzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LmluY3JlbWVudGFsUHJlT3BzPVtdLHI9MDtyPGUuaW5jcmVtZW50YWxQcmVPcHMubGVuZ3RoOysrcil0LmluY3JlbWVudGFsUHJlT3BzW3JdPVN0cmluZyhlLmluY3JlbWVudGFsUHJlT3BzW3JdKX1pZihlLmluY3JlbWVudGFsUG9zdE9wcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5pbmNyZW1lbnRhbFBvc3RPcHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlRhYmxlLmluY3JlbWVudGFsUG9zdE9wczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5pbmNyZW1lbnRhbFBvc3RPcHM9W10scj0wO3I8ZS5pbmNyZW1lbnRhbFBvc3RPcHMubGVuZ3RoOysrcil0LmluY3JlbWVudGFsUG9zdE9wc1tyXT1TdHJpbmcoZS5pbmNyZW1lbnRhbFBvc3RPcHNbcl0pfWlmKG51bGwhPWUuYmlncXVlcnkpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5iaWdxdWVyeSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZS5iaWdxdWVyeTogb2JqZWN0IGV4cGVjdGVkIik7dC5iaWdxdWVyeT1zLmRhdGFmb3JtLkJpZ1F1ZXJ5T3B0aW9ucy5mcm9tT2JqZWN0KGUuYmlncXVlcnkpfXJldHVybiBudWxsIT1lLmZpbGVOYW1lJiYodC5maWxlTmFtZT1TdHJpbmcoZS5maWxlTmFtZSkpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIucHJlT3BzPVtdLHIucG9zdE9wcz1bXSxyLnRhZ3M9W10sci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxyLmluY3JlbWVudGFsUHJlT3BzPVtdLHIuaW5jcmVtZW50YWxQb3N0T3BzPVtdLHIudW5pcXVlS2V5PVtdKSx0LmRlZmF1bHRzJiYoci50eXBlPSIiLHIudGFyZ2V0PW51bGwsci5xdWVyeT0iIixyLmRpc2FibGVkPSExLHIud2hlcmU9IiIsci5wcm90ZWN0ZWQ9ITEsci5maWxlTmFtZT0iIixyLmJpZ3F1ZXJ5PW51bGwsci5hY3Rpb25EZXNjcmlwdG9yPW51bGwsci5pbmNyZW1lbnRhbFF1ZXJ5PSIiLHIuaGVybWV0aWNpdHk9dC5lbnVtcz09PVN0cmluZz8iVU5LTk9XTiI6MCxyLmNhbm9uaWNhbFRhcmdldD1udWxsLHIubWF0ZXJpYWxpemVkPSExLHIuZW51bVR5cGU9dC5lbnVtcz09PVN0cmluZz8iVU5LTk9XTl9UWVBFIjowLHIub25TY2hlbWFDaGFuZ2U9dC5lbnVtcz09PVN0cmluZz8iSUdOT1JFIjowKSxudWxsIT1lLnR5cGUmJmUuaGFzT3duUHJvcGVydHkoInR5cGUiKSYmKHIudHlwZT1lLnR5cGUpLG51bGwhPWUudGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJ0YXJnZXQiKSYmKHIudGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUudGFyZ2V0LHQpKSxudWxsIT1lLnF1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJxdWVyeSIpJiYoci5xdWVyeT1lLnF1ZXJ5KSxudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxudWxsIT1lLndoZXJlJiZlLmhhc093blByb3BlcnR5KCJ3aGVyZSIpJiYoci53aGVyZT1lLndoZXJlKSxudWxsIT1lLnByb3RlY3RlZCYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvdGVjdGVkIikmJihyLnByb3RlY3RlZD1lLnByb3RlY3RlZCksZS5wcmVPcHMmJmUucHJlT3BzLmxlbmd0aCl7ci5wcmVPcHM9W107Zm9yKHZhciBuPTA7bjxlLnByZU9wcy5sZW5ndGg7KytuKXIucHJlT3BzW25dPWUucHJlT3BzW25dfWlmKGUucG9zdE9wcyYmZS5wb3N0T3BzLmxlbmd0aClmb3Ioci5wb3N0T3BzPVtdLG49MDtuPGUucG9zdE9wcy5sZW5ndGg7KytuKXIucG9zdE9wc1tuXT1lLnBvc3RPcHNbbl07aWYobnVsbCE9ZS5maWxlTmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZU5hbWUiKSYmKHIuZmlsZU5hbWU9ZS5maWxlTmFtZSksbnVsbCE9ZS5iaWdxdWVyeSYmZS5oYXNPd25Qcm9wZXJ0eSgiYmlncXVlcnkiKSYmKHIuYmlncXVlcnk9cy5kYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnMudG9PYmplY3QoZS5iaWdxdWVyeSx0KSksZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyLnRhZ3M9W10sbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXTtpZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3ImJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbkRlc2NyaXB0b3IiKSYmKHIuYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudG9PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yLHQpKSxudWxsIT1lLmluY3JlbWVudGFsUXVlcnkmJmUuaGFzT3duUHJvcGVydHkoImluY3JlbWVudGFsUXVlcnkiKSYmKHIuaW5jcmVtZW50YWxRdWVyeT1lLmluY3JlbWVudGFsUXVlcnkpLGUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcihyLmRlcGVuZGVuY3lUYXJnZXRzPVtdLG49MDtuPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrbilyLmRlcGVuZGVuY3lUYXJnZXRzW25dPXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbbl0sdCk7aWYoZS5pbmNyZW1lbnRhbFByZU9wcyYmZS5pbmNyZW1lbnRhbFByZU9wcy5sZW5ndGgpZm9yKHIuaW5jcmVtZW50YWxQcmVPcHM9W10sbj0wO248ZS5pbmNyZW1lbnRhbFByZU9wcy5sZW5ndGg7KytuKXIuaW5jcmVtZW50YWxQcmVPcHNbbl09ZS5pbmNyZW1lbnRhbFByZU9wc1tuXTtpZihlLmluY3JlbWVudGFsUG9zdE9wcyYmZS5pbmNyZW1lbnRhbFBvc3RPcHMubGVuZ3RoKWZvcihyLmluY3JlbWVudGFsUG9zdE9wcz1bXSxuPTA7bjxlLmluY3JlbWVudGFsUG9zdE9wcy5sZW5ndGg7KytuKXIuaW5jcmVtZW50YWxQb3N0T3BzW25dPWUuaW5jcmVtZW50YWxQb3N0T3BzW25dO2lmKGUudW5pcXVlS2V5JiZlLnVuaXF1ZUtleS5sZW5ndGgpZm9yKHIudW5pcXVlS2V5PVtdLG49MDtuPGUudW5pcXVlS2V5Lmxlbmd0aDsrK24pci51bmlxdWVLZXlbbl09ZS51bmlxdWVLZXlbbl07cmV0dXJuIG51bGwhPWUuaGVybWV0aWNpdHkmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljaXR5IikmJihyLmhlcm1ldGljaXR5PXQuZW51bXM9PT1TdHJpbmc/dm9pZCAwPT09cy5kYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eVtlLmhlcm1ldGljaXR5XT9lLmhlcm1ldGljaXR5OnMuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHlbZS5oZXJtZXRpY2l0eV06ZS5oZXJtZXRpY2l0eSksbnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQmJmUuaGFzT3duUHJvcGVydHkoImNhbm9uaWNhbFRhcmdldCIpJiYoci5jYW5vbmljYWxUYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS5jYW5vbmljYWxUYXJnZXQsdCkpLG51bGwhPWUubWF0ZXJpYWxpemVkJiZlLmhhc093blByb3BlcnR5KCJtYXRlcmlhbGl6ZWQiKSYmKHIubWF0ZXJpYWxpemVkPWUubWF0ZXJpYWxpemVkKSxudWxsIT1lLmVudW1UeXBlJiZlLmhhc093blByb3BlcnR5KCJlbnVtVHlwZSIpJiYoci5lbnVtVHlwZT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uVGFibGVUeXBlW2UuZW51bVR5cGVdP2UuZW51bVR5cGU6cy5kYXRhZm9ybS5UYWJsZVR5cGVbZS5lbnVtVHlwZV06ZS5lbnVtVHlwZSksbnVsbCE9ZS5vblNjaGVtYUNoYW5nZSYmZS5oYXNPd25Qcm9wZXJ0eSgib25TY2hlbWFDaGFuZ2UiKSYmKHIub25TY2hlbWFDaGFuZ2U9dC5lbnVtcz09PVN0cmluZz92b2lkIDA9PT1zLmRhdGFmb3JtLk9uU2NoZW1hQ2hhbmdlW2Uub25TY2hlbWFDaGFuZ2VdP2Uub25TY2hlbWFDaGFuZ2U6cy5kYXRhZm9ybS5PblNjaGVtYUNoYW5nZVtlLm9uU2NoZW1hQ2hhbmdlXTplLm9uU2NoZW1hQ2hhbmdlKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5UYWJsZSJ9LHR9KCksbi5PcGVyYXRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuZGVwZW5kZW5jeVRhcmdldHM9W10sdGhpcy5xdWVyaWVzPVtdLHRoaXMudGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnRhcmdldD1udWxsLHQucHJvdG90eXBlLmNhbm9uaWNhbFRhcmdldD1udWxsLHQucHJvdG90eXBlLmRlcGVuZGVuY3lUYXJnZXRzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5oZXJtZXRpY2l0eT0wLHQucHJvdG90eXBlLmRpc2FibGVkPSExLHQucHJvdG90eXBlLnF1ZXJpZXM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmhhc091dHB1dD0hMSx0LnByb3RvdHlwZS50YWdzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5hY3Rpb25EZXNjcmlwdG9yPW51bGwsdC5wcm90b3R5cGUuZmlsZU5hbWU9IiIsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudGFyZ2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0YXJnZXQiKSYmcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUudGFyZ2V0LHQudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUucXVlcmllcyYmZS5xdWVyaWVzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUucXVlcmllcy5sZW5ndGg7KytyKXQudWludDMyKDUwKS5zdHJpbmcoZS5xdWVyaWVzW3JdKTtpZihudWxsIT1lLmZpbGVOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlTmFtZSIpJiZ0LnVpbnQzMig1OCkuc3RyaW5nKGUuZmlsZU5hbWUpLG51bGwhPWUuaGFzT3V0cHV0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJoYXNPdXRwdXQiKSYmdC51aW50MzIoNjQpLmJvb2woZS5oYXNPdXRwdXQpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNzQpLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYWN0aW9uRGVzY3JpcHRvciIpJiZzLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZW5jb2RlKGUuYWN0aW9uRGVzY3JpcHRvcix0LnVpbnQzMig4MikuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3Iocj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLmRlcGVuZGVuY3lUYXJnZXRzW3JdLHQudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpO3JldHVybiBudWxsIT1lLmhlcm1ldGljaXR5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJoZXJtZXRpY2l0eSIpJiZ0LnVpbnQzMig5NikuaW50MzIoZS5oZXJtZXRpY2l0eSksbnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImNhbm9uaWNhbFRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5jYW5vbmljYWxUYXJnZXQsdC51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDExMikuYm9vbChlLmRpc2FibGVkKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLk9wZXJhdGlvbjtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMzpuLnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDEzOm4uY2Fub25pY2FsVGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMTE6bi5kZXBlbmRlbmN5VGFyZ2V0cyYmbi5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGh8fChuLmRlcGVuZGVuY3lUYXJnZXRzPVtdKSxuLmRlcGVuZGVuY3lUYXJnZXRzLnB1c2gocy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMTI6bi5oZXJtZXRpY2l0eT1lLmludDMyKCk7YnJlYWs7Y2FzZSAxNDpuLmRpc2FibGVkPWUuYm9vbCgpO2JyZWFrO2Nhc2UgNjpuLnF1ZXJpZXMmJm4ucXVlcmllcy5sZW5ndGh8fChuLnF1ZXJpZXM9W10pLG4ucXVlcmllcy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgODpuLmhhc091dHB1dD1lLmJvb2woKTticmVhaztjYXNlIDk6bi50YWdzJiZuLnRhZ3MubGVuZ3RofHwobi50YWdzPVtdKSxuLnRhZ3MucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDEwOm4uYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA3Om4uZmlsZU5hbWU9ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYocj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS50YXJnZXQpKSlyZXR1cm4idGFyZ2V0LiIrcjtpZihudWxsIT1lLmNhbm9uaWNhbFRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgiY2Fub25pY2FsVGFyZ2V0IikmJihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmNhbm9uaWNhbFRhcmdldCkpKXJldHVybiJjYW5vbmljYWxUYXJnZXQuIityO2lmKG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuaGFzT3duUHJvcGVydHkoImRlcGVuZGVuY3lUYXJnZXRzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7Kyt0KXt2YXIgcjtpZihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmRlcGVuZGVuY3lUYXJnZXRzW3RdKSlyZXR1cm4iZGVwZW5kZW5jeVRhcmdldHMuIityfX1pZihudWxsIT1lLmhlcm1ldGljaXR5JiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpY2l0eSIpKXN3aXRjaChlLmhlcm1ldGljaXR5KXtkZWZhdWx0OnJldHVybiJoZXJtZXRpY2l0eTogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6fWlmKG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGlzYWJsZWQpcmV0dXJuImRpc2FibGVkOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLnF1ZXJpZXMmJmUuaGFzT3duUHJvcGVydHkoInF1ZXJpZXMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5xdWVyaWVzKSlyZXR1cm4icXVlcmllczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnF1ZXJpZXMubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnF1ZXJpZXNbdF0pKXJldHVybiJxdWVyaWVzOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5oYXNPdXRwdXQmJmUuaGFzT3duUHJvcGVydHkoImhhc091dHB1dCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmhhc091dHB1dClyZXR1cm4iaGFzT3V0cHV0OiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLnRhZ3MmJmUuaGFzT3duUHJvcGVydHkoInRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSlyZXR1cm4idGFnczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnRhZ3NbdF0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9uRGVzY3JpcHRvciIpJiYocj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudmVyaWZ5KGUuYWN0aW9uRGVzY3JpcHRvcikpPyJhY3Rpb25EZXNjcmlwdG9yLiIrcjpudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYhYS5pc1N0cmluZyhlLmZpbGVOYW1lKT8iZmlsZU5hbWU6IHN0cmluZyBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLk9wZXJhdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5PcGVyYXRpb247aWYobnVsbCE9ZS50YXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS50YXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uT3BlcmF0aW9uLnRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLnRhcmdldCl9aWYobnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jYW5vbmljYWxUYXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uT3BlcmF0aW9uLmNhbm9uaWNhbFRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC5jYW5vbmljYWxUYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLmNhbm9uaWNhbFRhcmdldCl9aWYoZS5kZXBlbmRlbmN5VGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uT3BlcmF0aW9uLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5PcGVyYXRpb24uZGVwZW5kZW5jeVRhcmdldHM6IG9iamVjdCBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHNbcl09cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19c3dpdGNoKGUuaGVybWV0aWNpdHkpe2RlZmF1bHQ6aWYoIm51bWJlciI9PXR5cGVvZiBlLmhlcm1ldGljaXR5KXt0Lmhlcm1ldGljaXR5PWUuaGVybWV0aWNpdHk7YnJlYWt9YnJlYWs7Y2FzZSJVTktOT1dOIjpjYXNlIDA6dC5oZXJtZXRpY2l0eT0wO2JyZWFrO2Nhc2UiSEVSTUVUSUMiOmNhc2UgMTp0Lmhlcm1ldGljaXR5PTE7YnJlYWs7Y2FzZSJOT05fSEVSTUVUSUMiOmNhc2UgMjp0Lmhlcm1ldGljaXR5PTJ9aWYobnVsbCE9ZS5kaXNhYmxlZCYmKHQuZGlzYWJsZWQ9Qm9vbGVhbihlLmRpc2FibGVkKSksZS5xdWVyaWVzKXtpZighQXJyYXkuaXNBcnJheShlLnF1ZXJpZXMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLk9wZXJhdGlvbi5xdWVyaWVzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnF1ZXJpZXM9W10scj0wO3I8ZS5xdWVyaWVzLmxlbmd0aDsrK3IpdC5xdWVyaWVzW3JdPVN0cmluZyhlLnF1ZXJpZXNbcl0pfWlmKG51bGwhPWUuaGFzT3V0cHV0JiYodC5oYXNPdXRwdXQ9Qm9vbGVhbihlLmhhc091dHB1dCkpLGUudGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5PcGVyYXRpb24udGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC50YWdzPVtdLHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudGFnc1tyXT1TdHJpbmcoZS50YWdzW3JdKX1pZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hY3Rpb25EZXNjcmlwdG9yKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLk9wZXJhdGlvbi5hY3Rpb25EZXNjcmlwdG9yOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFjdGlvbkRlc2NyaXB0b3I9cy5kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLmZyb21PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yKX1yZXR1cm4gbnVsbCE9ZS5maWxlTmFtZSYmKHQuZmlsZU5hbWU9U3RyaW5nKGUuZmlsZU5hbWUpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLnF1ZXJpZXM9W10sci50YWdzPVtdLHIuZGVwZW5kZW5jeVRhcmdldHM9W10pLHQuZGVmYXVsdHMmJihyLnRhcmdldD1udWxsLHIuZmlsZU5hbWU9IiIsci5oYXNPdXRwdXQ9ITEsci5hY3Rpb25EZXNjcmlwdG9yPW51bGwsci5oZXJtZXRpY2l0eT10LmVudW1zPT09U3RyaW5nPyJVTktOT1dOIjowLHIuY2Fub25pY2FsVGFyZ2V0PW51bGwsci5kaXNhYmxlZD0hMSksbnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYoci50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS50YXJnZXQsdCkpLGUucXVlcmllcyYmZS5xdWVyaWVzLmxlbmd0aCl7ci5xdWVyaWVzPVtdO2Zvcih2YXIgbj0wO248ZS5xdWVyaWVzLmxlbmd0aDsrK24pci5xdWVyaWVzW25dPWUucXVlcmllc1tuXX1pZihudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYoci5maWxlTmFtZT1lLmZpbGVOYW1lKSxudWxsIT1lLmhhc091dHB1dCYmZS5oYXNPd25Qcm9wZXJ0eSgiaGFzT3V0cHV0IikmJihyLmhhc091dHB1dD1lLmhhc091dHB1dCksZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyLnRhZ3M9W10sbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXTtpZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3ImJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbkRlc2NyaXB0b3IiKSYmKHIuYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudG9PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yLHQpKSxlLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3Ioci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxuPTA7bjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK24pci5kZXBlbmRlbmN5VGFyZ2V0c1tuXT1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW25dLHQpO3JldHVybiBudWxsIT1lLmhlcm1ldGljaXR5JiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpY2l0eSIpJiYoci5oZXJtZXRpY2l0eT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHlbZS5oZXJtZXRpY2l0eV0/ZS5oZXJtZXRpY2l0eTpzLmRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5W2UuaGVybWV0aWNpdHldOmUuaGVybWV0aWNpdHkpLG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJjYW5vbmljYWxUYXJnZXQiKSYmKHIuY2Fub25pY2FsVGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0LHQpKSxudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5PcGVyYXRpb24ifSx0fSgpLG4uQXNzZXJ0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLHRoaXMudGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnRhcmdldD1udWxsLHQucHJvdG90eXBlLmNhbm9uaWNhbFRhcmdldD1udWxsLHQucHJvdG90eXBlLmRlcGVuZGVuY3lUYXJnZXRzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5oZXJtZXRpY2l0eT0wLHQucHJvdG90eXBlLmRpc2FibGVkPSExLHQucHJvdG90eXBlLnF1ZXJ5PSIiLHQucHJvdG90eXBlLnRhZ3M9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmFjdGlvbkRlc2NyaXB0b3I9bnVsbCx0LnByb3RvdHlwZS5wYXJlbnRBY3Rpb249bnVsbCx0LnByb3RvdHlwZS5maWxlTmFtZT0iIix0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5xdWVyeSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicXVlcnkiKSYmdC51aW50MzIoMjYpLnN0cmluZyhlLnF1ZXJ5KSxudWxsIT1lLmZpbGVOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlTmFtZSIpJiZ0LnVpbnQzMig1OCkuc3RyaW5nKGUuZmlsZU5hbWUpLG51bGwhPWUudGFyZ2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0YXJnZXQiKSYmcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUudGFyZ2V0LHQudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudWludDMyKDc0KS5zdHJpbmcoZS50YWdzW3JdKTtpZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3ImJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImFjdGlvbkRlc2NyaXB0b3IiKSYmcy5kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLmVuY29kZShlLmFjdGlvbkRlc2NyaXB0b3IsdC51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpZm9yKHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSx0LnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKTtyZXR1cm4gbnVsbCE9ZS5oZXJtZXRpY2l0eSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiaGVybWV0aWNpdHkiKSYmdC51aW50MzIoOTYpLmludDMyKGUuaGVybWV0aWNpdHkpLG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJjYW5vbmljYWxUYXJnZXQiKSYmcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUuY2Fub25pY2FsVGFyZ2V0LHQudWludDMyKDEwNikuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmRpc2FibGVkJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkaXNhYmxlZCIpJiZ0LnVpbnQzMigxMTIpLmJvb2woZS5kaXNhYmxlZCksbnVsbCE9ZS5wYXJlbnRBY3Rpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInBhcmVudEFjdGlvbiIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5wYXJlbnRBY3Rpb24sdC51aW50MzIoMTIyKS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQXNzZXJ0aW9uO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSA4Om4udGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMTM6bi5jYW5vbmljYWxUYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAxMTpuLmRlcGVuZGVuY3lUYXJnZXRzJiZuLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aHx8KG4uZGVwZW5kZW5jeVRhcmdldHM9W10pLG4uZGVwZW5kZW5jeVRhcmdldHMucHVzaChzLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAxMjpuLmhlcm1ldGljaXR5PWUuaW50MzIoKTticmVhaztjYXNlIDE0Om4uZGlzYWJsZWQ9ZS5ib29sKCk7YnJlYWs7Y2FzZSAzOm4ucXVlcnk9ZS5zdHJpbmcoKTticmVhaztjYXNlIDk6bi50YWdzJiZuLnRhZ3MubGVuZ3RofHwobi50YWdzPVtdKSxuLnRhZ3MucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDEwOm4uYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAxNTpuLnBhcmVudEFjdGlvbj1zLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDc6bi5maWxlTmFtZT1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLnRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgidGFyZ2V0IikmJihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLnRhcmdldCkpKXJldHVybiJ0YXJnZXQuIityO2lmKG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJjYW5vbmljYWxUYXJnZXQiKSYmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUuY2Fub25pY2FsVGFyZ2V0KSkpcmV0dXJuImNhbm9uaWNhbFRhcmdldC4iK3I7aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Qpe3ZhciByO2lmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUuZGVwZW5kZW5jeVRhcmdldHNbdF0pKXJldHVybiJkZXBlbmRlbmN5VGFyZ2V0cy4iK3J9fWlmKG51bGwhPWUuaGVybWV0aWNpdHkmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljaXR5Iikpc3dpdGNoKGUuaGVybWV0aWNpdHkpe2RlZmF1bHQ6cmV0dXJuImhlcm1ldGljaXR5OiBlbnVtIHZhbHVlIGV4cGVjdGVkIjtjYXNlIDA6Y2FzZSAxOmNhc2UgMjp9aWYobnVsbCE9ZS5kaXNhYmxlZCYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzYWJsZWQiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5kaXNhYmxlZClyZXR1cm4iZGlzYWJsZWQ6IGJvb2xlYW4gZXhwZWN0ZWQiO2lmKG51bGwhPWUucXVlcnkmJmUuaGFzT3duUHJvcGVydHkoInF1ZXJ5IikmJiFhLmlzU3RyaW5nKGUucXVlcnkpKXJldHVybiJxdWVyeTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnRhZ3MmJmUuaGFzT3duUHJvcGVydHkoInRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSlyZXR1cm4idGFnczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnRhZ3NbdF0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9uRGVzY3JpcHRvciIpJiYocj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudmVyaWZ5KGUuYWN0aW9uRGVzY3JpcHRvcikpPyJhY3Rpb25EZXNjcmlwdG9yLiIrcjpudWxsIT1lLnBhcmVudEFjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgicGFyZW50QWN0aW9uIikmJihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLnBhcmVudEFjdGlvbikpPyJwYXJlbnRBY3Rpb24uIityOm51bGwhPWUuZmlsZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVOYW1lIikmJiFhLmlzU3RyaW5nKGUuZmlsZU5hbWUpPyJmaWxlTmFtZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQXNzZXJ0aW9uKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkFzc2VydGlvbjtpZihudWxsIT1lLnRhcmdldCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRhcmdldCl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Bc3NlcnRpb24udGFyZ2V0OiBvYmplY3QgZXhwZWN0ZWQiKTt0LnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUudGFyZ2V0KX1pZihudWxsIT1lLmNhbm9uaWNhbFRhcmdldCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmNhbm9uaWNhbFRhcmdldCl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Bc3NlcnRpb24uY2Fub25pY2FsVGFyZ2V0OiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNhbm9uaWNhbFRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0KX1pZihlLmRlcGVuZGVuY3lUYXJnZXRzKXtpZighQXJyYXkuaXNBcnJheShlLmRlcGVuZGVuY3lUYXJnZXRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Bc3NlcnRpb24uZGVwZW5kZW5jeVRhcmdldHM6IGFycmF5IGV4cGVjdGVkIik7dC5kZXBlbmRlbmN5VGFyZ2V0cz1bXTtmb3IodmFyIHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFzc2VydGlvbi5kZXBlbmRlbmN5VGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5kZXBlbmRlbmN5VGFyZ2V0c1tyXT1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pfX1zd2l0Y2goZS5oZXJtZXRpY2l0eSl7ZGVmYXVsdDppZigibnVtYmVyIj09dHlwZW9mIGUuaGVybWV0aWNpdHkpe3QuaGVybWV0aWNpdHk9ZS5oZXJtZXRpY2l0eTticmVha31icmVhaztjYXNlIlVOS05PV04iOmNhc2UgMDp0Lmhlcm1ldGljaXR5PTA7YnJlYWs7Y2FzZSJIRVJNRVRJQyI6Y2FzZSAxOnQuaGVybWV0aWNpdHk9MTticmVhaztjYXNlIk5PTl9IRVJNRVRJQyI6Y2FzZSAyOnQuaGVybWV0aWNpdHk9Mn1pZihudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxudWxsIT1lLnF1ZXJ5JiYodC5xdWVyeT1TdHJpbmcoZS5xdWVyeSkpLGUudGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Bc3NlcnRpb24udGFnczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC50YWdzPVtdLHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudGFnc1tyXT1TdHJpbmcoZS50YWdzW3JdKX1pZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hY3Rpb25EZXNjcmlwdG9yKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFzc2VydGlvbi5hY3Rpb25EZXNjcmlwdG9yOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFjdGlvbkRlc2NyaXB0b3I9cy5kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLmZyb21PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yKX1pZihudWxsIT1lLnBhcmVudEFjdGlvbil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnBhcmVudEFjdGlvbil0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Bc3NlcnRpb24ucGFyZW50QWN0aW9uOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnBhcmVudEFjdGlvbj1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUucGFyZW50QWN0aW9uKX1yZXR1cm4gbnVsbCE9ZS5maWxlTmFtZSYmKHQuZmlsZU5hbWU9U3RyaW5nKGUuZmlsZU5hbWUpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLnRhZ3M9W10sci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksdC5kZWZhdWx0cyYmKHIucXVlcnk9IiIsci5maWxlTmFtZT0iIixyLnRhcmdldD1udWxsLHIuYWN0aW9uRGVzY3JpcHRvcj1udWxsLHIuaGVybWV0aWNpdHk9dC5lbnVtcz09PVN0cmluZz8iVU5LTk9XTiI6MCxyLmNhbm9uaWNhbFRhcmdldD1udWxsLHIuZGlzYWJsZWQ9ITEsci5wYXJlbnRBY3Rpb249bnVsbCksbnVsbCE9ZS5xdWVyeSYmZS5oYXNPd25Qcm9wZXJ0eSgicXVlcnkiKSYmKHIucXVlcnk9ZS5xdWVyeSksbnVsbCE9ZS5maWxlTmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZU5hbWUiKSYmKHIuZmlsZU5hbWU9ZS5maWxlTmFtZSksbnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYoci50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS50YXJnZXQsdCkpLGUudGFncyYmZS50YWdzLmxlbmd0aCl7ci50YWdzPVtdO2Zvcih2YXIgbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXX1pZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3ImJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbkRlc2NyaXB0b3IiKSYmKHIuYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudG9PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yLHQpKSxlLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3Ioci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxuPTA7bjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK24pci5kZXBlbmRlbmN5VGFyZ2V0c1tuXT1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW25dLHQpO3JldHVybiBudWxsIT1lLmhlcm1ldGljaXR5JiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpY2l0eSIpJiYoci5oZXJtZXRpY2l0eT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHlbZS5oZXJtZXRpY2l0eV0/ZS5oZXJtZXRpY2l0eTpzLmRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5W2UuaGVybWV0aWNpdHldOmUuaGVybWV0aWNpdHkpLG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJjYW5vbmljYWxUYXJnZXQiKSYmKHIuY2Fub25pY2FsVGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0LHQpKSxudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxudWxsIT1lLnBhcmVudEFjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgicGFyZW50QWN0aW9uIikmJihyLnBhcmVudEFjdGlvbj1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLnBhcmVudEFjdGlvbix0KSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQXNzZXJ0aW9uIn0sdH0oKSxuLkFjdGlvbkhlcm1ldGljaXR5PWZ1bmN0aW9uKCl7dmFyIGU9e30sdD1PYmplY3QuY3JlYXRlKGUpO3JldHVybiB0W2VbMF09IlVOS05PV04iXT0wLHRbZVsxXT0iSEVSTUVUSUMiXT0xLHRbZVsyXT0iTk9OX0hFUk1FVElDIl09Mix0fSgpLG4uRGVjbGFyYXRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUudGFyZ2V0PW51bGwsdC5wcm90b3R5cGUuY2Fub25pY2FsVGFyZ2V0PW51bGwsdC5wcm90b3R5cGUuYWN0aW9uRGVzY3JpcHRvcj1udWxsLHQucHJvdG90eXBlLmZpbGVOYW1lPSIiLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS50YXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS50YXJnZXQsdC51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5hY3Rpb25EZXNjcmlwdG9yJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJhY3Rpb25EZXNjcmlwdG9yIikmJnMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci5lbmNvZGUoZS5hY3Rpb25EZXNjcmlwdG9yLHQudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuZmlsZU5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImZpbGVOYW1lIikmJnQudWludDMyKDM0KS5zdHJpbmcoZS5maWxlTmFtZSksbnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImNhbm9uaWNhbFRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5jYW5vbmljYWxUYXJnZXQsdC51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5EZWNsYXJhdGlvbjtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMjpuLnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDU6bi5jYW5vbmljYWxUYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOm4uYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA0Om4uZmlsZU5hbWU9ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWU/Im9iamVjdCBleHBlY3RlZCI6bnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYodD1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS50YXJnZXQpKT8idGFyZ2V0LiIrdDpudWxsIT1lLmNhbm9uaWNhbFRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgiY2Fub25pY2FsVGFyZ2V0IikmJih0PXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmNhbm9uaWNhbFRhcmdldCkpPyJjYW5vbmljYWxUYXJnZXQuIit0Om51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9uRGVzY3JpcHRvciIpJiYodD1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudmVyaWZ5KGUuYWN0aW9uRGVzY3JpcHRvcikpPyJhY3Rpb25EZXNjcmlwdG9yLiIrdDpudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYhYS5pc1N0cmluZyhlLmZpbGVOYW1lKT8iZmlsZU5hbWU6IHN0cmluZyBleHBlY3RlZCI6bnVsbDt2YXIgdH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkRlY2xhcmF0aW9uKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkRlY2xhcmF0aW9uO2lmKG51bGwhPWUudGFyZ2V0KXtpZigib2JqZWN0IiE9dHlwZW9mIGUudGFyZ2V0KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkRlY2xhcmF0aW9uLnRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLnRhcmdldCl9aWYobnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jYW5vbmljYWxUYXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRGVjbGFyYXRpb24uY2Fub25pY2FsVGFyZ2V0OiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNhbm9uaWNhbFRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0KX1pZihudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hY3Rpb25EZXNjcmlwdG9yKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkRlY2xhcmF0aW9uLmFjdGlvbkRlc2NyaXB0b3I6IG9iamVjdCBleHBlY3RlZCIpO3QuYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZnJvbU9iamVjdChlLmFjdGlvbkRlc2NyaXB0b3IpfXJldHVybiBudWxsIT1lLmZpbGVOYW1lJiYodC5maWxlTmFtZT1TdHJpbmcoZS5maWxlTmFtZSkpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLnRhcmdldD1udWxsLHIuYWN0aW9uRGVzY3JpcHRvcj1udWxsLHIuZmlsZU5hbWU9IiIsci5jYW5vbmljYWxUYXJnZXQ9bnVsbCksbnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYoci50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS50YXJnZXQsdCkpLG51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9uRGVzY3JpcHRvciIpJiYoci5hY3Rpb25EZXNjcmlwdG9yPXMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci50b09iamVjdChlLmFjdGlvbkRlc2NyaXB0b3IsdCkpLG51bGwhPWUuZmlsZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVOYW1lIikmJihyLmZpbGVOYW1lPWUuZmlsZU5hbWUpLG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJjYW5vbmljYWxUYXJnZXQiKSYmKHIuY2Fub25pY2FsVGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0LHQpKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5EZWNsYXJhdGlvbiJ9LHR9KCksbi5UZXN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUudGVzdFF1ZXJ5PSIiLHQucHJvdG90eXBlLmV4cGVjdGVkT3V0cHV0UXVlcnk9IiIsdC5wcm90b3R5cGUuZmlsZU5hbWU9IiIsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIm5hbWUiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLm5hbWUpLG51bGwhPWUudGVzdFF1ZXJ5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0ZXN0UXVlcnkiKSYmdC51aW50MzIoMTgpLnN0cmluZyhlLnRlc3RRdWVyeSksbnVsbCE9ZS5leHBlY3RlZE91dHB1dFF1ZXJ5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJleHBlY3RlZE91dHB1dFF1ZXJ5IikmJnQudWludDMyKDI2KS5zdHJpbmcoZS5leHBlY3RlZE91dHB1dFF1ZXJ5KSxudWxsIT1lLmZpbGVOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlTmFtZSIpJiZ0LnVpbnQzMigzNCkuc3RyaW5nKGUuZmlsZU5hbWUpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uVGVzdDtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLm5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bi50ZXN0UXVlcnk9ZS5zdHJpbmcoKTticmVhaztjYXNlIDM6bi5leHBlY3RlZE91dHB1dFF1ZXJ5PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0Om4uZmlsZU5hbWU9ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWU/Im9iamVjdCBleHBlY3RlZCI6bnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJiFhLmlzU3RyaW5nKGUubmFtZSk/Im5hbWU6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS50ZXN0UXVlcnkmJmUuaGFzT3duUHJvcGVydHkoInRlc3RRdWVyeSIpJiYhYS5pc1N0cmluZyhlLnRlc3RRdWVyeSk/InRlc3RRdWVyeTogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLmV4cGVjdGVkT3V0cHV0UXVlcnkmJmUuaGFzT3duUHJvcGVydHkoImV4cGVjdGVkT3V0cHV0UXVlcnkiKSYmIWEuaXNTdHJpbmcoZS5leHBlY3RlZE91dHB1dFF1ZXJ5KT8iZXhwZWN0ZWRPdXRwdXRRdWVyeTogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYhYS5pc1N0cmluZyhlLmZpbGVOYW1lKT8iZmlsZU5hbWU6IHN0cmluZyBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlRlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uVGVzdDtyZXR1cm4gbnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxudWxsIT1lLnRlc3RRdWVyeSYmKHQudGVzdFF1ZXJ5PVN0cmluZyhlLnRlc3RRdWVyeSkpLG51bGwhPWUuZXhwZWN0ZWRPdXRwdXRRdWVyeSYmKHQuZXhwZWN0ZWRPdXRwdXRRdWVyeT1TdHJpbmcoZS5leHBlY3RlZE91dHB1dFF1ZXJ5KSksbnVsbCE9ZS5maWxlTmFtZSYmKHQuZmlsZU5hbWU9U3RyaW5nKGUuZmlsZU5hbWUpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci5uYW1lPSIiLHIudGVzdFF1ZXJ5PSIiLHIuZXhwZWN0ZWRPdXRwdXRRdWVyeT0iIixyLmZpbGVOYW1lPSIiKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmKHIubmFtZT1lLm5hbWUpLG51bGwhPWUudGVzdFF1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJ0ZXN0UXVlcnkiKSYmKHIudGVzdFF1ZXJ5PWUudGVzdFF1ZXJ5KSxudWxsIT1lLmV4cGVjdGVkT3V0cHV0UXVlcnkmJmUuaGFzT3duUHJvcGVydHkoImV4cGVjdGVkT3V0cHV0UXVlcnkiKSYmKHIuZXhwZWN0ZWRPdXRwdXRRdWVyeT1lLmV4cGVjdGVkT3V0cHV0UXVlcnkpLG51bGwhPWUuZmlsZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVOYW1lIikmJihyLmZpbGVOYW1lPWUuZmlsZU5hbWUpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLlRlc3QifSx0fSgpLG4uTm90ZWJvb2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMudGFncz1bXSx0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUudGFyZ2V0PW51bGwsdC5wcm90b3R5cGUuY2Fub25pY2FsVGFyZ2V0PW51bGwsdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGVwZW5kZW5jeVRhcmdldHM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmZpbGVOYW1lPSIiLHQucHJvdG90eXBlLmRpc2FibGVkPSExLHQucHJvdG90eXBlLm5vdGVib29rQ29udGVudHM9IiIsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudGFyZ2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0YXJnZXQiKSYmcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUudGFyZ2V0LHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJjYW5vbmljYWxUYXJnZXQiKSYmcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUuY2Fub25pY2FsVGFyZ2V0LHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUudGFncy5sZW5ndGg7KytyKXQudWludDMyKDI2KS5zdHJpbmcoZS50YWdzW3JdKTtpZihudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3Iocj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLmRlcGVuZGVuY3lUYXJnZXRzW3JdLHQudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO3JldHVybiBudWxsIT1lLmZpbGVOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlTmFtZSIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUuZmlsZU5hbWUpLG51bGwhPWUuZGlzYWJsZWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVkIikmJnQudWludDMyKDQ4KS5ib29sKGUuZGlzYWJsZWQpLG51bGwhPWUubm90ZWJvb2tDb250ZW50cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibm90ZWJvb2tDb250ZW50cyIpJiZ0LnVpbnQzMig1OCkuc3RyaW5nKGUubm90ZWJvb2tDb250ZW50cyksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5Ob3RlYm9vaztlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDI6bi5jYW5vbmljYWxUYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOm4udGFncyYmbi50YWdzLmxlbmd0aHx8KG4udGFncz1bXSksbi50YWdzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA0Om4uZGVwZW5kZW5jeVRhcmdldHMmJm4uZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RofHwobi5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksbi5kZXBlbmRlbmN5VGFyZ2V0cy5wdXNoKHMuZGF0YWZvcm0uVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDU6bi5maWxlTmFtZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNjpuLmRpc2FibGVkPWUuYm9vbCgpO2JyZWFrO2Nhc2UgNzpuLm5vdGVib29rQ29udGVudHM9ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYocj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS50YXJnZXQpKSlyZXR1cm4idGFyZ2V0LiIrcjtpZihudWxsIT1lLmNhbm9uaWNhbFRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgiY2Fub25pY2FsVGFyZ2V0IikmJihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmNhbm9uaWNhbFRhcmdldCkpKXJldHVybiJjYW5vbmljYWxUYXJnZXQuIityO2lmKG51bGwhPWUudGFncyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXJldHVybiJ0YWdzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLnRhZ3MubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLnRhZ3NbdF0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrdCl7dmFyIHI7aWYocj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS5kZXBlbmRlbmN5VGFyZ2V0c1t0XSkpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzLiIrcn19cmV0dXJuIG51bGwhPWUuZmlsZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVOYW1lIikmJiFhLmlzU3RyaW5nKGUuZmlsZU5hbWUpPyJmaWxlTmFtZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmRpc2FibGVkPyJkaXNhYmxlZDogYm9vbGVhbiBleHBlY3RlZCI6bnVsbCE9ZS5ub3RlYm9va0NvbnRlbnRzJiZlLmhhc093blByb3BlcnR5KCJub3RlYm9va0NvbnRlbnRzIikmJiFhLmlzU3RyaW5nKGUubm90ZWJvb2tDb250ZW50cyk/Im5vdGVib29rQ29udGVudHM6IHN0cmluZyBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLk5vdGVib29rKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLk5vdGVib29rO2lmKG51bGwhPWUudGFyZ2V0KXtpZigib2JqZWN0IiE9dHlwZW9mIGUudGFyZ2V0KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLk5vdGVib29rLnRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLnRhcmdldCl9aWYobnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jYW5vbmljYWxUYXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uTm90ZWJvb2suY2Fub25pY2FsVGFyZ2V0OiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNhbm9uaWNhbFRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0KX1pZihlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uTm90ZWJvb2sudGFnczogYXJyYXkgZXhwZWN0ZWQiKTt0LnRhZ3M9W107Zm9yKHZhciByPTA7cjxlLnRhZ3MubGVuZ3RoOysrcil0LnRhZ3Nbcl09U3RyaW5nKGUudGFnc1tyXSl9aWYoZS5kZXBlbmRlbmN5VGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uTm90ZWJvb2suZGVwZW5kZW5jeVRhcmdldHM6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQuZGVwZW5kZW5jeVRhcmdldHM9W10scj0wO3I8ZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZGVwZW5kZW5jeVRhcmdldHNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uTm90ZWJvb2suZGVwZW5kZW5jeVRhcmdldHM6IG9iamVjdCBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHNbcl09cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19cmV0dXJuIG51bGwhPWUuZmlsZU5hbWUmJih0LmZpbGVOYW1lPVN0cmluZyhlLmZpbGVOYW1lKSksbnVsbCE9ZS5kaXNhYmxlZCYmKHQuZGlzYWJsZWQ9Qm9vbGVhbihlLmRpc2FibGVkKSksbnVsbCE9ZS5ub3RlYm9va0NvbnRlbnRzJiYodC5ub3RlYm9va0NvbnRlbnRzPVN0cmluZyhlLm5vdGVib29rQ29udGVudHMpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLnRhZ3M9W10sci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksdC5kZWZhdWx0cyYmKHIudGFyZ2V0PW51bGwsci5jYW5vbmljYWxUYXJnZXQ9bnVsbCxyLmZpbGVOYW1lPSIiLHIuZGlzYWJsZWQ9ITEsci5ub3RlYm9va0NvbnRlbnRzPSIiKSxudWxsIT1lLnRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgidGFyZ2V0IikmJihyLnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLnRhcmdldCx0KSksbnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQmJmUuaGFzT3duUHJvcGVydHkoImNhbm9uaWNhbFRhcmdldCIpJiYoci5jYW5vbmljYWxUYXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS5jYW5vbmljYWxUYXJnZXQsdCkpLGUudGFncyYmZS50YWdzLmxlbmd0aCl7ci50YWdzPVtdO2Zvcih2YXIgbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXX1pZihlLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aClmb3Ioci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxuPTA7bjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK24pci5kZXBlbmRlbmN5VGFyZ2V0c1tuXT1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW25dLHQpO3JldHVybiBudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYoci5maWxlTmFtZT1lLmZpbGVOYW1lKSxudWxsIT1lLmRpc2FibGVkJiZlLmhhc093blByb3BlcnR5KCJkaXNhYmxlZCIpJiYoci5kaXNhYmxlZD1lLmRpc2FibGVkKSxudWxsIT1lLm5vdGVib29rQ29udGVudHMmJmUuaGFzT3duUHJvcGVydHkoIm5vdGVib29rQ29udGVudHMiKSYmKHIubm90ZWJvb2tDb250ZW50cz1lLm5vdGVib29rQ29udGVudHMpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLk5vdGVib29rIn0sdH0oKSxuLk5vdGVib29rUnVudGltZU9wdGlvbnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX12YXIgcjtyZXR1cm4gdC5wcm90b3R5cGUub3V0cHV0QnVja2V0PW51bGwsdC5wcm90b3R5cGUucnVudGltZVRlbXBsYXRlTmFtZT0iIixPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm91dHB1dFNpbmsiLHtnZXQ6YS5vbmVPZkdldHRlcihyPVsib3V0cHV0QnVja2V0Il0pLHNldDphLm9uZU9mU2V0dGVyKHIpfSksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLm91dHB1dEJ1Y2tldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwib3V0cHV0QnVja2V0IikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5vdXRwdXRCdWNrZXQpLG51bGwhPWUucnVudGltZVRlbXBsYXRlTmFtZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwicnVudGltZVRlbXBsYXRlTmFtZSIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUucnVudGltZVRlbXBsYXRlTmFtZSksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4ub3V0cHV0QnVja2V0PWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4ucnVudGltZVRlbXBsYXRlTmFtZT1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtyZXR1cm4gbnVsbCE9ZS5vdXRwdXRCdWNrZXQmJmUuaGFzT3duUHJvcGVydHkoIm91dHB1dEJ1Y2tldCIpJiYhYS5pc1N0cmluZyhlLm91dHB1dEJ1Y2tldCk/Im91dHB1dEJ1Y2tldDogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLnJ1bnRpbWVUZW1wbGF0ZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoInJ1bnRpbWVUZW1wbGF0ZU5hbWUiKSYmIWEuaXNTdHJpbmcoZS5ydW50aW1lVGVtcGxhdGVOYW1lKT8icnVudGltZVRlbXBsYXRlTmFtZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9ucylyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zO3JldHVybiBudWxsIT1lLm91dHB1dEJ1Y2tldCYmKHQub3V0cHV0QnVja2V0PVN0cmluZyhlLm91dHB1dEJ1Y2tldCkpLG51bGwhPWUucnVudGltZVRlbXBsYXRlTmFtZSYmKHQucnVudGltZVRlbXBsYXRlTmFtZT1TdHJpbmcoZS5ydW50aW1lVGVtcGxhdGVOYW1lKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIucnVudGltZVRlbXBsYXRlTmFtZT0iIiksbnVsbCE9ZS5vdXRwdXRCdWNrZXQmJmUuaGFzT3duUHJvcGVydHkoIm91dHB1dEJ1Y2tldCIpJiYoci5vdXRwdXRCdWNrZXQ9ZS5vdXRwdXRCdWNrZXQsdC5vbmVvZnMmJihyLm91dHB1dFNpbms9Im91dHB1dEJ1Y2tldCIpKSxudWxsIT1lLnJ1bnRpbWVUZW1wbGF0ZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoInJ1bnRpbWVUZW1wbGF0ZU5hbWUiKSYmKHIucnVudGltZVRlbXBsYXRlTmFtZT1lLnJ1bnRpbWVUZW1wbGF0ZU5hbWUpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnMifSx0fSgpLG4uRGF0YVByZXBhcmF0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLnRhcmdldHM9W10sdGhpcy5jYW5vbmljYWxUYXJnZXRzPVtdLHRoaXMudGFncz1bXSx0aGlzLmRlcGVuZGVuY3lUYXJnZXRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX12YXIgcjtyZXR1cm4gdC5wcm90b3R5cGUudGFyZ2V0PW51bGwsdC5wcm90b3R5cGUuY2Fub25pY2FsVGFyZ2V0PW51bGwsdC5wcm90b3R5cGUudGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuY2Fub25pY2FsVGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUudGFncz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGVwZW5kZW5jeVRhcmdldHM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmZpbGVOYW1lPSIiLHQucHJvdG90eXBlLmRpc2FibGVkPSExLHQucHJvdG90eXBlLmRhdGFQcmVwYXJhdGlvbllhbWw9bnVsbCx0LnByb3RvdHlwZS5xdWVyeT1udWxsLHQucHJvdG90eXBlLmVycm9yVGFibGU9bnVsbCx0LnByb3RvdHlwZS5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cz0wLHQucHJvdG90eXBlLmxvYWQ9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImRlZmluaXRpb24iLHtnZXQ6YS5vbmVPZkdldHRlcihyPVsiZGF0YVByZXBhcmF0aW9uWWFtbCIsInF1ZXJ5Il0pLHNldDphLm9uZU9mU2V0dGVyKHIpfSksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudGFyZ2V0cyYmZS50YXJnZXRzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUudGFyZ2V0cy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLnRhcmdldHNbcl0sdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5jYW5vbmljYWxUYXJnZXRzJiZlLmNhbm9uaWNhbFRhcmdldHMubGVuZ3RoKWZvcihyPTA7cjxlLmNhbm9uaWNhbFRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5jYW5vbmljYWxUYXJnZXRzW3JdLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoMjYpLnN0cmluZyhlLnRhZ3Nbcl0pO2lmKG51bGwhPWUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcihyPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUuZGVwZW5kZW5jeVRhcmdldHNbcl0sdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7cmV0dXJuIG51bGwhPWUuZmlsZU5hbWUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImZpbGVOYW1lIikmJnQudWludDMyKDQyKS5zdHJpbmcoZS5maWxlTmFtZSksbnVsbCE9ZS5kaXNhYmxlZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGlzYWJsZWQiKSYmdC51aW50MzIoNDgpLmJvb2woZS5kaXNhYmxlZCksbnVsbCE9ZS50YXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS50YXJnZXQsdC51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5jYW5vbmljYWxUYXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImNhbm9uaWNhbFRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5jYW5vbmljYWxUYXJnZXQsdC51aW50MzIoNzQpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5kYXRhUHJlcGFyYXRpb25ZYW1sJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkYXRhUHJlcGFyYXRpb25ZYW1sIikmJnQudWludDMyKDkwKS5zdHJpbmcoZS5kYXRhUHJlcGFyYXRpb25ZYW1sKSxudWxsIT1lLmVycm9yVGFibGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImVycm9yVGFibGUiKSYmcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUuZXJyb3JUYWJsZSx0LnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmVycm9yVGFibGVSZXRlbnRpb25EYXlzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJlcnJvclRhYmxlUmV0ZW50aW9uRGF5cyIpJiZ0LnVpbnQzMigxMDQpLmludDMyKGUuZXJyb3JUYWJsZVJldGVudGlvbkRheXMpLG51bGwhPWUucXVlcnkmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInF1ZXJ5IikmJnQudWludDMyKDEyMikuc3RyaW5nKGUucXVlcnkpLG51bGwhPWUubG9hZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibG9hZCIpJiZzLmRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLmVuY29kZShlLmxvYWQsdC51aW50MzIoMTMwKS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSA4Om4udGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgOTpuLmNhbm9uaWNhbFRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDE6bi50YXJnZXRzJiZuLnRhcmdldHMubGVuZ3RofHwobi50YXJnZXRzPVtdKSxuLnRhcmdldHMucHVzaChzLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAyOm4uY2Fub25pY2FsVGFyZ2V0cyYmbi5jYW5vbmljYWxUYXJnZXRzLmxlbmd0aHx8KG4uY2Fub25pY2FsVGFyZ2V0cz1bXSksbi5jYW5vbmljYWxUYXJnZXRzLnB1c2gocy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMzpuLnRhZ3MmJm4udGFncy5sZW5ndGh8fChuLnRhZ3M9W10pLG4udGFncy5wdXNoKGUuc3RyaW5nKCkpO2JyZWFrO2Nhc2UgNDpuLmRlcGVuZGVuY3lUYXJnZXRzJiZuLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aHx8KG4uZGVwZW5kZW5jeVRhcmdldHM9W10pLG4uZGVwZW5kZW5jeVRhcmdldHMucHVzaChzLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSA1Om4uZmlsZU5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDY6bi5kaXNhYmxlZD1lLmJvb2woKTticmVhaztjYXNlIDExOm4uZGF0YVByZXBhcmF0aW9uWWFtbD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMTU6bi5xdWVyeT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMTI6bi5lcnJvclRhYmxlPXMuZGF0YWZvcm0uVGFyZ2V0LmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMTM6bi5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cz1lLmludDMyKCk7YnJlYWs7Y2FzZSAxNjpuLmxvYWQ9cy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7dmFyIHQ9e307aWYobnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYobj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS50YXJnZXQpKSlyZXR1cm4idGFyZ2V0LiIrbjtpZihudWxsIT1lLmNhbm9uaWNhbFRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgiY2Fub25pY2FsVGFyZ2V0IikmJihuPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmNhbm9uaWNhbFRhcmdldCkpKXJldHVybiJjYW5vbmljYWxUYXJnZXQuIituO2lmKG51bGwhPWUudGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFyZ2V0cyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRhcmdldHMpKXJldHVybiJ0YXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciByPTA7cjxlLnRhcmdldHMubGVuZ3RoOysrcilpZihuPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLnRhcmdldHNbcl0pKXJldHVybiJ0YXJnZXRzLiIrbn1pZihudWxsIT1lLmNhbm9uaWNhbFRhcmdldHMmJmUuaGFzT3duUHJvcGVydHkoImNhbm9uaWNhbFRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5jYW5vbmljYWxUYXJnZXRzKSlyZXR1cm4iY2Fub25pY2FsVGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiO2ZvcihyPTA7cjxlLmNhbm9uaWNhbFRhcmdldHMubGVuZ3RoOysrcilpZihuPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmNhbm9uaWNhbFRhcmdldHNbcl0pKXJldHVybiJjYW5vbmljYWxUYXJnZXRzLiIrbn1pZihudWxsIT1lLnRhZ3MmJmUuaGFzT3duUHJvcGVydHkoInRhZ3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWdzKSlyZXR1cm4idGFnczogYXJyYXkgZXhwZWN0ZWQiO2ZvcihyPTA7cjxlLnRhZ3MubGVuZ3RoOysrcilpZighYS5pc1N0cmluZyhlLnRhZ3Nbcl0pKXJldHVybiJ0YWdzOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVwZW5kZW5jeVRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcil7dmFyIG47aWYobj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSkpcmV0dXJuImRlcGVuZGVuY3lUYXJnZXRzLiIrbn19aWYobnVsbCE9ZS5maWxlTmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZmlsZU5hbWUiKSYmIWEuaXNTdHJpbmcoZS5maWxlTmFtZSkpcmV0dXJuImZpbGVOYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJiJib29sZWFuIiE9dHlwZW9mIGUuZGlzYWJsZWQpcmV0dXJuImRpc2FibGVkOiBib29sZWFuIGV4cGVjdGVkIjtpZihudWxsIT1lLmRhdGFQcmVwYXJhdGlvbllhbWwmJmUuaGFzT3duUHJvcGVydHkoImRhdGFQcmVwYXJhdGlvbllhbWwiKSYmKHQuZGVmaW5pdGlvbj0xLCFhLmlzU3RyaW5nKGUuZGF0YVByZXBhcmF0aW9uWWFtbCkpKXJldHVybiJkYXRhUHJlcGFyYXRpb25ZYW1sOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUucXVlcnkmJmUuaGFzT3duUHJvcGVydHkoInF1ZXJ5Iikpe2lmKDE9PT10LmRlZmluaXRpb24pcmV0dXJuImRlZmluaXRpb246IG11bHRpcGxlIHZhbHVlcyI7aWYodC5kZWZpbml0aW9uPTEsIWEuaXNTdHJpbmcoZS5xdWVyeSkpcmV0dXJuInF1ZXJ5OiBzdHJpbmcgZXhwZWN0ZWQifXJldHVybiBudWxsIT1lLmVycm9yVGFibGUmJmUuaGFzT3duUHJvcGVydHkoImVycm9yVGFibGUiKSYmKG49cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUuZXJyb3JUYWJsZSkpPyJlcnJvclRhYmxlLiIrbjpudWxsIT1lLmVycm9yVGFibGVSZXRlbnRpb25EYXlzJiZlLmhhc093blByb3BlcnR5KCJlcnJvclRhYmxlUmV0ZW50aW9uRGF5cyIpJiYhYS5pc0ludGVnZXIoZS5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cyk/ImVycm9yVGFibGVSZXRlbnRpb25EYXlzOiBpbnRlZ2VyIGV4cGVjdGVkIjpudWxsIT1lLmxvYWQmJmUuaGFzT3duUHJvcGVydHkoImxvYWQiKSYmKG49cy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi52ZXJpZnkoZS5sb2FkKSk/ImxvYWQuIituOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24pcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uO2lmKG51bGwhPWUudGFyZ2V0KXtpZigib2JqZWN0IiE9dHlwZW9mIGUudGFyZ2V0KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbi50YXJnZXQ6IG9iamVjdCBleHBlY3RlZCIpO3QudGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LmZyb21PYmplY3QoZS50YXJnZXQpfWlmKG51bGwhPWUuY2Fub25pY2FsVGFyZ2V0KXtpZigib2JqZWN0IiE9dHlwZW9mIGUuY2Fub25pY2FsVGFyZ2V0KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbi5jYW5vbmljYWxUYXJnZXQ6IG9iamVjdCBleHBlY3RlZCIpO3QuY2Fub25pY2FsVGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LmZyb21PYmplY3QoZS5jYW5vbmljYWxUYXJnZXQpfWlmKGUudGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YXJnZXRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24udGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiKTt0LnRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLnRhcmdldHMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRhcmdldHNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uLnRhcmdldHM6IG9iamVjdCBleHBlY3RlZCIpO3QudGFyZ2V0c1tyXT1zLmRhdGFmb3JtLlRhcmdldC5mcm9tT2JqZWN0KGUudGFyZ2V0c1tyXSl9fWlmKGUuY2Fub25pY2FsVGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5jYW5vbmljYWxUYXJnZXRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uY2Fub25pY2FsVGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5jYW5vbmljYWxUYXJnZXRzPVtdLHI9MDtyPGUuY2Fub25pY2FsVGFyZ2V0cy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuY2Fub25pY2FsVGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uY2Fub25pY2FsVGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5jYW5vbmljYWxUYXJnZXRzW3JdPXMuZGF0YWZvcm0uVGFyZ2V0LmZyb21PYmplY3QoZS5jYW5vbmljYWxUYXJnZXRzW3JdKX19aWYoZS50YWdzKXtpZighQXJyYXkuaXNBcnJheShlLnRhZ3MpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbi50YWdzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhZ3M9W10scj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC50YWdzW3JdPVN0cmluZyhlLnRhZ3Nbcl0pfWlmKGUuZGVwZW5kZW5jeVRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeVRhcmdldHMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbi5kZXBlbmRlbmN5VGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5kZXBlbmRlbmN5VGFyZ2V0cz1bXSxyPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uZGVwZW5kZW5jeVRhcmdldHM6IG9iamVjdCBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHNbcl09cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19aWYobnVsbCE9ZS5maWxlTmFtZSYmKHQuZmlsZU5hbWU9U3RyaW5nKGUuZmlsZU5hbWUpKSxudWxsIT1lLmRpc2FibGVkJiYodC5kaXNhYmxlZD1Cb29sZWFuKGUuZGlzYWJsZWQpKSxudWxsIT1lLmRhdGFQcmVwYXJhdGlvbllhbWwmJih0LmRhdGFQcmVwYXJhdGlvbllhbWw9U3RyaW5nKGUuZGF0YVByZXBhcmF0aW9uWWFtbCkpLG51bGwhPWUucXVlcnkmJih0LnF1ZXJ5PVN0cmluZyhlLnF1ZXJ5KSksbnVsbCE9ZS5lcnJvclRhYmxlKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZXJyb3JUYWJsZSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uZXJyb3JUYWJsZTogb2JqZWN0IGV4cGVjdGVkIik7dC5lcnJvclRhYmxlPXMuZGF0YWZvcm0uVGFyZ2V0LmZyb21PYmplY3QoZS5lcnJvclRhYmxlKX1pZihudWxsIT1lLmVycm9yVGFibGVSZXRlbnRpb25EYXlzJiYodC5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cz0wfGUuZXJyb3JUYWJsZVJldGVudGlvbkRheXMpLG51bGwhPWUubG9hZCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmxvYWQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uLmxvYWQ6IG9iamVjdCBleHBlY3RlZCIpO3QubG9hZD1zLmRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLmZyb21PYmplY3QoZS5sb2FkKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci50YXJnZXRzPVtdLHIuY2Fub25pY2FsVGFyZ2V0cz1bXSxyLnRhZ3M9W10sci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksdC5kZWZhdWx0cyYmKHIuZmlsZU5hbWU9IiIsci5kaXNhYmxlZD0hMSxyLnRhcmdldD1udWxsLHIuY2Fub25pY2FsVGFyZ2V0PW51bGwsci5lcnJvclRhYmxlPW51bGwsci5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cz0wLHIubG9hZD1udWxsKSxlLnRhcmdldHMmJmUudGFyZ2V0cy5sZW5ndGgpe3IudGFyZ2V0cz1bXTtmb3IodmFyIG49MDtuPGUudGFyZ2V0cy5sZW5ndGg7KytuKXIudGFyZ2V0c1tuXT1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLnRhcmdldHNbbl0sdCl9aWYoZS5jYW5vbmljYWxUYXJnZXRzJiZlLmNhbm9uaWNhbFRhcmdldHMubGVuZ3RoKWZvcihyLmNhbm9uaWNhbFRhcmdldHM9W10sbj0wO248ZS5jYW5vbmljYWxUYXJnZXRzLmxlbmd0aDsrK24pci5jYW5vbmljYWxUYXJnZXRzW25dPXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuY2Fub25pY2FsVGFyZ2V0c1tuXSx0KTtpZihlLnRhZ3MmJmUudGFncy5sZW5ndGgpZm9yKHIudGFncz1bXSxuPTA7bjxlLnRhZ3MubGVuZ3RoOysrbilyLnRhZ3Nbbl09ZS50YWdzW25dO2lmKGUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcihyLmRlcGVuZGVuY3lUYXJnZXRzPVtdLG49MDtuPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrbilyLmRlcGVuZGVuY3lUYXJnZXRzW25dPXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbbl0sdCk7cmV0dXJuIG51bGwhPWUuZmlsZU5hbWUmJmUuaGFzT3duUHJvcGVydHkoImZpbGVOYW1lIikmJihyLmZpbGVOYW1lPWUuZmlsZU5hbWUpLG51bGwhPWUuZGlzYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVkIikmJihyLmRpc2FibGVkPWUuZGlzYWJsZWQpLG51bGwhPWUudGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJ0YXJnZXQiKSYmKHIudGFyZ2V0PXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUudGFyZ2V0LHQpKSxudWxsIT1lLmNhbm9uaWNhbFRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgiY2Fub25pY2FsVGFyZ2V0IikmJihyLmNhbm9uaWNhbFRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLmNhbm9uaWNhbFRhcmdldCx0KSksbnVsbCE9ZS5kYXRhUHJlcGFyYXRpb25ZYW1sJiZlLmhhc093blByb3BlcnR5KCJkYXRhUHJlcGFyYXRpb25ZYW1sIikmJihyLmRhdGFQcmVwYXJhdGlvbllhbWw9ZS5kYXRhUHJlcGFyYXRpb25ZYW1sLHQub25lb2ZzJiYoci5kZWZpbml0aW9uPSJkYXRhUHJlcGFyYXRpb25ZYW1sIikpLG51bGwhPWUuZXJyb3JUYWJsZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZXJyb3JUYWJsZSIpJiYoci5lcnJvclRhYmxlPXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuZXJyb3JUYWJsZSx0KSksbnVsbCE9ZS5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZXJyb3JUYWJsZVJldGVudGlvbkRheXMiKSYmKHIuZXJyb3JUYWJsZVJldGVudGlvbkRheXM9ZS5lcnJvclRhYmxlUmV0ZW50aW9uRGF5cyksbnVsbCE9ZS5xdWVyeSYmZS5oYXNPd25Qcm9wZXJ0eSgicXVlcnkiKSYmKHIucXVlcnk9ZS5xdWVyeSx0Lm9uZW9mcyYmKHIuZGVmaW5pdGlvbj0icXVlcnkiKSksbnVsbCE9ZS5sb2FkJiZlLmhhc093blByb3BlcnR5KCJsb2FkIikmJihyLmxvYWQ9cy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi50b09iamVjdChlLmxvYWQsdCkpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbiJ9LHR9KCksbi5Mb2FkQ29uZmlndXJhdGlvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXZhciByO3JldHVybiB0LnByb3RvdHlwZS5yZXBsYWNlPW51bGwsdC5wcm90b3R5cGUuYXBwZW5kPW51bGwsdC5wcm90b3R5cGUubWF4aW11bT1udWxsLHQucHJvdG90eXBlLnVuaXF1ZT1udWxsLHQucHJvdG90eXBlLmF1dG9tYXRpYz1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibW9kZSIse2dldDphLm9uZU9mR2V0dGVyKHI9WyJyZXBsYWNlIiwiYXBwZW5kIiwibWF4aW11bSIsInVuaXF1ZSIsImF1dG9tYXRpYyJdKSxzZXQ6YS5vbmVPZlNldHRlcihyKX0pLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5yZXBsYWNlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJyZXBsYWNlIikmJnMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUuZW5jb2RlKGUucmVwbGFjZSx0LnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmFwcGVuZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYXBwZW5kIikmJnMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUuZW5jb2RlKGUuYXBwZW5kLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUubWF4aW11bSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwibWF4aW11bSIpJiZzLmRhdGFmb3JtLkluY3JlbWVudGFsTG9hZE1vZGUuZW5jb2RlKGUubWF4aW11bSx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLnVuaXF1ZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidW5pcXVlIikmJnMuZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS5lbmNvZGUoZS51bmlxdWUsdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5hdXRvbWF0aWMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImF1dG9tYXRpYyIpJiZzLmRhdGFmb3JtLkluY3JlbWVudGFsTG9hZE1vZGUuZW5jb2RlKGUuYXV0b21hdGljLHQudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uTG9hZENvbmZpZ3VyYXRpb247ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5yZXBsYWNlPXMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAyOm4uYXBwZW5kPXMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOm4ubWF4aW11bT1zLmRhdGFmb3JtLkluY3JlbWVudGFsTG9hZE1vZGUuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA0Om4udW5pcXVlPXMuZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDU6bi5hdXRvbWF0aWM9cy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjt2YXIgdD17fTtpZihudWxsIT1lLnJlcGxhY2UmJmUuaGFzT3duUHJvcGVydHkoInJlcGxhY2UiKSYmKHQubW9kZT0xLHI9cy5kYXRhZm9ybS5TaW1wbGVMb2FkTW9kZS52ZXJpZnkoZS5yZXBsYWNlKSkpcmV0dXJuInJlcGxhY2UuIityO2lmKG51bGwhPWUuYXBwZW5kJiZlLmhhc093blByb3BlcnR5KCJhcHBlbmQiKSl7aWYoMT09PXQubW9kZSlyZXR1cm4ibW9kZTogbXVsdGlwbGUgdmFsdWVzIjtpZih0Lm1vZGU9MSxyPXMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUudmVyaWZ5KGUuYXBwZW5kKSlyZXR1cm4iYXBwZW5kLiIrcn1pZihudWxsIT1lLm1heGltdW0mJmUuaGFzT3duUHJvcGVydHkoIm1heGltdW0iKSl7aWYoMT09PXQubW9kZSlyZXR1cm4ibW9kZTogbXVsdGlwbGUgdmFsdWVzIjtpZih0Lm1vZGU9MSxyPXMuZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS52ZXJpZnkoZS5tYXhpbXVtKSlyZXR1cm4ibWF4aW11bS4iK3J9aWYobnVsbCE9ZS51bmlxdWUmJmUuaGFzT3duUHJvcGVydHkoInVuaXF1ZSIpKXtpZigxPT09dC5tb2RlKXJldHVybiJtb2RlOiBtdWx0aXBsZSB2YWx1ZXMiO2lmKHQubW9kZT0xLHI9cy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLnZlcmlmeShlLnVuaXF1ZSkpcmV0dXJuInVuaXF1ZS4iK3J9aWYobnVsbCE9ZS5hdXRvbWF0aWMmJmUuaGFzT3duUHJvcGVydHkoImF1dG9tYXRpYyIpKXtpZigxPT09dC5tb2RlKXJldHVybiJtb2RlOiBtdWx0aXBsZSB2YWx1ZXMiO3ZhciByO2lmKHQubW9kZT0xLHI9cy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLnZlcmlmeShlLmF1dG9tYXRpYykpcmV0dXJuImF1dG9tYXRpYy4iK3J9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbjtpZihudWxsIT1lLnJlcGxhY2Upe2lmKCJvYmplY3QiIT10eXBlb2YgZS5yZXBsYWNlKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLnJlcGxhY2U6IG9iamVjdCBleHBlY3RlZCIpO3QucmVwbGFjZT1zLmRhdGFmb3JtLlNpbXBsZUxvYWRNb2RlLmZyb21PYmplY3QoZS5yZXBsYWNlKX1pZihudWxsIT1lLmFwcGVuZCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmFwcGVuZCl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi5hcHBlbmQ6IG9iamVjdCBleHBlY3RlZCIpO3QuYXBwZW5kPXMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUuZnJvbU9iamVjdChlLmFwcGVuZCl9aWYobnVsbCE9ZS5tYXhpbXVtKXtpZigib2JqZWN0IiE9dHlwZW9mIGUubWF4aW11bSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi5tYXhpbXVtOiBvYmplY3QgZXhwZWN0ZWQiKTt0Lm1heGltdW09cy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLmZyb21PYmplY3QoZS5tYXhpbXVtKX1pZihudWxsIT1lLnVuaXF1ZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnVuaXF1ZSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi51bmlxdWU6IG9iamVjdCBleHBlY3RlZCIpO3QudW5pcXVlPXMuZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS5mcm9tT2JqZWN0KGUudW5pcXVlKX1pZihudWxsIT1lLmF1dG9tYXRpYyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmF1dG9tYXRpYyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbi5hdXRvbWF0aWM6IG9iamVjdCBleHBlY3RlZCIpO3QuYXV0b21hdGljPXMuZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS5mcm9tT2JqZWN0KGUuYXV0b21hdGljKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gbnVsbCE9ZS5yZXBsYWNlJiZlLmhhc093blByb3BlcnR5KCJyZXBsYWNlIikmJihyLnJlcGxhY2U9cy5kYXRhZm9ybS5TaW1wbGVMb2FkTW9kZS50b09iamVjdChlLnJlcGxhY2UsdCksdC5vbmVvZnMmJihyLm1vZGU9InJlcGxhY2UiKSksbnVsbCE9ZS5hcHBlbmQmJmUuaGFzT3duUHJvcGVydHkoImFwcGVuZCIpJiYoci5hcHBlbmQ9cy5kYXRhZm9ybS5TaW1wbGVMb2FkTW9kZS50b09iamVjdChlLmFwcGVuZCx0KSx0Lm9uZW9mcyYmKHIubW9kZT0iYXBwZW5kIikpLG51bGwhPWUubWF4aW11bSYmZS5oYXNPd25Qcm9wZXJ0eSgibWF4aW11bSIpJiYoci5tYXhpbXVtPXMuZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS50b09iamVjdChlLm1heGltdW0sdCksdC5vbmVvZnMmJihyLm1vZGU9Im1heGltdW0iKSksbnVsbCE9ZS51bmlxdWUmJmUuaGFzT3duUHJvcGVydHkoInVuaXF1ZSIpJiYoci51bmlxdWU9cy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLnRvT2JqZWN0KGUudW5pcXVlLHQpLHQub25lb2ZzJiYoci5tb2RlPSJ1bmlxdWUiKSksbnVsbCE9ZS5hdXRvbWF0aWMmJmUuaGFzT3duUHJvcGVydHkoImF1dG9tYXRpYyIpJiYoci5hdXRvbWF0aWM9cy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLnRvT2JqZWN0KGUuYXV0b21hdGljLHQpLHQub25lb2ZzJiYoci5tb2RlPSJhdXRvbWF0aWMiKSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uTG9hZENvbmZpZ3VyYXRpb24ifSx0fSgpLG4uU2ltcGxlTG9hZE1vZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLlNpbXBsZUxvYWRNb2RlO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2Uuc2tpcFR5cGUoNyZpKX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZT8ib2JqZWN0IGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlNpbXBsZUxvYWRNb2RlP2U6bmV3IHMuZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGV9LHQudG9PYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm57fX0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGUifSx0fSgpLG4uSW5jcmVtZW50YWxMb2FkTW9kZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5jb2x1bW5OYW1lPSIiLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5jb2x1bW5OYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJjb2x1bW5OYW1lIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5jb2x1bW5OYW1lKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkluY3JlbWVudGFsTG9hZE1vZGU7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7aT4+PjM9PTE/bi5jb2x1bW5OYW1lPWUuc3RyaW5nKCk6ZS5za2lwVHlwZSg3JmkpfXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lPyJvYmplY3QgZXhwZWN0ZWQiOm51bGwhPWUuY29sdW1uTmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgiY29sdW1uTmFtZSIpJiYhYS5pc1N0cmluZyhlLmNvbHVtbk5hbWUpPyJjb2x1bW5OYW1lOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkluY3JlbWVudGFsTG9hZE1vZGU7cmV0dXJuIG51bGwhPWUuY29sdW1uTmFtZSYmKHQuY29sdW1uTmFtZT1TdHJpbmcoZS5jb2x1bW5OYW1lKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIuY29sdW1uTmFtZT0iIiksbnVsbCE9ZS5jb2x1bW5OYW1lJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW5OYW1lIikmJihyLmNvbHVtbk5hbWU9ZS5jb2x1bW5OYW1lKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlIn0sdH0oKSxuLkNvbXBpbGVkR3JhcGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMudGFibGVzPVtdLHRoaXMub3BlcmF0aW9ucz1bXSx0aGlzLmFzc2VydGlvbnM9W10sdGhpcy5kZWNsYXJhdGlvbnM9W10sdGhpcy50ZXN0cz1bXSx0aGlzLm5vdGVib29rcz1bXSx0aGlzLmRhdGFQcmVwYXJhdGlvbnM9W10sdGhpcy50YXJnZXRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUucHJvamVjdENvbmZpZz1udWxsLHQucHJvdG90eXBlLnRhYmxlcz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUub3BlcmF0aW9ucz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuYXNzZXJ0aW9ucz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGVjbGFyYXRpb25zPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS50ZXN0cz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUubm90ZWJvb2tzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5kYXRhUHJlcGFyYXRpb25zPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS5ncmFwaEVycm9ycz1udWxsLHQucHJvdG90eXBlLmRhdGFmb3JtQ29yZVZlcnNpb249IiIsdC5wcm90b3R5cGUudGFyZ2V0cz1hLmVtcHR5QXJyYXksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUudGFibGVzJiZlLnRhYmxlcy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLnRhYmxlcy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uVGFibGUuZW5jb2RlKGUudGFibGVzW3JdLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUub3BlcmF0aW9ucyYmZS5vcGVyYXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5vcGVyYXRpb25zLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5PcGVyYXRpb24uZW5jb2RlKGUub3BlcmF0aW9uc1tyXSx0LnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmFzc2VydGlvbnMmJmUuYXNzZXJ0aW9ucy5sZW5ndGgpZm9yKHI9MDtyPGUuYXNzZXJ0aW9ucy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uQXNzZXJ0aW9uLmVuY29kZShlLmFzc2VydGlvbnNbcl0sdC51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5wcm9qZWN0Q29uZmlnJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJwcm9qZWN0Q29uZmlnIikmJnMuZGF0YWZvcm0uUHJvamVjdENvbmZpZy5lbmNvZGUoZS5wcm9qZWN0Q29uZmlnLHQudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuZ3JhcGhFcnJvcnMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImdyYXBoRXJyb3JzIikmJnMuZGF0YWZvcm0uR3JhcGhFcnJvcnMuZW5jb2RlKGUuZ3JhcGhFcnJvcnMsdC51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS50ZXN0cyYmZS50ZXN0cy5sZW5ndGgpZm9yKHI9MDtyPGUudGVzdHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLlRlc3QuZW5jb2RlKGUudGVzdHNbcl0sdC51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5kZWNsYXJhdGlvbnMmJmUuZGVjbGFyYXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5kZWNsYXJhdGlvbnMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkRlY2xhcmF0aW9uLmVuY29kZShlLmRlY2xhcmF0aW9uc1tyXSx0LnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmRhdGFmb3JtQ29yZVZlcnNpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRhdGFmb3JtQ29yZVZlcnNpb24iKSYmdC51aW50MzIoODIpLnN0cmluZyhlLmRhdGFmb3JtQ29yZVZlcnNpb24pLG51bGwhPWUudGFyZ2V0cyYmZS50YXJnZXRzLmxlbmd0aClmb3Iocj0wO3I8ZS50YXJnZXRzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUudGFyZ2V0c1tyXSx0LnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLm5vdGVib29rcyYmZS5ub3RlYm9va3MubGVuZ3RoKWZvcihyPTA7cjxlLm5vdGVib29rcy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uTm90ZWJvb2suZW5jb2RlKGUubm90ZWJvb2tzW3JdLHQudWludDMyKDk4KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUuZGF0YVByZXBhcmF0aW9ucyYmZS5kYXRhUHJlcGFyYXRpb25zLmxlbmd0aClmb3Iocj0wO3I8ZS5kYXRhUHJlcGFyYXRpb25zLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uZW5jb2RlKGUuZGF0YVByZXBhcmF0aW9uc1tyXSx0LnVpbnQzMigxMDYpLmZvcmsoKSkubGRlbGltKCk7cmV0dXJuIHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaDtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgNDpuLnByb2plY3RDb25maWc9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMTpuLnRhYmxlcyYmbi50YWJsZXMubGVuZ3RofHwobi50YWJsZXM9W10pLG4udGFibGVzLnB1c2gocy5kYXRhZm9ybS5UYWJsZS5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAyOm4ub3BlcmF0aW9ucyYmbi5vcGVyYXRpb25zLmxlbmd0aHx8KG4ub3BlcmF0aW9ucz1bXSksbi5vcGVyYXRpb25zLnB1c2gocy5kYXRhZm9ybS5PcGVyYXRpb24uZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMzpuLmFzc2VydGlvbnMmJm4uYXNzZXJ0aW9ucy5sZW5ndGh8fChuLmFzc2VydGlvbnM9W10pLG4uYXNzZXJ0aW9ucy5wdXNoKHMuZGF0YWZvcm0uQXNzZXJ0aW9uLmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDk6bi5kZWNsYXJhdGlvbnMmJm4uZGVjbGFyYXRpb25zLmxlbmd0aHx8KG4uZGVjbGFyYXRpb25zPVtdKSxuLmRlY2xhcmF0aW9ucy5wdXNoKHMuZGF0YWZvcm0uRGVjbGFyYXRpb24uZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgODpuLnRlc3RzJiZuLnRlc3RzLmxlbmd0aHx8KG4udGVzdHM9W10pLG4udGVzdHMucHVzaChzLmRhdGFmb3JtLlRlc3QuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMTI6bi5ub3RlYm9va3MmJm4ubm90ZWJvb2tzLmxlbmd0aHx8KG4ubm90ZWJvb2tzPVtdKSxuLm5vdGVib29rcy5wdXNoKHMuZGF0YWZvcm0uTm90ZWJvb2suZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMTM6bi5kYXRhUHJlcGFyYXRpb25zJiZuLmRhdGFQcmVwYXJhdGlvbnMubGVuZ3RofHwobi5kYXRhUHJlcGFyYXRpb25zPVtdKSxuLmRhdGFQcmVwYXJhdGlvbnMucHVzaChzLmRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbi5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSA3Om4uZ3JhcGhFcnJvcnM9cy5kYXRhZm9ybS5HcmFwaEVycm9ycy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDEwOm4uZGF0YWZvcm1Db3JlVmVyc2lvbj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMTE6bi50YXJnZXRzJiZuLnRhcmdldHMubGVuZ3RofHwobi50YXJnZXRzPVtdKSxuLnRhcmdldHMucHVzaChzLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUucHJvamVjdENvbmZpZyYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdENvbmZpZyIpJiYocj1zLmRhdGFmb3JtLlByb2plY3RDb25maWcudmVyaWZ5KGUucHJvamVjdENvbmZpZykpKXJldHVybiJwcm9qZWN0Q29uZmlnLiIrcjtpZihudWxsIT1lLnRhYmxlcyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFibGVzIikpe2lmKCFBcnJheS5pc0FycmF5KGUudGFibGVzKSlyZXR1cm4idGFibGVzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLnRhYmxlcy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5UYWJsZS52ZXJpZnkoZS50YWJsZXNbdF0pKXJldHVybiJ0YWJsZXMuIityfWlmKG51bGwhPWUub3BlcmF0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgib3BlcmF0aW9ucyIpKXtpZighQXJyYXkuaXNBcnJheShlLm9wZXJhdGlvbnMpKXJldHVybiJvcGVyYXRpb25zOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUub3BlcmF0aW9ucy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5PcGVyYXRpb24udmVyaWZ5KGUub3BlcmF0aW9uc1t0XSkpcmV0dXJuIm9wZXJhdGlvbnMuIityfWlmKG51bGwhPWUuYXNzZXJ0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9ucyIpKXtpZighQXJyYXkuaXNBcnJheShlLmFzc2VydGlvbnMpKXJldHVybiJhc3NlcnRpb25zOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUuYXNzZXJ0aW9ucy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5Bc3NlcnRpb24udmVyaWZ5KGUuYXNzZXJ0aW9uc1t0XSkpcmV0dXJuImFzc2VydGlvbnMuIityfWlmKG51bGwhPWUuZGVjbGFyYXRpb25zJiZlLmhhc093blByb3BlcnR5KCJkZWNsYXJhdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZWNsYXJhdGlvbnMpKXJldHVybiJkZWNsYXJhdGlvbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5kZWNsYXJhdGlvbnMubGVuZ3RoOysrdClpZihyPXMuZGF0YWZvcm0uRGVjbGFyYXRpb24udmVyaWZ5KGUuZGVjbGFyYXRpb25zW3RdKSlyZXR1cm4iZGVjbGFyYXRpb25zLiIrcn1pZihudWxsIT1lLnRlc3RzJiZlLmhhc093blByb3BlcnR5KCJ0ZXN0cyIpKXtpZighQXJyYXkuaXNBcnJheShlLnRlc3RzKSlyZXR1cm4idGVzdHM6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS50ZXN0cy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5UZXN0LnZlcmlmeShlLnRlc3RzW3RdKSlyZXR1cm4idGVzdHMuIityfWlmKG51bGwhPWUubm90ZWJvb2tzJiZlLmhhc093blByb3BlcnR5KCJub3RlYm9va3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5ub3RlYm9va3MpKXJldHVybiJub3RlYm9va3M6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS5ub3RlYm9va3MubGVuZ3RoOysrdClpZihyPXMuZGF0YWZvcm0uTm90ZWJvb2sudmVyaWZ5KGUubm90ZWJvb2tzW3RdKSlyZXR1cm4ibm90ZWJvb2tzLiIrcn1pZihudWxsIT1lLmRhdGFQcmVwYXJhdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImRhdGFQcmVwYXJhdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5kYXRhUHJlcGFyYXRpb25zKSlyZXR1cm4iZGF0YVByZXBhcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLmRhdGFQcmVwYXJhdGlvbnMubGVuZ3RoOysrdClpZihyPXMuZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uLnZlcmlmeShlLmRhdGFQcmVwYXJhdGlvbnNbdF0pKXJldHVybiJkYXRhUHJlcGFyYXRpb25zLiIrcn1pZihudWxsIT1lLmdyYXBoRXJyb3JzJiZlLmhhc093blByb3BlcnR5KCJncmFwaEVycm9ycyIpJiYocj1zLmRhdGFmb3JtLkdyYXBoRXJyb3JzLnZlcmlmeShlLmdyYXBoRXJyb3JzKSkpcmV0dXJuImdyYXBoRXJyb3JzLiIrcjtpZihudWxsIT1lLmRhdGFmb3JtQ29yZVZlcnNpb24mJmUuaGFzT3duUHJvcGVydHkoImRhdGFmb3JtQ29yZVZlcnNpb24iKSYmIWEuaXNTdHJpbmcoZS5kYXRhZm9ybUNvcmVWZXJzaW9uKSlyZXR1cm4iZGF0YWZvcm1Db3JlVmVyc2lvbjogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLnRhcmdldHMmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YXJnZXRzKSlyZXR1cm4idGFyZ2V0czogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLnRhcmdldHMubGVuZ3RoOysrdCl7dmFyIHI7aWYocj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS50YXJnZXRzW3RdKSlyZXR1cm4idGFyZ2V0cy4iK3J9fXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaClyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5Db21waWxlZEdyYXBoO2lmKG51bGwhPWUucHJvamVjdENvbmZpZyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnByb2plY3RDb25maWcpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5wcm9qZWN0Q29uZmlnOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnByb2plY3RDb25maWc9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmZyb21PYmplY3QoZS5wcm9qZWN0Q29uZmlnKX1pZihlLnRhYmxlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWJsZXMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGgudGFibGVzOiBhcnJheSBleHBlY3RlZCIpO3QudGFibGVzPVtdO2Zvcih2YXIgcj0wO3I8ZS50YWJsZXMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRhYmxlc1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Db21waWxlZEdyYXBoLnRhYmxlczogb2JqZWN0IGV4cGVjdGVkIik7dC50YWJsZXNbcl09cy5kYXRhZm9ybS5UYWJsZS5mcm9tT2JqZWN0KGUudGFibGVzW3JdKX19aWYoZS5vcGVyYXRpb25zKXtpZighQXJyYXkuaXNBcnJheShlLm9wZXJhdGlvbnMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGgub3BlcmF0aW9uczogYXJyYXkgZXhwZWN0ZWQiKTtmb3IodC5vcGVyYXRpb25zPVtdLHI9MDtyPGUub3BlcmF0aW9ucy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUub3BlcmF0aW9uc1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Db21waWxlZEdyYXBoLm9wZXJhdGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO3Qub3BlcmF0aW9uc1tyXT1zLmRhdGFmb3JtLk9wZXJhdGlvbi5mcm9tT2JqZWN0KGUub3BlcmF0aW9uc1tyXSl9fWlmKGUuYXNzZXJ0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5hc3NlcnRpb25zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Db21waWxlZEdyYXBoLmFzc2VydGlvbnM6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQuYXNzZXJ0aW9ucz1bXSxyPTA7cjxlLmFzc2VydGlvbnMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmFzc2VydGlvbnNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5hc3NlcnRpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFzc2VydGlvbnNbcl09cy5kYXRhZm9ybS5Bc3NlcnRpb24uZnJvbU9iamVjdChlLmFzc2VydGlvbnNbcl0pfX1pZihlLmRlY2xhcmF0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZWNsYXJhdGlvbnMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGguZGVjbGFyYXRpb25zOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LmRlY2xhcmF0aW9ucz1bXSxyPTA7cjxlLmRlY2xhcmF0aW9ucy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZGVjbGFyYXRpb25zW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGguZGVjbGFyYXRpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmRlY2xhcmF0aW9uc1tyXT1zLmRhdGFmb3JtLkRlY2xhcmF0aW9uLmZyb21PYmplY3QoZS5kZWNsYXJhdGlvbnNbcl0pfX1pZihlLnRlc3RzKXtpZighQXJyYXkuaXNBcnJheShlLnRlc3RzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Db21waWxlZEdyYXBoLnRlc3RzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRlc3RzPVtdLHI9MDtyPGUudGVzdHMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRlc3RzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGgudGVzdHM6IG9iamVjdCBleHBlY3RlZCIpO3QudGVzdHNbcl09cy5kYXRhZm9ybS5UZXN0LmZyb21PYmplY3QoZS50ZXN0c1tyXSl9fWlmKGUubm90ZWJvb2tzKXtpZighQXJyYXkuaXNBcnJheShlLm5vdGVib29rcykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5ub3RlYm9va3M6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQubm90ZWJvb2tzPVtdLHI9MDtyPGUubm90ZWJvb2tzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5ub3RlYm9va3Nbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5ub3RlYm9va3M6IG9iamVjdCBleHBlY3RlZCIpO3Qubm90ZWJvb2tzW3JdPXMuZGF0YWZvcm0uTm90ZWJvb2suZnJvbU9iamVjdChlLm5vdGVib29rc1tyXSl9fWlmKGUuZGF0YVByZXBhcmF0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kYXRhUHJlcGFyYXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Db21waWxlZEdyYXBoLmRhdGFQcmVwYXJhdGlvbnM6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQuZGF0YVByZXBhcmF0aW9ucz1bXSxyPTA7cjxlLmRhdGFQcmVwYXJhdGlvbnMubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmRhdGFQcmVwYXJhdGlvbnNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5kYXRhUHJlcGFyYXRpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmRhdGFQcmVwYXJhdGlvbnNbcl09cy5kYXRhZm9ybS5EYXRhUHJlcGFyYXRpb24uZnJvbU9iamVjdChlLmRhdGFQcmVwYXJhdGlvbnNbcl0pfX1pZihudWxsIT1lLmdyYXBoRXJyb3JzKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZ3JhcGhFcnJvcnMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5ncmFwaEVycm9yczogb2JqZWN0IGV4cGVjdGVkIik7dC5ncmFwaEVycm9ycz1zLmRhdGFmb3JtLkdyYXBoRXJyb3JzLmZyb21PYmplY3QoZS5ncmFwaEVycm9ycyl9aWYobnVsbCE9ZS5kYXRhZm9ybUNvcmVWZXJzaW9uJiYodC5kYXRhZm9ybUNvcmVWZXJzaW9uPVN0cmluZyhlLmRhdGFmb3JtQ29yZVZlcnNpb24pKSxlLnRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUudGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC50YXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhcmdldHM9W10scj0wO3I8ZS50YXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS50YXJnZXRzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGgudGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXRzW3JdPXMuZGF0YWZvcm0uVGFyZ2V0LmZyb21PYmplY3QoZS50YXJnZXRzW3JdKX19cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIudGFibGVzPVtdLHIub3BlcmF0aW9ucz1bXSxyLmFzc2VydGlvbnM9W10sci50ZXN0cz1bXSxyLmRlY2xhcmF0aW9ucz1bXSxyLnRhcmdldHM9W10sci5ub3RlYm9va3M9W10sci5kYXRhUHJlcGFyYXRpb25zPVtdKSx0LmRlZmF1bHRzJiYoci5wcm9qZWN0Q29uZmlnPW51bGwsci5ncmFwaEVycm9ycz1udWxsLHIuZGF0YWZvcm1Db3JlVmVyc2lvbj0iIiksZS50YWJsZXMmJmUudGFibGVzLmxlbmd0aCl7ci50YWJsZXM9W107Zm9yKHZhciBuPTA7bjxlLnRhYmxlcy5sZW5ndGg7KytuKXIudGFibGVzW25dPXMuZGF0YWZvcm0uVGFibGUudG9PYmplY3QoZS50YWJsZXNbbl0sdCl9aWYoZS5vcGVyYXRpb25zJiZlLm9wZXJhdGlvbnMubGVuZ3RoKWZvcihyLm9wZXJhdGlvbnM9W10sbj0wO248ZS5vcGVyYXRpb25zLmxlbmd0aDsrK24pci5vcGVyYXRpb25zW25dPXMuZGF0YWZvcm0uT3BlcmF0aW9uLnRvT2JqZWN0KGUub3BlcmF0aW9uc1tuXSx0KTtpZihlLmFzc2VydGlvbnMmJmUuYXNzZXJ0aW9ucy5sZW5ndGgpZm9yKHIuYXNzZXJ0aW9ucz1bXSxuPTA7bjxlLmFzc2VydGlvbnMubGVuZ3RoOysrbilyLmFzc2VydGlvbnNbbl09cy5kYXRhZm9ybS5Bc3NlcnRpb24udG9PYmplY3QoZS5hc3NlcnRpb25zW25dLHQpO2lmKG51bGwhPWUucHJvamVjdENvbmZpZyYmZS5oYXNPd25Qcm9wZXJ0eSgicHJvamVjdENvbmZpZyIpJiYoci5wcm9qZWN0Q29uZmlnPXMuZGF0YWZvcm0uUHJvamVjdENvbmZpZy50b09iamVjdChlLnByb2plY3RDb25maWcsdCkpLG51bGwhPWUuZ3JhcGhFcnJvcnMmJmUuaGFzT3duUHJvcGVydHkoImdyYXBoRXJyb3JzIikmJihyLmdyYXBoRXJyb3JzPXMuZGF0YWZvcm0uR3JhcGhFcnJvcnMudG9PYmplY3QoZS5ncmFwaEVycm9ycyx0KSksZS50ZXN0cyYmZS50ZXN0cy5sZW5ndGgpZm9yKHIudGVzdHM9W10sbj0wO248ZS50ZXN0cy5sZW5ndGg7KytuKXIudGVzdHNbbl09cy5kYXRhZm9ybS5UZXN0LnRvT2JqZWN0KGUudGVzdHNbbl0sdCk7aWYoZS5kZWNsYXJhdGlvbnMmJmUuZGVjbGFyYXRpb25zLmxlbmd0aClmb3Ioci5kZWNsYXJhdGlvbnM9W10sbj0wO248ZS5kZWNsYXJhdGlvbnMubGVuZ3RoOysrbilyLmRlY2xhcmF0aW9uc1tuXT1zLmRhdGFmb3JtLkRlY2xhcmF0aW9uLnRvT2JqZWN0KGUuZGVjbGFyYXRpb25zW25dLHQpO2lmKG51bGwhPWUuZGF0YWZvcm1Db3JlVmVyc2lvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YWZvcm1Db3JlVmVyc2lvbiIpJiYoci5kYXRhZm9ybUNvcmVWZXJzaW9uPWUuZGF0YWZvcm1Db3JlVmVyc2lvbiksZS50YXJnZXRzJiZlLnRhcmdldHMubGVuZ3RoKWZvcihyLnRhcmdldHM9W10sbj0wO248ZS50YXJnZXRzLmxlbmd0aDsrK24pci50YXJnZXRzW25dPXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUudGFyZ2V0c1tuXSx0KTtpZihlLm5vdGVib29rcyYmZS5ub3RlYm9va3MubGVuZ3RoKWZvcihyLm5vdGVib29rcz1bXSxuPTA7bjxlLm5vdGVib29rcy5sZW5ndGg7KytuKXIubm90ZWJvb2tzW25dPXMuZGF0YWZvcm0uTm90ZWJvb2sudG9PYmplY3QoZS5ub3RlYm9va3Nbbl0sdCk7aWYoZS5kYXRhUHJlcGFyYXRpb25zJiZlLmRhdGFQcmVwYXJhdGlvbnMubGVuZ3RoKWZvcihyLmRhdGFQcmVwYXJhdGlvbnM9W10sbj0wO248ZS5kYXRhUHJlcGFyYXRpb25zLmxlbmd0aDsrK24pci5kYXRhUHJlcGFyYXRpb25zW25dPXMuZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uLnRvT2JqZWN0KGUuZGF0YVByZXBhcmF0aW9uc1tuXSx0KTtyZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQ29tcGlsZWRHcmFwaCJ9LHR9KCksbi5Db3JlRXhlY3V0aW9uUmVxdWVzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXZhciByO3JldHVybiB0LnByb3RvdHlwZS5jb21waWxlPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJyZXF1ZXN0Iix7Z2V0OmEub25lT2ZHZXR0ZXIocj1bImNvbXBpbGUiXSksc2V0OmEub25lT2ZTZXR0ZXIocil9KSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUuY29tcGlsZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiY29tcGlsZSIpJiZzLmRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0LmVuY29kZShlLmNvbXBpbGUsdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVxdWVzdDtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtpPj4+Mz09MT9uLmNvbXBpbGU9cy5kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdC5kZWNvZGUoZSxlLnVpbnQzMigpKTplLnNraXBUeXBlKDcmaSl9cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb21waWxlJiZlLmhhc093blByb3BlcnR5KCJjb21waWxlIikpe3ZhciB0PXMuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QudmVyaWZ5KGUuY29tcGlsZSk7aWYodClyZXR1cm4iY29tcGlsZS4iK3R9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVxdWVzdClyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVxdWVzdDtpZihudWxsIT1lLmNvbXBpbGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jb21waWxlKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXF1ZXN0LmNvbXBpbGU6IG9iamVjdCBleHBlY3RlZCIpO3QuY29tcGlsZT1zLmRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0LmZyb21PYmplY3QoZS5jb21waWxlKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gbnVsbCE9ZS5jb21waWxlJiZlLmhhc093blByb3BlcnR5KCJjb21waWxlIikmJihyLmNvbXBpbGU9cy5kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdC50b09iamVjdChlLmNvbXBpbGUsdCksdC5vbmVvZnMmJihyLnJlcXVlc3Q9ImNvbXBpbGUiKSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlcXVlc3QifSx0fSgpLG4uQ29yZUV4ZWN1dGlvblJlc3BvbnNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlLmNvbXBpbGU9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInJlc3BvbnNlIix7Z2V0OmEub25lT2ZHZXR0ZXIocj1bImNvbXBpbGUiXSksc2V0OmEub25lT2ZTZXR0ZXIocil9KSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUuY29tcGlsZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiY29tcGlsZSIpJiZzLmRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZS5lbmNvZGUoZS5jb21waWxlLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlc3BvbnNlO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2k+Pj4zPT0xP24uY29tcGlsZT1zLmRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZS5kZWNvZGUoZSxlLnVpbnQzMigpKTplLnNraXBUeXBlKDcmaSl9cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5jb21waWxlJiZlLmhhc093blByb3BlcnR5KCJjb21waWxlIikpe3ZhciB0PXMuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlLnZlcmlmeShlLmNvbXBpbGUpO2lmKHQpcmV0dXJuImNvbXBpbGUuIit0fXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlc3BvbnNlKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXNwb25zZTtpZihudWxsIT1lLmNvbXBpbGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5jb21waWxlKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXNwb25zZS5jb21waWxlOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNvbXBpbGU9cy5kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVzcG9uc2UuZnJvbU9iamVjdChlLmNvbXBpbGUpfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiBudWxsIT1lLmNvbXBpbGUmJmUuaGFzT3duUHJvcGVydHkoImNvbXBpbGUiKSYmKHIuY29tcGlsZT1zLmRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZS50b09iamVjdChlLmNvbXBpbGUsdCksdC5vbmVvZnMmJihyLnJlc3BvbnNlPSJjb21waWxlIikpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXNwb25zZSJ9LHR9KCksbi5Db21waWxlRXhlY3V0aW9uUmVxdWVzdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5jb21waWxlQ29uZmlnPW51bGwsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLmNvbXBpbGVDb25maWcmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImNvbXBpbGVDb25maWciKSYmcy5kYXRhZm9ybS5Db21waWxlQ29uZmlnLmVuY29kZShlLmNvbXBpbGVDb25maWcsdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdDtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtpPj4+Mz09MT9uLmNvbXBpbGVDb25maWc9cy5kYXRhZm9ybS5Db21waWxlQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpOmUuc2tpcFR5cGUoNyZpKX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLmNvbXBpbGVDb25maWcmJmUuaGFzT3duUHJvcGVydHkoImNvbXBpbGVDb25maWciKSl7dmFyIHQ9cy5kYXRhZm9ybS5Db21waWxlQ29uZmlnLnZlcmlmeShlLmNvbXBpbGVDb25maWcpO2lmKHQpcmV0dXJuImNvbXBpbGVDb25maWcuIit0fXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3Q7aWYobnVsbCE9ZS5jb21waWxlQ29uZmlnKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuY29tcGlsZUNvbmZpZyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdC5jb21waWxlQ29uZmlnOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmNvbXBpbGVDb25maWc9cy5kYXRhZm9ybS5Db21waWxlQ29uZmlnLmZyb21PYmplY3QoZS5jb21waWxlQ29uZmlnKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIuY29tcGlsZUNvbmZpZz1udWxsKSxudWxsIT1lLmNvbXBpbGVDb25maWcmJmUuaGFzT3duUHJvcGVydHkoImNvbXBpbGVDb25maWciKSYmKHIuY29tcGlsZUNvbmZpZz1zLmRhdGFmb3JtLkNvbXBpbGVDb25maWcudG9PYmplY3QoZS5jb21waWxlQ29uZmlnLHQpKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdCJ9LHR9KCksbi5Db21waWxlRXhlY3V0aW9uUmVzcG9uc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUuY29tcGlsZWRHcmFwaD1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5jb21waWxlZEdyYXBoJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJjb21waWxlZEdyYXBoIikmJnMuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC5lbmNvZGUoZS5jb21waWxlZEdyYXBoLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2k+Pj4zPT0xP24uY29tcGlsZWRHcmFwaD1zLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGguZGVjb2RlKGUsZS51aW50MzIoKSk6ZS5za2lwVHlwZSg3JmkpfXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUuY29tcGlsZWRHcmFwaCYmZS5oYXNPd25Qcm9wZXJ0eSgiY29tcGlsZWRHcmFwaCIpKXt2YXIgdD1zLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGgudmVyaWZ5KGUuY29tcGlsZWRHcmFwaCk7aWYodClyZXR1cm4iY29tcGlsZWRHcmFwaC4iK3R9cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVzcG9uc2UpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlO2lmKG51bGwhPWUuY29tcGlsZWRHcmFwaCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmNvbXBpbGVkR3JhcGgpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlLmNvbXBpbGVkR3JhcGg6IG9iamVjdCBleHBlY3RlZCIpO3QuY29tcGlsZWRHcmFwaD1zLmRhdGFmb3JtLkNvbXBpbGVkR3JhcGguZnJvbU9iamVjdChlLmNvbXBpbGVkR3JhcGgpfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci5jb21waWxlZEdyYXBoPW51bGwpLG51bGwhPWUuY29tcGlsZWRHcmFwaCYmZS5oYXNPd25Qcm9wZXJ0eSgiY29tcGlsZWRHcmFwaCIpJiYoci5jb21waWxlZEdyYXBoPXMuZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC50b09iamVjdChlLmNvbXBpbGVkR3JhcGgsdCkpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZSJ9LHR9KCksbi5TdXBwb3J0ZWRGZWF0dXJlcz1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9T2JqZWN0LmNyZWF0ZShlKTtyZXR1cm4gdFtlWzBdPSJVTktOT1dOX0ZFQVRVUkUiXT0wLHRbZVsxXT0iQVJSQVlfQlVGRkVSX0lQQyJdPTEsdH0oKSxuLlF1ZXJ5RXZhbHVhdGlvbkVycm9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLm1lc3NhZ2U9IiIsdC5wcm90b3R5cGUuZXJyb3JMb2NhdGlvbj1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5tZXNzYWdlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJtZXNzYWdlIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5tZXNzYWdlKSxudWxsIT1lLmVycm9yTG9jYXRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImVycm9yTG9jYXRpb24iKSYmcy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5FcnJvckxvY2F0aW9uLmVuY29kZShlLmVycm9yTG9jYXRpb24sdC51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvcjtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLm1lc3NhZ2U9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bi5lcnJvckxvY2F0aW9uPXMuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbi5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5tZXNzYWdlJiZlLmhhc093blByb3BlcnR5KCJtZXNzYWdlIikmJiFhLmlzU3RyaW5nKGUubWVzc2FnZSkpcmV0dXJuIm1lc3NhZ2U6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5lcnJvckxvY2F0aW9uJiZlLmhhc093blByb3BlcnR5KCJlcnJvckxvY2F0aW9uIikpe3ZhciB0PXMuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbi52ZXJpZnkoZS5lcnJvckxvY2F0aW9uKTtpZih0KXJldHVybiJlcnJvckxvY2F0aW9uLiIrdH1yZXR1cm4gbnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yO2lmKG51bGwhPWUubWVzc2FnZSYmKHQubWVzc2FnZT1TdHJpbmcoZS5tZXNzYWdlKSksbnVsbCE9ZS5lcnJvckxvY2F0aW9uKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZXJyb3JMb2NhdGlvbil0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5lcnJvckxvY2F0aW9uOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmVycm9yTG9jYXRpb249cy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5FcnJvckxvY2F0aW9uLmZyb21PYmplY3QoZS5lcnJvckxvY2F0aW9uKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIubWVzc2FnZT0iIixyLmVycm9yTG9jYXRpb249bnVsbCksbnVsbCE9ZS5tZXNzYWdlJiZlLmhhc093blByb3BlcnR5KCJtZXNzYWdlIikmJihyLm1lc3NhZ2U9ZS5tZXNzYWdlKSxudWxsIT1lLmVycm9yTG9jYXRpb24mJmUuaGFzT3duUHJvcGVydHkoImVycm9yTG9jYXRpb24iKSYmKHIuZXJyb3JMb2NhdGlvbj1zLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLkVycm9yTG9jYXRpb24udG9PYmplY3QoZS5lcnJvckxvY2F0aW9uLHQpKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvciJ9LHQuRXJyb3JMb2NhdGlvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5saW5lPTAsdC5wcm90b3R5cGUuY29sdW1uPTAsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLmxpbmUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImxpbmUiKSYmdC51aW50MzIoOCkuaW50MzIoZS5saW5lKSxudWxsIT1lLmNvbHVtbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiY29sdW1uIikmJnQudWludDMyKDE2KS5pbnQzMihlLmNvbHVtbiksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5FcnJvckxvY2F0aW9uO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4ubGluZT1lLmludDMyKCk7YnJlYWs7Y2FzZSAyOm4uY29sdW1uPWUuaW50MzIoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWU/Im9iamVjdCBleHBlY3RlZCI6bnVsbCE9ZS5saW5lJiZlLmhhc093blByb3BlcnR5KCJsaW5lIikmJiFhLmlzSW50ZWdlcihlLmxpbmUpPyJsaW5lOiBpbnRlZ2VyIGV4cGVjdGVkIjpudWxsIT1lLmNvbHVtbiYmZS5oYXNPd25Qcm9wZXJ0eSgiY29sdW1uIikmJiFhLmlzSW50ZWdlcihlLmNvbHVtbik/ImNvbHVtbjogaW50ZWdlciBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLkVycm9yTG9jYXRpb24pcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbjtyZXR1cm4gbnVsbCE9ZS5saW5lJiYodC5saW5lPTB8ZS5saW5lKSxudWxsIT1lLmNvbHVtbiYmKHQuY29sdW1uPTB8ZS5jb2x1bW4pLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLmxpbmU9MCxyLmNvbHVtbj0wKSxudWxsIT1lLmxpbmUmJmUuaGFzT3duUHJvcGVydHkoImxpbmUiKSYmKHIubGluZT1lLmxpbmUpLG51bGwhPWUuY29sdW1uJiZlLmhhc093blByb3BlcnR5KCJjb2x1bW4iKSYmKHIuY29sdW1uPWUuY29sdW1uKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5FcnJvckxvY2F0aW9uIn0sdH0oKSx0fSgpLG4uUXVlcnlFdmFsdWF0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnN0YXR1cz0wLHQucHJvdG90eXBlLmVycm9yPW51bGwsdC5wcm90b3R5cGUuaW5jcmVtZW50YWw9ITEsdC5wcm90b3R5cGUucXVlcnk9IiIsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnN0YXR1cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwic3RhdHVzIikmJnQudWludDMyKDgpLmludDMyKGUuc3RhdHVzKSxudWxsIT1lLmVycm9yJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJlcnJvciIpJiZzLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLmVuY29kZShlLmVycm9yLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuaW5jcmVtZW50YWwmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImluY3JlbWVudGFsIikmJnQudWludDMyKDI0KS5ib29sKGUuaW5jcmVtZW50YWwpLG51bGwhPWUucXVlcnkmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInF1ZXJ5IikmJnQudWludDMyKDM0KS5zdHJpbmcoZS5xdWVyeSksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb247ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5zdGF0dXM9ZS5pbnQzMigpO2JyZWFrO2Nhc2UgMjpuLmVycm9yPXMuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOm4uaW5jcmVtZW50YWw9ZS5ib29sKCk7YnJlYWs7Y2FzZSA0Om4ucXVlcnk9ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5zdGF0dXMmJmUuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKXN3aXRjaChlLnN0YXR1cyl7ZGVmYXVsdDpyZXR1cm4ic3RhdHVzOiBlbnVtIHZhbHVlIGV4cGVjdGVkIjtjYXNlIDA6Y2FzZSAxOn1pZihudWxsIT1lLmVycm9yJiZlLmhhc093blByb3BlcnR5KCJlcnJvciIpKXt2YXIgdD1zLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLnZlcmlmeShlLmVycm9yKTtpZih0KXJldHVybiJlcnJvci4iK3R9cmV0dXJuIG51bGwhPWUuaW5jcmVtZW50YWwmJmUuaGFzT3duUHJvcGVydHkoImluY3JlbWVudGFsIikmJiJib29sZWFuIiE9dHlwZW9mIGUuaW5jcmVtZW50YWw/ImluY3JlbWVudGFsOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLnF1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJxdWVyeSIpJiYhYS5pc1N0cmluZyhlLnF1ZXJ5KT8icXVlcnk6IHN0cmluZyBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb247c3dpdGNoKGUuc3RhdHVzKXtkZWZhdWx0OmlmKCJudW1iZXIiPT10eXBlb2YgZS5zdGF0dXMpe3Quc3RhdHVzPWUuc3RhdHVzO2JyZWFrfWJyZWFrO2Nhc2UiU1VDQ0VTUyI6Y2FzZSAwOnQuc3RhdHVzPTA7YnJlYWs7Y2FzZSJGQUlMVVJFIjpjYXNlIDE6dC5zdGF0dXM9MX1pZihudWxsIT1lLmVycm9yKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZXJyb3IpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uLmVycm9yOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmVycm9yPXMuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuZnJvbU9iamVjdChlLmVycm9yKX1yZXR1cm4gbnVsbCE9ZS5pbmNyZW1lbnRhbCYmKHQuaW5jcmVtZW50YWw9Qm9vbGVhbihlLmluY3JlbWVudGFsKSksbnVsbCE9ZS5xdWVyeSYmKHQucXVlcnk9U3RyaW5nKGUucXVlcnkpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci5zdGF0dXM9dC5lbnVtcz09PVN0cmluZz8iU1VDQ0VTUyI6MCxyLmVycm9yPW51bGwsci5pbmNyZW1lbnRhbD0hMSxyLnF1ZXJ5PSIiKSxudWxsIT1lLnN0YXR1cyYmZS5oYXNPd25Qcm9wZXJ0eSgic3RhdHVzIikmJihyLnN0YXR1cz10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uLlF1ZXJ5RXZhbHVhdGlvblN0YXR1c1tlLnN0YXR1c10/ZS5zdGF0dXM6cy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb24uUXVlcnlFdmFsdWF0aW9uU3RhdHVzW2Uuc3RhdHVzXTplLnN0YXR1cyksbnVsbCE9ZS5lcnJvciYmZS5oYXNPd25Qcm9wZXJ0eSgiZXJyb3IiKSYmKHIuZXJyb3I9cy5kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci50b09iamVjdChlLmVycm9yLHQpKSxudWxsIT1lLmluY3JlbWVudGFsJiZlLmhhc093blByb3BlcnR5KCJpbmNyZW1lbnRhbCIpJiYoci5pbmNyZW1lbnRhbD1lLmluY3JlbWVudGFsKSxudWxsIT1lLnF1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJxdWVyeSIpJiYoci5xdWVyeT1lLnF1ZXJ5KSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5RdWVyeUV2YWx1YXRpb24ifSx0LlF1ZXJ5RXZhbHVhdGlvblN0YXR1cz1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9T2JqZWN0LmNyZWF0ZShlKTtyZXR1cm4gdFtlWzBdPSJTVUNDRVNTIl09MCx0W2VbMV09IkZBSUxVUkUiXT0xLHR9KCksdH0oKSxuLlJ1bkNvbmZpZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5hY3Rpb25zPVtdLHRoaXMudGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLmFjdGlvbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnRhZ3M9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmluY2x1ZGVEZXBlbmRlbmNpZXM9ITEsdC5wcm90b3R5cGUuaW5jbHVkZURlcGVuZGVudHM9ITEsdC5wcm90b3R5cGUuZnVsbFJlZnJlc2g9ITEsdC5wcm90b3R5cGUudGltZW91dE1pbGxpcz0wLHQucHJvdG90eXBlLmRpc2FibGVTZXRNZXRhZGF0YT0hMSx0LnByb3RvdHlwZS51c2VSdW5DYWNoZT0hMSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5hY3Rpb25zJiZlLmFjdGlvbnMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5hY3Rpb25zLmxlbmd0aDsrK3IpdC51aW50MzIoMTApLnN0cmluZyhlLmFjdGlvbnNbcl0pO2lmKG51bGwhPWUuZnVsbFJlZnJlc2gmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImZ1bGxSZWZyZXNoIikmJnQudWludDMyKDE2KS5ib29sKGUuZnVsbFJlZnJlc2gpLG51bGwhPWUuaW5jbHVkZURlcGVuZGVuY2llcyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiaW5jbHVkZURlcGVuZGVuY2llcyIpJiZ0LnVpbnQzMigyNCkuYm9vbChlLmluY2x1ZGVEZXBlbmRlbmNpZXMpLG51bGwhPWUudGFncyYmZS50YWdzLmxlbmd0aClmb3Iocj0wO3I8ZS50YWdzLmxlbmd0aDsrK3IpdC51aW50MzIoNDIpLnN0cmluZyhlLnRhZ3Nbcl0pO3JldHVybiBudWxsIT1lLnRpbWVvdXRNaWxsaXMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRpbWVvdXRNaWxsaXMiKSYmdC51aW50MzIoNTYpLmludDMyKGUudGltZW91dE1pbGxpcyksbnVsbCE9ZS51c2VSdW5DYWNoZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidXNlUnVuQ2FjaGUiKSYmdC51aW50MzIoNjQpLmJvb2woZS51c2VSdW5DYWNoZSksbnVsbCE9ZS5kaXNhYmxlU2V0TWV0YWRhdGEmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRpc2FibGVTZXRNZXRhZGF0YSIpJiZ0LnVpbnQzMig3MikuYm9vbChlLmRpc2FibGVTZXRNZXRhZGF0YSksbnVsbCE9ZS5pbmNsdWRlRGVwZW5kZW50cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiaW5jbHVkZURlcGVuZGVudHMiKSYmdC51aW50MzIoODgpLmJvb2woZS5pbmNsdWRlRGVwZW5kZW50cyksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5SdW5Db25maWc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5hY3Rpb25zJiZuLmFjdGlvbnMubGVuZ3RofHwobi5hY3Rpb25zPVtdKSxuLmFjdGlvbnMucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDU6bi50YWdzJiZuLnRhZ3MubGVuZ3RofHwobi50YWdzPVtdKSxuLnRhZ3MucHVzaChlLnN0cmluZygpKTticmVhaztjYXNlIDM6bi5pbmNsdWRlRGVwZW5kZW5jaWVzPWUuYm9vbCgpO2JyZWFrO2Nhc2UgMTE6bi5pbmNsdWRlRGVwZW5kZW50cz1lLmJvb2woKTticmVhaztjYXNlIDI6bi5mdWxsUmVmcmVzaD1lLmJvb2woKTticmVhaztjYXNlIDc6bi50aW1lb3V0TWlsbGlzPWUuaW50MzIoKTticmVhaztjYXNlIDk6bi5kaXNhYmxlU2V0TWV0YWRhdGE9ZS5ib29sKCk7YnJlYWs7Y2FzZSA4Om4udXNlUnVuQ2FjaGU9ZS5ib29sKCk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUuYWN0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eSgiYWN0aW9ucyIpKXtpZighQXJyYXkuaXNBcnJheShlLmFjdGlvbnMpKXJldHVybiJhY3Rpb25zOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmFjdGlvbnMubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLmFjdGlvbnNbdF0pKXJldHVybiJhY3Rpb25zOiBzdHJpbmdbXSBleHBlY3RlZCJ9aWYobnVsbCE9ZS50YWdzJiZlLmhhc093blByb3BlcnR5KCJ0YWdzIikpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpcmV0dXJuInRhZ3M6IGFycmF5IGV4cGVjdGVkIjtmb3IodD0wO3Q8ZS50YWdzLmxlbmd0aDsrK3QpaWYoIWEuaXNTdHJpbmcoZS50YWdzW3RdKSlyZXR1cm4idGFnczogc3RyaW5nW10gZXhwZWN0ZWQifXJldHVybiBudWxsIT1lLmluY2x1ZGVEZXBlbmRlbmNpZXMmJmUuaGFzT3duUHJvcGVydHkoImluY2x1ZGVEZXBlbmRlbmNpZXMiKSYmImJvb2xlYW4iIT10eXBlb2YgZS5pbmNsdWRlRGVwZW5kZW5jaWVzPyJpbmNsdWRlRGVwZW5kZW5jaWVzOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLmluY2x1ZGVEZXBlbmRlbnRzJiZlLmhhc093blByb3BlcnR5KCJpbmNsdWRlRGVwZW5kZW50cyIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmluY2x1ZGVEZXBlbmRlbnRzPyJpbmNsdWRlRGVwZW5kZW50czogYm9vbGVhbiBleHBlY3RlZCI6bnVsbCE9ZS5mdWxsUmVmcmVzaCYmZS5oYXNPd25Qcm9wZXJ0eSgiZnVsbFJlZnJlc2giKSYmImJvb2xlYW4iIT10eXBlb2YgZS5mdWxsUmVmcmVzaD8iZnVsbFJlZnJlc2g6IGJvb2xlYW4gZXhwZWN0ZWQiOm51bGwhPWUudGltZW91dE1pbGxpcyYmZS5oYXNPd25Qcm9wZXJ0eSgidGltZW91dE1pbGxpcyIpJiYhYS5pc0ludGVnZXIoZS50aW1lb3V0TWlsbGlzKT8idGltZW91dE1pbGxpczogaW50ZWdlciBleHBlY3RlZCI6bnVsbCE9ZS5kaXNhYmxlU2V0TWV0YWRhdGEmJmUuaGFzT3duUHJvcGVydHkoImRpc2FibGVTZXRNZXRhZGF0YSIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmRpc2FibGVTZXRNZXRhZGF0YT8iZGlzYWJsZVNldE1ldGFkYXRhOiBib29sZWFuIGV4cGVjdGVkIjpudWxsIT1lLnVzZVJ1bkNhY2hlJiZlLmhhc093blByb3BlcnR5KCJ1c2VSdW5DYWNoZSIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLnVzZVJ1bkNhY2hlPyJ1c2VSdW5DYWNoZTogYm9vbGVhbiBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlJ1bkNvbmZpZylyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5SdW5Db25maWc7aWYoZS5hY3Rpb25zKXtpZighQXJyYXkuaXNBcnJheShlLmFjdGlvbnMpKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlJ1bkNvbmZpZy5hY3Rpb25zOiBhcnJheSBleHBlY3RlZCIpO3QuYWN0aW9ucz1bXTtmb3IodmFyIHI9MDtyPGUuYWN0aW9ucy5sZW5ndGg7KytyKXQuYWN0aW9uc1tyXT1TdHJpbmcoZS5hY3Rpb25zW3JdKX1pZihlLnRhZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUudGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uUnVuQ29uZmlnLnRhZ3M6IGFycmF5IGV4cGVjdGVkIik7Zm9yKHQudGFncz1bXSxyPTA7cjxlLnRhZ3MubGVuZ3RoOysrcil0LnRhZ3Nbcl09U3RyaW5nKGUudGFnc1tyXSl9cmV0dXJuIG51bGwhPWUuaW5jbHVkZURlcGVuZGVuY2llcyYmKHQuaW5jbHVkZURlcGVuZGVuY2llcz1Cb29sZWFuKGUuaW5jbHVkZURlcGVuZGVuY2llcykpLG51bGwhPWUuaW5jbHVkZURlcGVuZGVudHMmJih0LmluY2x1ZGVEZXBlbmRlbnRzPUJvb2xlYW4oZS5pbmNsdWRlRGVwZW5kZW50cykpLG51bGwhPWUuZnVsbFJlZnJlc2gmJih0LmZ1bGxSZWZyZXNoPUJvb2xlYW4oZS5mdWxsUmVmcmVzaCkpLG51bGwhPWUudGltZW91dE1pbGxpcyYmKHQudGltZW91dE1pbGxpcz0wfGUudGltZW91dE1pbGxpcyksbnVsbCE9ZS5kaXNhYmxlU2V0TWV0YWRhdGEmJih0LmRpc2FibGVTZXRNZXRhZGF0YT1Cb29sZWFuKGUuZGlzYWJsZVNldE1ldGFkYXRhKSksbnVsbCE9ZS51c2VSdW5DYWNoZSYmKHQudXNlUnVuQ2FjaGU9Qm9vbGVhbihlLnVzZVJ1bkNhY2hlKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5hY3Rpb25zPVtdLHIudGFncz1bXSksdC5kZWZhdWx0cyYmKHIuZnVsbFJlZnJlc2g9ITEsci5pbmNsdWRlRGVwZW5kZW5jaWVzPSExLHIudGltZW91dE1pbGxpcz0wLHIudXNlUnVuQ2FjaGU9ITEsci5kaXNhYmxlU2V0TWV0YWRhdGE9ITEsci5pbmNsdWRlRGVwZW5kZW50cz0hMSksZS5hY3Rpb25zJiZlLmFjdGlvbnMubGVuZ3RoKXtyLmFjdGlvbnM9W107Zm9yKHZhciBuPTA7bjxlLmFjdGlvbnMubGVuZ3RoOysrbilyLmFjdGlvbnNbbl09ZS5hY3Rpb25zW25dfWlmKG51bGwhPWUuZnVsbFJlZnJlc2gmJmUuaGFzT3duUHJvcGVydHkoImZ1bGxSZWZyZXNoIikmJihyLmZ1bGxSZWZyZXNoPWUuZnVsbFJlZnJlc2gpLG51bGwhPWUuaW5jbHVkZURlcGVuZGVuY2llcyYmZS5oYXNPd25Qcm9wZXJ0eSgiaW5jbHVkZURlcGVuZGVuY2llcyIpJiYoci5pbmNsdWRlRGVwZW5kZW5jaWVzPWUuaW5jbHVkZURlcGVuZGVuY2llcyksZS50YWdzJiZlLnRhZ3MubGVuZ3RoKWZvcihyLnRhZ3M9W10sbj0wO248ZS50YWdzLmxlbmd0aDsrK24pci50YWdzW25dPWUudGFnc1tuXTtyZXR1cm4gbnVsbCE9ZS50aW1lb3V0TWlsbGlzJiZlLmhhc093blByb3BlcnR5KCJ0aW1lb3V0TWlsbGlzIikmJihyLnRpbWVvdXRNaWxsaXM9ZS50aW1lb3V0TWlsbGlzKSxudWxsIT1lLnVzZVJ1bkNhY2hlJiZlLmhhc093blByb3BlcnR5KCJ1c2VSdW5DYWNoZSIpJiYoci51c2VSdW5DYWNoZT1lLnVzZVJ1bkNhY2hlKSxudWxsIT1lLmRpc2FibGVTZXRNZXRhZGF0YSYmZS5oYXNPd25Qcm9wZXJ0eSgiZGlzYWJsZVNldE1ldGFkYXRhIikmJihyLmRpc2FibGVTZXRNZXRhZGF0YT1lLmRpc2FibGVTZXRNZXRhZGF0YSksbnVsbCE9ZS5pbmNsdWRlRGVwZW5kZW50cyYmZS5oYXNPd25Qcm9wZXJ0eSgiaW5jbHVkZURlcGVuZGVudHMiKSYmKHIuaW5jbHVkZURlcGVuZGVudHM9ZS5pbmNsdWRlRGVwZW5kZW50cykscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uUnVuQ29uZmlnIn0sdH0oKSxuLkV4ZWN1dGlvblRhc2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUudHlwZT0iIix0LnByb3RvdHlwZS5zdGF0ZW1lbnQ9IiIsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnR5cGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInR5cGUiKSYmdC51aW50MzIoMTApLnN0cmluZyhlLnR5cGUpLG51bGwhPWUuc3RhdGVtZW50JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJzdGF0ZW1lbnQiKSYmdC51aW50MzIoMTgpLnN0cmluZyhlLnN0YXRlbWVudCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5FeGVjdXRpb25UYXNrO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4udHlwZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuLnN0YXRlbWVudD1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZT8ib2JqZWN0IGV4cGVjdGVkIjpudWxsIT1lLnR5cGUmJmUuaGFzT3duUHJvcGVydHkoInR5cGUiKSYmIWEuaXNTdHJpbmcoZS50eXBlKT8idHlwZTogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLnN0YXRlbWVudCYmZS5oYXNPd25Qcm9wZXJ0eSgic3RhdGVtZW50IikmJiFhLmlzU3RyaW5nKGUuc3RhdGVtZW50KT8ic3RhdGVtZW50OiBzdHJpbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5FeGVjdXRpb25UYXNrKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkV4ZWN1dGlvblRhc2s7cmV0dXJuIG51bGwhPWUudHlwZSYmKHQudHlwZT1TdHJpbmcoZS50eXBlKSksbnVsbCE9ZS5zdGF0ZW1lbnQmJih0LnN0YXRlbWVudD1TdHJpbmcoZS5zdGF0ZW1lbnQpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci50eXBlPSIiLHIuc3RhdGVtZW50PSIiKSxudWxsIT1lLnR5cGUmJmUuaGFzT3duUHJvcGVydHkoInR5cGUiKSYmKHIudHlwZT1lLnR5cGUpLG51bGwhPWUuc3RhdGVtZW50JiZlLmhhc093blByb3BlcnR5KCJzdGF0ZW1lbnQiKSYmKHIuc3RhdGVtZW50PWUuc3RhdGVtZW50KSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5FeGVjdXRpb25UYXNrIn0sdH0oKSxuLkV4ZWN1dGlvbkFjdGlvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5kZXBlbmRlbmN5VGFyZ2V0cz1bXSx0aGlzLnRhc2tzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUudGFyZ2V0PW51bGwsdC5wcm90b3R5cGUuZmlsZU5hbWU9IiIsdC5wcm90b3R5cGUudHlwZT0iIix0LnByb3RvdHlwZS50YWJsZVR5cGU9IiIsdC5wcm90b3R5cGUuZGVwZW5kZW5jeVRhcmdldHM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmhlcm1ldGljaXR5PTAsdC5wcm90b3R5cGUudGFza3M9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmFjdGlvbkRlc2NyaXB0b3I9bnVsbCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS50YXNrcyYmZS50YXNrcy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLnRhc2tzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5FeGVjdXRpb25UYXNrLmVuY29kZShlLnRhc2tzW3JdLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO2lmKG51bGwhPWUudHlwZSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidHlwZSIpJiZ0LnVpbnQzMigzNCkuc3RyaW5nKGUudHlwZSksbnVsbCE9ZS50YXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS50YXJnZXQsdC51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS50YWJsZVR5cGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRhYmxlVHlwZSIpJiZ0LnVpbnQzMig1MCkuc3RyaW5nKGUudGFibGVUeXBlKSxudWxsIT1lLmZpbGVOYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJmaWxlTmFtZSIpJiZ0LnVpbnQzMig2Nikuc3RyaW5nKGUuZmlsZU5hbWUpLG51bGwhPWUuYWN0aW9uRGVzY3JpcHRvciYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYWN0aW9uRGVzY3JpcHRvciIpJiZzLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IuZW5jb2RlKGUuYWN0aW9uRGVzY3JpcHRvcix0LnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmhlcm1ldGljaXR5JiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJoZXJtZXRpY2l0eSIpJiZ0LnVpbnQzMig4MCkuaW50MzIoZS5oZXJtZXRpY2l0eSksbnVsbCE9ZS5kZXBlbmRlbmN5VGFyZ2V0cyYmZS5kZXBlbmRlbmN5VGFyZ2V0cy5sZW5ndGgpZm9yKHI9MDtyPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSx0LnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKTtyZXR1cm4gdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5FeGVjdXRpb25BY3Rpb247ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDU6bi50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA4Om4uZmlsZU5hbWU9ZS5zdHJpbmcoKTticmVhaztjYXNlIDQ6bi50eXBlPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA2Om4udGFibGVUeXBlPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxMTpuLmRlcGVuZGVuY3lUYXJnZXRzJiZuLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aHx8KG4uZGVwZW5kZW5jeVRhcmdldHM9W10pLG4uZGVwZW5kZW5jeVRhcmdldHMucHVzaChzLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAxMDpuLmhlcm1ldGljaXR5PWUuaW50MzIoKTticmVhaztjYXNlIDI6bi50YXNrcyYmbi50YXNrcy5sZW5ndGh8fChuLnRhc2tzPVtdKSxuLnRhc2tzLnB1c2gocy5kYXRhZm9ybS5FeGVjdXRpb25UYXNrLmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDk6bi5hY3Rpb25EZXNjcmlwdG9yPXMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYocj1zLmRhdGFmb3JtLlRhcmdldC52ZXJpZnkoZS50YXJnZXQpKSlyZXR1cm4idGFyZ2V0LiIrcjtpZihudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYhYS5pc1N0cmluZyhlLmZpbGVOYW1lKSlyZXR1cm4iZmlsZU5hbWU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS50eXBlJiZlLmhhc093blByb3BlcnR5KCJ0eXBlIikmJiFhLmlzU3RyaW5nKGUudHlwZSkpcmV0dXJuInR5cGU6IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS50YWJsZVR5cGUmJmUuaGFzT3duUHJvcGVydHkoInRhYmxlVHlwZSIpJiYhYS5pc1N0cmluZyhlLnRhYmxlVHlwZSkpcmV0dXJuInRhYmxlVHlwZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmRlcGVuZGVuY3lUYXJnZXRzJiZlLmhhc093blByb3BlcnR5KCJkZXBlbmRlbmN5VGFyZ2V0cyIpKXtpZighQXJyYXkuaXNBcnJheShlLmRlcGVuZGVuY3lUYXJnZXRzKSlyZXR1cm4iZGVwZW5kZW5jeVRhcmdldHM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrdClpZihyPXMuZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeShlLmRlcGVuZGVuY3lUYXJnZXRzW3RdKSlyZXR1cm4iZGVwZW5kZW5jeVRhcmdldHMuIityfWlmKG51bGwhPWUuaGVybWV0aWNpdHkmJmUuaGFzT3duUHJvcGVydHkoImhlcm1ldGljaXR5Iikpc3dpdGNoKGUuaGVybWV0aWNpdHkpe2RlZmF1bHQ6cmV0dXJuImhlcm1ldGljaXR5OiBlbnVtIHZhbHVlIGV4cGVjdGVkIjtjYXNlIDA6Y2FzZSAxOmNhc2UgMjp9aWYobnVsbCE9ZS50YXNrcyYmZS5oYXNPd25Qcm9wZXJ0eSgidGFza3MiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YXNrcykpcmV0dXJuInRhc2tzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHQ9MDt0PGUudGFza3MubGVuZ3RoOysrdCl7dmFyIHI7aWYocj1zLmRhdGFmb3JtLkV4ZWN1dGlvblRhc2sudmVyaWZ5KGUudGFza3NbdF0pKXJldHVybiJ0YXNrcy4iK3J9fXJldHVybiBudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3ImJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbkRlc2NyaXB0b3IiKSYmKHI9cy5kYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLnZlcmlmeShlLmFjdGlvbkRlc2NyaXB0b3IpKT8iYWN0aW9uRGVzY3JpcHRvci4iK3I6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5FeGVjdXRpb25BY3Rpb247aWYobnVsbCE9ZS50YXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS50YXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRXhlY3V0aW9uQWN0aW9uLnRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLnRhcmdldCl9aWYobnVsbCE9ZS5maWxlTmFtZSYmKHQuZmlsZU5hbWU9U3RyaW5nKGUuZmlsZU5hbWUpKSxudWxsIT1lLnR5cGUmJih0LnR5cGU9U3RyaW5nKGUudHlwZSkpLG51bGwhPWUudGFibGVUeXBlJiYodC50YWJsZVR5cGU9U3RyaW5nKGUudGFibGVUeXBlKSksZS5kZXBlbmRlbmN5VGFyZ2V0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kZXBlbmRlbmN5VGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRXhlY3V0aW9uQWN0aW9uLmRlcGVuZGVuY3lUYXJnZXRzOiBhcnJheSBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlcGVuZGVuY3lUYXJnZXRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5kZXBlbmRlbmN5VGFyZ2V0c1tyXSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25BY3Rpb24uZGVwZW5kZW5jeVRhcmdldHM6IG9iamVjdCBleHBlY3RlZCIpO3QuZGVwZW5kZW5jeVRhcmdldHNbcl09cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLmRlcGVuZGVuY3lUYXJnZXRzW3JdKX19c3dpdGNoKGUuaGVybWV0aWNpdHkpe2RlZmF1bHQ6aWYoIm51bWJlciI9PXR5cGVvZiBlLmhlcm1ldGljaXR5KXt0Lmhlcm1ldGljaXR5PWUuaGVybWV0aWNpdHk7YnJlYWt9YnJlYWs7Y2FzZSJVTktOT1dOIjpjYXNlIDA6dC5oZXJtZXRpY2l0eT0wO2JyZWFrO2Nhc2UiSEVSTUVUSUMiOmNhc2UgMTp0Lmhlcm1ldGljaXR5PTE7YnJlYWs7Y2FzZSJOT05fSEVSTUVUSUMiOmNhc2UgMjp0Lmhlcm1ldGljaXR5PTJ9aWYoZS50YXNrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS50YXNrcykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRXhlY3V0aW9uQWN0aW9uLnRhc2tzOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LnRhc2tzPVtdLHI9MDtyPGUudGFza3MubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRhc2tzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbi50YXNrczogb2JqZWN0IGV4cGVjdGVkIik7dC50YXNrc1tyXT1zLmRhdGFmb3JtLkV4ZWN1dGlvblRhc2suZnJvbU9iamVjdChlLnRhc2tzW3JdKX19aWYobnVsbCE9ZS5hY3Rpb25EZXNjcmlwdG9yKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYWN0aW9uRGVzY3JpcHRvcil0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25BY3Rpb24uYWN0aW9uRGVzY3JpcHRvcjogb2JqZWN0IGV4cGVjdGVkIik7dC5hY3Rpb25EZXNjcmlwdG9yPXMuZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvci5mcm9tT2JqZWN0KGUuYWN0aW9uRGVzY3JpcHRvcil9cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIudGFza3M9W10sci5kZXBlbmRlbmN5VGFyZ2V0cz1bXSksdC5kZWZhdWx0cyYmKHIudHlwZT0iIixyLnRhcmdldD1udWxsLHIudGFibGVUeXBlPSIiLHIuZmlsZU5hbWU9IiIsci5hY3Rpb25EZXNjcmlwdG9yPW51bGwsci5oZXJtZXRpY2l0eT10LmVudW1zPT09U3RyaW5nPyJVTktOT1dOIjowKSxlLnRhc2tzJiZlLnRhc2tzLmxlbmd0aCl7ci50YXNrcz1bXTtmb3IodmFyIG49MDtuPGUudGFza3MubGVuZ3RoOysrbilyLnRhc2tzW25dPXMuZGF0YWZvcm0uRXhlY3V0aW9uVGFzay50b09iamVjdChlLnRhc2tzW25dLHQpfWlmKG51bGwhPWUudHlwZSYmZS5oYXNPd25Qcm9wZXJ0eSgidHlwZSIpJiYoci50eXBlPWUudHlwZSksbnVsbCE9ZS50YXJnZXQmJmUuaGFzT3duUHJvcGVydHkoInRhcmdldCIpJiYoci50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS50YXJnZXQsdCkpLG51bGwhPWUudGFibGVUeXBlJiZlLmhhc093blByb3BlcnR5KCJ0YWJsZVR5cGUiKSYmKHIudGFibGVUeXBlPWUudGFibGVUeXBlKSxudWxsIT1lLmZpbGVOYW1lJiZlLmhhc093blByb3BlcnR5KCJmaWxlTmFtZSIpJiYoci5maWxlTmFtZT1lLmZpbGVOYW1lKSxudWxsIT1lLmFjdGlvbkRlc2NyaXB0b3ImJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbkRlc2NyaXB0b3IiKSYmKHIuYWN0aW9uRGVzY3JpcHRvcj1zLmRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudG9PYmplY3QoZS5hY3Rpb25EZXNjcmlwdG9yLHQpKSxudWxsIT1lLmhlcm1ldGljaXR5JiZlLmhhc093blByb3BlcnR5KCJoZXJtZXRpY2l0eSIpJiYoci5oZXJtZXRpY2l0eT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHlbZS5oZXJtZXRpY2l0eV0/ZS5oZXJtZXRpY2l0eTpzLmRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5W2UuaGVybWV0aWNpdHldOmUuaGVybWV0aWNpdHkpLGUuZGVwZW5kZW5jeVRhcmdldHMmJmUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoKWZvcihyLmRlcGVuZGVuY3lUYXJnZXRzPVtdLG49MDtuPGUuZGVwZW5kZW5jeVRhcmdldHMubGVuZ3RoOysrbilyLmRlcGVuZGVuY3lUYXJnZXRzW25dPXMuZGF0YWZvcm0uVGFyZ2V0LnRvT2JqZWN0KGUuZGVwZW5kZW5jeVRhcmdldHNbbl0sdCk7cmV0dXJuIHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbiJ9LHR9KCksbi5XYXJlaG91c2VTdGF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy50YWJsZXM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS50YWJsZXM9YS5lbXB0eUFycmF5LHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnRhYmxlcyYmZS50YWJsZXMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS50YWJsZXMubGVuZ3RoOysrcilzLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuZW5jb2RlKGUudGFibGVzW3JdLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLldhcmVob3VzZVN0YXRlO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2k+Pj4zPT0xPyhuLnRhYmxlcyYmbi50YWJsZXMubGVuZ3RofHwobi50YWJsZXM9W10pLG4udGFibGVzLnB1c2gocy5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLmRlY29kZShlLGUudWludDMyKCkpKSk6ZS5za2lwVHlwZSg3JmkpfXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFibGVzJiZlLmhhc093blByb3BlcnR5KCJ0YWJsZXMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS50YWJsZXMpKXJldHVybiJ0YWJsZXM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUudGFibGVzLmxlbmd0aDsrK3Qpe3ZhciByPXMuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS52ZXJpZnkoZS50YWJsZXNbdF0pO2lmKHIpcmV0dXJuInRhYmxlcy4iK3J9fXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uV2FyZWhvdXNlU3RhdGUpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uV2FyZWhvdXNlU3RhdGU7aWYoZS50YWJsZXMpe2lmKCFBcnJheS5pc0FycmF5KGUudGFibGVzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5XYXJlaG91c2VTdGF0ZS50YWJsZXM6IGFycmF5IGV4cGVjdGVkIik7dC50YWJsZXM9W107Zm9yKHZhciByPTA7cjxlLnRhYmxlcy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUudGFibGVzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLldhcmVob3VzZVN0YXRlLnRhYmxlczogb2JqZWN0IGV4cGVjdGVkIik7dC50YWJsZXNbcl09cy5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLmZyb21PYmplY3QoZS50YWJsZXNbcl0pfX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci50YWJsZXM9W10pLGUudGFibGVzJiZlLnRhYmxlcy5sZW5ndGgpe3IudGFibGVzPVtdO2Zvcih2YXIgbj0wO248ZS50YWJsZXMubGVuZ3RoOysrbilyLnRhYmxlc1tuXT1zLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGEudG9PYmplY3QoZS50YWJsZXNbbl0sdCl9cmV0dXJuIHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLldhcmVob3VzZVN0YXRlIn0sdH0oKSxuLkV4ZWN1dGlvbkdyYXBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLmRlY2xhcmF0aW9uVGFyZ2V0cz1bXSx0aGlzLmFjdGlvbnM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5wcm9qZWN0Q29uZmlnPW51bGwsdC5wcm90b3R5cGUucnVuQ29uZmlnPW51bGwsdC5wcm90b3R5cGUud2FyZWhvdXNlU3RhdGU9bnVsbCx0LnByb3RvdHlwZS5kZWNsYXJhdGlvblRhcmdldHM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLmFjdGlvbnM9YS5lbXB0eUFycmF5LHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnByb2plY3RDb25maWcmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3RDb25maWciKSYmcy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmVuY29kZShlLnByb2plY3RDb25maWcsdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5ydW5Db25maWcmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInJ1bkNvbmZpZyIpJiZzLmRhdGFmb3JtLlJ1bkNvbmZpZy5lbmNvZGUoZS5ydW5Db25maWcsdC51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5hY3Rpb25zJiZlLmFjdGlvbnMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5hY3Rpb25zLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5FeGVjdXRpb25BY3Rpb24uZW5jb2RlKGUuYWN0aW9uc1tyXSx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLndhcmVob3VzZVN0YXRlJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ3YXJlaG91c2VTdGF0ZSIpJiZzLmRhdGFmb3JtLldhcmVob3VzZVN0YXRlLmVuY29kZShlLndhcmVob3VzZVN0YXRlLHQudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUuZGVjbGFyYXRpb25UYXJnZXRzJiZlLmRlY2xhcmF0aW9uVGFyZ2V0cy5sZW5ndGgpZm9yKHI9MDtyPGUuZGVjbGFyYXRpb25UYXJnZXRzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5UYXJnZXQuZW5jb2RlKGUuZGVjbGFyYXRpb25UYXJnZXRzW3JdLHQudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO3N3aXRjaChpPj4+Myl7Y2FzZSAxOm4ucHJvamVjdENvbmZpZz1zLmRhdGFmb3JtLlByb2plY3RDb25maWcuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAyOm4ucnVuQ29uZmlnPXMuZGF0YWZvcm0uUnVuQ29uZmlnLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgNDpuLndhcmVob3VzZVN0YXRlPXMuZGF0YWZvcm0uV2FyZWhvdXNlU3RhdGUuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA1Om4uZGVjbGFyYXRpb25UYXJnZXRzJiZuLmRlY2xhcmF0aW9uVGFyZ2V0cy5sZW5ndGh8fChuLmRlY2xhcmF0aW9uVGFyZ2V0cz1bXSksbi5kZWNsYXJhdGlvblRhcmdldHMucHVzaChzLmRhdGFmb3JtLlRhcmdldC5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAzOm4uYWN0aW9ucyYmbi5hY3Rpb25zLmxlbmd0aHx8KG4uYWN0aW9ucz1bXSksbi5hY3Rpb25zLnB1c2gocy5kYXRhZm9ybS5FeGVjdXRpb25BY3Rpb24uZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLnByb2plY3RDb25maWcmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3RDb25maWciKSYmKHI9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLnZlcmlmeShlLnByb2plY3RDb25maWcpKSlyZXR1cm4icHJvamVjdENvbmZpZy4iK3I7aWYobnVsbCE9ZS5ydW5Db25maWcmJmUuaGFzT3duUHJvcGVydHkoInJ1bkNvbmZpZyIpJiYocj1zLmRhdGFmb3JtLlJ1bkNvbmZpZy52ZXJpZnkoZS5ydW5Db25maWcpKSlyZXR1cm4icnVuQ29uZmlnLiIrcjtpZihudWxsIT1lLndhcmVob3VzZVN0YXRlJiZlLmhhc093blByb3BlcnR5KCJ3YXJlaG91c2VTdGF0ZSIpJiYocj1zLmRhdGFmb3JtLldhcmVob3VzZVN0YXRlLnZlcmlmeShlLndhcmVob3VzZVN0YXRlKSkpcmV0dXJuIndhcmVob3VzZVN0YXRlLiIrcjtpZihudWxsIT1lLmRlY2xhcmF0aW9uVGFyZ2V0cyYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVjbGFyYXRpb25UYXJnZXRzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVjbGFyYXRpb25UYXJnZXRzKSlyZXR1cm4iZGVjbGFyYXRpb25UYXJnZXRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmRlY2xhcmF0aW9uVGFyZ2V0cy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUuZGVjbGFyYXRpb25UYXJnZXRzW3RdKSlyZXR1cm4iZGVjbGFyYXRpb25UYXJnZXRzLiIrcn1pZihudWxsIT1lLmFjdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoImFjdGlvbnMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5hY3Rpb25zKSlyZXR1cm4iYWN0aW9uczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih0PTA7dDxlLmFjdGlvbnMubGVuZ3RoOysrdCl7dmFyIHI7aWYocj1zLmRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbi52ZXJpZnkoZS5hY3Rpb25zW3RdKSlyZXR1cm4iYWN0aW9ucy4iK3J9fXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uRXhlY3V0aW9uR3JhcGgpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uRXhlY3V0aW9uR3JhcGg7aWYobnVsbCE9ZS5wcm9qZWN0Q29uZmlnKXtpZigib2JqZWN0IiE9dHlwZW9mIGUucHJvamVjdENvbmZpZyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25HcmFwaC5wcm9qZWN0Q29uZmlnOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnByb2plY3RDb25maWc9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLmZyb21PYmplY3QoZS5wcm9qZWN0Q29uZmlnKX1pZihudWxsIT1lLnJ1bkNvbmZpZyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnJ1bkNvbmZpZyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25HcmFwaC5ydW5Db25maWc6IG9iamVjdCBleHBlY3RlZCIpO3QucnVuQ29uZmlnPXMuZGF0YWZvcm0uUnVuQ29uZmlnLmZyb21PYmplY3QoZS5ydW5Db25maWcpfWlmKG51bGwhPWUud2FyZWhvdXNlU3RhdGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZS53YXJlaG91c2VTdGF0ZSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25HcmFwaC53YXJlaG91c2VTdGF0ZTogb2JqZWN0IGV4cGVjdGVkIik7dC53YXJlaG91c2VTdGF0ZT1zLmRhdGFmb3JtLldhcmVob3VzZVN0YXRlLmZyb21PYmplY3QoZS53YXJlaG91c2VTdGF0ZSl9aWYoZS5kZWNsYXJhdGlvblRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVjbGFyYXRpb25UYXJnZXRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25HcmFwaC5kZWNsYXJhdGlvblRhcmdldHM6IGFycmF5IGV4cGVjdGVkIik7dC5kZWNsYXJhdGlvblRhcmdldHM9W107Zm9yKHZhciByPTA7cjxlLmRlY2xhcmF0aW9uVGFyZ2V0cy5sZW5ndGg7KytyKXtpZigib2JqZWN0IiE9dHlwZW9mIGUuZGVjbGFyYXRpb25UYXJnZXRzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoLmRlY2xhcmF0aW9uVGFyZ2V0czogb2JqZWN0IGV4cGVjdGVkIik7dC5kZWNsYXJhdGlvblRhcmdldHNbcl09cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLmRlY2xhcmF0aW9uVGFyZ2V0c1tyXSl9fWlmKGUuYWN0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5hY3Rpb25zKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5FeGVjdXRpb25HcmFwaC5hY3Rpb25zOiBhcnJheSBleHBlY3RlZCIpO2Zvcih0LmFjdGlvbnM9W10scj0wO3I8ZS5hY3Rpb25zLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hY3Rpb25zW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoLmFjdGlvbnM6IG9iamVjdCBleHBlY3RlZCIpO3QuYWN0aW9uc1tyXT1zLmRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbi5mcm9tT2JqZWN0KGUuYWN0aW9uc1tyXSl9fXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLmFjdGlvbnM9W10sci5kZWNsYXJhdGlvblRhcmdldHM9W10pLHQuZGVmYXVsdHMmJihyLnByb2plY3RDb25maWc9bnVsbCxyLnJ1bkNvbmZpZz1udWxsLHIud2FyZWhvdXNlU3RhdGU9bnVsbCksbnVsbCE9ZS5wcm9qZWN0Q29uZmlnJiZlLmhhc093blByb3BlcnR5KCJwcm9qZWN0Q29uZmlnIikmJihyLnByb2plY3RDb25maWc9cy5kYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLnRvT2JqZWN0KGUucHJvamVjdENvbmZpZyx0KSksbnVsbCE9ZS5ydW5Db25maWcmJmUuaGFzT3duUHJvcGVydHkoInJ1bkNvbmZpZyIpJiYoci5ydW5Db25maWc9cy5kYXRhZm9ybS5SdW5Db25maWcudG9PYmplY3QoZS5ydW5Db25maWcsdCkpLGUuYWN0aW9ucyYmZS5hY3Rpb25zLmxlbmd0aCl7ci5hY3Rpb25zPVtdO2Zvcih2YXIgbj0wO248ZS5hY3Rpb25zLmxlbmd0aDsrK24pci5hY3Rpb25zW25dPXMuZGF0YWZvcm0uRXhlY3V0aW9uQWN0aW9uLnRvT2JqZWN0KGUuYWN0aW9uc1tuXSx0KX1pZihudWxsIT1lLndhcmVob3VzZVN0YXRlJiZlLmhhc093blByb3BlcnR5KCJ3YXJlaG91c2VTdGF0ZSIpJiYoci53YXJlaG91c2VTdGF0ZT1zLmRhdGFmb3JtLldhcmVob3VzZVN0YXRlLnRvT2JqZWN0KGUud2FyZWhvdXNlU3RhdGUsdCkpLGUuZGVjbGFyYXRpb25UYXJnZXRzJiZlLmRlY2xhcmF0aW9uVGFyZ2V0cy5sZW5ndGgpZm9yKHIuZGVjbGFyYXRpb25UYXJnZXRzPVtdLG49MDtuPGUuZGVjbGFyYXRpb25UYXJnZXRzLmxlbmd0aDsrK24pci5kZWNsYXJhdGlvblRhcmdldHNbbl09cy5kYXRhZm9ybS5UYXJnZXQudG9PYmplY3QoZS5kZWNsYXJhdGlvblRhcmdldHNbbl0sdCk7cmV0dXJuIHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoIn0sdH0oKSxuLlRpbWluZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5zdGFydFRpbWVNaWxsaXM9MCx0LnByb3RvdHlwZS5lbmRUaW1lTWlsbGlzPTAsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnN0YXJ0VGltZU1pbGxpcyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwic3RhcnRUaW1lTWlsbGlzIikmJnQudWludDMyKDgpLmludDY0KGUuc3RhcnRUaW1lTWlsbGlzKSxudWxsIT1lLmVuZFRpbWVNaWxsaXMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImVuZFRpbWVNaWxsaXMiKSYmdC51aW50MzIoMTYpLmludDY0KGUuZW5kVGltZU1pbGxpcyksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5UaW1pbmc7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5zdGFydFRpbWVNaWxsaXM9ZS5pbnQ2NCgpO2JyZWFrO2Nhc2UgMjpuLmVuZFRpbWVNaWxsaXM9ZS5pbnQ2NCgpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZT8ib2JqZWN0IGV4cGVjdGVkIjpudWxsIT1lLnN0YXJ0VGltZU1pbGxpcyYmZS5oYXNPd25Qcm9wZXJ0eSgic3RhcnRUaW1lTWlsbGlzIikmJiEoYS5pc0ludGVnZXIoZS5zdGFydFRpbWVNaWxsaXMpfHxlLnN0YXJ0VGltZU1pbGxpcyYmYS5pc0ludGVnZXIoZS5zdGFydFRpbWVNaWxsaXMubG93KSYmYS5pc0ludGVnZXIoZS5zdGFydFRpbWVNaWxsaXMuaGlnaCkpPyJzdGFydFRpbWVNaWxsaXM6IGludGVnZXJ8TG9uZyBleHBlY3RlZCI6bnVsbCE9ZS5lbmRUaW1lTWlsbGlzJiZlLmhhc093blByb3BlcnR5KCJlbmRUaW1lTWlsbGlzIikmJiEoYS5pc0ludGVnZXIoZS5lbmRUaW1lTWlsbGlzKXx8ZS5lbmRUaW1lTWlsbGlzJiZhLmlzSW50ZWdlcihlLmVuZFRpbWVNaWxsaXMubG93KSYmYS5pc0ludGVnZXIoZS5lbmRUaW1lTWlsbGlzLmhpZ2gpKT8iZW5kVGltZU1pbGxpczogaW50ZWdlcnxMb25nIGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uVGltaW5nKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLlRpbWluZztyZXR1cm4gbnVsbCE9ZS5zdGFydFRpbWVNaWxsaXMmJihhLkxvbmc/KHQuc3RhcnRUaW1lTWlsbGlzPWEuTG9uZy5mcm9tVmFsdWUoZS5zdGFydFRpbWVNaWxsaXMpKS51bnNpZ25lZD0hMToic3RyaW5nIj09dHlwZW9mIGUuc3RhcnRUaW1lTWlsbGlzP3Quc3RhcnRUaW1lTWlsbGlzPXBhcnNlSW50KGUuc3RhcnRUaW1lTWlsbGlzLDEwKToibnVtYmVyIj09dHlwZW9mIGUuc3RhcnRUaW1lTWlsbGlzP3Quc3RhcnRUaW1lTWlsbGlzPWUuc3RhcnRUaW1lTWlsbGlzOiJvYmplY3QiPT10eXBlb2YgZS5zdGFydFRpbWVNaWxsaXMmJih0LnN0YXJ0VGltZU1pbGxpcz1uZXcgYS5Mb25nQml0cyhlLnN0YXJ0VGltZU1pbGxpcy5sb3c+Pj4wLGUuc3RhcnRUaW1lTWlsbGlzLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5lbmRUaW1lTWlsbGlzJiYoYS5Mb25nPyh0LmVuZFRpbWVNaWxsaXM9YS5Mb25nLmZyb21WYWx1ZShlLmVuZFRpbWVNaWxsaXMpKS51bnNpZ25lZD0hMToic3RyaW5nIj09dHlwZW9mIGUuZW5kVGltZU1pbGxpcz90LmVuZFRpbWVNaWxsaXM9cGFyc2VJbnQoZS5lbmRUaW1lTWlsbGlzLDEwKToibnVtYmVyIj09dHlwZW9mIGUuZW5kVGltZU1pbGxpcz90LmVuZFRpbWVNaWxsaXM9ZS5lbmRUaW1lTWlsbGlzOiJvYmplY3QiPT10eXBlb2YgZS5lbmRUaW1lTWlsbGlzJiYodC5lbmRUaW1lTWlsbGlzPW5ldyBhLkxvbmdCaXRzKGUuZW5kVGltZU1pbGxpcy5sb3c+Pj4wLGUuZW5kVGltZU1pbGxpcy5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307cmV0dXJuIHQuZGVmYXVsdHMmJihyLnN0YXJ0VGltZU1pbGxpcz0wLHIuZW5kVGltZU1pbGxpcz0wKSxudWxsIT1lLnN0YXJ0VGltZU1pbGxpcyYmZS5oYXNPd25Qcm9wZXJ0eSgic3RhcnRUaW1lTWlsbGlzIikmJigibnVtYmVyIj09dHlwZW9mIGUuc3RhcnRUaW1lTWlsbGlzP3Iuc3RhcnRUaW1lTWlsbGlzPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUuc3RhcnRUaW1lTWlsbGlzKTplLnN0YXJ0VGltZU1pbGxpczpyLnN0YXJ0VGltZU1pbGxpcz10LmxvbmdzPT09U3RyaW5nP2EuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLnN0YXJ0VGltZU1pbGxpcyk6dC5sb25ncz09PU51bWJlcj9uZXcgYS5Mb25nQml0cyhlLnN0YXJ0VGltZU1pbGxpcy5sb3c+Pj4wLGUuc3RhcnRUaW1lTWlsbGlzLmhpZ2g+Pj4wKS50b051bWJlcigpOmUuc3RhcnRUaW1lTWlsbGlzKSxudWxsIT1lLmVuZFRpbWVNaWxsaXMmJmUuaGFzT3duUHJvcGVydHkoImVuZFRpbWVNaWxsaXMiKSYmKCJudW1iZXIiPT10eXBlb2YgZS5lbmRUaW1lTWlsbGlzP3IuZW5kVGltZU1pbGxpcz10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLmVuZFRpbWVNaWxsaXMpOmUuZW5kVGltZU1pbGxpczpyLmVuZFRpbWVNaWxsaXM9dC5sb25ncz09PVN0cmluZz9hLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5lbmRUaW1lTWlsbGlzKTp0LmxvbmdzPT09TnVtYmVyP25ldyBhLkxvbmdCaXRzKGUuZW5kVGltZU1pbGxpcy5sb3c+Pj4wLGUuZW5kVGltZU1pbGxpcy5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmVuZFRpbWVNaWxsaXMpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLlRpbWluZyJ9LHR9KCksbi5SdW5SZXN1bHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuYWN0aW9ucz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnN0YXR1cz0wLHQucHJvdG90eXBlLmFjdGlvbnM9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnRpbWluZz1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnN0YXR1cyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwic3RhdHVzIikmJnQudWludDMyKDgpLmludDMyKGUuc3RhdHVzKSxudWxsIT1lLmFjdGlvbnMmJmUuYWN0aW9ucy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLmFjdGlvbnMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkFjdGlvblJlc3VsdC5lbmNvZGUoZS5hY3Rpb25zW3JdLHQudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO3JldHVybiBudWxsIT1lLnRpbWluZyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidGltaW5nIikmJnMuZGF0YWZvcm0uVGltaW5nLmVuY29kZShlLnRpbWluZyx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLlJ1blJlc3VsdDtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLnN0YXR1cz1lLmludDMyKCk7YnJlYWs7Y2FzZSAyOm4uYWN0aW9ucyYmbi5hY3Rpb25zLmxlbmd0aHx8KG4uYWN0aW9ucz1bXSksbi5hY3Rpb25zLnB1c2gocy5kYXRhZm9ybS5BY3Rpb25SZXN1bHQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgMzpuLnRpbWluZz1zLmRhdGFmb3JtLlRpbWluZy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuIm9iamVjdCBleHBlY3RlZCI7aWYobnVsbCE9ZS5zdGF0dXMmJmUuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKXN3aXRjaChlLnN0YXR1cyl7ZGVmYXVsdDpyZXR1cm4ic3RhdHVzOiBlbnVtIHZhbHVlIGV4cGVjdGVkIjtjYXNlIDA6Y2FzZSAxOmNhc2UgMjpjYXNlIDM6Y2FzZSA0OmNhc2UgNTp9aWYobnVsbCE9ZS5hY3Rpb25zJiZlLmhhc093blByb3BlcnR5KCJhY3Rpb25zIikpe2lmKCFBcnJheS5pc0FycmF5KGUuYWN0aW9ucykpcmV0dXJuImFjdGlvbnM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUuYWN0aW9ucy5sZW5ndGg7Kyt0KWlmKHI9cy5kYXRhZm9ybS5BY3Rpb25SZXN1bHQudmVyaWZ5KGUuYWN0aW9uc1t0XSkpcmV0dXJuImFjdGlvbnMuIityfXZhciByO3JldHVybiBudWxsIT1lLnRpbWluZyYmZS5oYXNPd25Qcm9wZXJ0eSgidGltaW5nIikmJihyPXMuZGF0YWZvcm0uVGltaW5nLnZlcmlmeShlLnRpbWluZykpPyJ0aW1pbmcuIityOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5SdW5SZXN1bHQpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uUnVuUmVzdWx0O3N3aXRjaChlLnN0YXR1cyl7ZGVmYXVsdDppZigibnVtYmVyIj09dHlwZW9mIGUuc3RhdHVzKXt0LnN0YXR1cz1lLnN0YXR1czticmVha31icmVhaztjYXNlIlVOS05PV04iOmNhc2UgMDp0LnN0YXR1cz0wO2JyZWFrO2Nhc2UiUlVOTklORyI6Y2FzZSAxOnQuc3RhdHVzPTE7YnJlYWs7Y2FzZSJTVUNDRVNTRlVMIjpjYXNlIDI6dC5zdGF0dXM9MjticmVhaztjYXNlIkZBSUxFRCI6Y2FzZSAzOnQuc3RhdHVzPTM7YnJlYWs7Y2FzZSJDQU5DRUxMRUQiOmNhc2UgNDp0LnN0YXR1cz00O2JyZWFrO2Nhc2UiVElNRURfT1VUIjpjYXNlIDU6dC5zdGF0dXM9NX1pZihlLmFjdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUuYWN0aW9ucykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uUnVuUmVzdWx0LmFjdGlvbnM6IGFycmF5IGV4cGVjdGVkIik7dC5hY3Rpb25zPVtdO2Zvcih2YXIgcj0wO3I8ZS5hY3Rpb25zLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5hY3Rpb25zW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLlJ1blJlc3VsdC5hY3Rpb25zOiBvYmplY3QgZXhwZWN0ZWQiKTt0LmFjdGlvbnNbcl09cy5kYXRhZm9ybS5BY3Rpb25SZXN1bHQuZnJvbU9iamVjdChlLmFjdGlvbnNbcl0pfX1pZihudWxsIT1lLnRpbWluZyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRpbWluZyl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5SdW5SZXN1bHQudGltaW5nOiBvYmplY3QgZXhwZWN0ZWQiKTt0LnRpbWluZz1zLmRhdGFmb3JtLlRpbWluZy5mcm9tT2JqZWN0KGUudGltaW5nKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5hY3Rpb25zPVtdKSx0LmRlZmF1bHRzJiYoci5zdGF0dXM9dC5lbnVtcz09PVN0cmluZz8iVU5LTk9XTiI6MCxyLnRpbWluZz1udWxsKSxudWxsIT1lLnN0YXR1cyYmZS5oYXNPd25Qcm9wZXJ0eSgic3RhdHVzIikmJihyLnN0YXR1cz10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uUnVuUmVzdWx0LkV4ZWN1dGlvblN0YXR1c1tlLnN0YXR1c10/ZS5zdGF0dXM6cy5kYXRhZm9ybS5SdW5SZXN1bHQuRXhlY3V0aW9uU3RhdHVzW2Uuc3RhdHVzXTplLnN0YXR1cyksZS5hY3Rpb25zJiZlLmFjdGlvbnMubGVuZ3RoKXtyLmFjdGlvbnM9W107Zm9yKHZhciBuPTA7bjxlLmFjdGlvbnMubGVuZ3RoOysrbilyLmFjdGlvbnNbbl09cy5kYXRhZm9ybS5BY3Rpb25SZXN1bHQudG9PYmplY3QoZS5hY3Rpb25zW25dLHQpfXJldHVybiBudWxsIT1lLnRpbWluZyYmZS5oYXNPd25Qcm9wZXJ0eSgidGltaW5nIikmJihyLnRpbWluZz1zLmRhdGFmb3JtLlRpbWluZy50b09iamVjdChlLnRpbWluZyx0KSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uUnVuUmVzdWx0In0sdC5FeGVjdXRpb25TdGF0dXM9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIHRbZVswXT0iVU5LTk9XTiJdPTAsdFtlWzFdPSJSVU5OSU5HIl09MSx0W2VbMl09IlNVQ0NFU1NGVUwiXT0yLHRbZVszXT0iRkFJTEVEIl09Myx0W2VbNF09IkNBTkNFTExFRCJdPTQsdFtlWzVdPSJUSU1FRF9PVVQiXT01LHR9KCksdH0oKSxuLkFjdGlvblJlc3VsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy50YXNrcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnRhcmdldD1udWxsLHQucHJvdG90eXBlLnN0YXR1cz0wLHQucHJvdG90eXBlLnRhc2tzPWEuZW1wdHlBcnJheSx0LnByb3RvdHlwZS50aW1pbmc9bnVsbCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5zdGF0dXMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInN0YXR1cyIpJiZ0LnVpbnQzMigxNikuaW50MzIoZS5zdGF0dXMpLG51bGwhPWUudGFza3MmJmUudGFza3MubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS50YXNrcy5sZW5ndGg7KytyKXMuZGF0YWZvcm0uVGFza1Jlc3VsdC5lbmNvZGUoZS50YXNrc1tyXSx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtyZXR1cm4gbnVsbCE9ZS50aW1pbmcmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRpbWluZyIpJiZzLmRhdGFmb3JtLlRpbWluZy5lbmNvZGUoZS50aW1pbmcsdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS50YXJnZXQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInRhcmdldCIpJiZzLmRhdGFmb3JtLlRhcmdldC5lbmNvZGUoZS50YXJnZXQsdC51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5BY3Rpb25SZXN1bHQ7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDU6bi50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAyOm4uc3RhdHVzPWUuaW50MzIoKTticmVhaztjYXNlIDM6bi50YXNrcyYmbi50YXNrcy5sZW5ndGh8fChuLnRhc2tzPVtdKSxuLnRhc2tzLnB1c2gocy5kYXRhZm9ybS5UYXNrUmVzdWx0LmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDQ6bi50aW1pbmc9cy5kYXRhZm9ybS5UaW1pbmcuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJ0YXJnZXQiKSYmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUudGFyZ2V0KSkpcmV0dXJuInRhcmdldC4iK3I7aWYobnVsbCE9ZS5zdGF0dXMmJmUuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKXN3aXRjaChlLnN0YXR1cyl7ZGVmYXVsdDpyZXR1cm4ic3RhdHVzOiBlbnVtIHZhbHVlIGV4cGVjdGVkIjtjYXNlIDA6Y2FzZSAxOmNhc2UgMjpjYXNlIDM6Y2FzZSA0OmNhc2UgNTpjYXNlIDY6fWlmKG51bGwhPWUudGFza3MmJmUuaGFzT3duUHJvcGVydHkoInRhc2tzIikpe2lmKCFBcnJheS5pc0FycmF5KGUudGFza3MpKXJldHVybiJ0YXNrczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS50YXNrcy5sZW5ndGg7Kyt0KXt2YXIgcjtpZihyPXMuZGF0YWZvcm0uVGFza1Jlc3VsdC52ZXJpZnkoZS50YXNrc1t0XSkpcmV0dXJuInRhc2tzLiIrcn19cmV0dXJuIG51bGwhPWUudGltaW5nJiZlLmhhc093blByb3BlcnR5KCJ0aW1pbmciKSYmKHI9cy5kYXRhZm9ybS5UaW1pbmcudmVyaWZ5KGUudGltaW5nKSk/InRpbWluZy4iK3I6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkFjdGlvblJlc3VsdClyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5BY3Rpb25SZXN1bHQ7aWYobnVsbCE9ZS50YXJnZXQpe2lmKCJvYmplY3QiIT10eXBlb2YgZS50YXJnZXQpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uUmVzdWx0LnRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLnRhcmdldCl9c3dpdGNoKGUuc3RhdHVzKXtkZWZhdWx0OmlmKCJudW1iZXIiPT10eXBlb2YgZS5zdGF0dXMpe3Quc3RhdHVzPWUuc3RhdHVzO2JyZWFrfWJyZWFrO2Nhc2UiVU5LTk9XTiI6Y2FzZSAwOnQuc3RhdHVzPTA7YnJlYWs7Y2FzZSJSVU5OSU5HIjpjYXNlIDE6dC5zdGF0dXM9MTticmVhaztjYXNlIlNVQ0NFU1NGVUwiOmNhc2UgMjp0LnN0YXR1cz0yO2JyZWFrO2Nhc2UiRkFJTEVEIjpjYXNlIDM6dC5zdGF0dXM9MzticmVhaztjYXNlIlNLSVBQRUQiOmNhc2UgNDp0LnN0YXR1cz00O2JyZWFrO2Nhc2UiRElTQUJMRUQiOmNhc2UgNTp0LnN0YXR1cz01O2JyZWFrO2Nhc2UiQ0FOQ0VMTEVEIjpjYXNlIDY6dC5zdGF0dXM9Nn1pZihlLnRhc2tzKXtpZighQXJyYXkuaXNBcnJheShlLnRhc2tzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5BY3Rpb25SZXN1bHQudGFza3M6IGFycmF5IGV4cGVjdGVkIik7dC50YXNrcz1bXTtmb3IodmFyIHI9MDtyPGUudGFza3MubGVuZ3RoOysrcil7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRhc2tzW3JdKXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkFjdGlvblJlc3VsdC50YXNrczogb2JqZWN0IGV4cGVjdGVkIik7dC50YXNrc1tyXT1zLmRhdGFmb3JtLlRhc2tSZXN1bHQuZnJvbU9iamVjdChlLnRhc2tzW3JdKX19aWYobnVsbCE9ZS50aW1pbmcpe2lmKCJvYmplY3QiIT10eXBlb2YgZS50aW1pbmcpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uQWN0aW9uUmVzdWx0LnRpbWluZzogb2JqZWN0IGV4cGVjdGVkIik7dC50aW1pbmc9cy5kYXRhZm9ybS5UaW1pbmcuZnJvbU9iamVjdChlLnRpbWluZyl9cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIudGFza3M9W10pLHQuZGVmYXVsdHMmJihyLnN0YXR1cz10LmVudW1zPT09U3RyaW5nPyJVTktOT1dOIjowLHIudGltaW5nPW51bGwsci50YXJnZXQ9bnVsbCksbnVsbCE9ZS5zdGF0dXMmJmUuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpJiYoci5zdGF0dXM9dC5lbnVtcz09PVN0cmluZz92b2lkIDA9PT1zLmRhdGFmb3JtLkFjdGlvblJlc3VsdC5FeGVjdXRpb25TdGF0dXNbZS5zdGF0dXNdP2Uuc3RhdHVzOnMuZGF0YWZvcm0uQWN0aW9uUmVzdWx0LkV4ZWN1dGlvblN0YXR1c1tlLnN0YXR1c106ZS5zdGF0dXMpLGUudGFza3MmJmUudGFza3MubGVuZ3RoKXtyLnRhc2tzPVtdO2Zvcih2YXIgbj0wO248ZS50YXNrcy5sZW5ndGg7KytuKXIudGFza3Nbbl09cy5kYXRhZm9ybS5UYXNrUmVzdWx0LnRvT2JqZWN0KGUudGFza3Nbbl0sdCl9cmV0dXJuIG51bGwhPWUudGltaW5nJiZlLmhhc093blByb3BlcnR5KCJ0aW1pbmciKSYmKHIudGltaW5nPXMuZGF0YWZvcm0uVGltaW5nLnRvT2JqZWN0KGUudGltaW5nLHQpKSxudWxsIT1lLnRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgidGFyZ2V0IikmJihyLnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLnRhcmdldCx0KSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uQWN0aW9uUmVzdWx0In0sdC5FeGVjdXRpb25TdGF0dXM9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIHRbZVswXT0iVU5LTk9XTiJdPTAsdFtlWzFdPSJSVU5OSU5HIl09MSx0W2VbMl09IlNVQ0NFU1NGVUwiXT0yLHRbZVszXT0iRkFJTEVEIl09Myx0W2VbNF09IlNLSVBQRUQiXT00LHRbZVs1XT0iRElTQUJMRUQiXT01LHRbZVs2XT0iQ0FOQ0VMTEVEIl09Nix0fSgpLHR9KCksbi5FeGVjdXRpb25NZXRhZGF0YT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5iaWdxdWVyeT1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5iaWdxdWVyeSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYmlncXVlcnkiKSYmcy5kYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5CaWdxdWVyeU1ldGFkYXRhLmVuY29kZShlLmJpZ3F1ZXJ5LHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGE7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7aT4+PjM9PTE/bi5iaWdxdWVyeT1zLmRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGEuZGVjb2RlKGUsZS51aW50MzIoKSk6ZS5za2lwVHlwZSg3JmkpfXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUuYmlncXVlcnkmJmUuaGFzT3duUHJvcGVydHkoImJpZ3F1ZXJ5Iikpe3ZhciB0PXMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuQmlncXVlcnlNZXRhZGF0YS52ZXJpZnkoZS5iaWdxdWVyeSk7aWYodClyZXR1cm4iYmlncXVlcnkuIit0fXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGE7aWYobnVsbCE9ZS5iaWdxdWVyeSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLmJpZ3F1ZXJ5KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLmJpZ3F1ZXJ5OiBvYmplY3QgZXhwZWN0ZWQiKTt0LmJpZ3F1ZXJ5PXMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuQmlncXVlcnlNZXRhZGF0YS5mcm9tT2JqZWN0KGUuYmlncXVlcnkpfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci5iaWdxdWVyeT1udWxsKSxudWxsIT1lLmJpZ3F1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJiaWdxdWVyeSIpJiYoci5iaWdxdWVyeT1zLmRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGEudG9PYmplY3QoZS5iaWdxdWVyeSx0KSkscn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEifSx0LkJpZ3F1ZXJ5TWV0YWRhdGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUuam9iSWQ9IiIsdC5wcm90b3R5cGUudG90YWxCeXRlc1Byb2Nlc3NlZD0wLHQucHJvdG90eXBlLnRvdGFsQnl0ZXNCaWxsZWQ9MCx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWkuY3JlYXRlKCkpLG51bGwhPWUuam9iSWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImpvYklkIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5qb2JJZCksbnVsbCE9ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJ0b3RhbEJ5dGVzUHJvY2Vzc2VkIikmJnQudWludDMyKDE2KS5pbnQ2NChlLnRvdGFsQnl0ZXNQcm9jZXNzZWQpLG51bGwhPWUudG90YWxCeXRlc0JpbGxlZCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidG90YWxCeXRlc0JpbGxlZCIpJiZ0LnVpbnQzMigyNCkuaW50NjQoZS50b3RhbEJ5dGVzQmlsbGVkKSx0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGE7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5qb2JJZD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjpuLnRvdGFsQnl0ZXNQcm9jZXNzZWQ9ZS5pbnQ2NCgpO2JyZWFrO2Nhc2UgMzpuLnRvdGFsQnl0ZXNCaWxsZWQ9ZS5pbnQ2NCgpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZT8ib2JqZWN0IGV4cGVjdGVkIjpudWxsIT1lLmpvYklkJiZlLmhhc093blByb3BlcnR5KCJqb2JJZCIpJiYhYS5pc1N0cmluZyhlLmpvYklkKT8iam9iSWQ6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkJiZlLmhhc093blByb3BlcnR5KCJ0b3RhbEJ5dGVzUHJvY2Vzc2VkIikmJiEoYS5pc0ludGVnZXIoZS50b3RhbEJ5dGVzUHJvY2Vzc2VkKXx8ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkJiZhLmlzSW50ZWdlcihlLnRvdGFsQnl0ZXNQcm9jZXNzZWQubG93KSYmYS5pc0ludGVnZXIoZS50b3RhbEJ5dGVzUHJvY2Vzc2VkLmhpZ2gpKT8idG90YWxCeXRlc1Byb2Nlc3NlZDogaW50ZWdlcnxMb25nIGV4cGVjdGVkIjpudWxsIT1lLnRvdGFsQnl0ZXNCaWxsZWQmJmUuaGFzT3duUHJvcGVydHkoInRvdGFsQnl0ZXNCaWxsZWQiKSYmIShhLmlzSW50ZWdlcihlLnRvdGFsQnl0ZXNCaWxsZWQpfHxlLnRvdGFsQnl0ZXNCaWxsZWQmJmEuaXNJbnRlZ2VyKGUudG90YWxCeXRlc0JpbGxlZC5sb3cpJiZhLmlzSW50ZWdlcihlLnRvdGFsQnl0ZXNCaWxsZWQuaGlnaCkpPyJ0b3RhbEJ5dGVzQmlsbGVkOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5CaWdxdWVyeU1ldGFkYXRhKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGE7cmV0dXJuIG51bGwhPWUuam9iSWQmJih0LmpvYklkPVN0cmluZyhlLmpvYklkKSksbnVsbCE9ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkJiYoYS5Mb25nPyh0LnRvdGFsQnl0ZXNQcm9jZXNzZWQ9YS5Mb25nLmZyb21WYWx1ZShlLnRvdGFsQnl0ZXNQcm9jZXNzZWQpKS51bnNpZ25lZD0hMToic3RyaW5nIj09dHlwZW9mIGUudG90YWxCeXRlc1Byb2Nlc3NlZD90LnRvdGFsQnl0ZXNQcm9jZXNzZWQ9cGFyc2VJbnQoZS50b3RhbEJ5dGVzUHJvY2Vzc2VkLDEwKToibnVtYmVyIj09dHlwZW9mIGUudG90YWxCeXRlc1Byb2Nlc3NlZD90LnRvdGFsQnl0ZXNQcm9jZXNzZWQ9ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkOiJvYmplY3QiPT10eXBlb2YgZS50b3RhbEJ5dGVzUHJvY2Vzc2VkJiYodC50b3RhbEJ5dGVzUHJvY2Vzc2VkPW5ldyBhLkxvbmdCaXRzKGUudG90YWxCeXRlc1Byb2Nlc3NlZC5sb3c+Pj4wLGUudG90YWxCeXRlc1Byb2Nlc3NlZC5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUudG90YWxCeXRlc0JpbGxlZCYmKGEuTG9uZz8odC50b3RhbEJ5dGVzQmlsbGVkPWEuTG9uZy5mcm9tVmFsdWUoZS50b3RhbEJ5dGVzQmlsbGVkKSkudW5zaWduZWQ9ITE6InN0cmluZyI9PXR5cGVvZiBlLnRvdGFsQnl0ZXNCaWxsZWQ/dC50b3RhbEJ5dGVzQmlsbGVkPXBhcnNlSW50KGUudG90YWxCeXRlc0JpbGxlZCwxMCk6Im51bWJlciI9PXR5cGVvZiBlLnRvdGFsQnl0ZXNCaWxsZWQ/dC50b3RhbEJ5dGVzQmlsbGVkPWUudG90YWxCeXRlc0JpbGxlZDoib2JqZWN0Ij09dHlwZW9mIGUudG90YWxCeXRlc0JpbGxlZCYmKHQudG90YWxCeXRlc0JpbGxlZD1uZXcgYS5Mb25nQml0cyhlLnRvdGFsQnl0ZXNCaWxsZWQubG93Pj4+MCxlLnRvdGFsQnl0ZXNCaWxsZWQuaGlnaD4+PjApLnRvTnVtYmVyKCkpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci5qb2JJZD0iIixyLnRvdGFsQnl0ZXNQcm9jZXNzZWQ9MCxyLnRvdGFsQnl0ZXNCaWxsZWQ9MCksbnVsbCE9ZS5qb2JJZCYmZS5oYXNPd25Qcm9wZXJ0eSgiam9iSWQiKSYmKHIuam9iSWQ9ZS5qb2JJZCksbnVsbCE9ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkJiZlLmhhc093blByb3BlcnR5KCJ0b3RhbEJ5dGVzUHJvY2Vzc2VkIikmJigibnVtYmVyIj09dHlwZW9mIGUudG90YWxCeXRlc1Byb2Nlc3NlZD9yLnRvdGFsQnl0ZXNQcm9jZXNzZWQ9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS50b3RhbEJ5dGVzUHJvY2Vzc2VkKTplLnRvdGFsQnl0ZXNQcm9jZXNzZWQ6ci50b3RhbEJ5dGVzUHJvY2Vzc2VkPXQubG9uZ3M9PT1TdHJpbmc/YS5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUudG90YWxCeXRlc1Byb2Nlc3NlZCk6dC5sb25ncz09PU51bWJlcj9uZXcgYS5Mb25nQml0cyhlLnRvdGFsQnl0ZXNQcm9jZXNzZWQubG93Pj4+MCxlLnRvdGFsQnl0ZXNQcm9jZXNzZWQuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS50b3RhbEJ5dGVzUHJvY2Vzc2VkKSxudWxsIT1lLnRvdGFsQnl0ZXNCaWxsZWQmJmUuaGFzT3duUHJvcGVydHkoInRvdGFsQnl0ZXNCaWxsZWQiKSYmKCJudW1iZXIiPT10eXBlb2YgZS50b3RhbEJ5dGVzQmlsbGVkP3IudG90YWxCeXRlc0JpbGxlZD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnRvdGFsQnl0ZXNCaWxsZWQpOmUudG90YWxCeXRlc0JpbGxlZDpyLnRvdGFsQnl0ZXNCaWxsZWQ9dC5sb25ncz09PVN0cmluZz9hLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS50b3RhbEJ5dGVzQmlsbGVkKTp0LmxvbmdzPT09TnVtYmVyP25ldyBhLkxvbmdCaXRzKGUudG90YWxCeXRlc0JpbGxlZC5sb3c+Pj4wLGUudG90YWxCeXRlc0JpbGxlZC5oaWdoPj4+MCkudG9OdW1iZXIoKTplLnRvdGFsQnl0ZXNCaWxsZWQpLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGEifSx0fSgpLHR9KCksbi5UYXNrUmVzdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIHQucHJvdG90eXBlLnN0YXR1cz0wLHQucHJvdG90eXBlLmVycm9yTWVzc2FnZT0iIix0LnByb3RvdHlwZS50aW1pbmc9bnVsbCx0LnByb3RvdHlwZS5tZXRhZGF0YT1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5zdGF0dXMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInN0YXR1cyIpJiZ0LnVpbnQzMig4KS5pbnQzMihlLnN0YXR1cyksbnVsbCE9ZS5lcnJvck1lc3NhZ2UmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImVycm9yTWVzc2FnZSIpJiZ0LnVpbnQzMigxOCkuc3RyaW5nKGUuZXJyb3JNZXNzYWdlKSxudWxsIT1lLnRpbWluZyYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidGltaW5nIikmJnMuZGF0YWZvcm0uVGltaW5nLmVuY29kZShlLnRpbWluZyx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLm1ldGFkYXRhJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJtZXRhZGF0YSIpJiZzLmRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLmVuY29kZShlLm1ldGFkYXRhLHQudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uVGFza1Jlc3VsdDtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLnN0YXR1cz1lLmludDMyKCk7YnJlYWs7Y2FzZSAyOm4uZXJyb3JNZXNzYWdlPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAzOm4udGltaW5nPXMuZGF0YWZvcm0uVGltaW5nLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgNDpuLm1ldGFkYXRhPXMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUuc3RhdHVzJiZlLmhhc093blByb3BlcnR5KCJzdGF0dXMiKSlzd2l0Y2goZS5zdGF0dXMpe2RlZmF1bHQ6cmV0dXJuInN0YXR1czogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSAzOmNhc2UgNDpjYXNlIDU6fXJldHVybiBudWxsIT1lLmVycm9yTWVzc2FnZSYmZS5oYXNPd25Qcm9wZXJ0eSgiZXJyb3JNZXNzYWdlIikmJiFhLmlzU3RyaW5nKGUuZXJyb3JNZXNzYWdlKT8iZXJyb3JNZXNzYWdlOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGwhPWUudGltaW5nJiZlLmhhc093blByb3BlcnR5KCJ0aW1pbmciKSYmKHQ9cy5kYXRhZm9ybS5UaW1pbmcudmVyaWZ5KGUudGltaW5nKSk/InRpbWluZy4iK3Q6bnVsbCE9ZS5tZXRhZGF0YSYmZS5oYXNPd25Qcm9wZXJ0eSgibWV0YWRhdGEiKSYmKHQ9cy5kYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS52ZXJpZnkoZS5tZXRhZGF0YSkpPyJtZXRhZGF0YS4iK3Q6bnVsbDt2YXIgdH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlRhc2tSZXN1bHQpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uVGFza1Jlc3VsdDtzd2l0Y2goZS5zdGF0dXMpe2RlZmF1bHQ6aWYoIm51bWJlciI9PXR5cGVvZiBlLnN0YXR1cyl7dC5zdGF0dXM9ZS5zdGF0dXM7YnJlYWt9YnJlYWs7Y2FzZSJVTktOT1dOIjpjYXNlIDA6dC5zdGF0dXM9MDticmVhaztjYXNlIlJVTk5JTkciOmNhc2UgMTp0LnN0YXR1cz0xO2JyZWFrO2Nhc2UiU1VDQ0VTU0ZVTCI6Y2FzZSAyOnQuc3RhdHVzPTI7YnJlYWs7Y2FzZSJGQUlMRUQiOmNhc2UgMzp0LnN0YXR1cz0zO2JyZWFrO2Nhc2UiU0tJUFBFRCI6Y2FzZSA0OnQuc3RhdHVzPTQ7YnJlYWs7Y2FzZSJDQU5DRUxMRUQiOmNhc2UgNTp0LnN0YXR1cz01fWlmKG51bGwhPWUuZXJyb3JNZXNzYWdlJiYodC5lcnJvck1lc3NhZ2U9U3RyaW5nKGUuZXJyb3JNZXNzYWdlKSksbnVsbCE9ZS50aW1pbmcpe2lmKCJvYmplY3QiIT10eXBlb2YgZS50aW1pbmcpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGFza1Jlc3VsdC50aW1pbmc6IG9iamVjdCBleHBlY3RlZCIpO3QudGltaW5nPXMuZGF0YWZvcm0uVGltaW5nLmZyb21PYmplY3QoZS50aW1pbmcpfWlmKG51bGwhPWUubWV0YWRhdGEpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5tZXRhZGF0YSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYXNrUmVzdWx0Lm1ldGFkYXRhOiBvYmplY3QgZXhwZWN0ZWQiKTt0Lm1ldGFkYXRhPXMuZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuZnJvbU9iamVjdChlLm1ldGFkYXRhKX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIuc3RhdHVzPXQuZW51bXM9PT1TdHJpbmc/IlVOS05PV04iOjAsci5lcnJvck1lc3NhZ2U9IiIsci50aW1pbmc9bnVsbCxyLm1ldGFkYXRhPW51bGwpLG51bGwhPWUuc3RhdHVzJiZlLmhhc093blByb3BlcnR5KCJzdGF0dXMiKSYmKHIuc3RhdHVzPXQuZW51bXM9PT1TdHJpbmc/dm9pZCAwPT09cy5kYXRhZm9ybS5UYXNrUmVzdWx0LkV4ZWN1dGlvblN0YXR1c1tlLnN0YXR1c10/ZS5zdGF0dXM6cy5kYXRhZm9ybS5UYXNrUmVzdWx0LkV4ZWN1dGlvblN0YXR1c1tlLnN0YXR1c106ZS5zdGF0dXMpLG51bGwhPWUuZXJyb3JNZXNzYWdlJiZlLmhhc093blByb3BlcnR5KCJlcnJvck1lc3NhZ2UiKSYmKHIuZXJyb3JNZXNzYWdlPWUuZXJyb3JNZXNzYWdlKSxudWxsIT1lLnRpbWluZyYmZS5oYXNPd25Qcm9wZXJ0eSgidGltaW5nIikmJihyLnRpbWluZz1zLmRhdGFmb3JtLlRpbWluZy50b09iamVjdChlLnRpbWluZyx0KSksbnVsbCE9ZS5tZXRhZGF0YSYmZS5oYXNPd25Qcm9wZXJ0eSgibWV0YWRhdGEiKSYmKHIubWV0YWRhdGE9cy5kYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS50b09iamVjdChlLm1ldGFkYXRhLHQpKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5UYXNrUmVzdWx0In0sdC5FeGVjdXRpb25TdGF0dXM9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIHRbZVswXT0iVU5LTk9XTiJdPTAsdFtlWzFdPSJSVU5OSU5HIl09MSx0W2VbMl09IlNVQ0NFU1NGVUwiXT0yLHRbZVszXT0iRkFJTEVEIl09Myx0W2VbNF09IlNLSVBQRUQiXT00LHRbZVs1XT0iQ0FOQ0VMTEVEIl09NSx0fSgpLHR9KCksbi5UZXN0UmVzdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZih0aGlzLm1lc3NhZ2VzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUubmFtZT0iIix0LnByb3RvdHlwZS5zdWNjZXNzZnVsPSExLHQucHJvdG90eXBlLm1lc3NhZ2VzPWEuZW1wdHlBcnJheSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5uYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJuYW1lIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5uYW1lKSxudWxsIT1lLnN1Y2Nlc3NmdWwmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInN1Y2Nlc3NmdWwiKSYmdC51aW50MzIoMTYpLmJvb2woZS5zdWNjZXNzZnVsKSxudWxsIT1lLm1lc3NhZ2VzJiZlLm1lc3NhZ2VzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUubWVzc2FnZXMubGVuZ3RoOysrcil0LnVpbnQzMigyNikuc3RyaW5nKGUubWVzc2FnZXNbcl0pO3JldHVybiB0fSx0LmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSx0LmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiBvfHwoZT1vLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxuPW5ldyBzLmRhdGFmb3JtLlRlc3RSZXN1bHQ7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAyOm4uc3VjY2Vzc2Z1bD1lLmJvb2woKTticmVhaztjYXNlIDM6bi5tZXNzYWdlcyYmbi5tZXNzYWdlcy5sZW5ndGh8fChuLm1lc3NhZ2VzPVtdKSxuLm1lc3NhZ2VzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmaSl9fXJldHVybiBufSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpJiYhYS5pc1N0cmluZyhlLm5hbWUpKXJldHVybiJuYW1lOiBzdHJpbmcgZXhwZWN0ZWQiO2lmKG51bGwhPWUuc3VjY2Vzc2Z1bCYmZS5oYXNPd25Qcm9wZXJ0eSgic3VjY2Vzc2Z1bCIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLnN1Y2Nlc3NmdWwpcmV0dXJuInN1Y2Nlc3NmdWw6IGJvb2xlYW4gZXhwZWN0ZWQiO2lmKG51bGwhPWUubWVzc2FnZXMmJmUuaGFzT3duUHJvcGVydHkoIm1lc3NhZ2VzIikpe2lmKCFBcnJheS5pc0FycmF5KGUubWVzc2FnZXMpKXJldHVybiJtZXNzYWdlczogYXJyYXkgZXhwZWN0ZWQiO2Zvcih2YXIgdD0wO3Q8ZS5tZXNzYWdlcy5sZW5ndGg7Kyt0KWlmKCFhLmlzU3RyaW5nKGUubWVzc2FnZXNbdF0pKXJldHVybiJtZXNzYWdlczogc3RyaW5nW10gZXhwZWN0ZWQifXJldHVybiBudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uVGVzdFJlc3VsdClyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5UZXN0UmVzdWx0O2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5zdWNjZXNzZnVsJiYodC5zdWNjZXNzZnVsPUJvb2xlYW4oZS5zdWNjZXNzZnVsKSksZS5tZXNzYWdlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tZXNzYWdlcykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGVzdFJlc3VsdC5tZXNzYWdlczogYXJyYXkgZXhwZWN0ZWQiKTt0Lm1lc3NhZ2VzPVtdO2Zvcih2YXIgcj0wO3I8ZS5tZXNzYWdlcy5sZW5ndGg7KytyKXQubWVzc2FnZXNbcl09U3RyaW5nKGUubWVzc2FnZXNbcl0pfXJldHVybiB0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLm1lc3NhZ2VzPVtdKSx0LmRlZmF1bHRzJiYoci5uYW1lPSIiLHIuc3VjY2Vzc2Z1bD0hMSksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KCJuYW1lIikmJihyLm5hbWU9ZS5uYW1lKSxudWxsIT1lLnN1Y2Nlc3NmdWwmJmUuaGFzT3duUHJvcGVydHkoInN1Y2Nlc3NmdWwiKSYmKHIuc3VjY2Vzc2Z1bD1lLnN1Y2Nlc3NmdWwpLGUubWVzc2FnZXMmJmUubWVzc2FnZXMubGVuZ3RoKXtyLm1lc3NhZ2VzPVtdO2Zvcih2YXIgbj0wO248ZS5tZXNzYWdlcy5sZW5ndGg7KytuKXIubWVzc2FnZXNbbl09ZS5tZXNzYWdlc1tuXX1yZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uVGVzdFJlc3VsdCJ9LHR9KCksbi5GaWVsZD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYodGhpcy5mbGFncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlLm5hbWU9IiIsdC5wcm90b3R5cGUuZmxhZ3M9YS5lbXB0eUFycmF5LHQucHJvdG90eXBlLnByaW1pdGl2ZT1udWxsLHQucHJvdG90eXBlLnN0cnVjdD1udWxsLHQucHJvdG90eXBlLmRlc2NyaXB0aW9uPSIiLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwidHlwZSIse2dldDphLm9uZU9mR2V0dGVyKHI9WyJwcmltaXRpdmUiLCJzdHJ1Y3QiXSksc2V0OmEub25lT2ZTZXR0ZXIocil9KSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5uYW1lJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJuYW1lIikmJnQudWludDMyKDEwKS5zdHJpbmcoZS5uYW1lKSxudWxsIT1lLnN0cnVjdCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwic3RydWN0IikmJnMuZGF0YWZvcm0uRmllbGRzLmVuY29kZShlLnN0cnVjdCx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmRlc2NyaXB0aW9uJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZXNjcmlwdGlvbiIpJiZ0LnVpbnQzMig0Mikuc3RyaW5nKGUuZGVzY3JpcHRpb24pLG51bGwhPWUuZmxhZ3MmJmUuZmxhZ3MubGVuZ3RoKXt0LnVpbnQzMig1MCkuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS5mbGFncy5sZW5ndGg7KytyKXQuaW50MzIoZS5mbGFnc1tyXSk7dC5sZGVsaW0oKX1yZXR1cm4gbnVsbCE9ZS5wcmltaXRpdmUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByaW1pdGl2ZSIpJiZ0LnVpbnQzMig1NikuaW50MzIoZS5wcmltaXRpdmUpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uRmllbGQ7ZS5wb3M8cjspe3ZhciBpPWUudWludDMyKCk7c3dpdGNoKGk+Pj4zKXtjYXNlIDE6bi5uYW1lPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA2OmlmKG4uZmxhZ3MmJm4uZmxhZ3MubGVuZ3RofHwobi5mbGFncz1bXSksMj09KDcmaSkpZm9yKHZhciBhPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8YTspbi5mbGFncy5wdXNoKGUuaW50MzIoKSk7ZWxzZSBuLmZsYWdzLnB1c2goZS5pbnQzMigpKTticmVhaztjYXNlIDc6bi5wcmltaXRpdmU9ZS5pbnQzMigpO2JyZWFrO2Nhc2UgMzpuLnN0cnVjdD1zLmRhdGFmb3JtLkZpZWxkcy5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDU6bi5kZXNjcmlwdGlvbj1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JmkpfX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjt2YXIgdD17fTtpZihudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmIWEuaXNTdHJpbmcoZS5uYW1lKSlyZXR1cm4ibmFtZTogc3RyaW5nIGV4cGVjdGVkIjtpZihudWxsIT1lLmZsYWdzJiZlLmhhc093blByb3BlcnR5KCJmbGFncyIpKXtpZighQXJyYXkuaXNBcnJheShlLmZsYWdzKSlyZXR1cm4iZmxhZ3M6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHI9MDtyPGUuZmxhZ3MubGVuZ3RoOysrcilzd2l0Y2goZS5mbGFnc1tyXSl7ZGVmYXVsdDpyZXR1cm4iZmxhZ3M6IGVudW0gdmFsdWVbXSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTp9fWlmKG51bGwhPWUucHJpbWl0aXZlJiZlLmhhc093blByb3BlcnR5KCJwcmltaXRpdmUiKSlzd2l0Y2godC50eXBlPTEsZS5wcmltaXRpdmUpe2RlZmF1bHQ6cmV0dXJuInByaW1pdGl2ZTogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSA1OmNhc2UgMzpjYXNlIDQ6Y2FzZSA2OmNhc2UgNzpjYXNlIDg6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMTpjYXNlIDEyOn1pZihudWxsIT1lLnN0cnVjdCYmZS5oYXNPd25Qcm9wZXJ0eSgic3RydWN0Iikpe2lmKDE9PT10LnR5cGUpcmV0dXJuInR5cGU6IG11bHRpcGxlIHZhbHVlcyI7dC50eXBlPTE7dmFyIG49cy5kYXRhZm9ybS5GaWVsZHMudmVyaWZ5KGUuc3RydWN0KTtpZihuKXJldHVybiJzdHJ1Y3QuIitufXJldHVybiBudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKT8iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLkZpZWxkKXJldHVybiBlO3ZhciB0PW5ldyBzLmRhdGFmb3JtLkZpZWxkO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksZS5mbGFncyl7aWYoIUFycmF5LmlzQXJyYXkoZS5mbGFncykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRmllbGQuZmxhZ3M6IGFycmF5IGV4cGVjdGVkIik7dC5mbGFncz1bXTtmb3IodmFyIHI9MDtyPGUuZmxhZ3MubGVuZ3RoOysrcilzd2l0Y2goZS5mbGFnc1tyXSl7ZGVmYXVsdDppZigibnVtYmVyIj09dHlwZW9mIGUuZmxhZ3Nbcl0pe3QuZmxhZ3Nbcl09ZS5mbGFnc1tyXTticmVha31jYXNlIlVOS05PV05fRkxBRyI6Y2FzZSAwOnQuZmxhZ3Nbcl09MDticmVhaztjYXNlIlJFUEVBVEVEIjpjYXNlIDE6dC5mbGFnc1tyXT0xfX1zd2l0Y2goZS5wcmltaXRpdmUpe2RlZmF1bHQ6aWYoIm51bWJlciI9PXR5cGVvZiBlLnByaW1pdGl2ZSl7dC5wcmltaXRpdmU9ZS5wcmltaXRpdmU7YnJlYWt9YnJlYWs7Y2FzZSJVTktOT1dOIjpjYXNlIDA6dC5wcmltaXRpdmU9MDticmVhaztjYXNlIklOVEVHRVIiOmNhc2UgMTp0LnByaW1pdGl2ZT0xO2JyZWFrO2Nhc2UiRkxPQVQiOmNhc2UgMjp0LnByaW1pdGl2ZT0yO2JyZWFrO2Nhc2UiTlVNRVJJQyI6Y2FzZSA1OnQucHJpbWl0aXZlPTU7YnJlYWs7Y2FzZSJCT09MRUFOIjpjYXNlIDM6dC5wcmltaXRpdmU9MzticmVhaztjYXNlIlNUUklORyI6Y2FzZSA0OnQucHJpbWl0aXZlPTQ7YnJlYWs7Y2FzZSJEQVRFIjpjYXNlIDY6dC5wcmltaXRpdmU9NjticmVhaztjYXNlIkRBVEVUSU1FIjpjYXNlIDc6dC5wcmltaXRpdmU9NzticmVhaztjYXNlIlRJTUVTVEFNUCI6Y2FzZSA4OnQucHJpbWl0aXZlPTg7YnJlYWs7Y2FzZSJUSU1FIjpjYXNlIDk6dC5wcmltaXRpdmU9OTticmVhaztjYXNlIkJZVEVTIjpjYXNlIDEwOnQucHJpbWl0aXZlPTEwO2JyZWFrO2Nhc2UiQU5ZIjpjYXNlIDExOnQucHJpbWl0aXZlPTExO2JyZWFrO2Nhc2UiR0VPR1JBUEhZIjpjYXNlIDEyOnQucHJpbWl0aXZlPTEyfWlmKG51bGwhPWUuc3RydWN0KXtpZigib2JqZWN0IiE9dHlwZW9mIGUuc3RydWN0KXRocm93IFR5cGVFcnJvcigiLmRhdGFmb3JtLkZpZWxkLnN0cnVjdDogb2JqZWN0IGV4cGVjdGVkIik7dC5zdHJ1Y3Q9cy5kYXRhZm9ybS5GaWVsZHMuZnJvbU9iamVjdChlLnN0cnVjdCl9cmV0dXJuIG51bGwhPWUuZGVzY3JpcHRpb24mJih0LmRlc2NyaXB0aW9uPVN0cmluZyhlLmRlc2NyaXB0aW9uKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5mbGFncz1bXSksdC5kZWZhdWx0cyYmKHIubmFtZT0iIixyLmRlc2NyaXB0aW9uPSIiKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSYmKHIubmFtZT1lLm5hbWUpLG51bGwhPWUuc3RydWN0JiZlLmhhc093blByb3BlcnR5KCJzdHJ1Y3QiKSYmKHIuc3RydWN0PXMuZGF0YWZvcm0uRmllbGRzLnRvT2JqZWN0KGUuc3RydWN0LHQpLHQub25lb2ZzJiYoci50eXBlPSJzdHJ1Y3QiKSksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgiZGVzY3JpcHRpb24iKSYmKHIuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS5mbGFncyYmZS5mbGFncy5sZW5ndGgpe3IuZmxhZ3M9W107Zm9yKHZhciBuPTA7bjxlLmZsYWdzLmxlbmd0aDsrK24pci5mbGFnc1tuXT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uRmllbGQuRmxhZ1tlLmZsYWdzW25dXT9lLmZsYWdzW25dOnMuZGF0YWZvcm0uRmllbGQuRmxhZ1tlLmZsYWdzW25dXTplLmZsYWdzW25dfXJldHVybiBudWxsIT1lLnByaW1pdGl2ZSYmZS5oYXNPd25Qcm9wZXJ0eSgicHJpbWl0aXZlIikmJihyLnByaW1pdGl2ZT10LmVudW1zPT09U3RyaW5nP3ZvaWQgMD09PXMuZGF0YWZvcm0uRmllbGQuUHJpbWl0aXZlW2UucHJpbWl0aXZlXT9lLnByaW1pdGl2ZTpzLmRhdGFmb3JtLkZpZWxkLlByaW1pdGl2ZVtlLnByaW1pdGl2ZV06ZS5wcmltaXRpdmUsdC5vbmVvZnMmJihyLnR5cGU9InByaW1pdGl2ZSIpKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5GaWVsZCJ9LHQuUHJpbWl0aXZlPWZ1bmN0aW9uKCl7dmFyIGU9e30sdD1PYmplY3QuY3JlYXRlKGUpO3JldHVybiB0W2VbMF09IlVOS05PV04iXT0wLHRbZVsxXT0iSU5URUdFUiJdPTEsdFtlWzJdPSJGTE9BVCJdPTIsdFtlWzVdPSJOVU1FUklDIl09NSx0W2VbM109IkJPT0xFQU4iXT0zLHRbZVs0XT0iU1RSSU5HIl09NCx0W2VbNl09IkRBVEUiXT02LHRbZVs3XT0iREFURVRJTUUiXT03LHRbZVs4XT0iVElNRVNUQU1QIl09OCx0W2VbOV09IlRJTUUiXT05LHRbZVsxMF09IkJZVEVTIl09MTAsdFtlWzExXT0iQU5ZIl09MTEsdFtlWzEyXT0iR0VPR1JBUEhZIl09MTIsdH0oKSx0LkZsYWc9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIHRbZVswXT0iVU5LTk9XTl9GTEFHIl09MCx0W2VbMV09IlJFUEVBVEVEIl09MSx0fSgpLHR9KCksbi5GaWVsZHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuZmllbGRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUuZmllbGRzPWEuZW1wdHlBcnJheSx0LmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9LHQuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5maWVsZHMmJmUuZmllbGRzLmxlbmd0aClmb3IodmFyIHI9MDtyPGUuZmllbGRzLmxlbmd0aDsrK3Ipcy5kYXRhZm9ybS5GaWVsZC5lbmNvZGUoZS5maWVsZHNbcl0sdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7cmV0dXJuIHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uRmllbGRzO2UucG9zPHI7KXt2YXIgaT1lLnVpbnQzMigpO2k+Pj4zPT0xPyhuLmZpZWxkcyYmbi5maWVsZHMubGVuZ3RofHwobi5maWVsZHM9W10pLG4uZmllbGRzLnB1c2gocy5kYXRhZm9ybS5GaWVsZC5kZWNvZGUoZSxlLnVpbnQzMigpKSkpOmUuc2tpcFR5cGUoNyZpKX1yZXR1cm4gbn0sdC5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBvfHwoZT1uZXcgbyhlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sdC52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4ib2JqZWN0IGV4cGVjdGVkIjtpZihudWxsIT1lLmZpZWxkcyYmZS5oYXNPd25Qcm9wZXJ0eSgiZmllbGRzIikpe2lmKCFBcnJheS5pc0FycmF5KGUuZmllbGRzKSlyZXR1cm4iZmllbGRzOiBhcnJheSBleHBlY3RlZCI7Zm9yKHZhciB0PTA7dDxlLmZpZWxkcy5sZW5ndGg7Kyt0KXt2YXIgcj1zLmRhdGFmb3JtLkZpZWxkLnZlcmlmeShlLmZpZWxkc1t0XSk7aWYocilyZXR1cm4iZmllbGRzLiIrcn19cmV0dXJuIG51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5GaWVsZHMpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uRmllbGRzO2lmKGUuZmllbGRzKXtpZighQXJyYXkuaXNBcnJheShlLmZpZWxkcykpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRmllbGRzLmZpZWxkczogYXJyYXkgZXhwZWN0ZWQiKTt0LmZpZWxkcz1bXTtmb3IodmFyIHI9MDtyPGUuZmllbGRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5maWVsZHNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uRmllbGRzLmZpZWxkczogb2JqZWN0IGV4cGVjdGVkIik7dC5maWVsZHNbcl09cy5kYXRhZm9ybS5GaWVsZC5mcm9tT2JqZWN0KGUuZmllbGRzW3JdKX19cmV0dXJuIHR9LHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIuZmllbGRzPVtdKSxlLmZpZWxkcyYmZS5maWVsZHMubGVuZ3RoKXtyLmZpZWxkcz1bXTtmb3IodmFyIG49MDtuPGUuZmllbGRzLmxlbmd0aDsrK24pci5maWVsZHNbbl09cy5kYXRhZm9ybS5GaWVsZC50b09iamVjdChlLmZpZWxkc1tuXSx0KX1yZXR1cm4gcn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uRmllbGRzIn0sdH0oKSxuLlRhYmxlTWV0YWRhdGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKHRoaXMuZmllbGRzPVtdLHRoaXMubGFiZWxzPXt9LGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUudGFyZ2V0PW51bGwsdC5wcm90b3R5cGUudHlwZT0wLHQucHJvdG90eXBlLmZpZWxkcz1hLmVtcHR5QXJyYXksdC5wcm90b3R5cGUuZGVzY3JpcHRpb249IiIsdC5wcm90b3R5cGUubGFiZWxzPWEuZW1wdHlPYmplY3QsdC5wcm90b3R5cGUubGFzdFVwZGF0ZWRNaWxsaXM9MCx0LnByb3RvdHlwZS5iaWdxdWVyeT1udWxsLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLnRhcmdldCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwidGFyZ2V0IikmJnMuZGF0YWZvcm0uVGFyZ2V0LmVuY29kZShlLnRhcmdldCx0LnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLmZpZWxkcyYmZS5maWVsZHMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5maWVsZHMubGVuZ3RoOysrcilzLmRhdGFmb3JtLkZpZWxkLmVuY29kZShlLmZpZWxkc1tyXSx0LnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmxhc3RVcGRhdGVkTWlsbGlzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJsYXN0VXBkYXRlZE1pbGxpcyIpJiZ0LnVpbnQzMigzMikuaW50NjQoZS5sYXN0VXBkYXRlZE1pbGxpcyksbnVsbCE9ZS5kZXNjcmlwdGlvbiYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVzY3JpcHRpb24iKSYmdC51aW50MzIoNDIpLnN0cmluZyhlLmRlc2NyaXB0aW9uKSxudWxsIT1lLnR5cGUmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInR5cGUiKSYmdC51aW50MzIoNDgpLmludDMyKGUudHlwZSksbnVsbCE9ZS5sYWJlbHMmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImxhYmVscyIpKXt2YXIgbj1PYmplY3Qua2V5cyhlLmxhYmVscyk7Zm9yKHI9MDtyPG4ubGVuZ3RoOysrcil0LnVpbnQzMig1OCkuZm9yaygpLnVpbnQzMigxMCkuc3RyaW5nKG5bcl0pLnVpbnQzMigxOCkuc3RyaW5nKGUubGFiZWxzW25bcl1dKS5sZGVsaW0oKX1yZXR1cm4gbnVsbCE9ZS5iaWdxdWVyeSYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiYmlncXVlcnkiKSYmcy5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLkJpZ1F1ZXJ5LmVuY29kZShlLmJpZ3F1ZXJ5LHQudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHIsbixpPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxsPW5ldyBzLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGE7ZS5wb3M8aTspe3ZhciBjPWUudWludDMyKCk7c3dpdGNoKGM+Pj4zKXtjYXNlIDE6bC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA2OmwudHlwZT1lLmludDMyKCk7YnJlYWs7Y2FzZSAzOmwuZmllbGRzJiZsLmZpZWxkcy5sZW5ndGh8fChsLmZpZWxkcz1bXSksbC5maWVsZHMucHVzaChzLmRhdGFmb3JtLkZpZWxkLmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDU6bC5kZXNjcmlwdGlvbj1lLnN0cmluZygpO2JyZWFrO2Nhc2UgNzpsLmxhYmVscz09PWEuZW1wdHlPYmplY3QmJihsLmxhYmVscz17fSk7dmFyIHU9ZS51aW50MzIoKStlLnBvcztmb3Iocj0iIixuPSIiO2UucG9zPHU7KXt2YXIgcD1lLnVpbnQzMigpO3N3aXRjaChwPj4+Myl7Y2FzZSAxOnI9ZS5zdHJpbmcoKTticmVhaztjYXNlIDI6bj1lLnN0cmluZygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3JnApfX1sLmxhYmVsc1tyXT1uO2JyZWFrO2Nhc2UgNDpsLmxhc3RVcGRhdGVkTWlsbGlzPWUuaW50NjQoKTticmVhaztjYXNlIDg6bC5iaWdxdWVyeT1zLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuQmlnUXVlcnkuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmYyl9fXJldHVybiBsfSx0LmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG98fChlPW5ldyBvKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSx0LnZlcmlmeT1mdW5jdGlvbihlKXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiJvYmplY3QgZXhwZWN0ZWQiO2lmKG51bGwhPWUudGFyZ2V0JiZlLmhhc093blByb3BlcnR5KCJ0YXJnZXQiKSYmKHI9cy5kYXRhZm9ybS5UYXJnZXQudmVyaWZ5KGUudGFyZ2V0KSkpcmV0dXJuInRhcmdldC4iK3I7aWYobnVsbCE9ZS50eXBlJiZlLmhhc093blByb3BlcnR5KCJ0eXBlIikpc3dpdGNoKGUudHlwZSl7ZGVmYXVsdDpyZXR1cm4idHlwZTogZW51bSB2YWx1ZSBleHBlY3RlZCI7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6fWlmKG51bGwhPWUuZmllbGRzJiZlLmhhc093blByb3BlcnR5KCJmaWVsZHMiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5maWVsZHMpKXJldHVybiJmaWVsZHM6IGFycmF5IGV4cGVjdGVkIjtmb3IodmFyIHQ9MDt0PGUuZmllbGRzLmxlbmd0aDsrK3Qpe3ZhciByO2lmKHI9cy5kYXRhZm9ybS5GaWVsZC52ZXJpZnkoZS5maWVsZHNbdF0pKXJldHVybiJmaWVsZHMuIityfX1pZihudWxsIT1lLmRlc2NyaXB0aW9uJiZlLmhhc093blByb3BlcnR5KCJkZXNjcmlwdGlvbiIpJiYhYS5pc1N0cmluZyhlLmRlc2NyaXB0aW9uKSlyZXR1cm4iZGVzY3JpcHRpb246IHN0cmluZyBleHBlY3RlZCI7aWYobnVsbCE9ZS5sYWJlbHMmJmUuaGFzT3duUHJvcGVydHkoImxhYmVscyIpKXtpZighYS5pc09iamVjdChlLmxhYmVscykpcmV0dXJuImxhYmVsczogb2JqZWN0IGV4cGVjdGVkIjt2YXIgbj1PYmplY3Qua2V5cyhlLmxhYmVscyk7Zm9yKHQ9MDt0PG4ubGVuZ3RoOysrdClpZighYS5pc1N0cmluZyhlLmxhYmVsc1tuW3RdXSkpcmV0dXJuImxhYmVsczogc3RyaW5ne2s6c3RyaW5nfSBleHBlY3RlZCJ9cmV0dXJuIG51bGwhPWUubGFzdFVwZGF0ZWRNaWxsaXMmJmUuaGFzT3duUHJvcGVydHkoImxhc3RVcGRhdGVkTWlsbGlzIikmJiEoYS5pc0ludGVnZXIoZS5sYXN0VXBkYXRlZE1pbGxpcyl8fGUubGFzdFVwZGF0ZWRNaWxsaXMmJmEuaXNJbnRlZ2VyKGUubGFzdFVwZGF0ZWRNaWxsaXMubG93KSYmYS5pc0ludGVnZXIoZS5sYXN0VXBkYXRlZE1pbGxpcy5oaWdoKSk/Imxhc3RVcGRhdGVkTWlsbGlzOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWQiOm51bGwhPWUuYmlncXVlcnkmJmUuaGFzT3duUHJvcGVydHkoImJpZ3F1ZXJ5IikmJihyPXMuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5CaWdRdWVyeS52ZXJpZnkoZS5iaWdxdWVyeSkpPyJiaWdxdWVyeS4iK3I6bnVsbH0sdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGEpcmV0dXJuIGU7dmFyIHQ9bmV3IHMuZGF0YWZvcm0uVGFibGVNZXRhZGF0YTtpZihudWxsIT1lLnRhcmdldCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlLnRhcmdldCl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLnRhcmdldDogb2JqZWN0IGV4cGVjdGVkIik7dC50YXJnZXQ9cy5kYXRhZm9ybS5UYXJnZXQuZnJvbU9iamVjdChlLnRhcmdldCl9c3dpdGNoKGUudHlwZSl7ZGVmYXVsdDppZigibnVtYmVyIj09dHlwZW9mIGUudHlwZSl7dC50eXBlPWUudHlwZTticmVha31icmVhaztjYXNlIlVOS05PV04iOmNhc2UgMDp0LnR5cGU9MDticmVhaztjYXNlIlRBQkxFIjpjYXNlIDE6dC50eXBlPTE7YnJlYWs7Y2FzZSJWSUVXIjpjYXNlIDI6dC50eXBlPTJ9aWYoZS5maWVsZHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZmllbGRzKSl0aHJvdyBUeXBlRXJyb3IoIi5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLmZpZWxkczogYXJyYXkgZXhwZWN0ZWQiKTt0LmZpZWxkcz1bXTtmb3IodmFyIHI9MDtyPGUuZmllbGRzLmxlbmd0aDsrK3Ipe2lmKCJvYmplY3QiIT10eXBlb2YgZS5maWVsZHNbcl0pdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5maWVsZHM6IG9iamVjdCBleHBlY3RlZCIpO3QuZmllbGRzW3JdPXMuZGF0YWZvcm0uRmllbGQuZnJvbU9iamVjdChlLmZpZWxkc1tyXSl9fWlmKG51bGwhPWUuZGVzY3JpcHRpb24mJih0LmRlc2NyaXB0aW9uPVN0cmluZyhlLmRlc2NyaXB0aW9uKSksZS5sYWJlbHMpe2lmKCJvYmplY3QiIT10eXBlb2YgZS5sYWJlbHMpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5sYWJlbHM6IG9iamVjdCBleHBlY3RlZCIpO3QubGFiZWxzPXt9O3ZhciBuPU9iamVjdC5rZXlzKGUubGFiZWxzKTtmb3Iocj0wO3I8bi5sZW5ndGg7KytyKXQubGFiZWxzW25bcl1dPVN0cmluZyhlLmxhYmVsc1tuW3JdXSl9aWYobnVsbCE9ZS5sYXN0VXBkYXRlZE1pbGxpcyYmKGEuTG9uZz8odC5sYXN0VXBkYXRlZE1pbGxpcz1hLkxvbmcuZnJvbVZhbHVlKGUubGFzdFVwZGF0ZWRNaWxsaXMpKS51bnNpZ25lZD0hMToic3RyaW5nIj09dHlwZW9mIGUubGFzdFVwZGF0ZWRNaWxsaXM/dC5sYXN0VXBkYXRlZE1pbGxpcz1wYXJzZUludChlLmxhc3RVcGRhdGVkTWlsbGlzLDEwKToibnVtYmVyIj09dHlwZW9mIGUubGFzdFVwZGF0ZWRNaWxsaXM/dC5sYXN0VXBkYXRlZE1pbGxpcz1lLmxhc3RVcGRhdGVkTWlsbGlzOiJvYmplY3QiPT10eXBlb2YgZS5sYXN0VXBkYXRlZE1pbGxpcyYmKHQubGFzdFVwZGF0ZWRNaWxsaXM9bmV3IGEuTG9uZ0JpdHMoZS5sYXN0VXBkYXRlZE1pbGxpcy5sb3c+Pj4wLGUubGFzdFVwZGF0ZWRNaWxsaXMuaGlnaD4+PjApLnRvTnVtYmVyKCkpKSxudWxsIT1lLmJpZ3F1ZXJ5KXtpZigib2JqZWN0IiE9dHlwZW9mIGUuYmlncXVlcnkpdGhyb3cgVHlwZUVycm9yKCIuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5iaWdxdWVyeTogb2JqZWN0IGV4cGVjdGVkIik7dC5iaWdxdWVyeT1zLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuQmlnUXVlcnkuZnJvbU9iamVjdChlLmJpZ3F1ZXJ5KX1yZXR1cm4gdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcixuPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihuLmZpZWxkcz1bXSksKHQub2JqZWN0c3x8dC5kZWZhdWx0cykmJihuLmxhYmVscz17fSksdC5kZWZhdWx0cyYmKG4udGFyZ2V0PW51bGwsbi5sYXN0VXBkYXRlZE1pbGxpcz0wLG4uZGVzY3JpcHRpb249IiIsbi50eXBlPXQuZW51bXM9PT1TdHJpbmc/IlVOS05PV04iOjAsbi5iaWdxdWVyeT1udWxsKSxudWxsIT1lLnRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eSgidGFyZ2V0IikmJihuLnRhcmdldD1zLmRhdGFmb3JtLlRhcmdldC50b09iamVjdChlLnRhcmdldCx0KSksZS5maWVsZHMmJmUuZmllbGRzLmxlbmd0aCl7bi5maWVsZHM9W107Zm9yKHZhciBvPTA7bzxlLmZpZWxkcy5sZW5ndGg7KytvKW4uZmllbGRzW29dPXMuZGF0YWZvcm0uRmllbGQudG9PYmplY3QoZS5maWVsZHNbb10sdCl9aWYobnVsbCE9ZS5sYXN0VXBkYXRlZE1pbGxpcyYmZS5oYXNPd25Qcm9wZXJ0eSgibGFzdFVwZGF0ZWRNaWxsaXMiKSYmKCJudW1iZXIiPT10eXBlb2YgZS5sYXN0VXBkYXRlZE1pbGxpcz9uLmxhc3RVcGRhdGVkTWlsbGlzPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUubGFzdFVwZGF0ZWRNaWxsaXMpOmUubGFzdFVwZGF0ZWRNaWxsaXM6bi5sYXN0VXBkYXRlZE1pbGxpcz10LmxvbmdzPT09U3RyaW5nP2EuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmxhc3RVcGRhdGVkTWlsbGlzKTp0LmxvbmdzPT09TnVtYmVyP25ldyBhLkxvbmdCaXRzKGUubGFzdFVwZGF0ZWRNaWxsaXMubG93Pj4+MCxlLmxhc3RVcGRhdGVkTWlsbGlzLmhpZ2g+Pj4wKS50b051bWJlcigpOmUubGFzdFVwZGF0ZWRNaWxsaXMpLG51bGwhPWUuZGVzY3JpcHRpb24mJmUuaGFzT3duUHJvcGVydHkoImRlc2NyaXB0aW9uIikmJihuLmRlc2NyaXB0aW9uPWUuZGVzY3JpcHRpb24pLG51bGwhPWUudHlwZSYmZS5oYXNPd25Qcm9wZXJ0eSgidHlwZSIpJiYobi50eXBlPXQuZW51bXM9PT1TdHJpbmc/dm9pZCAwPT09cy5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLlR5cGVbZS50eXBlXT9lLnR5cGU6cy5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLlR5cGVbZS50eXBlXTplLnR5cGUpLGUubGFiZWxzJiYocj1PYmplY3Qua2V5cyhlLmxhYmVscykpLmxlbmd0aClmb3Iobi5sYWJlbHM9e30sbz0wO288ci5sZW5ndGg7KytvKW4ubGFiZWxzW3Jbb11dPWUubGFiZWxzW3Jbb11dO3JldHVybiBudWxsIT1lLmJpZ3F1ZXJ5JiZlLmhhc093blByb3BlcnR5KCJiaWdxdWVyeSIpJiYobi5iaWdxdWVyeT1zLmRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuQmlnUXVlcnkudG9PYmplY3QoZS5iaWdxdWVyeSx0KSksbn0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxlLnV0aWwudG9KU09OT3B0aW9ucyl9LHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9InR5cGUuZ29vZ2xlYXBpcy5jb20iKSxlKyIvZGF0YWZvcm0uVGFibGVNZXRhZGF0YSJ9LHQuVHlwZT1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9T2JqZWN0LmNyZWF0ZShlKTtyZXR1cm4gdFtlWzBdPSJVTktOT1dOIl09MCx0W2VbMV09IlRBQkxFIl09MSx0W2VbMl09IlZJRVciXT0yLHR9KCksdC5CaWdRdWVyeT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiB0LnByb3RvdHlwZS5oYXNTdHJlYW1pbmdCdWZmZXI9ITEsdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1pLmNyZWF0ZSgpKSxudWxsIT1lLmhhc1N0cmVhbWluZ0J1ZmZlciYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZSwiaGFzU3RyZWFtaW5nQnVmZmVyIikmJnQudWludDMyKDgpLmJvb2woZS5oYXNTdHJlYW1pbmdCdWZmZXIpLHR9LHQuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LG49bmV3IHMuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5CaWdRdWVyeTtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtpPj4+Mz09MT9uLmhhc1N0cmVhbWluZ0J1ZmZlcj1lLmJvb2woKTplLnNraXBUeXBlKDcmaSl9cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWU/Im9iamVjdCBleHBlY3RlZCI6bnVsbCE9ZS5oYXNTdHJlYW1pbmdCdWZmZXImJmUuaGFzT3duUHJvcGVydHkoImhhc1N0cmVhbWluZ0J1ZmZlciIpJiYiYm9vbGVhbiIhPXR5cGVvZiBlLmhhc1N0cmVhbWluZ0J1ZmZlcj8iaGFzU3RyZWFtaW5nQnVmZmVyOiBib29sZWFuIGV4cGVjdGVkIjpudWxsfSx0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMuZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5CaWdRdWVyeSlyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLkJpZ1F1ZXJ5O3JldHVybiBudWxsIT1lLmhhc1N0cmVhbWluZ0J1ZmZlciYmKHQuaGFzU3RyZWFtaW5nQnVmZmVyPUJvb2xlYW4oZS5oYXNTdHJlYW1pbmdCdWZmZXIpKSx0fSx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci5oYXNTdHJlYW1pbmdCdWZmZXI9ITEpLG51bGwhPWUuaGFzU3RyZWFtaW5nQnVmZmVyJiZlLmhhc093blByb3BlcnR5KCJoYXNTdHJlYW1pbmdCdWZmZXIiKSYmKHIuaGFzU3RyZWFtaW5nQnVmZmVyPWUuaGFzU3RyZWFtaW5nQnVmZmVyKSxyfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLGUudXRpbC50b0pTT05PcHRpb25zKX0sdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0idHlwZS5nb29nbGVhcGlzLmNvbSIpLGUrIi9kYXRhZm9ybS5UYWJsZU1ldGFkYXRhLkJpZ1F1ZXJ5In0sdH0oKSx0fSgpLG4uQmlnUXVlcnk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gdC5wcm90b3R5cGUucHJvamVjdElkPSIiLHQucHJvdG90eXBlLmNyZWRlbnRpYWxzPSIiLHQucHJvdG90eXBlLmxvY2F0aW9uPSIiLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9aS5jcmVhdGUoKSksbnVsbCE9ZS5wcm9qZWN0SWQmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsInByb2plY3RJZCIpJiZ0LnVpbnQzMigxMCkuc3RyaW5nKGUucHJvamVjdElkKSxudWxsIT1lLmNyZWRlbnRpYWxzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLCJjcmVkZW50aWFscyIpJiZ0LnVpbnQzMigyNikuc3RyaW5nKGUuY3JlZGVudGlhbHMpLG51bGwhPWUubG9jYXRpb24mJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImxvY2F0aW9uIikmJnQudWludDMyKDM0KS5zdHJpbmcoZS5sb2NhdGlvbiksdH0sdC5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2Ygb3x8KGU9by5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3Qsbj1uZXcgcy5kYXRhZm9ybS5CaWdRdWVyeTtlLnBvczxyOyl7dmFyIGk9ZS51aW50MzIoKTtzd2l0Y2goaT4+PjMpe2Nhc2UgMTpuLnByb2plY3RJZD1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzpuLmNyZWRlbnRpYWxzPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSA0Om4ubG9jYXRpb249ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZpKX19cmV0dXJuIG59LHQuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygb3x8KGU9bmV3IG8oZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LHQudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWU/Im9iamVjdCBleHBlY3RlZCI6bnVsbCE9ZS5wcm9qZWN0SWQmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3RJZCIpJiYhYS5pc1N0cmluZyhlLnByb2plY3RJZCk/InByb2plY3RJZDogc3RyaW5nIGV4cGVjdGVkIjpudWxsIT1lLmNyZWRlbnRpYWxzJiZlLmhhc093blByb3BlcnR5KCJjcmVkZW50aWFscyIpJiYhYS5pc1N0cmluZyhlLmNyZWRlbnRpYWxzKT8iY3JlZGVudGlhbHM6IHN0cmluZyBleHBlY3RlZCI6bnVsbCE9ZS5sb2NhdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eSgibG9jYXRpb24iKSYmIWEuaXNTdHJpbmcoZS5sb2NhdGlvbik/ImxvY2F0aW9uOiBzdHJpbmcgZXhwZWN0ZWQiOm51bGx9LHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2Ygcy5kYXRhZm9ybS5CaWdRdWVyeSlyZXR1cm4gZTt2YXIgdD1uZXcgcy5kYXRhZm9ybS5CaWdRdWVyeTtyZXR1cm4gbnVsbCE9ZS5wcm9qZWN0SWQmJih0LnByb2plY3RJZD1TdHJpbmcoZS5wcm9qZWN0SWQpKSxudWxsIT1lLmNyZWRlbnRpYWxzJiYodC5jcmVkZW50aWFscz1TdHJpbmcoZS5jcmVkZW50aWFscykpLG51bGwhPWUubG9jYXRpb24mJih0LmxvY2F0aW9uPVN0cmluZyhlLmxvY2F0aW9uKSksdH0sdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtyZXR1cm4gdC5kZWZhdWx0cyYmKHIucHJvamVjdElkPSIiLHIuY3JlZGVudGlhbHM9IiIsci5sb2NhdGlvbj0iIiksbnVsbCE9ZS5wcm9qZWN0SWQmJmUuaGFzT3duUHJvcGVydHkoInByb2plY3RJZCIpJiYoci5wcm9qZWN0SWQ9ZS5wcm9qZWN0SWQpLG51bGwhPWUuY3JlZGVudGlhbHMmJmUuaGFzT3duUHJvcGVydHkoImNyZWRlbnRpYWxzIikmJihyLmNyZWRlbnRpYWxzPWUuY3JlZGVudGlhbHMpLG51bGwhPWUubG9jYXRpb24mJmUuaGFzT3duUHJvcGVydHkoImxvY2F0aW9uIikmJihyLmxvY2F0aW9uPWUubG9jYXRpb24pLHJ9LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsZS51dGlsLnRvSlNPTk9wdGlvbnMpfSx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSJ0eXBlLmdvb2dsZWFwaXMuY29tIiksZSsiL2RhdGFmb3JtLkJpZ1F1ZXJ5In0sdH0oKSxuKSxzfSk/bi5hcHBseSh0LG8pOm4pfHwoZS5leHBvcnRzPWkpfSw2OTQzOmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKHIoODg3KSksaT0ic3FsIixhPSJqc0Jsb2NrIixzPSJqc1RlbXBsYXRlU3RyaW5nIixsPSJpbm5lclNxbEJsb2NrIixjPSJpbm5lclNpbmdsZVF1b3RlIix1PSJpbm5lckRvdWJsZVF1b3RlIixwPSJpbm5lclRyaXBsZVNpbmdsZVF1b3RlIixkPSJpbm5lclRyaXBsZURvdWJsZVF1b3RlIixmPXtTVEFSVF9DT05GSUc6aSsiX3N0YXJ0Q29uZmlnIixTVEFSVF9KUzppKyJfc3RhcnRKcyIsU1RBUlRfSU5DUkVNRU5UQUw6aSsiX3N0YXJ0SW5jcmVtZW50YWwiLFNUQVJUX1BSRV9PUEVSQVRJT05TOmkrIl9zdGFydFByZU9wZXJhdGlvbnMiLFNUQVJUX1BPU1RfT1BFUkFUSU9OUzppKyJfc3RhcnRQb3N0T3BlcmF0aW9ucyIsU1RBUlRfSU5QVVQ6aSsiX3N0YXJ0SW5wdXQiLFNUQVRFTUVOVF9TRVBFUkFUT1I6aSsiX3N0YXRlbWVudFNlcGFyYXRvciIsU0lOR0xFX0xJTkVfQ09NTUVOVDppKyJfc2luZ2xlTGluZUNvbW1lbnQiLE1VTFRJX0xJTkVfQ09NTUVOVDppKyJfbXVsdGlMaW5lQ29tbWVudCIsU1RBUlRfSlNfUExBQ0VIT0xERVI6aSsiX3N0YXJ0SnNQbGFjZWhvbGRlciIsQkFDS1RJQ0s6aSsiX2JhY2t0aWNrIixTVEFSVF9RVU9URV9TSU5HTEU6aSsiX3N0YXJ0UXVvdGVTaW5nbGUiLFNUQVJUX1FVT1RFX0RPVUJMRTppKyJfc3RhcnRRdW90ZURvdWJsZSIsU1RBUlRfVFJJUExFX1FVT1RFX1NJTkdMRTppKyJfc3RhcnRUcmlwbGVRdW90ZVNpbmdsZSIsU1RBUlRfVFJJUExFX1FVT1RFX0RPVUJMRTppKyJfc3RhcnRUcmlwbGVRdW90ZURvdWJsZSIsQ0FQVFVSRV9FVkVSWVRISU5HX0VMU0U6aSsiX2NhcHR1cmVFdmVyeXRoaW5nRWxzZSJ9LGg9e1NJTkdMRV9MSU5FX0NPTU1FTlQ6YSsiX3NpbmdsZUxpbmVDb21tZW50IixNVUxUSV9MSU5FX0NPTU1FTlQ6YSsiX211bHRpTGluZUNvbW1lbnQiLFNJTkdMRV9RVU9URV9TVFJJTkc6YSsiX3NpbmdsZVF1b3RlU3RyaW5nIixET1VCTEVfUVVPVEVfU1RSSU5HOmErIl9kb3VibGVRdW90ZVN0cmluZyIsU1RBUlRfSlNfVEVNUExBVEVfU1RSSU5HOmErIl9zdGFydEpzVGVtcGxhdGVTdHJpbmciLFNUQVJUX0pTX0JMT0NLOmErIl9zdGFydEpzQmxvY2siLENMT1NFX0JMT0NLOmErIl9jbG9zZUJsb2NrIixDQVBUVVJFX0VWRVJZVEhJTkdfRUxTRTphKyJfY2FwdHVyZUV2ZXJ5dGhpbmdFbHNlIn0sZz17RVNDQVBFRF9CQUNLU0xBU0g6cysiX2VzY2FwZWRCYWNrc2xhc2giLEVTQ0FQRURfRE9MTEFSX0JSQUNFOnMrIl9lc2NhcGVkRG9sbGFyQnJhY2UiLFNUQVJUX0pTX0JMT0NLOnMrIl9zdGFydEpzQmxvY2siLENMT1NFX1NUUklORzpzKyJfY2xvc2VTdHJpbmciLENBUFRVUkVfRVZFUllUSElOR19FTFNFOnMrIl9jYXB0dXJlRXZlcnl0aGluZ0Vsc2UifSx5PXtTVEFURU1FTlRfU0VQRVJBVE9SOmwrIl9zdGF0ZW1lbnRTZXBhcmF0b3IiLFNJTkdMRV9MSU5FX0NPTU1FTlQ6bCsiX3NpbmdsZUxpbmVDb21tZW50IixNVUxUSV9MSU5FX0NPTU1FTlQ6bCsiX211bHRpTGluZUNvbW1lbnQiLFNUQVJUX0pTX1BMQUNFSE9MREVSOmwrIl9zdGFydEpzUGxhY2Vob2xkZXIiLENMT1NFX0JMT0NLOmwrIl9jbG9zZUJsb2NrIixCQUNLVElDSzpsKyJfYmFja3RpY2siLFNUQVJUX1FVT1RFX1NJTkdMRTpsKyJfc3RhcnRRdW90ZVNpbmdsZSIsU1RBUlRfUVVPVEVfRE9VQkxFOmwrIl9zdGFydFF1b3RlRG91YmxlIixTVEFSVF9UUklQTEVfUVVPVEVfU0lOR0xFOmwrIl9zdGFydFRyaXBsZVF1b3RlU2luZ2xlIixTVEFSVF9UUklQTEVfUVVPVEVfRE9VQkxFOmwrIl9zdGFydFRyaXBsZVF1b3RlRG91YmxlIixDQVBUVVJFX0VWRVJZVEhJTkdfRUxTRTpsKyJfY2FwdHVyZUV2ZXJ5dGhpbmdFbHNlIn0sbT17RVNDQVBFRF9CQUNLU0xBU0g6YysiX2VzY2FwZWRCYWNrc2xhc2giLEVTQ0FQRURfUVVPVEU6YysiX2VzY2FwZWRRdW90ZVNpbmdsZSIsU1RBUlRfSlNfUExBQ0VIT0xERVI6YysiX3N0YXJ0SnNQbGFjZWhvbGRlciIsQ0xPU0VfUVVPVEU6YysiX2Nsb3NlUXVvdGVTaW5nbGUiLENBUFRVUkVfRVZFUllUSElOR19FTFNFOmMrIl9jYXB0dXJlRXZlcnl0aGluZ0Vsc2UifSxiPXtFU0NBUEVEX0JBQ0tTTEFTSDp1KyJfZXNjYXBlZEJhY2tzbGFzaCIsRVNDQVBFRF9RVU9URTp1KyJfZXNjYXBlZFF1b3RlRG91YmxlIixTVEFSVF9KU19QTEFDRUhPTERFUjp1KyJfc3RhcnRKc1BsYWNlaG9sZGVyIixDTE9TRV9RVU9URTp1KyJfY2xvc2VRdW90ZURvdWJsZSIsQ0FQVFVSRV9FVkVSWVRISU5HX0VMU0U6dSsiX2NhcHR1cmVFdmVyeXRoaW5nRWxzZSJ9LE89e0VTQ0FQRURfQkFDS1NMQVNIOnArIl9lc2NhcGVkQmFja3NsYXNoIixTVEFSVF9KU19QTEFDRUhPTERFUjpwKyJfc3RhcnRKc1BsYWNlaG9sZGVyIixDTE9TRV9RVU9URTpwKyJfY2xvc2VUcmlwbGVRdW90ZVNpbmdsZSIsQ0FQVFVSRV9FVkVSWVRISU5HX0VMU0U6cCsiX2NhcHR1cmVFdmVyeXRoaW5nRWxzZSJ9LFQ9e0VTQ0FQRURfQkFDS1NMQVNIOmQrIl9lc2NhcGVkQmFja3NsYXNoIixTVEFSVF9KU19QTEFDRUhPTERFUjpkKyJfc3RhcnRKc1BsYWNlaG9sZGVyIixDTE9TRV9RVU9URTpkKyJfY2xvc2VUcmlwbGVRdW90ZURvdWJsZSIsQ0FQVFVSRV9FVkVSWVRISU5HX0VMU0U6ZCsiX2NhcHR1cmVFdmVyeXRoaW5nRWxzZSJ9LHY9by5zdGF0ZXMoZnVuY3Rpb24oKXtjb25zdCBlPXt9O2VbZi5TVEFSVF9DT05GSUddPXttYXRjaDoiY29uZmlnIHsiLHB1c2g6YX0sZVtmLlNUQVJUX0pTXT17bWF0Y2g6ImpzIHsiLHB1c2g6YX0sZVtmLlNUQVJUX0lOQ1JFTUVOVEFMXT17bWF0Y2g6ImluY3JlbWVudGFsX3doZXJlIHsiLHB1c2g6bH0sZVtmLlNUQVJUX1BSRV9PUEVSQVRJT05TXT17bWF0Y2g6InByZV9vcGVyYXRpb25zIHsiLHB1c2g6bH0sZVtmLlNUQVJUX1BPU1RfT1BFUkFUSU9OU109e21hdGNoOiJwb3N0X29wZXJhdGlvbnMgeyIscHVzaDpsfSxlW2YuU1RBUlRfSU5QVVRdPXttYXRjaDovaW5wdXQgIlthLXpBLVowLTlfLV0rIig/OixccyoiW2EtekEtWjAtOV8tXSsiKSogey8scHVzaDpsfSxlW2YuU1RBVEVNRU5UX1NFUEVSQVRPUl09L1teXFNcclxuXSotLS1bXlxTXHJcbl0qJC8sZVtmLlNJTkdMRV9MSU5FX0NPTU1FTlRdPS8tLS4qPyQvLGVbZi5NVUxUSV9MSU5FX0NPTU1FTlRdPS9cL1wqW1xzXFNdKj9cKlwvLyxlW2YuU1RBUlRfSlNfUExBQ0VIT0xERVJdPXttYXRjaDoiJHsiLHB1c2g6YX0sZVtmLkJBQ0tUSUNLXT0iYCIsZVtmLlNUQVJUX1RSSVBMRV9RVU9URV9TSU5HTEVdPXttYXRjaDoiJycnIixwdXNoOnB9LGVbZi5TVEFSVF9UUklQTEVfUVVPVEVfRE9VQkxFXT17bWF0Y2g6JyIiIicscHVzaDpkfSxlW2YuU1RBUlRfUVVPVEVfU0lOR0xFXT17bWF0Y2g6IiciLHB1c2g6Y30sZVtmLlNUQVJUX1FVT1RFX0RPVUJMRV09e21hdGNoOiciJyxwdXNoOnV9LGVbZi5DQVBUVVJFX0VWRVJZVEhJTkdfRUxTRV09e21hdGNoOi9bXHNcU10rPy8sbGluZUJyZWFrczohMH07Y29uc3QgdD17fTt0W2guU0lOR0xFX0xJTkVfQ09NTUVOVF09L1wvXC8uKj8kLyx0W2guTVVMVElfTElORV9DT01NRU5UXT0vXC9cKltcc1xTXSo/XCpcLy8sdFtoLlNJTkdMRV9RVU9URV9TVFJJTkddPS8nKD86XFxbJ1xcXXxbXlxuJ1xcXSkqJy8sdFtoLkRPVUJMRV9RVU9URV9TVFJJTkddPS8iKD86XFxbIlxcXXxbXlxuIlxcXSkqIi8sdFtoLlNUQVJUX0pTX1RFTVBMQVRFX1NUUklOR109e21hdGNoOiJgIixwdXNoOnN9LHRbaC5TVEFSVF9KU19CTE9DS109e21hdGNoOiJ7IixwdXNoOmF9LHRbaC5DTE9TRV9CTE9DS109e21hdGNoOiJ9Iixwb3A6MX0sdFtoLkNBUFRVUkVfRVZFUllUSElOR19FTFNFXT17bWF0Y2g6L1tcc1xTXSs/LyxsaW5lQnJlYWtzOiEwfTtjb25zdCByPXt9O3JbZy5FU0NBUEVEX0JBQ0tTTEFTSF09L1xcXFwvLHJbZy5FU0NBUEVEX0RPTExBUl9CUkFDRV09L1xcXCR7YC8scltnLlNUQVJUX0pTX0JMT0NLXT17bWF0Y2g6IiR7IixwdXNoOmF9LHJbZy5DTE9TRV9TVFJJTkddPXttYXRjaDoiYCIscG9wOjF9LHJbZy5DQVBUVVJFX0VWRVJZVEhJTkdfRUxTRV09e21hdGNoOi9bXHNcU10rPy8sbGluZUJyZWFrczohMH07Y29uc3Qgbj17fTtuW3kuU1RBVEVNRU5UX1NFUEVSQVRPUl09L1teXFNcclxuXSotLS1bXlxTXHJcbl0qJC8sblt5LlNJTkdMRV9MSU5FX0NPTU1FTlRdPS8tLS4qPyQvLG5beS5NVUxUSV9MSU5FX0NPTU1FTlRdPS9cL1wqW1xzXFNdKj9cKlwvLyxuW3kuU1RBUlRfSlNfUExBQ0VIT0xERVJdPXttYXRjaDoiJHsiLHB1c2g6YX0sblt5LkNMT1NFX0JMT0NLXT17bWF0Y2g6In0iLHBvcDoxfSxuW3kuQkFDS1RJQ0tdPSJgIixuW3kuU1RBUlRfVFJJUExFX1FVT1RFX1NJTkdMRV09e21hdGNoOiInJyciLHB1c2g6cH0sblt5LlNUQVJUX1RSSVBMRV9RVU9URV9ET1VCTEVdPXttYXRjaDonIiIiJyxwdXNoOmR9LG5beS5TVEFSVF9RVU9URV9TSU5HTEVdPXttYXRjaDoiJyIscHVzaDpjfSxuW3kuU1RBUlRfUVVPVEVfRE9VQkxFXT17bWF0Y2g6JyInLHB1c2g6dX0sblt5LkNBUFRVUkVfRVZFUllUSElOR19FTFNFXT17bWF0Y2g6L1tcc1xTXSs/LyxsaW5lQnJlYWtzOiEwfTtjb25zdCBvPXt9O29bbS5FU0NBUEVEX0JBQ0tTTEFTSF09IlxcXFwiLG9bbS5FU0NBUEVEX1FVT1RFXT0iXFwnIixvW20uU1RBUlRfSlNfUExBQ0VIT0xERVJdPXttYXRjaDoiJHsiLHB1c2g6YX0sb1ttLkNMT1NFX1FVT1RFXT17bWF0Y2g6IiciLHBvcDoxfSxvW20uQ0FQVFVSRV9FVkVSWVRISU5HX0VMU0VdPXttYXRjaDovW1xzXFNdKz8vLGxpbmVCcmVha3M6ITB9O2NvbnN0IHY9e307dltiLkVTQ0FQRURfQkFDS1NMQVNIXT0iXFxcXCIsdltiLkVTQ0FQRURfUVVPVEVdPXttYXRjaDonXFwiJ30sb1tiLlNUQVJUX0pTX1BMQUNFSE9MREVSXT17bWF0Y2g6IiR7IixwdXNoOmF9LHZbYi5DTE9TRV9RVU9URV09e21hdGNoOiciJyxwb3A6MX0sdltiLkNBUFRVUkVfRVZFUllUSElOR19FTFNFXT17bWF0Y2g6L1tcc1xTXSs/LyxsaW5lQnJlYWtzOiEwfTtjb25zdCB3PXt9O3dbTy5FU0NBUEVEX0JBQ0tTTEFTSF09IlxcXFwiLHdbTy5TVEFSVF9KU19QTEFDRUhPTERFUl09e21hdGNoOiIkeyIscHVzaDphfSx3W08uQ0xPU0VfUVVPVEVdPXttYXRjaDoiJycnIixwb3A6MX0sd1tPLkNBUFRVUkVfRVZFUllUSElOR19FTFNFXT17bWF0Y2g6L1tcc1xTXSs/LyxsaW5lQnJlYWtzOiEwfTtjb25zdCBqPXt9O2pbVC5FU0NBUEVEX0JBQ0tTTEFTSF09IlxcXFwiLGpbVC5TVEFSVF9KU19QTEFDRUhPTERFUl09e21hdGNoOiIkeyIscHVzaDphfSxqW1QuQ0xPU0VfUVVPVEVdPXttYXRjaDonIiIiJyxwb3A6MX0saltULkNBUFRVUkVfRVZFUllUSElOR19FTFNFXT17bWF0Y2g6L1tcc1xTXSs/LyxsaW5lQnJlYWtzOiEwfTtjb25zdCBBPXt9O3JldHVybiBBW2ldPWUsQVthXT10LEFbc109cixBW2xdPW4sQVtjXT1vLEFbdV09dixBW3BdPXcsQVtkXT1qLEF9KCkpO3ZhciB3OyFmdW5jdGlvbihlKXtlW2UuSkFWQVNDUklQVD0wXT0iSkFWQVNDUklQVCIsZVtlLkpBVkFTQ1JJUFRfVEVNUExBVEVfU1RSSU5HX1BMQUNFSE9MREVSPTFdPSJKQVZBU0NSSVBUX1RFTVBMQVRFX1NUUklOR19QTEFDRUhPTERFUiIsZVtlLlNRTD0yXT0iU1FMIixlW2UuU1FMX0NPTU1FTlQ9M109IlNRTF9DT01NRU5UIixlW2UuU1FMX0xJVEVSQUxfU1RSSU5HPTRdPSJTUUxfTElURVJBTF9TVFJJTkciLGVbZS5TUUxfTElURVJBTF9NVUxUSUxJTkVfU1RSSU5HPTVdPSJTUUxfTElURVJBTF9NVUxUSUxJTkVfU1RSSU5HIixlW2UuU1FMX1NUQVRFTUVOVF9TRVBBUkFUT1I9Nl09IlNRTF9TVEFURU1FTlRfU0VQQVJBVE9SIn0odz10LlN5bnRheFRyZWVOb2RlVHlwZXx8KHQuU3ludGF4VHJlZU5vZGVUeXBlPXt9KSk7Y29uc3Qgaj1uZXcgTWFwKFtbZi5TVEFSVF9DT05GSUcsdy5KQVZBU0NSSVBUXSxbZi5TVEFSVF9JTkNSRU1FTlRBTCx3LlNRTF0sW2YuU1RBUlRfSU5QVVQsdy5TUUxdLFtmLlNUQVJUX0pTLHcuSkFWQVNDUklQVF0sW2YuU1RBUlRfSlNfUExBQ0VIT0xERVIsdy5KQVZBU0NSSVBUX1RFTVBMQVRFX1NUUklOR19QTEFDRUhPTERFUl0sW2YuU1RBUlRfUE9TVF9PUEVSQVRJT05TLHcuU1FMXSxbZi5TVEFSVF9QUkVfT1BFUkFUSU9OUyx3LlNRTF0sW2YuU1RBUlRfUVVPVEVfU0lOR0xFLHcuU1FMX0xJVEVSQUxfU1RSSU5HXSxbZi5TVEFSVF9RVU9URV9ET1VCTEUsdy5TUUxfTElURVJBTF9TVFJJTkddLFtmLlNUQVJUX1RSSVBMRV9RVU9URV9TSU5HTEUsdy5TUUxfTElURVJBTF9NVUxUSUxJTkVfU1RSSU5HXSxbZi5TVEFSVF9UUklQTEVfUVVPVEVfRE9VQkxFLHcuU1FMX0xJVEVSQUxfTVVMVElMSU5FX1NUUklOR10sW2guU1RBUlRfSlNfQkxPQ0ssdy5KQVZBU0NSSVBUXSxbZy5TVEFSVF9KU19CTE9DSyx3LkpBVkFTQ1JJUFRdLFt5LlNUQVJUX0pTX1BMQUNFSE9MREVSLHcuSkFWQVNDUklQVF9URU1QTEFURV9TVFJJTkdfUExBQ0VIT0xERVJdLFt5LlNUQVJUX1FVT1RFX1NJTkdMRSx3LlNRTF9MSVRFUkFMX1NUUklOR10sW3kuU1RBUlRfUVVPVEVfRE9VQkxFLHcuU1FMX0xJVEVSQUxfU1RSSU5HXSxbeS5TVEFSVF9UUklQTEVfUVVPVEVfU0lOR0xFLHcuU1FMX0xJVEVSQUxfTVVMVElMSU5FX1NUUklOR10sW3kuU1RBUlRfVFJJUExFX1FVT1RFX0RPVUJMRSx3LlNRTF9MSVRFUkFMX01VTFRJTElORV9TVFJJTkddLFttLlNUQVJUX0pTX1BMQUNFSE9MREVSLHcuSkFWQVNDUklQVF9URU1QTEFURV9TVFJJTkdfUExBQ0VIT0xERVJdLFtiLlNUQVJUX0pTX1BMQUNFSE9MREVSLHcuSkFWQVNDUklQVF9URU1QTEFURV9TVFJJTkdfUExBQ0VIT0xERVJdLFtPLlNUQVJUX0pTX1BMQUNFSE9MREVSLHcuSkFWQVNDUklQVF9URU1QTEFURV9TVFJJTkdfUExBQ0VIT0xERVJdLFtULlNUQVJUX0pTX1BMQUNFSE9MREVSLHcuSkFWQVNDUklQVF9URU1QTEFURV9TVFJJTkdfUExBQ0VIT0xERVJdXSksQT1uZXcgU2V0KFtoLkNMT1NFX0JMT0NLLHkuQ0xPU0VfQkxPQ0ssbS5DTE9TRV9RVU9URSxiLkNMT1NFX1FVT1RFLE8uQ0xPU0VfUVVPVEUsVC5DTE9TRV9RVU9URV0pLFA9bmV3IE1hcChbW2YuTVVMVElfTElORV9DT01NRU5ULHcuU1FMX0NPTU1FTlRdLFtmLlNJTkdMRV9MSU5FX0NPTU1FTlQsdy5TUUxfQ09NTUVOVF0sW2YuU1RBVEVNRU5UX1NFUEVSQVRPUix3LlNRTF9TVEFURU1FTlRfU0VQQVJBVE9SXSxbeS5NVUxUSV9MSU5FX0NPTU1FTlQsdy5TUUxfQ09NTUVOVF0sW3kuU0lOR0xFX0xJTkVfQ09NTUVOVCx3LlNRTF9DT01NRU5UXSxbeS5TVEFURU1FTlRfU0VQRVJBVE9SLHcuU1FMX1NUQVRFTUVOVF9TRVBBUkFUT1JdXSk7Y2xhc3MgQ3tjb25zdHJ1Y3RvcihlLHQ9W10pe3RoaXMudHlwZT1lLHRoaXMuYWxsQ2hpbGRyZW49dH1zdGF0aWMgY3JlYXRlKGUpe2NvbnN0IHQ9bmV3IEMody5TUUwpO2xldCByPXQ7Y29uc3Qgbj1bcl07di5yZXNldChlKTtmb3IoY29uc3QgZSBvZiB2KXtpZighZS50eXBlKXRocm93IG5ldyBFcnJvcigiVW5kZWZpbmVkIHRva2VuIHR5cGUgZW5jb3VudGVyZWQuIik7aWYoai5oYXMoZS50eXBlKSl7Y29uc3QgdD1qLmdldChlLnR5cGUpO2lmKHQ9PT13LlNRTCYmci50eXBlIT09dy5TUUwpdGhyb3cgbmV3IEVycm9yKCJTUUwgc3ludGF4IHRyZWUgbm9kZXMgbWF5IG9ubHkgYmUgY2hpbGRyZW4gb2Ygb3RoZXIgU1FMIG5vZGVzLiIpO2NvbnN0IG89bmV3IEModCxbZS52YWx1ZV0pO24ucHVzaChvKSxyLnB1c2gobykscj1vfWVsc2UgQS5oYXMoZS50eXBlKT8oci5wdXNoKGUudmFsdWUpLG4ucG9wKCkscj1uW24ubGVuZ3RoLTFdKTpQLmhhcyhlLnR5cGUpP3IucHVzaChuZXcgQyhQLmdldChlLnR5cGUpKS5wdXNoKGUudmFsdWUpKTpyLnB1c2goZS52YWx1ZSl9cmV0dXJuIHR9c3RhdGljIGlzU3ludGF4VHJlZU5vZGUoZSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlfWNoaWxkcmVuKCl7cmV0dXJuIHRoaXMuYWxsQ2hpbGRyZW4uc2xpY2UoKX1jb25jYXRlbmF0ZShlKXtjb25zdCB0PShudWxsPT1lP3ZvaWQgMDplLmhhcyh0aGlzLnR5cGUpKT9lLmdldCh0aGlzLnR5cGUpOmU9PmU7cmV0dXJuIHRoaXMuYWxsQ2hpbGRyZW4ubWFwKChlPT4ic3RyaW5nIj09dHlwZW9mIGU/dChlKTplLmNvbmNhdGVuYXRlKCkpKS5qb2luKCIiKX1wdXNoKGUpe3JldHVybiB0aGlzLmFsbENoaWxkcmVuLmxlbmd0aD4wJiYic3RyaW5nIj09dHlwZW9mIGUmJiJzdHJpbmciPT10eXBlb2YgdGhpcy5hbGxDaGlsZHJlblt0aGlzLmFsbENoaWxkcmVuLmxlbmd0aC0xXT8odGhpcy5hbGxDaGlsZHJlblt0aGlzLmFsbENoaWxkcmVuLmxlbmd0aC0xXT10aGlzLmFsbENoaWxkcmVuW3RoaXMuYWxsQ2hpbGRyZW4ubGVuZ3RoLTFdK2UsdGhpcyk6KHRoaXMuYWxsQ2hpbGRyZW4ucHVzaChlKSx0aGlzKX1lcXVhbHMoZSl7cmV0dXJuIHRoaXMudHlwZT09PWUudHlwZSYmKHRoaXMuYWxsQ2hpbGRyZW4ubGVuZ3RoPT09ZS5jaGlsZHJlbigpLmxlbmd0aCYmIXRoaXMuYWxsQ2hpbGRyZW4uc29tZSgoKHQscik9PntyZXR1cm4hKHR5cGVvZihuPXQpPT10eXBlb2Yobz1lLmNoaWxkcmVuKClbcl0pJiYoInN0cmluZyI9PXR5cGVvZiBufHwic3RyaW5nIj09dHlwZW9mIG8/bj09PW86bi5lcXVhbHMobykpKTt2YXIgbixvfSkpKX19dC5TeW50YXhUcmVlTm9kZT1DfSw4MDQ1OmU9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpLG49MCxvPTIsaT0hMDtvPGFyZ3VtZW50cy5sZW5ndGg7KXJbbisrXT1hcmd1bWVudHNbbysrXTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG8sYSl7cltuXT1mdW5jdGlvbihlKXtpZihpKWlmKGk9ITEsZSlhKGUpO2Vsc2V7Zm9yKHZhciB0PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpLHI9MDtyPHQubGVuZ3RoOyl0W3IrK109YXJndW1lbnRzW3JdO28uYXBwbHkobnVsbCx0KX19O3RyeXtlLmFwcGx5KHR8fG51bGwscil9Y2F0Y2goZSl7aSYmKGk9ITEsYShlKSl9fSkpfX0sODgzOTooZSx0KT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgcj10O3IubGVuZ3RoPWZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoO2lmKCF0KXJldHVybiAwO2Zvcih2YXIgcj0wOy0tdCU0PjEmJiI9Ij09PWUuY2hhckF0KHQpOykrK3I7cmV0dXJuIE1hdGguY2VpbCgzKmUubGVuZ3RoKS80LXJ9O2Zvcih2YXIgbj1uZXcgQXJyYXkoNjQpLG89bmV3IEFycmF5KDEyMyksaT0wO2k8NjQ7KW9bbltpXT1pPDI2P2krNjU6aTw1Mj9pKzcxOmk8NjI/aS00OmktNTl8NDNdPWkrKztyLmVuY29kZT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBvLGk9bnVsbCxhPVtdLHM9MCxsPTA7dDxyOyl7dmFyIGM9ZVt0KytdO3N3aXRjaChsKXtjYXNlIDA6YVtzKytdPW5bYz4+Ml0sbz0oMyZjKTw8NCxsPTE7YnJlYWs7Y2FzZSAxOmFbcysrXT1uW298Yz4+NF0sbz0oMTUmYyk8PDIsbD0yO2JyZWFrO2Nhc2UgMjphW3MrK109bltvfGM+PjZdLGFbcysrXT1uWzYzJmNdLGw9MH1zPjgxOTEmJigoaXx8KGk9W10pKS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEpKSxzPTApfXJldHVybiBsJiYoYVtzKytdPW5bb10sYVtzKytdPTYxLDE9PT1sJiYoYVtzKytdPTYxKSksaT8ocyYmaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEuc2xpY2UoMCxzKSkpLGkuam9pbigiIikpOlN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEuc2xpY2UoMCxzKSl9O3ZhciBhPSJpbnZhbGlkIGVuY29kaW5nIjtyLmRlY29kZT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuLGk9cixzPTAsbD0wO2w8ZS5sZW5ndGg7KXt2YXIgYz1lLmNoYXJDb2RlQXQobCsrKTtpZig2MT09PWMmJnM+MSlicmVhaztpZih2b2lkIDA9PT0oYz1vW2NdKSl0aHJvdyBFcnJvcihhKTtzd2l0Y2gocyl7Y2FzZSAwOm49YyxzPTE7YnJlYWs7Y2FzZSAxOnRbcisrXT1uPDwyfCg0OCZjKT4+NCxuPWMscz0yO2JyZWFrO2Nhc2UgMjp0W3IrK109KDE1Jm4pPDw0fCg2MCZjKT4+MixuPWMscz0zO2JyZWFrO2Nhc2UgMzp0W3IrK109KDMmbik8PDZ8YyxzPTB9fWlmKDE9PT1zKXRocm93IEVycm9yKGEpO3JldHVybiByLWl9LHIudGVzdD1mdW5jdGlvbihlKXtyZXR1cm4vXig/OltBLVphLXowLTkrL117NH0pKig/OltBLVphLXowLTkrL117Mn09PXxbQS1aYS16MC05Ky9dezN9PSk/JC8udGVzdChlKX19LDg1NjE6ZT0+eyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUscil7InN0cmluZyI9PXR5cGVvZiBlJiYocj1lLGU9dm9pZCAwKTt2YXIgbj1bXTtmdW5jdGlvbiBvKGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZSl7dmFyIHI9aSgpO2lmKHQudmVyYm9zZSYmY29uc29sZS5sb2coImNvZGVnZW46ICIrcikscj0icmV0dXJuICIrcixlKXtmb3IodmFyIGE9T2JqZWN0LmtleXMoZSkscz1uZXcgQXJyYXkoYS5sZW5ndGgrMSksbD1uZXcgQXJyYXkoYS5sZW5ndGgpLGM9MDtjPGEubGVuZ3RoOylzW2NdPWFbY10sbFtjXT1lW2FbYysrXV07cmV0dXJuIHNbY109cixGdW5jdGlvbi5hcHBseShudWxsLHMpLmFwcGx5KG51bGwsbCl9cmV0dXJuIEZ1bmN0aW9uKHIpKCl9Zm9yKHZhciB1PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpLHA9MDtwPHUubGVuZ3RoOyl1W3BdPWFyZ3VtZW50c1srK3BdO2lmKHA9MCxlPWUucmVwbGFjZSgvJShbJWRmaWpzXSkvZywoZnVuY3Rpb24oZSx0KXt2YXIgcj11W3ArK107c3dpdGNoKHQpe2Nhc2UiZCI6Y2FzZSJmIjpyZXR1cm4gU3RyaW5nKE51bWJlcihyKSk7Y2FzZSJpIjpyZXR1cm4gU3RyaW5nKE1hdGguZmxvb3IocikpO2Nhc2UiaiI6cmV0dXJuIEpTT04uc3RyaW5naWZ5KHIpO2Nhc2UicyI6cmV0dXJuIFN0cmluZyhyKX1yZXR1cm4iJSJ9KSkscCE9PXUubGVuZ3RoKXRocm93IEVycm9yKCJwYXJhbWV0ZXIgY291bnQgbWlzbWF0Y2giKTtyZXR1cm4gbi5wdXNoKGUpLG99ZnVuY3Rpb24gaSh0KXtyZXR1cm4iZnVuY3Rpb24gIisodHx8cnx8IiIpKyIoIisoZSYmZS5qb2luKCIsIil8fCIiKSsiKXtcbiAgIituLmpvaW4oIlxuICAiKSsiXG59In1yZXR1cm4gby50b1N0cmluZz1pLG99ZS5leHBvcnRzPXQsdC52ZXJib3NlPSExfSw0MzU4OmU9PnsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdCgpe3RoaXMuX2xpc3RlbmVycz17fX1lLmV4cG9ydHM9dCx0LnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLHQscil7cmV0dXJuKHRoaXMuX2xpc3RlbmVyc1tlXXx8KHRoaXMuX2xpc3RlbmVyc1tlXT1bXSkpLnB1c2goe2ZuOnQsY3R4OnJ8fHRoaXN9KSx0aGlzfSx0LnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lKXRoaXMuX2xpc3RlbmVycz17fTtlbHNlIGlmKHZvaWQgMD09PXQpdGhpcy5fbGlzdGVuZXJzW2VdPVtdO2Vsc2UgZm9yKHZhciByPXRoaXMuX2xpc3RlbmVyc1tlXSxuPTA7bjxyLmxlbmd0aDspcltuXS5mbj09PXQ/ci5zcGxpY2UobiwxKTorK247cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzW2VdO2lmKHQpe2Zvcih2YXIgcj1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoOylyLnB1c2goYXJndW1lbnRzW24rK10pO2ZvcihuPTA7bjx0Lmxlbmd0aDspdFtuXS5mbi5hcHBseSh0W24rK10uY3R4LHIpfXJldHVybiB0aGlzfX0sNTIxMjooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1pO3ZhciBuPXIoODA0NSksbz1yKDQxNTMpKCJmcyIpO2Z1bmN0aW9uIGkoZSx0LHIpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0PyhyPXQsdD17fSk6dHx8KHQ9e30pLHI/IXQueGhyJiZvJiZvLnJlYWRGaWxlP28ucmVhZEZpbGUoZSwoZnVuY3Rpb24obixvKXtyZXR1cm4gbiYmInVuZGVmaW5lZCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdD9pLnhocihlLHQscik6bj9yKG4pOnIobnVsbCx0LmJpbmFyeT9vOm8udG9TdHJpbmcoInV0ZjgiKSl9KSk6aS54aHIoZSx0LHIpOm4oaSx0aGlzLGUsdCl9aS54aHI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PT1uLnJlYWR5U3RhdGUpe2lmKDAhPT1uLnN0YXR1cyYmMjAwIT09bi5zdGF0dXMpcmV0dXJuIHIoRXJyb3IoInN0YXR1cyAiK24uc3RhdHVzKSk7aWYodC5iaW5hcnkpe3ZhciBlPW4ucmVzcG9uc2U7aWYoIWUpe2U9W107Zm9yKHZhciBvPTA7bzxuLnJlc3BvbnNlVGV4dC5sZW5ndGg7KytvKWUucHVzaCgyNTUmbi5yZXNwb25zZVRleHQuY2hhckNvZGVBdChvKSl9cmV0dXJuIHIobnVsbCwidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXk/bmV3IFVpbnQ4QXJyYXkoZSk6ZSl9cmV0dXJuIHIobnVsbCxuLnJlc3BvbnNlVGV4dCl9fSx0LmJpbmFyeSYmKCJvdmVycmlkZU1pbWVUeXBlImluIG4mJm4ub3ZlcnJpZGVNaW1lVHlwZSgidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZCIpLG4ucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciIpLG4ub3BlbigiR0VUIixlKSxuLnNlbmQoKX19LDk0MTA6ZT0+eyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgRmxvYXQzMkFycmF5P2Z1bmN0aW9uKCl7dmFyIHQ9bmV3IEZsb2F0MzJBcnJheShbLTBdKSxyPW5ldyBVaW50OEFycmF5KHQuYnVmZmVyKSxuPTEyOD09PXJbM107ZnVuY3Rpb24gbyhlLG4sbyl7dFswXT1lLG5bb109clswXSxuW28rMV09clsxXSxuW28rMl09clsyXSxuW28rM109clszXX1mdW5jdGlvbiBpKGUsbixvKXt0WzBdPWUsbltvXT1yWzNdLG5bbysxXT1yWzJdLG5bbysyXT1yWzFdLG5bbyszXT1yWzBdfWZ1bmN0aW9uIGEoZSxuKXtyZXR1cm4gclswXT1lW25dLHJbMV09ZVtuKzFdLHJbMl09ZVtuKzJdLHJbM109ZVtuKzNdLHRbMF19ZnVuY3Rpb24gcyhlLG4pe3JldHVybiByWzNdPWVbbl0sclsyXT1lW24rMV0sclsxXT1lW24rMl0sclswXT1lW24rM10sdFswXX1lLndyaXRlRmxvYXRMRT1uP286aSxlLndyaXRlRmxvYXRCRT1uP2k6byxlLnJlYWRGbG9hdExFPW4/YTpzLGUucmVhZEZsb2F0QkU9bj9zOmF9KCk6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsdCxyLG4pe3ZhciBvPXQ8MD8xOjA7aWYobyYmKHQ9LXQpLDA9PT10KWUoMS90PjA/MDoyMTQ3NDgzNjQ4LHIsbik7ZWxzZSBpZihpc05hTih0KSllKDIxNDMyODkzNDQscixuKTtlbHNlIGlmKHQ+MzQwMjgyMzQ2NjM4NTI4ODZlMjIpZSgobzw8MzF8MjEzOTA5NTA0MCk+Pj4wLHIsbik7ZWxzZSBpZih0PDExNzU0OTQzNTA4MjIyODc1ZS01NCllKChvPDwzMXxNYXRoLnJvdW5kKHQvMTQwMTI5ODQ2NDMyNDgxN2UtNjApKT4+PjAscixuKTtlbHNle3ZhciBpPU1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjIpO2UoKG88PDMxfGkrMTI3PDwyM3w4Mzg4NjA3Jk1hdGgucm91bmQodCpNYXRoLnBvdygyLC1pKSo4Mzg4NjA4KSk+Pj4wLHIsbil9fWZ1bmN0aW9uIGEoZSx0LHIpe3ZhciBuPWUodCxyKSxvPTIqKG4+PjMxKSsxLGk9bj4+PjIzJjI1NSxhPTgzODg2MDcmbjtyZXR1cm4gMjU1PT09aT9hP05hTjpvKigxLzApOjA9PT1pPzE0MDEyOTg0NjQzMjQ4MTdlLTYwKm8qYTpvKk1hdGgucG93KDIsaS0xNTApKihhKzgzODg2MDgpfWUud3JpdGVGbG9hdExFPXQuYmluZChudWxsLHIpLGUud3JpdGVGbG9hdEJFPXQuYmluZChudWxsLG4pLGUucmVhZEZsb2F0TEU9YS5iaW5kKG51bGwsbyksZS5yZWFkRmxvYXRCRT1hLmJpbmQobnVsbCxpKX0oKSwidW5kZWZpbmVkIiE9dHlwZW9mIEZsb2F0NjRBcnJheT9mdW5jdGlvbigpe3ZhciB0PW5ldyBGbG9hdDY0QXJyYXkoWy0wXSkscj1uZXcgVWludDhBcnJheSh0LmJ1ZmZlciksbj0xMjg9PT1yWzddO2Z1bmN0aW9uIG8oZSxuLG8pe3RbMF09ZSxuW29dPXJbMF0sbltvKzFdPXJbMV0sbltvKzJdPXJbMl0sbltvKzNdPXJbM10sbltvKzRdPXJbNF0sbltvKzVdPXJbNV0sbltvKzZdPXJbNl0sbltvKzddPXJbN119ZnVuY3Rpb24gaShlLG4sbyl7dFswXT1lLG5bb109cls3XSxuW28rMV09cls2XSxuW28rMl09cls1XSxuW28rM109cls0XSxuW28rNF09clszXSxuW28rNV09clsyXSxuW28rNl09clsxXSxuW28rN109clswXX1mdW5jdGlvbiBhKGUsbil7cmV0dXJuIHJbMF09ZVtuXSxyWzFdPWVbbisxXSxyWzJdPWVbbisyXSxyWzNdPWVbbiszXSxyWzRdPWVbbis0XSxyWzVdPWVbbis1XSxyWzZdPWVbbis2XSxyWzddPWVbbis3XSx0WzBdfWZ1bmN0aW9uIHMoZSxuKXtyZXR1cm4gcls3XT1lW25dLHJbNl09ZVtuKzFdLHJbNV09ZVtuKzJdLHJbNF09ZVtuKzNdLHJbM109ZVtuKzRdLHJbMl09ZVtuKzVdLHJbMV09ZVtuKzZdLHJbMF09ZVtuKzddLHRbMF19ZS53cml0ZURvdWJsZUxFPW4/bzppLGUud3JpdGVEb3VibGVCRT1uP2k6byxlLnJlYWREb3VibGVMRT1uP2E6cyxlLnJlYWREb3VibGVCRT1uP3M6YX0oKTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSx0LHIsbixvLGkpe3ZhciBhPW48MD8xOjA7aWYoYSYmKG49LW4pLDA9PT1uKWUoMCxvLGkrdCksZSgxL24+MD8wOjIxNDc0ODM2NDgsbyxpK3IpO2Vsc2UgaWYoaXNOYU4obikpZSgwLG8saSt0KSxlKDIxNDY5NTkzNjAsbyxpK3IpO2Vsc2UgaWYobj4xNzk3NjkzMTM0ODYyMzE1N2UyOTIpZSgwLG8saSt0KSxlKChhPDwzMXwyMTQ2NDM1MDcyKT4+PjAsbyxpK3IpO2Vsc2V7dmFyIHM7aWYobjwyMjI1MDczODU4NTA3MjAxNGUtMzI0KWUoKHM9bi81ZS0zMjQpPj4+MCxvLGkrdCksZSgoYTw8MzF8cy80Mjk0OTY3Mjk2KT4+PjAsbyxpK3IpO2Vsc2V7dmFyIGw9TWF0aC5mbG9vcihNYXRoLmxvZyhuKS9NYXRoLkxOMik7MTAyND09PWwmJihsPTEwMjMpLGUoNDUwMzU5OTYyNzM3MDQ5Nioocz1uKk1hdGgucG93KDIsLWwpKT4+PjAsbyxpK3QpLGUoKGE8PDMxfGwrMTAyMzw8MjB8MTA0ODU3NipzJjEwNDg1NzUpPj4+MCxvLGkrcil9fX1mdW5jdGlvbiBhKGUsdCxyLG4sbyl7dmFyIGk9ZShuLG8rdCksYT1lKG4sbytyKSxzPTIqKGE+PjMxKSsxLGw9YT4+PjIwJjIwNDcsYz00Mjk0OTY3Mjk2KigxMDQ4NTc1JmEpK2k7cmV0dXJuIDIwNDc9PT1sP2M/TmFOOnMqKDEvMCk6MD09PWw/NWUtMzI0KnMqYzpzKk1hdGgucG93KDIsbC0xMDc1KSooYys0NTAzNTk5NjI3MzcwNDk2KX1lLndyaXRlRG91YmxlTEU9dC5iaW5kKG51bGwsciwwLDQpLGUud3JpdGVEb3VibGVCRT10LmJpbmQobnVsbCxuLDQsMCksZS5yZWFkRG91YmxlTEU9YS5iaW5kKG51bGwsbywwLDQpLGUucmVhZERvdWJsZUJFPWEuYmluZChudWxsLGksNCwwKX0oKSxlfWZ1bmN0aW9uIHIoZSx0LHIpe3Rbcl09MjU1JmUsdFtyKzFdPWU+Pj44JjI1NSx0W3IrMl09ZT4+PjE2JjI1NSx0W3IrM109ZT4+PjI0fWZ1bmN0aW9uIG4oZSx0LHIpe3Rbcl09ZT4+PjI0LHRbcisxXT1lPj4+MTYmMjU1LHRbcisyXT1lPj4+OCYyNTUsdFtyKzNdPTI1NSZlfWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4oZVt0XXxlW3QrMV08PDh8ZVt0KzJdPDwxNnxlW3QrM108PDI0KT4+PjB9ZnVuY3Rpb24gaShlLHQpe3JldHVybihlW3RdPDwyNHxlW3QrMV08PDE2fGVbdCsyXTw8OHxlW3QrM10pPj4+MH1lLmV4cG9ydHM9dCh0KX0sNDE1Mzptb2R1bGU9PnsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaW5xdWlyZShtb2R1bGVOYW1lKXt0cnl7dmFyIG1vZD1ldmFsKCJxdWlyZSIucmVwbGFjZSgvXi8sInJlIikpKG1vZHVsZU5hbWUpO2lmKG1vZCYmKG1vZC5sZW5ndGh8fE9iamVjdC5rZXlzKG1vZCkubGVuZ3RoKSlyZXR1cm4gbW9kfWNhdGNoKGUpe31yZXR1cm4gbnVsbH1tb2R1bGUuZXhwb3J0cz1pbnF1aXJlfSw5MjA3OihlLHQpPT57InVzZSBzdHJpY3QiO3ZhciByPXQsbj1yLmlzQWJzb2x1dGU9ZnVuY3Rpb24oZSl7cmV0dXJuL14oPzpcL3xcdys6KS8udGVzdChlKX0sbz1yLm5vcm1hbGl6ZT1mdW5jdGlvbihlKXt2YXIgdD0oZT1lLnJlcGxhY2UoL1xcL2csIi8iKS5yZXBsYWNlKC9cL3syLH0vZywiLyIpKS5zcGxpdCgiLyIpLHI9bihlKSxvPSIiO3ImJihvPXQuc2hpZnQoKSsiLyIpO2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7KSIuLiI9PT10W2ldP2k+MCYmIi4uIiE9PXRbaS0xXT90LnNwbGljZSgtLWksMik6cj90LnNwbGljZShpLDEpOisraToiLiI9PT10W2ldP3Quc3BsaWNlKGksMSk6KytpO3JldHVybiBvK3Quam9pbigiLyIpfTtyLnJlc29sdmU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByfHwodD1vKHQpKSxuKHQpP3Q6KHJ8fChlPW8oZSkpLChlPWUucmVwbGFjZSgvKD86XC98XilbXi9dKyQvLCIiKSkubGVuZ3RoP28oZSsiLyIrdCk6dCl9fSw5MzkwOmU9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yfHw4MTkyLG89bj4+PjEsaT1udWxsLGE9bjtyZXR1cm4gZnVuY3Rpb24ocil7aWYocjwxfHxyPm8pcmV0dXJuIGUocik7YStyPm4mJihpPWUobiksYT0wKTt2YXIgcz10LmNhbGwoaSxhLGErPXIpO3JldHVybiA3JmEmJihhPTErKDd8YSkpLHN9fX0sMTQ0NzooZSx0KT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgcj10O3IubGVuZ3RoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9MCxuPTA7bjxlLmxlbmd0aDsrK24pKHI9ZS5jaGFyQ29kZUF0KG4pKTwxMjg/dCs9MTpyPDIwNDg/dCs9Mjo1NTI5Nj09KDY0NTEyJnIpJiY1NjMyMD09KDY0NTEyJmUuY2hhckNvZGVBdChuKzEpKT8oKytuLHQrPTQpOnQrPTM7cmV0dXJuIHR9LHIucmVhZD1mdW5jdGlvbihlLHQscil7aWYoci10PDEpcmV0dXJuIiI7Zm9yKHZhciBuLG89bnVsbCxpPVtdLGE9MDt0PHI7KShuPWVbdCsrXSk8MTI4P2lbYSsrXT1uOm4+MTkxJiZuPDIyND9pW2ErK109KDMxJm4pPDw2fDYzJmVbdCsrXTpuPjIzOSYmbjwzNjU/KG49KCg3Jm4pPDwxOHwoNjMmZVt0KytdKTw8MTJ8KDYzJmVbdCsrXSk8PDZ8NjMmZVt0KytdKS02NTUzNixpW2ErK109NTUyOTYrKG4+PjEwKSxpW2ErK109NTYzMjArKDEwMjMmbikpOmlbYSsrXT0oMTUmbik8PDEyfCg2MyZlW3QrK10pPDw2fDYzJmVbdCsrXSxhPjgxOTEmJigob3x8KG89W10pKS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGkpKSxhPTApO3JldHVybiBvPyhhJiZvLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsaS5zbGljZSgwLGEpKSksby5qb2luKCIiKSk6U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsaS5zbGljZSgwLGEpKX0sci53cml0ZT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuLG8saT1yLGE9MDthPGUubGVuZ3RoOysrYSkobj1lLmNoYXJDb2RlQXQoYSkpPDEyOD90W3IrK109bjpuPDIwNDg/KHRbcisrXT1uPj42fDE5Mix0W3IrK109NjMmbnwxMjgpOjU1Mjk2PT0oNjQ1MTImbikmJjU2MzIwPT0oNjQ1MTImKG89ZS5jaGFyQ29kZUF0KGErMSkpKT8obj02NTUzNisoKDEwMjMmbik8PDEwKSsoMTAyMyZvKSwrK2EsdFtyKytdPW4+PjE4fDI0MCx0W3IrK109bj4+MTImNjN8MTI4LHRbcisrXT1uPj42JjYzfDEyOCx0W3IrK109NjMmbnwxMjgpOih0W3IrK109bj4+MTJ8MjI0LHRbcisrXT1uPj42JjYzfDEyOCx0W3IrK109NjMmbnwxMjgpO3JldHVybiByLWl9fSw3MjEwOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig5MjQzKSxvPXIoNDc4MSk7ZnVuY3Rpb24gaShlLHQpe3JldHVybiBmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiRnVuY3Rpb24geWFtbC4iK2UrIiBpcyByZW1vdmVkIGluIGpzLXlhbWwgNC4gVXNlIHlhbWwuIit0KyIgaW5zdGVhZCwgd2hpY2ggaXMgbm93IHNhZmUgYnkgZGVmYXVsdC4iKX19ZS5leHBvcnRzLlR5cGU9cig1Mzg4KSxlLmV4cG9ydHMuU2NoZW1hPXIoMjExOSksZS5leHBvcnRzLkZBSUxTQUZFX1NDSEVNQT1yKDc3NTkpLGUuZXhwb3J0cy5KU09OX1NDSEVNQT1yKDYxODQpLGUuZXhwb3J0cy5DT1JFX1NDSEVNQT1yKDE3NjkpLGUuZXhwb3J0cy5ERUZBVUxUX1NDSEVNQT1yKDU0ODkpLGUuZXhwb3J0cy5sb2FkPW4ubG9hZCxlLmV4cG9ydHMubG9hZEFsbD1uLmxvYWRBbGwsZS5leHBvcnRzLmR1bXA9by5kdW1wLGUuZXhwb3J0cy5ZQU1MRXhjZXB0aW9uPXIoMTIzMSksZS5leHBvcnRzLnR5cGVzPXtiaW5hcnk6cig5MzQyKSxmbG9hdDpyKDE0NjEpLG1hcDpyKDIzNjkpLG51bGw6cig5MTk4KSxwYWlyczpyKDY5NDIpLHNldDpyKDY2NjMpLHRpbWVzdGFtcDpyKDEyNyksYm9vbDpyKDYxOTkpLGludDpyKDQ0NjYpLG1lcmdlOnIoMTg1MSksb21hcDpyKDY5NDYpLHNlcTpyKDg2MzYpLHN0cjpyKDcyMTIpfSxlLmV4cG9ydHMuc2FmZUxvYWQ9aSgic2FmZUxvYWQiLCJsb2FkIiksZS5leHBvcnRzLnNhZmVMb2FkQWxsPWkoInNhZmVMb2FkQWxsIiwibG9hZEFsbCIpLGUuZXhwb3J0cy5zYWZlRHVtcD1pKCJzYWZlRHVtcCIsImR1bXAiKX0sODQzMzplPT57InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG51bGw9PWV9ZS5leHBvcnRzLmlzTm90aGluZz10LGUuZXhwb3J0cy5pc09iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGUmJm51bGwhPT1lfSxlLmV4cG9ydHMudG9BcnJheT1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOnQoZSk/W106W2VdfSxlLmV4cG9ydHMucmVwZWF0PWZ1bmN0aW9uKGUsdCl7dmFyIHIsbj0iIjtmb3Iocj0wO3I8dDtyKz0xKW4rPWU7cmV0dXJuIG59LGUuZXhwb3J0cy5pc05lZ2F0aXZlWmVybz1mdW5jdGlvbihlKXtyZXR1cm4gMD09PWUmJk51bWJlci5ORUdBVElWRV9JTkZJTklUWT09PTEvZX0sZS5leHBvcnRzLmV4dGVuZD1mdW5jdGlvbihlLHQpe3ZhciByLG4sbyxpO2lmKHQpZm9yKHI9MCxuPShpPU9iamVjdC5rZXlzKHQpKS5sZW5ndGg7cjxuO3IrPTEpZVtvPWlbcl1dPXRbb107cmV0dXJuIGV9fSw0NzgxOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig4NDMzKSxvPXIoMTIzMSksaT1yKDU0ODkpLGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbD02NTI3OSxjPXswOiJcXDAiLDc6IlxcYSIsODoiXFxiIiw5OiJcXHQiLDEwOiJcXG4iLDExOiJcXHYiLDEyOiJcXGYiLDEzOiJcXHIiLDI3OiJcXGUiLDM0OidcXCInLDkyOiJcXFxcIiwxMzM6IlxcTiIsMTYwOiJcXF8iLDgyMzI6IlxcTCIsODIzMzoiXFxQIn0sdT1bInkiLCJZIiwieWVzIiwiWWVzIiwiWUVTIiwib24iLCJPbiIsIk9OIiwibiIsIk4iLCJubyIsIk5vIiwiTk8iLCJvZmYiLCJPZmYiLCJPRkYiXSxwPS9eWy0rXT9bMC05X10rKD86OlswLTlfXSspKyg/OlwuWzAtOV9dKik/JC87ZnVuY3Rpb24gZChlKXt2YXIgdCxyLGk7aWYodD1lLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLGU8PTI1NSlyPSJ4IixpPTI7ZWxzZSBpZihlPD02NTUzNSlyPSJ1IixpPTQ7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBvKCJjb2RlIHBvaW50IHdpdGhpbiBhIHN0cmluZyBtYXkgbm90IGJlIGdyZWF0ZXIgdGhhbiAweEZGRkZGRkZGIik7cj0iVSIsaT04fXJldHVybiJcXCIrcituLnJlcGVhdCgiMCIsaS10Lmxlbmd0aCkrdH1mdW5jdGlvbiBmKGUpe3RoaXMuc2NoZW1hPWUuc2NoZW1hfHxpLHRoaXMuaW5kZW50PU1hdGgubWF4KDEsZS5pbmRlbnR8fDIpLHRoaXMubm9BcnJheUluZGVudD1lLm5vQXJyYXlJbmRlbnR8fCExLHRoaXMuc2tpcEludmFsaWQ9ZS5za2lwSW52YWxpZHx8ITEsdGhpcy5mbG93TGV2ZWw9bi5pc05vdGhpbmcoZS5mbG93TGV2ZWwpPy0xOmUuZmxvd0xldmVsLHRoaXMuc3R5bGVNYXA9ZnVuY3Rpb24oZSx0KXt2YXIgcixuLG8saSxhLGwsYztpZihudWxsPT09dClyZXR1cm57fTtmb3Iocj17fSxvPTAsaT0obj1PYmplY3Qua2V5cyh0KSkubGVuZ3RoO288aTtvKz0xKWE9bltvXSxsPVN0cmluZyh0W2FdKSwiISEiPT09YS5zbGljZSgwLDIpJiYoYT0idGFnOnlhbWwub3JnLDIwMDI6IithLnNsaWNlKDIpKSwoYz1lLmNvbXBpbGVkVHlwZU1hcC5mYWxsYmFja1thXSkmJnMuY2FsbChjLnN0eWxlQWxpYXNlcyxsKSYmKGw9Yy5zdHlsZUFsaWFzZXNbbF0pLHJbYV09bDtyZXR1cm4gcn0odGhpcy5zY2hlbWEsZS5zdHlsZXN8fG51bGwpLHRoaXMuc29ydEtleXM9ZS5zb3J0S2V5c3x8ITEsdGhpcy5saW5lV2lkdGg9ZS5saW5lV2lkdGh8fDgwLHRoaXMubm9SZWZzPWUubm9SZWZzfHwhMSx0aGlzLm5vQ29tcGF0TW9kZT1lLm5vQ29tcGF0TW9kZXx8ITEsdGhpcy5jb25kZW5zZUZsb3c9ZS5jb25kZW5zZUZsb3d8fCExLHRoaXMucXVvdGluZ1R5cGU9JyInPT09ZS5xdW90aW5nVHlwZT8yOjEsdGhpcy5mb3JjZVF1b3Rlcz1lLmZvcmNlUXVvdGVzfHwhMSx0aGlzLnJlcGxhY2VyPSJmdW5jdGlvbiI9PXR5cGVvZiBlLnJlcGxhY2VyP2UucmVwbGFjZXI6bnVsbCx0aGlzLmltcGxpY2l0VHlwZXM9dGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdCx0aGlzLmV4cGxpY2l0VHlwZXM9dGhpcy5zY2hlbWEuY29tcGlsZWRFeHBsaWNpdCx0aGlzLnRhZz1udWxsLHRoaXMucmVzdWx0PSIiLHRoaXMuZHVwbGljYXRlcz1bXSx0aGlzLnVzZWREdXBsaWNhdGVzPW51bGx9ZnVuY3Rpb24gaChlLHQpe2Zvcih2YXIgcixvPW4ucmVwZWF0KCIgIix0KSxpPTAsYT0tMSxzPSIiLGw9ZS5sZW5ndGg7aTxsOyktMT09PShhPWUuaW5kZXhPZigiXG4iLGkpKT8ocj1lLnNsaWNlKGkpLGk9bCk6KHI9ZS5zbGljZShpLGErMSksaT1hKzEpLHIubGVuZ3RoJiYiXG4iIT09ciYmKHMrPW8pLHMrPXI7cmV0dXJuIHN9ZnVuY3Rpb24gZyhlLHQpe3JldHVybiJcbiIrbi5yZXBlYXQoIiAiLGUuaW5kZW50KnQpfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIDMyPT09ZXx8OT09PWV9ZnVuY3Rpb24gbShlKXtyZXR1cm4gMzI8PWUmJmU8PTEyNnx8MTYxPD1lJiZlPD01NTI5NSYmODIzMiE9PWUmJjgyMzMhPT1lfHw1NzM0NDw9ZSYmZTw9NjU1MzMmJmUhPT1sfHw2NTUzNjw9ZSYmZTw9MTExNDExMX1mdW5jdGlvbiBiKGUpe3JldHVybiBtKGUpJiZlIT09bCYmMTMhPT1lJiYxMCE9PWV9ZnVuY3Rpb24gTyhlLHQscil7dmFyIG49YihlKSxvPW4mJiF5KGUpO3JldHVybihyP246biYmNDQhPT1lJiY5MSE9PWUmJjkzIT09ZSYmMTIzIT09ZSYmMTI1IT09ZSkmJjM1IT09ZSYmISg1OD09PXQmJiFvKXx8Yih0KSYmIXkodCkmJjM1PT09ZXx8NTg9PT10JiZvfWZ1bmN0aW9uIFQoZSx0KXt2YXIgcixuPWUuY2hhckNvZGVBdCh0KTtyZXR1cm4gbj49NTUyOTYmJm48PTU2MzE5JiZ0KzE8ZS5sZW5ndGgmJihyPWUuY2hhckNvZGVBdCh0KzEpKT49NTYzMjAmJnI8PTU3MzQzPzEwMjQqKG4tNTUyOTYpK3ItNTYzMjArNjU1MzY6bn1mdW5jdGlvbiB2KGUpe3JldHVybi9eXG4qIC8udGVzdChlKX1mdW5jdGlvbiB3KGUsdCxyLG4saSl7ZS5kdW1wPWZ1bmN0aW9uKCl7aWYoMD09PXQubGVuZ3RoKXJldHVybiAyPT09ZS5xdW90aW5nVHlwZT8nIiInOiInJyI7aWYoIWUubm9Db21wYXRNb2RlJiYoLTEhPT11LmluZGV4T2YodCl8fHAudGVzdCh0KSkpcmV0dXJuIDI9PT1lLnF1b3RpbmdUeXBlPyciJyt0KyciJzoiJyIrdCsiJyI7dmFyIGE9ZS5pbmRlbnQqTWF0aC5tYXgoMSxyKSxzPS0xPT09ZS5saW5lV2lkdGg/LTE6TWF0aC5tYXgoTWF0aC5taW4oZS5saW5lV2lkdGgsNDApLGUubGluZVdpZHRoLWEpLGY9bnx8ZS5mbG93TGV2ZWw+LTEmJnI+PWUuZmxvd0xldmVsO3N3aXRjaChmdW5jdGlvbihlLHQscixuLG8saSxhLHMpe3ZhciBjLHUscD0wLGQ9bnVsbCxmPSExLGg9ITEsZz0tMSE9PW4sYj0tMSx3PW0odT1UKGUsMCkpJiZ1IT09bCYmIXkodSkmJjQ1IT09dSYmNjMhPT11JiY1OCE9PXUmJjQ0IT09dSYmOTEhPT11JiY5MyE9PXUmJjEyMyE9PXUmJjEyNSE9PXUmJjM1IT09dSYmMzghPT11JiY0MiE9PXUmJjMzIT09dSYmMTI0IT09dSYmNjEhPT11JiY2MiE9PXUmJjM5IT09dSYmMzQhPT11JiYzNyE9PXUmJjY0IT09dSYmOTYhPT11JiZmdW5jdGlvbihlKXtyZXR1cm4heShlKSYmNTghPT1lfShUKGUsZS5sZW5ndGgtMSkpO2lmKHR8fGEpZm9yKGM9MDtjPGUubGVuZ3RoO3A+PTY1NTM2P2MrPTI6YysrKXtpZighbShwPVQoZSxjKSkpcmV0dXJuIDU7dz13JiZPKHAsZCxzKSxkPXB9ZWxzZXtmb3IoYz0wO2M8ZS5sZW5ndGg7cD49NjU1MzY/Yys9MjpjKyspe2lmKDEwPT09KHA9VChlLGMpKSlmPSEwLGcmJihoPWh8fGMtYi0xPm4mJiIgIiE9PWVbYisxXSxiPWMpO2Vsc2UgaWYoIW0ocCkpcmV0dXJuIDU7dz13JiZPKHAsZCxzKSxkPXB9aD1ofHxnJiZjLWItMT5uJiYiICIhPT1lW2IrMV19cmV0dXJuIGZ8fGg/cj45JiZ2KGUpPzU6YT8yPT09aT81OjI6aD80OjM6IXd8fGF8fG8oZSk/Mj09PWk/NToyOjF9KHQsZixlLmluZGVudCxzLChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSx0KXt2YXIgcixuO2ZvcihyPTAsbj1lLmltcGxpY2l0VHlwZXMubGVuZ3RoO3I8bjtyKz0xKWlmKGUuaW1wbGljaXRUeXBlc1tyXS5yZXNvbHZlKHQpKXJldHVybiEwO3JldHVybiExfShlLHQpfSksZS5xdW90aW5nVHlwZSxlLmZvcmNlUXVvdGVzJiYhbixpKSl7Y2FzZSAxOnJldHVybiB0O2Nhc2UgMjpyZXR1cm4iJyIrdC5yZXBsYWNlKC8nL2csIicnIikrIiciO2Nhc2UgMzpyZXR1cm4ifCIraih0LGUuaW5kZW50KStBKGgodCxhKSk7Y2FzZSA0OnJldHVybiI+IitqKHQsZS5pbmRlbnQpK0EoaChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcixuLG8saT0vKFxuKykoW15cbl0qKS9nLGE9KG89LTEhPT0obz1lLmluZGV4T2YoIlxuIikpP286ZS5sZW5ndGgsaS5sYXN0SW5kZXg9byxQKGUuc2xpY2UoMCxvKSx0KSkscz0iXG4iPT09ZVswXXx8IiAiPT09ZVswXTtuPWkuZXhlYyhlKTspe3ZhciBsPW5bMV0sYz1uWzJdO3I9IiAiPT09Y1swXSxhKz1sKyhzfHxyfHwiIj09PWM/IiI6IlxuIikrUChjLHQpLHM9cn1yZXR1cm4gYX0odCxzKSxhKSk7Y2FzZSA1OnJldHVybiciJytmdW5jdGlvbihlKXtmb3IodmFyIHQscj0iIixuPTAsbz0wO288ZS5sZW5ndGg7bj49NjU1MzY/bys9MjpvKyspbj1UKGUsbyksISh0PWNbbl0pJiZtKG4pPyhyKz1lW29dLG4+PTY1NTM2JiYocis9ZVtvKzFdKSk6cis9dHx8ZChuKTtyZXR1cm4gcn0odCkrJyInO2RlZmF1bHQ6dGhyb3cgbmV3IG8oImltcG9zc2libGUgZXJyb3I6IGludmFsaWQgc2NhbGFyIHN0eWxlIil9fSgpfWZ1bmN0aW9uIGooZSx0KXt2YXIgcj12KGUpP1N0cmluZyh0KToiIixuPSJcbiI9PT1lW2UubGVuZ3RoLTFdO3JldHVybiByKyghbnx8IlxuIiE9PWVbZS5sZW5ndGgtMl0mJiJcbiIhPT1lP24/IiI6Ii0iOiIrIikrIlxuIn1mdW5jdGlvbiBBKGUpe3JldHVybiJcbiI9PT1lW2UubGVuZ3RoLTFdP2Uuc2xpY2UoMCwtMSk6ZX1mdW5jdGlvbiBQKGUsdCl7aWYoIiI9PT1lfHwiICI9PT1lWzBdKXJldHVybiBlO2Zvcih2YXIgcixuLG89LyBbXiBdL2csaT0wLGE9MCxzPTAsbD0iIjtyPW8uZXhlYyhlKTspKHM9ci5pbmRleCktaT50JiYobj1hPmk/YTpzLGwrPSJcbiIrZS5zbGljZShpLG4pLGk9bisxKSxhPXM7cmV0dXJuIGwrPSJcbiIsZS5sZW5ndGgtaT50JiZhPmk/bCs9ZS5zbGljZShpLGEpKyJcbiIrZS5zbGljZShhKzEpOmwrPWUuc2xpY2UoaSksbC5zbGljZSgxKX1mdW5jdGlvbiBDKGUsdCxyLG4pe3ZhciBvLGksYSxzPSIiLGw9ZS50YWc7Zm9yKG89MCxpPXIubGVuZ3RoO288aTtvKz0xKWE9cltvXSxlLnJlcGxhY2VyJiYoYT1lLnJlcGxhY2VyLmNhbGwocixTdHJpbmcobyksYSkpLChFKGUsdCsxLGEsITAsITAsITEsITApfHx2b2lkIDA9PT1hJiZFKGUsdCsxLG51bGwsITAsITAsITEsITApKSYmKG4mJiIiPT09c3x8KHMrPWcoZSx0KSksZS5kdW1wJiYxMD09PWUuZHVtcC5jaGFyQ29kZUF0KDApP3MrPSItIjpzKz0iLSAiLHMrPWUuZHVtcCk7ZS50YWc9bCxlLmR1bXA9c3x8IltdIn1mdW5jdGlvbiBTKGUsdCxyKXt2YXIgbixpLGwsYyx1LHA7Zm9yKGw9MCxjPShpPXI/ZS5leHBsaWNpdFR5cGVzOmUuaW1wbGljaXRUeXBlcykubGVuZ3RoO2w8YztsKz0xKWlmKCgodT1pW2xdKS5pbnN0YW5jZU9mfHx1LnByZWRpY2F0ZSkmJighdS5pbnN0YW5jZU9mfHwib2JqZWN0Ij09dHlwZW9mIHQmJnQgaW5zdGFuY2VvZiB1Lmluc3RhbmNlT2YpJiYoIXUucHJlZGljYXRlfHx1LnByZWRpY2F0ZSh0KSkpe2lmKHI/dS5tdWx0aSYmdS5yZXByZXNlbnROYW1lP2UudGFnPXUucmVwcmVzZW50TmFtZSh0KTplLnRhZz11LnRhZzplLnRhZz0iPyIsdS5yZXByZXNlbnQpe2lmKHA9ZS5zdHlsZU1hcFt1LnRhZ118fHUuZGVmYXVsdFN0eWxlLCJbb2JqZWN0IEZ1bmN0aW9uXSI9PT1hLmNhbGwodS5yZXByZXNlbnQpKW49dS5yZXByZXNlbnQodCxwKTtlbHNle2lmKCFzLmNhbGwodS5yZXByZXNlbnQscCkpdGhyb3cgbmV3IG8oIiE8Iit1LnRhZysnPiB0YWcgcmVzb2x2ZXIgYWNjZXB0cyBub3QgIicrcCsnIiBzdHlsZScpO249dS5yZXByZXNlbnRbcF0odCxwKX1lLmR1bXA9bn1yZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBFKGUsdCxyLG4saSxzLGwpe2UudGFnPW51bGwsZS5kdW1wPXIsUyhlLHIsITEpfHxTKGUsciwhMCk7dmFyIGMsdT1hLmNhbGwoZS5kdW1wKSxwPW47biYmKG49ZS5mbG93TGV2ZWw8MHx8ZS5mbG93TGV2ZWw+dCk7dmFyIGQsZixoPSJbb2JqZWN0IE9iamVjdF0iPT09dXx8IltvYmplY3QgQXJyYXldIj09PXU7aWYoaCYmKGY9LTEhPT0oZD1lLmR1cGxpY2F0ZXMuaW5kZXhPZihyKSkpLChudWxsIT09ZS50YWcmJiI/IiE9PWUudGFnfHxmfHwyIT09ZS5pbmRlbnQmJnQ+MCkmJihpPSExKSxmJiZlLnVzZWREdXBsaWNhdGVzW2RdKWUuZHVtcD0iKnJlZl8iK2Q7ZWxzZXtpZihoJiZmJiYhZS51c2VkRHVwbGljYXRlc1tkXSYmKGUudXNlZER1cGxpY2F0ZXNbZF09ITApLCJbb2JqZWN0IE9iamVjdF0iPT09dSluJiYwIT09T2JqZWN0LmtleXMoZS5kdW1wKS5sZW5ndGg/KGZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLGEscyxsLGMsdSxwPSIiLGQ9ZS50YWcsZj1PYmplY3Qua2V5cyhyKTtpZighMD09PWUuc29ydEtleXMpZi5zb3J0KCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5zb3J0S2V5cylmLnNvcnQoZS5zb3J0S2V5cyk7ZWxzZSBpZihlLnNvcnRLZXlzKXRocm93IG5ldyBvKCJzb3J0S2V5cyBtdXN0IGJlIGEgYm9vbGVhbiBvciBhIGZ1bmN0aW9uIik7Zm9yKGk9MCxhPWYubGVuZ3RoO2k8YTtpKz0xKXU9IiIsbiYmIiI9PT1wfHwodSs9ZyhlLHQpKSxsPXJbcz1mW2ldXSxlLnJlcGxhY2VyJiYobD1lLnJlcGxhY2VyLmNhbGwocixzLGwpKSxFKGUsdCsxLHMsITAsITAsITApJiYoKGM9bnVsbCE9PWUudGFnJiYiPyIhPT1lLnRhZ3x8ZS5kdW1wJiZlLmR1bXAubGVuZ3RoPjEwMjQpJiYoZS5kdW1wJiYxMD09PWUuZHVtcC5jaGFyQ29kZUF0KDApP3UrPSI/Ijp1Kz0iPyAiKSx1Kz1lLmR1bXAsYyYmKHUrPWcoZSx0KSksRShlLHQrMSxsLCEwLGMpJiYoZS5kdW1wJiYxMD09PWUuZHVtcC5jaGFyQ29kZUF0KDApP3UrPSI6Ijp1Kz0iOiAiLHArPXUrPWUuZHVtcCkpO2UudGFnPWQsZS5kdW1wPXB8fCJ7fSJ9KGUsdCxlLmR1bXAsaSksZiYmKGUuZHVtcD0iJnJlZl8iK2QrZS5kdW1wKSk6KGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGksYSxzLGw9IiIsYz1lLnRhZyx1PU9iamVjdC5rZXlzKHIpO2ZvcihuPTAsbz11Lmxlbmd0aDtuPG87bis9MSlzPSIiLCIiIT09bCYmKHMrPSIsICIpLGUuY29uZGVuc2VGbG93JiYocys9JyInKSxhPXJbaT11W25dXSxlLnJlcGxhY2VyJiYoYT1lLnJlcGxhY2VyLmNhbGwocixpLGEpKSxFKGUsdCxpLCExLCExKSYmKGUuZHVtcC5sZW5ndGg+MTAyNCYmKHMrPSI/ICIpLHMrPWUuZHVtcCsoZS5jb25kZW5zZUZsb3c/JyInOiIiKSsiOiIrKGUuY29uZGVuc2VGbG93PyIiOiIgIiksRShlLHQsYSwhMSwhMSkmJihsKz1zKz1lLmR1bXApKTtlLnRhZz1jLGUuZHVtcD0ieyIrbCsifSJ9KGUsdCxlLmR1bXApLGYmJihlLmR1bXA9IiZyZWZfIitkKyIgIitlLmR1bXApKTtlbHNlIGlmKCJbb2JqZWN0IEFycmF5XSI9PT11KW4mJjAhPT1lLmR1bXAubGVuZ3RoPyhlLm5vQXJyYXlJbmRlbnQmJiFsJiZ0PjA/QyhlLHQtMSxlLmR1bXAsaSk6QyhlLHQsZS5kdW1wLGkpLGYmJihlLmR1bXA9IiZyZWZfIitkK2UuZHVtcCkpOihmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLGE9IiIscz1lLnRhZztmb3Iobj0wLG89ci5sZW5ndGg7bjxvO24rPTEpaT1yW25dLGUucmVwbGFjZXImJihpPWUucmVwbGFjZXIuY2FsbChyLFN0cmluZyhuKSxpKSksKEUoZSx0LGksITEsITEpfHx2b2lkIDA9PT1pJiZFKGUsdCxudWxsLCExLCExKSkmJigiIiE9PWEmJihhKz0iLCIrKGUuY29uZGVuc2VGbG93PyIiOiIgIikpLGErPWUuZHVtcCk7ZS50YWc9cyxlLmR1bXA9IlsiK2ErIl0ifShlLHQsZS5kdW1wKSxmJiYoZS5kdW1wPSImcmVmXyIrZCsiICIrZS5kdW1wKSk7ZWxzZXtpZigiW29iamVjdCBTdHJpbmddIiE9PXUpe2lmKCJbb2JqZWN0IFVuZGVmaW5lZF0iPT09dSlyZXR1cm4hMTtpZihlLnNraXBJbnZhbGlkKXJldHVybiExO3Rocm93IG5ldyBvKCJ1bmFjY2VwdGFibGUga2luZCBvZiBhbiBvYmplY3QgdG8gZHVtcCAiK3UpfSI/IiE9PWUudGFnJiZ3KGUsZS5kdW1wLHQscyxwKX1udWxsIT09ZS50YWcmJiI/IiE9PWUudGFnJiYoYz1lbmNvZGVVUkkoIiEiPT09ZS50YWdbMF0/ZS50YWcuc2xpY2UoMSk6ZS50YWcpLnJlcGxhY2UoLyEvZywiJTIxIiksYz0iISI9PT1lLnRhZ1swXT8iISIrYzoidGFnOnlhbWwub3JnLDIwMDI6Ij09PWMuc2xpY2UoMCwxOCk/IiEhIitjLnNsaWNlKDE4KToiITwiK2MrIj4iLGUuZHVtcD1jKyIgIitlLmR1bXApfXJldHVybiEwfWZ1bmN0aW9uIGsoZSx0KXt2YXIgcixuLG89W10saT1bXTtmb3IoeChlLG8saSkscj0wLG49aS5sZW5ndGg7cjxuO3IrPTEpdC5kdXBsaWNhdGVzLnB1c2gob1tpW3JdXSk7dC51c2VkRHVwbGljYXRlcz1uZXcgQXJyYXkobil9ZnVuY3Rpb24geChlLHQscil7dmFyIG4sbyxpO2lmKG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGUpaWYoLTEhPT0obz10LmluZGV4T2YoZSkpKS0xPT09ci5pbmRleE9mKG8pJiZyLnB1c2gobyk7ZWxzZSBpZih0LnB1c2goZSksQXJyYXkuaXNBcnJheShlKSlmb3Iobz0wLGk9ZS5sZW5ndGg7bzxpO28rPTEpeChlW29dLHQscik7ZWxzZSBmb3Iobz0wLGk9KG49T2JqZWN0LmtleXMoZSkpLmxlbmd0aDtvPGk7bys9MSl4KGVbbltvXV0sdCxyKX1lLmV4cG9ydHMuZHVtcD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBmKHQ9dHx8e30pO3Iubm9SZWZzfHxrKGUscik7dmFyIG49ZTtyZXR1cm4gci5yZXBsYWNlciYmKG49ci5yZXBsYWNlci5jYWxsKHsiIjpufSwiIixuKSksRShyLDAsbiwhMCwhMCk/ci5kdW1wKyJcbiI6IiJ9fSwxMjMxOmU9PnsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQpe3ZhciByPSIiLG49ZS5yZWFzb258fCIodW5rbm93biByZWFzb24pIjtyZXR1cm4gZS5tYXJrPyhlLm1hcmsubmFtZSYmKHIrPSdpbiAiJytlLm1hcmsubmFtZSsnIiAnKSxyKz0iKCIrKGUubWFyay5saW5lKzEpKyI6IisoZS5tYXJrLmNvbHVtbisxKSsiKSIsIXQmJmUubWFyay5zbmlwcGV0JiYocis9IlxuXG4iK2UubWFyay5zbmlwcGV0KSxuKyIgIityKTpufWZ1bmN0aW9uIHIoZSxyKXtFcnJvci5jYWxsKHRoaXMpLHRoaXMubmFtZT0iWUFNTEV4Y2VwdGlvbiIsdGhpcy5yZWFzb249ZSx0aGlzLm1hcms9cix0aGlzLm1lc3NhZ2U9dCh0aGlzLCExKSxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRoaXMuY29uc3RydWN0b3IpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2t8fCIifXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1yLHIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm5hbWUrIjogIit0KHRoaXMsZSl9LGUuZXhwb3J0cz1yfSw5MjQzOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig4NDMzKSxvPXIoMTIzMSksaT1yKDgwODMpLGE9cig1NDg5KSxzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbD0vW1x4MDAtXHgwOFx4MEJceDBDXHgwRS1ceDFGXHg3Ri1ceDg0XHg4Ni1ceDlGXHVGRkZFXHVGRkZGXXxbXHVEODAwLVx1REJGRl0oPyFbXHVEQzAwLVx1REZGRl0pfCg/OlteXHVEODAwLVx1REJGRl18XilbXHVEQzAwLVx1REZGRl0vLGM9L1tceDg1XHUyMDI4XHUyMDI5XS8sdT0vWyxcW1xdXHtcfV0vLHA9L14oPzohfCEhfCFbYS16XC1dKyEpJC9pLGQ9L14oPzohfFteLFxbXF1ce1x9XSkoPzolWzAtOWEtZl17Mn18WzAtOWEtelwtIztcL1w/OkAmPVwrXCQsX1wuIX5cKidcKFwpXFtcXV0pKiQvaTtmdW5jdGlvbiBmKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gMTA9PT1lfHwxMz09PWV9ZnVuY3Rpb24gZyhlKXtyZXR1cm4gOT09PWV8fDMyPT09ZX1mdW5jdGlvbiB5KGUpe3JldHVybiA5PT09ZXx8MzI9PT1lfHwxMD09PWV8fDEzPT09ZX1mdW5jdGlvbiBtKGUpe3JldHVybiA0ND09PWV8fDkxPT09ZXx8OTM9PT1lfHwxMjM9PT1lfHwxMjU9PT1lfWZ1bmN0aW9uIGIoZSl7dmFyIHQ7cmV0dXJuIDQ4PD1lJiZlPD01Nz9lLTQ4Ojk3PD0odD0zMnxlKSYmdDw9MTAyP3QtOTcrMTA6LTF9ZnVuY3Rpb24gTyhlKXtyZXR1cm4gNDg9PT1lPyJcMCI6OTc9PT1lPyIHIjo5OD09PWU/IlxiIjoxMTY9PT1lfHw5PT09ZT8iXHQiOjExMD09PWU/IlxuIjoxMTg9PT1lPyJcdiI6MTAyPT09ZT8iXGYiOjExND09PWU/IlxyIjoxMDE9PT1lPyIbIjozMj09PWU/IiAiOjM0PT09ZT8nIic6NDc9PT1lPyIvIjo5Mj09PWU/IlxcIjo3OD09PWU/IsKFIjo5NT09PWU/IsKgIjo3Nj09PWU/Ilx1MjAyOCI6ODA9PT1lPyJcdTIwMjkiOiIifWZ1bmN0aW9uIFQoZSl7cmV0dXJuIGU8PTY1NTM1P1N0cmluZy5mcm9tQ2hhckNvZGUoZSk6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NisoZS02NTUzNj4+MTApLDU2MzIwKyhlLTY1NTM2JjEwMjMpKX1mb3IodmFyIHY9bmV3IEFycmF5KDI1Niksdz1uZXcgQXJyYXkoMjU2KSxqPTA7ajwyNTY7aisrKXZbal09TyhqKT8xOjAsd1tqXT1PKGopO2Z1bmN0aW9uIEEoZSx0KXt0aGlzLmlucHV0PWUsdGhpcy5maWxlbmFtZT10LmZpbGVuYW1lfHxudWxsLHRoaXMuc2NoZW1hPXQuc2NoZW1hfHxhLHRoaXMub25XYXJuaW5nPXQub25XYXJuaW5nfHxudWxsLHRoaXMubGVnYWN5PXQubGVnYWN5fHwhMSx0aGlzLmpzb249dC5qc29ufHwhMSx0aGlzLmxpc3RlbmVyPXQubGlzdGVuZXJ8fG51bGwsdGhpcy5pbXBsaWNpdFR5cGVzPXRoaXMuc2NoZW1hLmNvbXBpbGVkSW1wbGljaXQsdGhpcy50eXBlTWFwPXRoaXMuc2NoZW1hLmNvbXBpbGVkVHlwZU1hcCx0aGlzLmxlbmd0aD1lLmxlbmd0aCx0aGlzLnBvc2l0aW9uPTAsdGhpcy5saW5lPTAsdGhpcy5saW5lU3RhcnQ9MCx0aGlzLmxpbmVJbmRlbnQ9MCx0aGlzLmZpcnN0VGFiSW5MaW5lPS0xLHRoaXMuZG9jdW1lbnRzPVtdfWZ1bmN0aW9uIFAoZSx0KXt2YXIgcj17bmFtZTplLmZpbGVuYW1lLGJ1ZmZlcjplLmlucHV0LnNsaWNlKDAsLTEpLHBvc2l0aW9uOmUucG9zaXRpb24sbGluZTplLmxpbmUsY29sdW1uOmUucG9zaXRpb24tZS5saW5lU3RhcnR9O3JldHVybiByLnNuaXBwZXQ9aShyKSxuZXcgbyh0LHIpfWZ1bmN0aW9uIEMoZSx0KXt0aHJvdyBQKGUsdCl9ZnVuY3Rpb24gUyhlLHQpe2Uub25XYXJuaW5nJiZlLm9uV2FybmluZy5jYWxsKG51bGwsUChlLHQpKX12YXIgRT17WUFNTDpmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpO251bGwhPT1lLnZlcnNpb24mJkMoZSwiZHVwbGljYXRpb24gb2YgJVlBTUwgZGlyZWN0aXZlIiksMSE9PXIubGVuZ3RoJiZDKGUsIllBTUwgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSBvbmUgYXJndW1lbnQiKSxudWxsPT09KG49L14oWzAtOV0rKVwuKFswLTldKykkLy5leGVjKHJbMF0pKSYmQyhlLCJpbGwtZm9ybWVkIGFyZ3VtZW50IG9mIHRoZSBZQU1MIGRpcmVjdGl2ZSIpLG89cGFyc2VJbnQoblsxXSwxMCksaT1wYXJzZUludChuWzJdLDEwKSwxIT09byYmQyhlLCJ1bmFjY2VwdGFibGUgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCIpLGUudmVyc2lvbj1yWzBdLGUuY2hlY2tMaW5lQnJlYWtzPWk8MiwxIT09aSYmMiE9PWkmJlMoZSwidW5zdXBwb3J0ZWQgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCIpfSxUQUc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG87MiE9PXIubGVuZ3RoJiZDKGUsIlRBRyBkaXJlY3RpdmUgYWNjZXB0cyBleGFjdGx5IHR3byBhcmd1bWVudHMiKSxuPXJbMF0sbz1yWzFdLHAudGVzdChuKXx8QyhlLCJpbGwtZm9ybWVkIHRhZyBoYW5kbGUgKGZpcnN0IGFyZ3VtZW50KSBvZiB0aGUgVEFHIGRpcmVjdGl2ZSIpLHMuY2FsbChlLnRhZ01hcCxuKSYmQyhlLCd0aGVyZSBpcyBhIHByZXZpb3VzbHkgZGVjbGFyZWQgc3VmZml4IGZvciAiJytuKyciIHRhZyBoYW5kbGUnKSxkLnRlc3Qobyl8fEMoZSwiaWxsLWZvcm1lZCB0YWcgcHJlZml4IChzZWNvbmQgYXJndW1lbnQpIG9mIHRoZSBUQUcgZGlyZWN0aXZlIik7dHJ5e289ZGVjb2RlVVJJQ29tcG9uZW50KG8pfWNhdGNoKHQpe0MoZSwidGFnIHByZWZpeCBpcyBtYWxmb3JtZWQ6ICIrbyl9ZS50YWdNYXBbbl09b319O2Z1bmN0aW9uIGsoZSx0LHIsbil7dmFyIG8saSxhLHM7aWYodDxyKXtpZihzPWUuaW5wdXQuc2xpY2UodCxyKSxuKWZvcihvPTAsaT1zLmxlbmd0aDtvPGk7bys9MSk5PT09KGE9cy5jaGFyQ29kZUF0KG8pKXx8MzI8PWEmJmE8PTExMTQxMTF8fEMoZSwiZXhwZWN0ZWQgdmFsaWQgSlNPTiBjaGFyYWN0ZXIiKTtlbHNlIGwudGVzdChzKSYmQyhlLCJ0aGUgc3RyZWFtIGNvbnRhaW5zIG5vbi1wcmludGFibGUgY2hhcmFjdGVycyIpO2UucmVzdWx0Kz1zfX1mdW5jdGlvbiB4KGUsdCxyLG8pe3ZhciBpLGEsbCxjO2ZvcihuLmlzT2JqZWN0KHIpfHxDKGUsImNhbm5vdCBtZXJnZSBtYXBwaW5nczsgdGhlIHByb3ZpZGVkIHNvdXJjZSBvYmplY3QgaXMgdW5hY2NlcHRhYmxlIiksbD0wLGM9KGk9T2JqZWN0LmtleXMocikpLmxlbmd0aDtsPGM7bCs9MSlhPWlbbF0scy5jYWxsKHQsYSl8fCh0W2FdPXJbYV0sb1thXT0hMCl9ZnVuY3Rpb24gTihlLHQscixuLG8saSxhLGwsYyl7dmFyIHUscDtpZihBcnJheS5pc0FycmF5KG8pKWZvcih1PTAscD0obz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvKSkubGVuZ3RoO3U8cDt1Kz0xKUFycmF5LmlzQXJyYXkob1t1XSkmJkMoZSwibmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZCBpbnNpZGUga2V5cyIpLCJvYmplY3QiPT10eXBlb2YgbyYmIltvYmplY3QgT2JqZWN0XSI9PT1mKG9bdV0pJiYob1t1XT0iW29iamVjdCBPYmplY3RdIik7aWYoIm9iamVjdCI9PXR5cGVvZiBvJiYiW29iamVjdCBPYmplY3RdIj09PWYobykmJihvPSJbb2JqZWN0IE9iamVjdF0iKSxvPVN0cmluZyhvKSxudWxsPT09dCYmKHQ9e30pLCJ0YWc6eWFtbC5vcmcsMjAwMjptZXJnZSI9PT1uKWlmKEFycmF5LmlzQXJyYXkoaSkpZm9yKHU9MCxwPWkubGVuZ3RoO3U8cDt1Kz0xKXgoZSx0LGlbdV0scik7ZWxzZSB4KGUsdCxpLHIpO2Vsc2UgZS5qc29ufHxzLmNhbGwocixvKXx8IXMuY2FsbCh0LG8pfHwoZS5saW5lPWF8fGUubGluZSxlLmxpbmVTdGFydD1sfHxlLmxpbmVTdGFydCxlLnBvc2l0aW9uPWN8fGUucG9zaXRpb24sQyhlLCJkdXBsaWNhdGVkIG1hcHBpbmcga2V5IikpLCJfX3Byb3RvX18iPT09bz9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxvLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTppfSk6dFtvXT1pLGRlbGV0ZSByW29dO3JldHVybiB0fWZ1bmN0aW9uIEQoZSl7dmFyIHQ7MTA9PT0odD1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbikpP2UucG9zaXRpb24rKzoxMz09PXQ/KGUucG9zaXRpb24rKywxMD09PWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSYmZS5wb3NpdGlvbisrKTpDKGUsImEgbGluZSBicmVhayBpcyBleHBlY3RlZCIpLGUubGluZSs9MSxlLmxpbmVTdGFydD1lLnBvc2l0aW9uLGUuZmlyc3RUYWJJbkxpbmU9LTF9ZnVuY3Rpb24gXyhlLHQscil7Zm9yKHZhciBuPTAsbz1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbik7MCE9PW87KXtmb3IoO2cobyk7KTk9PT1vJiYtMT09PWUuZmlyc3RUYWJJbkxpbmUmJihlLmZpcnN0VGFiSW5MaW5lPWUucG9zaXRpb24pLG89ZS5pbnB1dC5jaGFyQ29kZUF0KCsrZS5wb3NpdGlvbik7aWYodCYmMzU9PT1vKWRve289ZS5pbnB1dC5jaGFyQ29kZUF0KCsrZS5wb3NpdGlvbil9d2hpbGUoMTAhPT1vJiYxMyE9PW8mJjAhPT1vKTtpZighaChvKSlicmVhaztmb3IoRChlKSxvPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSxuKyssZS5saW5lSW5kZW50PTA7MzI9PT1vOyllLmxpbmVJbmRlbnQrKyxvPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pfXJldHVybi0xIT09ciYmMCE9PW4mJmUubGluZUluZGVudDxyJiZTKGUsImRlZmljaWVudCBpbmRlbnRhdGlvbiIpLG59ZnVuY3Rpb24gcShlKXt2YXIgdCxyPWUucG9zaXRpb247cmV0dXJuISg0NSE9PSh0PWUuaW5wdXQuY2hhckNvZGVBdChyKSkmJjQ2IT09dHx8dCE9PWUuaW5wdXQuY2hhckNvZGVBdChyKzEpfHx0IT09ZS5pbnB1dC5jaGFyQ29kZUF0KHIrMil8fChyKz0zLDAhPT0odD1lLmlucHV0LmNoYXJDb2RlQXQocikpJiYheSh0KSkpfWZ1bmN0aW9uIEwoZSx0KXsxPT09dD9lLnJlc3VsdCs9IiAiOnQ+MSYmKGUucmVzdWx0Kz1uLnJlcGVhdCgiXG4iLHQtMSkpfWZ1bmN0aW9uIFIoZSx0KXt2YXIgcixuLG89ZS50YWcsaT1lLmFuY2hvcixhPVtdLHM9ITE7aWYoLTEhPT1lLmZpcnN0VGFiSW5MaW5lKXJldHVybiExO2ZvcihudWxsIT09ZS5hbmNob3ImJihlLmFuY2hvck1hcFtlLmFuY2hvcl09YSksbj1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbik7MCE9PW4mJigtMSE9PWUuZmlyc3RUYWJJbkxpbmUmJihlLnBvc2l0aW9uPWUuZmlyc3RUYWJJbkxpbmUsQyhlLCJ0YWIgY2hhcmFjdGVycyBtdXN0IG5vdCBiZSB1c2VkIGluIGluZGVudGF0aW9uIikpLDQ1PT09bikmJnkoZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24rMSkpOylpZihzPSEwLGUucG9zaXRpb24rKyxfKGUsITAsLTEpJiZlLmxpbmVJbmRlbnQ8PXQpYS5wdXNoKG51bGwpLG49ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pO2Vsc2UgaWYocj1lLmxpbmUsSShlLHQsMywhMSwhMCksYS5wdXNoKGUucmVzdWx0KSxfKGUsITAsLTEpLG49ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pLChlLmxpbmU9PT1yfHxlLmxpbmVJbmRlbnQ+dCkmJjAhPT1uKUMoZSwiYmFkIGluZGVudGF0aW9uIG9mIGEgc2VxdWVuY2UgZW50cnkiKTtlbHNlIGlmKGUubGluZUluZGVudDx0KWJyZWFrO3JldHVybiEhcyYmKGUudGFnPW8sZS5hbmNob3I9aSxlLmtpbmQ9InNlcXVlbmNlIixlLnJlc3VsdD1hLCEwKX1mdW5jdGlvbiBCKGUpe3ZhciB0LHIsbixvLGk9ITEsYT0hMTtpZigzMyE9PShvPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSkpcmV0dXJuITE7aWYobnVsbCE9PWUudGFnJiZDKGUsImR1cGxpY2F0aW9uIG9mIGEgdGFnIHByb3BlcnR5IiksNjA9PT0obz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKSk/KGk9ITAsbz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKSk6MzM9PT1vPyhhPSEwLHI9IiEhIixvPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pKTpyPSIhIix0PWUucG9zaXRpb24saSl7ZG97bz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKX13aGlsZSgwIT09byYmNjIhPT1vKTtlLnBvc2l0aW9uPGUubGVuZ3RoPyhuPWUuaW5wdXQuc2xpY2UodCxlLnBvc2l0aW9uKSxvPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pKTpDKGUsInVuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgdmVyYmF0aW0gdGFnIil9ZWxzZXtmb3IoOzAhPT1vJiYheShvKTspMzM9PT1vJiYoYT9DKGUsInRhZyBzdWZmaXggY2Fubm90IGNvbnRhaW4gZXhjbGFtYXRpb24gbWFya3MiKToocj1lLmlucHV0LnNsaWNlKHQtMSxlLnBvc2l0aW9uKzEpLHAudGVzdChyKXx8QyhlLCJuYW1lZCB0YWcgaGFuZGxlIGNhbm5vdCBjb250YWluIHN1Y2ggY2hhcmFjdGVycyIpLGE9ITAsdD1lLnBvc2l0aW9uKzEpKSxvPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pO249ZS5pbnB1dC5zbGljZSh0LGUucG9zaXRpb24pLHUudGVzdChuKSYmQyhlLCJ0YWcgc3VmZml4IGNhbm5vdCBjb250YWluIGZsb3cgaW5kaWNhdG9yIGNoYXJhY3RlcnMiKX1uJiYhZC50ZXN0KG4pJiZDKGUsInRhZyBuYW1lIGNhbm5vdCBjb250YWluIHN1Y2ggY2hhcmFjdGVyczogIituKTt0cnl7bj1kZWNvZGVVUklDb21wb25lbnQobil9Y2F0Y2godCl7QyhlLCJ0YWcgbmFtZSBpcyBtYWxmb3JtZWQ6ICIrbil9cmV0dXJuIGk/ZS50YWc9bjpzLmNhbGwoZS50YWdNYXAscik/ZS50YWc9ZS50YWdNYXBbcl0rbjoiISI9PT1yP2UudGFnPSIhIituOiIhISI9PT1yP2UudGFnPSJ0YWc6eWFtbC5vcmcsMjAwMjoiK246QyhlLCd1bmRlY2xhcmVkIHRhZyBoYW5kbGUgIicrcisnIicpLCEwfWZ1bmN0aW9uIE0oZSl7dmFyIHQscjtpZigzOCE9PShyPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSkpcmV0dXJuITE7Zm9yKG51bGwhPT1lLmFuY2hvciYmQyhlLCJkdXBsaWNhdGlvbiBvZiBhbiBhbmNob3IgcHJvcGVydHkiKSxyPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pLHQ9ZS5wb3NpdGlvbjswIT09ciYmIXkocikmJiFtKHIpOylyPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pO3JldHVybiBlLnBvc2l0aW9uPT09dCYmQyhlLCJuYW1lIG9mIGFuIGFuY2hvciBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIiksZS5hbmNob3I9ZS5pbnB1dC5zbGljZSh0LGUucG9zaXRpb24pLCEwfWZ1bmN0aW9uIEkoZSx0LHIsbyxpKXt2YXIgYSxsLGMsdSxwLGQsZixPLGosQT0xLFA9ITEsUz0hMTtpZihudWxsIT09ZS5saXN0ZW5lciYmZS5saXN0ZW5lcigib3BlbiIsZSksZS50YWc9bnVsbCxlLmFuY2hvcj1udWxsLGUua2luZD1udWxsLGUucmVzdWx0PW51bGwsYT1sPWM9ND09PXJ8fDM9PT1yLG8mJl8oZSwhMCwtMSkmJihQPSEwLGUubGluZUluZGVudD50P0E9MTplLmxpbmVJbmRlbnQ9PT10P0E9MDplLmxpbmVJbmRlbnQ8dCYmKEE9LTEpKSwxPT09QSlmb3IoO0IoZSl8fE0oZSk7KV8oZSwhMCwtMSk/KFA9ITAsYz1hLGUubGluZUluZGVudD50P0E9MTplLmxpbmVJbmRlbnQ9PT10P0E9MDplLmxpbmVJbmRlbnQ8dCYmKEE9LTEpKTpjPSExO2lmKGMmJihjPVB8fGkpLDEhPT1BJiY0IT09cnx8KE89MT09PXJ8fDI9PT1yP3Q6dCsxLGo9ZS5wb3NpdGlvbi1lLmxpbmVTdGFydCwxPT09QT9jJiYoUihlLGopfHxmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLGEscyxsLGMsdT1lLnRhZyxwPWUuYW5jaG9yLGQ9e30sZj1PYmplY3QuY3JlYXRlKG51bGwpLGg9bnVsbCxtPW51bGwsYj1udWxsLE89ITEsVD0hMTtpZigtMSE9PWUuZmlyc3RUYWJJbkxpbmUpcmV0dXJuITE7Zm9yKG51bGwhPT1lLmFuY2hvciYmKGUuYW5jaG9yTWFwW2UuYW5jaG9yXT1kKSxjPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKTswIT09Yzspe2lmKE98fC0xPT09ZS5maXJzdFRhYkluTGluZXx8KGUucG9zaXRpb249ZS5maXJzdFRhYkluTGluZSxDKGUsInRhYiBjaGFyYWN0ZXJzIG11c3Qgbm90IGJlIHVzZWQgaW4gaW5kZW50YXRpb24iKSksbj1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbisxKSxpPWUubGluZSw2MyE9PWMmJjU4IT09Y3x8IXkobikpe2lmKGE9ZS5saW5lLHM9ZS5saW5lU3RhcnQsbD1lLnBvc2l0aW9uLCFJKGUsciwyLCExLCEwKSlicmVhaztpZihlLmxpbmU9PT1pKXtmb3IoYz1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbik7ZyhjKTspYz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKTtpZig1OD09PWMpeShjPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pKXx8QyhlLCJhIHdoaXRlc3BhY2UgY2hhcmFjdGVyIGlzIGV4cGVjdGVkIGFmdGVyIHRoZSBrZXktdmFsdWUgc2VwYXJhdG9yIHdpdGhpbiBhIGJsb2NrIG1hcHBpbmciKSxPJiYoTihlLGQsZixoLG0sbnVsbCxhLHMsbCksaD1tPWI9bnVsbCksVD0hMCxPPSExLG89ITEsaD1lLnRhZyxtPWUucmVzdWx0O2Vsc2V7aWYoIVQpcmV0dXJuIGUudGFnPXUsZS5hbmNob3I9cCwhMDtDKGUsImNhbiBub3QgcmVhZCBhbiBpbXBsaWNpdCBtYXBwaW5nIHBhaXI7IGEgY29sb24gaXMgbWlzc2VkIil9fWVsc2V7aWYoIVQpcmV0dXJuIGUudGFnPXUsZS5hbmNob3I9cCwhMDtDKGUsImNhbiBub3QgcmVhZCBhIGJsb2NrIG1hcHBpbmcgZW50cnk7IGEgbXVsdGlsaW5lIGtleSBtYXkgbm90IGJlIGFuIGltcGxpY2l0IGtleSIpfX1lbHNlIDYzPT09Yz8oTyYmKE4oZSxkLGYsaCxtLG51bGwsYSxzLGwpLGg9bT1iPW51bGwpLFQ9ITAsTz0hMCxvPSEwKTpPPyhPPSExLG89ITApOkMoZSwiaW5jb21wbGV0ZSBleHBsaWNpdCBtYXBwaW5nIHBhaXI7IGEga2V5IG5vZGUgaXMgbWlzc2VkOyBvciBmb2xsb3dlZCBieSBhIG5vbi10YWJ1bGF0ZWQgZW1wdHkgbGluZSIpLGUucG9zaXRpb24rPTEsYz1uO2lmKChlLmxpbmU9PT1pfHxlLmxpbmVJbmRlbnQ+dCkmJihPJiYoYT1lLmxpbmUscz1lLmxpbmVTdGFydCxsPWUucG9zaXRpb24pLEkoZSx0LDQsITAsbykmJihPP209ZS5yZXN1bHQ6Yj1lLnJlc3VsdCksT3x8KE4oZSxkLGYsaCxtLGIsYSxzLGwpLGg9bT1iPW51bGwpLF8oZSwhMCwtMSksYz1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbikpLChlLmxpbmU9PT1pfHxlLmxpbmVJbmRlbnQ+dCkmJjAhPT1jKUMoZSwiYmFkIGluZGVudGF0aW9uIG9mIGEgbWFwcGluZyBlbnRyeSIpO2Vsc2UgaWYoZS5saW5lSW5kZW50PHQpYnJlYWt9cmV0dXJuIE8mJk4oZSxkLGYsaCxtLG51bGwsYSxzLGwpLFQmJihlLnRhZz11LGUuYW5jaG9yPXAsZS5raW5kPSJtYXBwaW5nIixlLnJlc3VsdD1kKSxUfShlLGosTykpfHxmdW5jdGlvbihlLHQpe3ZhciByLG4sbyxpLGEscyxsLGMsdSxwLGQsZixoPSEwLGc9ZS50YWcsbT1lLmFuY2hvcixiPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoOTE9PT0oZj1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbikpKWE9OTMsYz0hMSxpPVtdO2Vsc2V7aWYoMTIzIT09ZilyZXR1cm4hMTthPTEyNSxjPSEwLGk9e319Zm9yKG51bGwhPT1lLmFuY2hvciYmKGUuYW5jaG9yTWFwW2UuYW5jaG9yXT1pKSxmPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pOzAhPT1mOyl7aWYoXyhlLCEwLHQpLChmPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSk9PT1hKXJldHVybiBlLnBvc2l0aW9uKyssZS50YWc9ZyxlLmFuY2hvcj1tLGUua2luZD1jPyJtYXBwaW5nIjoic2VxdWVuY2UiLGUucmVzdWx0PWksITA7aD80ND09PWYmJkMoZSwiZXhwZWN0ZWQgdGhlIG5vZGUgY29udGVudCwgYnV0IGZvdW5kICcsJyIpOkMoZSwibWlzc2VkIGNvbW1hIGJldHdlZW4gZmxvdyBjb2xsZWN0aW9uIGVudHJpZXMiKSxkPW51bGwscz1sPSExLDYzPT09ZiYmeShlLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbisxKSkmJihzPWw9ITAsZS5wb3NpdGlvbisrLF8oZSwhMCx0KSkscj1lLmxpbmUsbj1lLmxpbmVTdGFydCxvPWUucG9zaXRpb24sSShlLHQsMSwhMSwhMCkscD1lLnRhZyx1PWUucmVzdWx0LF8oZSwhMCx0KSxmPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSwhbCYmZS5saW5lIT09cnx8NTghPT1mfHwocz0hMCxmPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pLF8oZSwhMCx0KSxJKGUsdCwxLCExLCEwKSxkPWUucmVzdWx0KSxjP04oZSxpLGIscCx1LGQscixuLG8pOnM/aS5wdXNoKE4oZSxudWxsLGIscCx1LGQscixuLG8pKTppLnB1c2godSksXyhlLCEwLHQpLDQ0PT09KGY9ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pKT8oaD0hMCxmPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pKTpoPSExfUMoZSwidW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBmbG93IGNvbGxlY3Rpb24iKX0oZSxPKT9TPSEwOihsJiZmdW5jdGlvbihlLHQpe3ZhciByLG8saSxhLHMsbD0xLGM9ITEsdT0hMSxwPXQsZD0wLGY9ITE7aWYoMTI0PT09KGE9ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pKSlvPSExO2Vsc2V7aWYoNjIhPT1hKXJldHVybiExO289ITB9Zm9yKGUua2luZD0ic2NhbGFyIixlLnJlc3VsdD0iIjswIT09YTspaWYoNDM9PT0oYT1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKSl8fDQ1PT09YSkxPT09bD9sPTQzPT09YT8zOjI6QyhlLCJyZXBlYXQgb2YgYSBjaG9tcGluZyBtb2RlIGlkZW50aWZpZXIiKTtlbHNle2lmKCEoKGk9NDg8PShzPWEpJiZzPD01Nz9zLTQ4Oi0xKT49MCkpYnJlYWs7MD09PWk/QyhlLCJiYWQgZXhwbGljaXQgaW5kZW50YXRpb24gd2lkdGggb2YgYSBibG9jayBzY2FsYXI7IGl0IGNhbm5vdCBiZSBsZXNzIHRoYW4gb25lIik6dT9DKGUsInJlcGVhdCBvZiBhbiBpbmRlbnRhdGlvbiB3aWR0aCBpZGVudGlmaWVyIik6KHA9dCtpLTEsdT0hMCl9aWYoZyhhKSl7ZG97YT1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKX13aGlsZShnKGEpKTtpZigzNT09PWEpZG97YT1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKX13aGlsZSghaChhKSYmMCE9PWEpfWZvcig7MCE9PWE7KXtmb3IoRChlKSxlLmxpbmVJbmRlbnQ9MCxhPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKTsoIXV8fGUubGluZUluZGVudDxwKSYmMzI9PT1hOyllLmxpbmVJbmRlbnQrKyxhPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pO2lmKCF1JiZlLmxpbmVJbmRlbnQ+cCYmKHA9ZS5saW5lSW5kZW50KSxoKGEpKWQrKztlbHNle2lmKGUubGluZUluZGVudDxwKXszPT09bD9lLnJlc3VsdCs9bi5yZXBlYXQoIlxuIixjPzErZDpkKToxPT09bCYmYyYmKGUucmVzdWx0Kz0iXG4iKTticmVha31mb3Iobz9nKGEpPyhmPSEwLGUucmVzdWx0Kz1uLnJlcGVhdCgiXG4iLGM/MStkOmQpKTpmPyhmPSExLGUucmVzdWx0Kz1uLnJlcGVhdCgiXG4iLGQrMSkpOjA9PT1kP2MmJihlLnJlc3VsdCs9IiAiKTplLnJlc3VsdCs9bi5yZXBlYXQoIlxuIixkKTplLnJlc3VsdCs9bi5yZXBlYXQoIlxuIixjPzErZDpkKSxjPSEwLHU9ITAsZD0wLHI9ZS5wb3NpdGlvbjshaChhKSYmMCE9PWE7KWE9ZS5pbnB1dC5jaGFyQ29kZUF0KCsrZS5wb3NpdGlvbik7ayhlLHIsZS5wb3NpdGlvbiwhMSl9fXJldHVybiEwfShlLE8pfHxmdW5jdGlvbihlLHQpe3ZhciByLG4sbztpZigzOSE9PShyPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSkpcmV0dXJuITE7Zm9yKGUua2luZD0ic2NhbGFyIixlLnJlc3VsdD0iIixlLnBvc2l0aW9uKyssbj1vPWUucG9zaXRpb247MCE9PShyPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSk7KWlmKDM5PT09cil7aWYoayhlLG4sZS5wb3NpdGlvbiwhMCksMzkhPT0ocj1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKSkpcmV0dXJuITA7bj1lLnBvc2l0aW9uLGUucG9zaXRpb24rKyxvPWUucG9zaXRpb259ZWxzZSBoKHIpPyhrKGUsbixvLCEwKSxMKGUsXyhlLCExLHQpKSxuPW89ZS5wb3NpdGlvbik6ZS5wb3NpdGlvbj09PWUubGluZVN0YXJ0JiZxKGUpP0MoZSwidW5leHBlY3RlZCBlbmQgb2YgdGhlIGRvY3VtZW50IHdpdGhpbiBhIHNpbmdsZSBxdW90ZWQgc2NhbGFyIik6KGUucG9zaXRpb24rKyxvPWUucG9zaXRpb24pO0MoZSwidW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBzaW5nbGUgcXVvdGVkIHNjYWxhciIpfShlLE8pfHxmdW5jdGlvbihlLHQpe3ZhciByLG4sbyxpLGEscyxsO2lmKDM0IT09KHM9ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pKSlyZXR1cm4hMTtmb3IoZS5raW5kPSJzY2FsYXIiLGUucmVzdWx0PSIiLGUucG9zaXRpb24rKyxyPW49ZS5wb3NpdGlvbjswIT09KHM9ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pKTspe2lmKDM0PT09cylyZXR1cm4gayhlLHIsZS5wb3NpdGlvbiwhMCksZS5wb3NpdGlvbisrLCEwO2lmKDkyPT09cyl7aWYoayhlLHIsZS5wb3NpdGlvbiwhMCksaChzPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pKSlfKGUsITEsdCk7ZWxzZSBpZihzPDI1NiYmdltzXSllLnJlc3VsdCs9d1tzXSxlLnBvc2l0aW9uKys7ZWxzZSBpZigoYT0xMjA9PT0obD1zKT8yOjExNz09PWw/NDo4NT09PWw/ODowKT4wKXtmb3Iobz1hLGk9MDtvPjA7by0tKShhPWIocz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKSkpPj0wP2k9KGk8PDQpK2E6QyhlLCJleHBlY3RlZCBoZXhhZGVjaW1hbCBjaGFyYWN0ZXIiKTtlLnJlc3VsdCs9VChpKSxlLnBvc2l0aW9uKyt9ZWxzZSBDKGUsInVua25vd24gZXNjYXBlIHNlcXVlbmNlIik7cj1uPWUucG9zaXRpb259ZWxzZSBoKHMpPyhrKGUscixuLCEwKSxMKGUsXyhlLCExLHQpKSxyPW49ZS5wb3NpdGlvbik6ZS5wb3NpdGlvbj09PWUubGluZVN0YXJ0JiZxKGUpP0MoZSwidW5leHBlY3RlZCBlbmQgb2YgdGhlIGRvY3VtZW50IHdpdGhpbiBhIGRvdWJsZSBxdW90ZWQgc2NhbGFyIik6KGUucG9zaXRpb24rKyxuPWUucG9zaXRpb24pfUMoZSwidW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBkb3VibGUgcXVvdGVkIHNjYWxhciIpfShlLE8pP1M9ITA6ZnVuY3Rpb24oZSl7dmFyIHQscixuO2lmKDQyIT09KG49ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pKSlyZXR1cm4hMTtmb3Iobj1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKSx0PWUucG9zaXRpb247MCE9PW4mJiF5KG4pJiYhbShuKTspbj1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKTtyZXR1cm4gZS5wb3NpdGlvbj09PXQmJkMoZSwibmFtZSBvZiBhbiBhbGlhcyBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIikscj1lLmlucHV0LnNsaWNlKHQsZS5wb3NpdGlvbikscy5jYWxsKGUuYW5jaG9yTWFwLHIpfHxDKGUsJ3VuaWRlbnRpZmllZCBhbGlhcyAiJytyKyciJyksZS5yZXN1bHQ9ZS5hbmNob3JNYXBbcl0sXyhlLCEwLC0xKSwhMH0oZSk/KFM9ITAsbnVsbD09PWUudGFnJiZudWxsPT09ZS5hbmNob3J8fEMoZSwiYWxpYXMgbm9kZSBzaG91bGQgbm90IGhhdmUgYW55IHByb3BlcnRpZXMiKSk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxhLHMsbCxjLHUscD1lLmtpbmQsZD1lLnJlc3VsdDtpZih5KHU9ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pKXx8bSh1KXx8MzU9PT11fHwzOD09PXV8fDQyPT09dXx8MzM9PT11fHwxMjQ9PT11fHw2Mj09PXV8fDM5PT09dXx8MzQ9PT11fHwzNz09PXV8fDY0PT09dXx8OTY9PT11KXJldHVybiExO2lmKCg2Mz09PXV8fDQ1PT09dSkmJih5KG49ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24rMSkpfHxyJiZtKG4pKSlyZXR1cm4hMTtmb3IoZS5raW5kPSJzY2FsYXIiLGUucmVzdWx0PSIiLG89aT1lLnBvc2l0aW9uLGE9ITE7MCE9PXU7KXtpZig1OD09PXUpe2lmKHkobj1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbisxKSl8fHImJm0obikpYnJlYWt9ZWxzZSBpZigzNT09PXUpe2lmKHkoZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24tMSkpKWJyZWFrfWVsc2V7aWYoZS5wb3NpdGlvbj09PWUubGluZVN0YXJ0JiZxKGUpfHxyJiZtKHUpKWJyZWFrO2lmKGgodSkpe2lmKHM9ZS5saW5lLGw9ZS5saW5lU3RhcnQsYz1lLmxpbmVJbmRlbnQsXyhlLCExLC0xKSxlLmxpbmVJbmRlbnQ+PXQpe2E9ITAsdT1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbik7Y29udGludWV9ZS5wb3NpdGlvbj1pLGUubGluZT1zLGUubGluZVN0YXJ0PWwsZS5saW5lSW5kZW50PWM7YnJlYWt9fWEmJihrKGUsbyxpLCExKSxMKGUsZS5saW5lLXMpLG89aT1lLnBvc2l0aW9uLGE9ITEpLGcodSl8fChpPWUucG9zaXRpb24rMSksdT1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKX1yZXR1cm4gayhlLG8saSwhMSksISFlLnJlc3VsdHx8KGUua2luZD1wLGUucmVzdWx0PWQsITEpfShlLE8sMT09PXIpJiYoUz0hMCxudWxsPT09ZS50YWcmJihlLnRhZz0iPyIpKSxudWxsIT09ZS5hbmNob3ImJihlLmFuY2hvck1hcFtlLmFuY2hvcl09ZS5yZXN1bHQpKTowPT09QSYmKFM9YyYmUihlLGopKSksbnVsbD09PWUudGFnKW51bGwhPT1lLmFuY2hvciYmKGUuYW5jaG9yTWFwW2UuYW5jaG9yXT1lLnJlc3VsdCk7ZWxzZSBpZigiPyI9PT1lLnRhZyl7Zm9yKG51bGwhPT1lLnJlc3VsdCYmInNjYWxhciIhPT1lLmtpbmQmJkMoZSwndW5hY2NlcHRhYmxlIG5vZGUga2luZCBmb3IgITw/PiB0YWc7IGl0IHNob3VsZCBiZSAic2NhbGFyIiwgbm90ICInK2Uua2luZCsnIicpLHU9MCxwPWUuaW1wbGljaXRUeXBlcy5sZW5ndGg7dTxwO3UrPTEpaWYoKGY9ZS5pbXBsaWNpdFR5cGVzW3VdKS5yZXNvbHZlKGUucmVzdWx0KSl7ZS5yZXN1bHQ9Zi5jb25zdHJ1Y3QoZS5yZXN1bHQpLGUudGFnPWYudGFnLG51bGwhPT1lLmFuY2hvciYmKGUuYW5jaG9yTWFwW2UuYW5jaG9yXT1lLnJlc3VsdCk7YnJlYWt9fWVsc2UgaWYoIiEiIT09ZS50YWcpe2lmKHMuY2FsbChlLnR5cGVNYXBbZS5raW5kfHwiZmFsbGJhY2siXSxlLnRhZykpZj1lLnR5cGVNYXBbZS5raW5kfHwiZmFsbGJhY2siXVtlLnRhZ107ZWxzZSBmb3IoZj1udWxsLHU9MCxwPShkPWUudHlwZU1hcC5tdWx0aVtlLmtpbmR8fCJmYWxsYmFjayJdKS5sZW5ndGg7dTxwO3UrPTEpaWYoZS50YWcuc2xpY2UoMCxkW3VdLnRhZy5sZW5ndGgpPT09ZFt1XS50YWcpe2Y9ZFt1XTticmVha31mfHxDKGUsInVua25vd24gdGFnICE8IitlLnRhZysiPiIpLG51bGwhPT1lLnJlc3VsdCYmZi5raW5kIT09ZS5raW5kJiZDKGUsInVuYWNjZXB0YWJsZSBub2RlIGtpbmQgZm9yICE8IitlLnRhZysnPiB0YWc7IGl0IHNob3VsZCBiZSAiJytmLmtpbmQrJyIsIG5vdCAiJytlLmtpbmQrJyInKSxmLnJlc29sdmUoZS5yZXN1bHQsZS50YWcpPyhlLnJlc3VsdD1mLmNvbnN0cnVjdChlLnJlc3VsdCxlLnRhZyksbnVsbCE9PWUuYW5jaG9yJiYoZS5hbmNob3JNYXBbZS5hbmNob3JdPWUucmVzdWx0KSk6QyhlLCJjYW5ub3QgcmVzb2x2ZSBhIG5vZGUgd2l0aCAhPCIrZS50YWcrIj4gZXhwbGljaXQgdGFnIil9cmV0dXJuIG51bGwhPT1lLmxpc3RlbmVyJiZlLmxpc3RlbmVyKCJjbG9zZSIsZSksbnVsbCE9PWUudGFnfHxudWxsIT09ZS5hbmNob3J8fFN9ZnVuY3Rpb24gVShlKXt2YXIgdCxyLG4sbyxpPWUucG9zaXRpb24sYT0hMTtmb3IoZS52ZXJzaW9uPW51bGwsZS5jaGVja0xpbmVCcmVha3M9ZS5sZWdhY3ksZS50YWdNYXA9T2JqZWN0LmNyZWF0ZShudWxsKSxlLmFuY2hvck1hcD1PYmplY3QuY3JlYXRlKG51bGwpOzAhPT0obz1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbikpJiYoXyhlLCEwLC0xKSxvPWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSwhKGUubGluZUluZGVudD4wfHwzNyE9PW8pKTspe2ZvcihhPSEwLG89ZS5pbnB1dC5jaGFyQ29kZUF0KCsrZS5wb3NpdGlvbiksdD1lLnBvc2l0aW9uOzAhPT1vJiYheShvKTspbz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKTtmb3Iobj1bXSwocj1lLmlucHV0LnNsaWNlKHQsZS5wb3NpdGlvbikpLmxlbmd0aDwxJiZDKGUsImRpcmVjdGl2ZSBuYW1lIG11c3Qgbm90IGJlIGxlc3MgdGhhbiBvbmUgY2hhcmFjdGVyIGluIGxlbmd0aCIpOzAhPT1vOyl7Zm9yKDtnKG8pOylvPWUuaW5wdXQuY2hhckNvZGVBdCgrK2UucG9zaXRpb24pO2lmKDM1PT09byl7ZG97bz1lLmlucHV0LmNoYXJDb2RlQXQoKytlLnBvc2l0aW9uKX13aGlsZSgwIT09byYmIWgobykpO2JyZWFrfWlmKGgobykpYnJlYWs7Zm9yKHQ9ZS5wb3NpdGlvbjswIT09byYmIXkobyk7KW89ZS5pbnB1dC5jaGFyQ29kZUF0KCsrZS5wb3NpdGlvbik7bi5wdXNoKGUuaW5wdXQuc2xpY2UodCxlLnBvc2l0aW9uKSl9MCE9PW8mJkQoZSkscy5jYWxsKEUscik/RVtyXShlLHIsbik6UyhlLCd1bmtub3duIGRvY3VtZW50IGRpcmVjdGl2ZSAiJytyKyciJyl9XyhlLCEwLC0xKSwwPT09ZS5saW5lSW5kZW50JiY0NT09PWUuaW5wdXQuY2hhckNvZGVBdChlLnBvc2l0aW9uKSYmNDU9PT1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbisxKSYmNDU9PT1lLmlucHV0LmNoYXJDb2RlQXQoZS5wb3NpdGlvbisyKT8oZS5wb3NpdGlvbis9MyxfKGUsITAsLTEpKTphJiZDKGUsImRpcmVjdGl2ZXMgZW5kIG1hcmsgaXMgZXhwZWN0ZWQiKSxJKGUsZS5saW5lSW5kZW50LTEsNCwhMSwhMCksXyhlLCEwLC0xKSxlLmNoZWNrTGluZUJyZWFrcyYmYy50ZXN0KGUuaW5wdXQuc2xpY2UoaSxlLnBvc2l0aW9uKSkmJlMoZSwibm9uLUFTQ0lJIGxpbmUgYnJlYWtzIGFyZSBpbnRlcnByZXRlZCBhcyBjb250ZW50IiksZS5kb2N1bWVudHMucHVzaChlLnJlc3VsdCksZS5wb3NpdGlvbj09PWUubGluZVN0YXJ0JiZxKGUpPzQ2PT09ZS5pbnB1dC5jaGFyQ29kZUF0KGUucG9zaXRpb24pJiYoZS5wb3NpdGlvbis9MyxfKGUsITAsLTEpKTplLnBvc2l0aW9uPGUubGVuZ3RoLTEmJkMoZSwiZW5kIG9mIHRoZSBzdHJlYW0gb3IgYSBkb2N1bWVudCBzZXBhcmF0b3IgaXMgZXhwZWN0ZWQiKX1mdW5jdGlvbiBGKGUsdCl7dD10fHx7fSwwIT09KGU9U3RyaW5nKGUpKS5sZW5ndGgmJigxMCE9PWUuY2hhckNvZGVBdChlLmxlbmd0aC0xKSYmMTMhPT1lLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSkmJihlKz0iXG4iKSw2NTI3OT09PWUuY2hhckNvZGVBdCgwKSYmKGU9ZS5zbGljZSgxKSkpO3ZhciByPW5ldyBBKGUsdCksbj1lLmluZGV4T2YoIlwwIik7Zm9yKC0xIT09biYmKHIucG9zaXRpb249bixDKHIsIm51bGwgYnl0ZSBpcyBub3QgYWxsb3dlZCBpbiBpbnB1dCIpKSxyLmlucHV0Kz0iXDAiOzMyPT09ci5pbnB1dC5jaGFyQ29kZUF0KHIucG9zaXRpb24pOylyLmxpbmVJbmRlbnQrPTEsci5wb3NpdGlvbis9MTtmb3IoO3IucG9zaXRpb248ci5sZW5ndGgtMTspVShyKTtyZXR1cm4gci5kb2N1bWVudHN9ZS5leHBvcnRzLmxvYWRBbGw9ZnVuY3Rpb24oZSx0LHIpe251bGwhPT10JiYib2JqZWN0Ij09dHlwZW9mIHQmJnZvaWQgMD09PXImJihyPXQsdD1udWxsKTt2YXIgbj1GKGUscik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpcmV0dXJuIG47Zm9yKHZhciBvPTAsaT1uLmxlbmd0aDtvPGk7bys9MSl0KG5bb10pfSxlLmV4cG9ydHMubG9hZD1mdW5jdGlvbihlLHQpe3ZhciByPUYoZSx0KTtpZigwIT09ci5sZW5ndGgpe2lmKDE9PT1yLmxlbmd0aClyZXR1cm4gclswXTt0aHJvdyBuZXcgbygiZXhwZWN0ZWQgYSBzaW5nbGUgZG9jdW1lbnQgaW4gdGhlIHN0cmVhbSwgYnV0IGZvdW5kIG1vcmUiKX19fSwyMTE5OihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cigxMjMxKSxvPXIoNTM4OCk7ZnVuY3Rpb24gaShlLHQpe3ZhciByPVtdO3JldHVybiBlW3RdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXIubGVuZ3RoO3IuZm9yRWFjaCgoZnVuY3Rpb24ocixuKXtyLnRhZz09PWUudGFnJiZyLmtpbmQ9PT1lLmtpbmQmJnIubXVsdGk9PT1lLm11bHRpJiYodD1uKX0pKSxyW3RdPWV9KSkscn1mdW5jdGlvbiBhKGUpe3JldHVybiB0aGlzLmV4dGVuZChlKX1hLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9W10scj1bXTtpZihlIGluc3RhbmNlb2YgbylyLnB1c2goZSk7ZWxzZSBpZihBcnJheS5pc0FycmF5KGUpKXI9ci5jb25jYXQoZSk7ZWxzZXtpZighZXx8IUFycmF5LmlzQXJyYXkoZS5pbXBsaWNpdCkmJiFBcnJheS5pc0FycmF5KGUuZXhwbGljaXQpKXRocm93IG5ldyBuKCJTY2hlbWEuZXh0ZW5kIGFyZ3VtZW50IHNob3VsZCBiZSBhIFR5cGUsIFsgVHlwZSBdLCBvciBhIHNjaGVtYSBkZWZpbml0aW9uICh7IGltcGxpY2l0OiBbLi4uXSwgZXhwbGljaXQ6IFsuLi5dIH0pIik7ZS5pbXBsaWNpdCYmKHQ9dC5jb25jYXQoZS5pbXBsaWNpdCkpLGUuZXhwbGljaXQmJihyPXIuY29uY2F0KGUuZXhwbGljaXQpKX10LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIG8pKXRocm93IG5ldyBuKCJTcGVjaWZpZWQgbGlzdCBvZiBZQU1MIHR5cGVzIChvciBhIHNpbmdsZSBUeXBlIG9iamVjdCkgY29udGFpbnMgYSBub24tVHlwZSBvYmplY3QuIik7aWYoZS5sb2FkS2luZCYmInNjYWxhciIhPT1lLmxvYWRLaW5kKXRocm93IG5ldyBuKCJUaGVyZSBpcyBhIG5vbi1zY2FsYXIgdHlwZSBpbiB0aGUgaW1wbGljaXQgbGlzdCBvZiBhIHNjaGVtYS4gSW1wbGljaXQgcmVzb2x2aW5nIG9mIHN1Y2ggdHlwZXMgaXMgbm90IHN1cHBvcnRlZC4iKTtpZihlLm11bHRpKXRocm93IG5ldyBuKCJUaGVyZSBpcyBhIG11bHRpIHR5cGUgaW4gdGhlIGltcGxpY2l0IGxpc3Qgb2YgYSBzY2hlbWEuIE11bHRpIHRhZ3MgY2FuIG9ubHkgYmUgbGlzdGVkIGFzIGV4cGxpY2l0LiIpfSkpLHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2YgbykpdGhyb3cgbmV3IG4oIlNwZWNpZmllZCBsaXN0IG9mIFlBTUwgdHlwZXMgKG9yIGEgc2luZ2xlIFR5cGUgb2JqZWN0KSBjb250YWlucyBhIG5vbi1UeXBlIG9iamVjdC4iKX0pKTt2YXIgcz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTtyZXR1cm4gcy5pbXBsaWNpdD0odGhpcy5pbXBsaWNpdHx8W10pLmNvbmNhdCh0KSxzLmV4cGxpY2l0PSh0aGlzLmV4cGxpY2l0fHxbXSkuY29uY2F0KHIpLHMuY29tcGlsZWRJbXBsaWNpdD1pKHMsImltcGxpY2l0Iikscy5jb21waWxlZEV4cGxpY2l0PWkocywiZXhwbGljaXQiKSxzLmNvbXBpbGVkVHlwZU1hcD1mdW5jdGlvbigpe3ZhciBlLHQscj17c2NhbGFyOnt9LHNlcXVlbmNlOnt9LG1hcHBpbmc6e30sZmFsbGJhY2s6e30sbXVsdGk6e3NjYWxhcjpbXSxzZXF1ZW5jZTpbXSxtYXBwaW5nOltdLGZhbGxiYWNrOltdfX07ZnVuY3Rpb24gbihlKXtlLm11bHRpPyhyLm11bHRpW2Uua2luZF0ucHVzaChlKSxyLm11bHRpLmZhbGxiYWNrLnB1c2goZSkpOnJbZS5raW5kXVtlLnRhZ109ci5mYWxsYmFja1tlLnRhZ109ZX1mb3IoZT0wLHQ9YXJndW1lbnRzLmxlbmd0aDtlPHQ7ZSs9MSlhcmd1bWVudHNbZV0uZm9yRWFjaChuKTtyZXR1cm4gcn0ocy5jb21waWxlZEltcGxpY2l0LHMuY29tcGlsZWRFeHBsaWNpdCksc30sZS5leHBvcnRzPWF9LDE3Njk6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9cig2MTg0KX0sNTQ4OTooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1yKDE3NjkpLmV4dGVuZCh7aW1wbGljaXQ6W3IoMTI3KSxyKDE4NTEpXSxleHBsaWNpdDpbcig5MzQyKSxyKDY5NDYpLHIoNjk0Mikscig2NjYzKV19KX0sNzc1OTooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXIoMjExOSk7ZS5leHBvcnRzPW5ldyBuKHtleHBsaWNpdDpbcig3MjEyKSxyKDg2MzYpLHIoMjM2OSldfSl9LDYxODQ6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9cig3NzU5KS5leHRlbmQoe2ltcGxpY2l0OltyKDkxOTgpLHIoNjE5OSkscig0NDY2KSxyKDE0NjEpXX0pfSw4MDgzOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig4NDMzKTtmdW5jdGlvbiBvKGUsdCxyLG4sbyl7dmFyIGk9IiIsYT0iIixzPU1hdGguZmxvb3Ioby8yKS0xO3JldHVybiBuLXQ+cyYmKHQ9bi1zKyhpPSIgLi4uICIpLmxlbmd0aCksci1uPnMmJihyPW4rcy0oYT0iIC4uLiIpLmxlbmd0aCkse3N0cjppK2Uuc2xpY2UodCxyKS5yZXBsYWNlKC9cdC9nLCLihpIiKSthLHBvczpuLXQraS5sZW5ndGh9fWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gbi5yZXBlYXQoIiAiLHQtZS5sZW5ndGgpK2V9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYodD1PYmplY3QuY3JlYXRlKHR8fG51bGwpLCFlLmJ1ZmZlcilyZXR1cm4gbnVsbDt0Lm1heExlbmd0aHx8KHQubWF4TGVuZ3RoPTc5KSwibnVtYmVyIiE9dHlwZW9mIHQuaW5kZW50JiYodC5pbmRlbnQ9MSksIm51bWJlciIhPXR5cGVvZiB0LmxpbmVzQmVmb3JlJiYodC5saW5lc0JlZm9yZT0zKSwibnVtYmVyIiE9dHlwZW9mIHQubGluZXNBZnRlciYmKHQubGluZXNBZnRlcj0yKTtmb3IodmFyIHIsYT0vXHI/XG58XHJ8XDAvZyxzPVswXSxsPVtdLGM9LTE7cj1hLmV4ZWMoZS5idWZmZXIpOylsLnB1c2goci5pbmRleCkscy5wdXNoKHIuaW5kZXgrclswXS5sZW5ndGgpLGUucG9zaXRpb248PXIuaW5kZXgmJmM8MCYmKGM9cy5sZW5ndGgtMik7YzwwJiYoYz1zLmxlbmd0aC0xKTt2YXIgdSxwLGQ9IiIsZj1NYXRoLm1pbihlLmxpbmUrdC5saW5lc0FmdGVyLGwubGVuZ3RoKS50b1N0cmluZygpLmxlbmd0aCxoPXQubWF4TGVuZ3RoLSh0LmluZGVudCtmKzMpO2Zvcih1PTE7dTw9dC5saW5lc0JlZm9yZSYmIShjLXU8MCk7dSsrKXA9byhlLmJ1ZmZlcixzW2MtdV0sbFtjLXVdLGUucG9zaXRpb24tKHNbY10tc1tjLXVdKSxoKSxkPW4ucmVwZWF0KCIgIix0LmluZGVudCkraSgoZS5saW5lLXUrMSkudG9TdHJpbmcoKSxmKSsiIHwgIitwLnN0cisiXG4iK2Q7Zm9yKHA9byhlLmJ1ZmZlcixzW2NdLGxbY10sZS5wb3NpdGlvbixoKSxkKz1uLnJlcGVhdCgiICIsdC5pbmRlbnQpK2koKGUubGluZSsxKS50b1N0cmluZygpLGYpKyIgfCAiK3Auc3RyKyJcbiIsZCs9bi5yZXBlYXQoIi0iLHQuaW5kZW50K2YrMytwLnBvcykrIl5cbiIsdT0xO3U8PXQubGluZXNBZnRlciYmIShjK3U+PWwubGVuZ3RoKTt1KyspcD1vKGUuYnVmZmVyLHNbYyt1XSxsW2MrdV0sZS5wb3NpdGlvbi0oc1tjXS1zW2MrdV0pLGgpLGQrPW4ucmVwZWF0KCIgIix0LmluZGVudCkraSgoZS5saW5lK3UrMSkudG9TdHJpbmcoKSxmKSsiIHwgIitwLnN0cisiXG4iO3JldHVybiBkLnJlcGxhY2UoL1xuJC8sIiIpfX0sNTM4ODooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXIoMTIzMSksbz1bImtpbmQiLCJtdWx0aSIsInJlc29sdmUiLCJjb25zdHJ1Y3QiLCJpbnN0YW5jZU9mIiwicHJlZGljYXRlIiwicmVwcmVzZW50IiwicmVwcmVzZW50TmFtZSIsImRlZmF1bHRTdHlsZSIsInN0eWxlQWxpYXNlcyJdLGk9WyJzY2FsYXIiLCJzZXF1ZW5jZSIsIm1hcHBpbmciXTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixhO2lmKHQ9dHx8e30sT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoLTE9PT1vLmluZGV4T2YodCkpdGhyb3cgbmV3IG4oJ1Vua25vd24gb3B0aW9uICInK3QrJyIgaXMgbWV0IGluIGRlZmluaXRpb24gb2YgIicrZSsnIiBZQU1MIHR5cGUuJyl9KSksdGhpcy5vcHRpb25zPXQsdGhpcy50YWc9ZSx0aGlzLmtpbmQ9dC5raW5kfHxudWxsLHRoaXMucmVzb2x2ZT10LnJlc29sdmV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LHRoaXMuY29uc3RydWN0PXQuY29uc3RydWN0fHxmdW5jdGlvbihlKXtyZXR1cm4gZX0sdGhpcy5pbnN0YW5jZU9mPXQuaW5zdGFuY2VPZnx8bnVsbCx0aGlzLnByZWRpY2F0ZT10LnByZWRpY2F0ZXx8bnVsbCx0aGlzLnJlcHJlc2VudD10LnJlcHJlc2VudHx8bnVsbCx0aGlzLnJlcHJlc2VudE5hbWU9dC5yZXByZXNlbnROYW1lfHxudWxsLHRoaXMuZGVmYXVsdFN0eWxlPXQuZGVmYXVsdFN0eWxlfHxudWxsLHRoaXMubXVsdGk9dC5tdWx0aXx8ITEsdGhpcy5zdHlsZUFsaWFzZXM9KHI9dC5zdHlsZUFsaWFzZXN8fG51bGwsYT17fSxudWxsIT09ciYmT2JqZWN0LmtleXMocikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cltlXS5mb3JFYWNoKChmdW5jdGlvbih0KXthW1N0cmluZyh0KV09ZX0pKX0pKSxhKSwtMT09PWkuaW5kZXhPZih0aGlzLmtpbmQpKXRocm93IG5ldyBuKCdVbmtub3duIGtpbmQgIicrdGhpcy5raW5kKyciIGlzIHNwZWNpZmllZCBmb3IgIicrZSsnIiBZQU1MIHR5cGUuJyl9fSw5MzQyOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig1Mzg4KSxvPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVxuXHIiO2UuZXhwb3J0cz1uZXcgbigidGFnOnlhbWwub3JnLDIwMDI6YmluYXJ5Iix7a2luZDoic2NhbGFyIixyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lKXJldHVybiExO3ZhciB0LHIsbj0wLGk9ZS5sZW5ndGgsYT1vO2ZvcihyPTA7cjxpO3IrKylpZighKCh0PWEuaW5kZXhPZihlLmNoYXJBdChyKSkpPjY0KSl7aWYodDwwKXJldHVybiExO24rPTZ9cmV0dXJuIG4lOD09MH0sY29uc3RydWN0OmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1lLnJlcGxhY2UoL1tcclxuPV0vZywiIiksaT1uLmxlbmd0aCxhPW8scz0wLGw9W107Zm9yKHQ9MDt0PGk7dCsrKXQlND09MCYmdCYmKGwucHVzaChzPj4xNiYyNTUpLGwucHVzaChzPj44JjI1NSksbC5wdXNoKDI1NSZzKSkscz1zPDw2fGEuaW5kZXhPZihuLmNoYXJBdCh0KSk7cmV0dXJuIDA9PShyPWklNCo2KT8obC5wdXNoKHM+PjE2JjI1NSksbC5wdXNoKHM+PjgmMjU1KSxsLnB1c2goMjU1JnMpKToxOD09PXI/KGwucHVzaChzPj4xMCYyNTUpLGwucHVzaChzPj4yJjI1NSkpOjEyPT09ciYmbC5wdXNoKHM+PjQmMjU1KSxuZXcgVWludDhBcnJheShsKX0scHJlZGljYXRlOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IFVpbnQ4QXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0scmVwcmVzZW50OmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj0iIixpPTAsYT1lLmxlbmd0aCxzPW87Zm9yKHQ9MDt0PGE7dCsrKXQlMz09MCYmdCYmKG4rPXNbaT4+MTgmNjNdLG4rPXNbaT4+MTImNjNdLG4rPXNbaT4+NiY2M10sbis9c1s2MyZpXSksaT0oaTw8OCkrZVt0XTtyZXR1cm4gMD09KHI9YSUzKT8obis9c1tpPj4xOCY2M10sbis9c1tpPj4xMiY2M10sbis9c1tpPj42JjYzXSxuKz1zWzYzJmldKToyPT09cj8obis9c1tpPj4xMCY2M10sbis9c1tpPj40JjYzXSxuKz1zW2k8PDImNjNdLG4rPXNbNjRdKToxPT09ciYmKG4rPXNbaT4+MiY2M10sbis9c1tpPDw0JjYzXSxuKz1zWzY0XSxuKz1zWzY0XSksbn19KX0sNjE5OTooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXIoNTM4OCk7ZS5leHBvcnRzPW5ldyBuKCJ0YWc6eWFtbC5vcmcsMjAwMjpib29sIix7a2luZDoic2NhbGFyIixyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lKXJldHVybiExO3ZhciB0PWUubGVuZ3RoO3JldHVybiA0PT09dCYmKCJ0cnVlIj09PWV8fCJUcnVlIj09PWV8fCJUUlVFIj09PWUpfHw1PT09dCYmKCJmYWxzZSI9PT1lfHwiRmFsc2UiPT09ZXx8IkZBTFNFIj09PWUpfSxjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSl7cmV0dXJuInRydWUiPT09ZXx8IlRydWUiPT09ZXx8IlRSVUUiPT09ZX0scHJlZGljYXRlOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEJvb2xlYW5dIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0scmVwcmVzZW50Ontsb3dlcmNhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InRydWUiOiJmYWxzZSJ9LHVwcGVyY2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8iVFJVRSI6IkZBTFNFIn0sY2FtZWxjYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyJUcnVlIjoiRmFsc2UifX0sZGVmYXVsdFN0eWxlOiJsb3dlcmNhc2UifSl9LDE0NjE6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDg0MzMpLG89cig1Mzg4KSxpPW5ldyBSZWdFeHAoIl4oPzpbLStdPyg/OlswLTldWzAtOV9dKikoPzpcXC5bMC05X10qKT8oPzpbZUVdWy0rXT9bMC05XSspP3xcXC5bMC05X10rKD86W2VFXVstK10/WzAtOV0rKT98Wy0rXT9cXC4oPzppbmZ8SW5mfElORil8XFwuKD86bmFufE5hTnxOQU4pKSQiKSxhPS9eWy0rXT9bMC05XStlLztlLmV4cG9ydHM9bmV3IG8oInRhZzp5YW1sLm9yZywyMDAyOmZsb2F0Iix7a2luZDoic2NhbGFyIixyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZSYmISghaS50ZXN0KGUpfHwiXyI9PT1lW2UubGVuZ3RoLTFdKX0sY29uc3RydWN0OmZ1bmN0aW9uKGUpe3ZhciB0LHI7cmV0dXJuIHI9Ii0iPT09KHQ9ZS5yZXBsYWNlKC9fL2csIiIpLnRvTG93ZXJDYXNlKCkpWzBdPy0xOjEsIistIi5pbmRleE9mKHRbMF0pPj0wJiYodD10LnNsaWNlKDEpKSwiLmluZiI9PT10PzE9PT1yP051bWJlci5QT1NJVElWRV9JTkZJTklUWTpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk6Ii5uYW4iPT09dD9OYU46cipwYXJzZUZsb2F0KHQsMTApfSxwcmVkaWNhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgTnVtYmVyXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkmJihlJTEhPTB8fG4uaXNOZWdhdGl2ZVplcm8oZSkpfSxyZXByZXNlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZihpc05hTihlKSlzd2l0Y2godCl7Y2FzZSJsb3dlcmNhc2UiOnJldHVybiIubmFuIjtjYXNlInVwcGVyY2FzZSI6cmV0dXJuIi5OQU4iO2Nhc2UiY2FtZWxjYXNlIjpyZXR1cm4iLk5hTiJ9ZWxzZSBpZihOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk9PT1lKXN3aXRjaCh0KXtjYXNlImxvd2VyY2FzZSI6cmV0dXJuIi5pbmYiO2Nhc2UidXBwZXJjYXNlIjpyZXR1cm4iLklORiI7Y2FzZSJjYW1lbGNhc2UiOnJldHVybiIuSW5mIn1lbHNlIGlmKE51bWJlci5ORUdBVElWRV9JTkZJTklUWT09PWUpc3dpdGNoKHQpe2Nhc2UibG93ZXJjYXNlIjpyZXR1cm4iLS5pbmYiO2Nhc2UidXBwZXJjYXNlIjpyZXR1cm4iLS5JTkYiO2Nhc2UiY2FtZWxjYXNlIjpyZXR1cm4iLS5JbmYifWVsc2UgaWYobi5pc05lZ2F0aXZlWmVybyhlKSlyZXR1cm4iLTAuMCI7cmV0dXJuIHI9ZS50b1N0cmluZygxMCksYS50ZXN0KHIpP3IucmVwbGFjZSgiZSIsIi5lIik6cn0sZGVmYXVsdFN0eWxlOiJsb3dlcmNhc2UifSl9LDQ0NjY6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDg0MzMpLG89cig1Mzg4KTtmdW5jdGlvbiBpKGUpe3JldHVybiA0ODw9ZSYmZTw9NTV9ZnVuY3Rpb24gYShlKXtyZXR1cm4gNDg8PWUmJmU8PTU3fWUuZXhwb3J0cz1uZXcgbygidGFnOnlhbWwub3JnLDIwMDI6aW50Iix7a2luZDoic2NhbGFyIixyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lKXJldHVybiExO3ZhciB0LHIsbj1lLmxlbmd0aCxvPTAscz0hMTtpZighbilyZXR1cm4hMTtpZigiLSIhPT0odD1lW29dKSYmIisiIT09dHx8KHQ9ZVsrK29dKSwiMCI9PT10KXtpZihvKzE9PT1uKXJldHVybiEwO2lmKCJiIj09PSh0PWVbKytvXSkpe2ZvcihvKys7bzxuO28rKylpZigiXyIhPT0odD1lW29dKSl7aWYoIjAiIT09dCYmIjEiIT09dClyZXR1cm4hMTtzPSEwfXJldHVybiBzJiYiXyIhPT10fWlmKCJ4Ij09PXQpe2ZvcihvKys7bzxuO28rKylpZigiXyIhPT0odD1lW29dKSl7aWYoISg0ODw9KHI9ZS5jaGFyQ29kZUF0KG8pKSYmcjw9NTd8fDY1PD1yJiZyPD03MHx8OTc8PXImJnI8PTEwMikpcmV0dXJuITE7cz0hMH1yZXR1cm4gcyYmIl8iIT09dH1pZigibyI9PT10KXtmb3IobysrO288bjtvKyspaWYoIl8iIT09KHQ9ZVtvXSkpe2lmKCFpKGUuY2hhckNvZGVBdChvKSkpcmV0dXJuITE7cz0hMH1yZXR1cm4gcyYmIl8iIT09dH19aWYoIl8iPT09dClyZXR1cm4hMTtmb3IoO288bjtvKyspaWYoIl8iIT09KHQ9ZVtvXSkpe2lmKCFhKGUuY2hhckNvZGVBdChvKSkpcmV0dXJuITE7cz0hMH1yZXR1cm4hKCFzfHwiXyI9PT10KX0sY29uc3RydWN0OmZ1bmN0aW9uKGUpe3ZhciB0LHI9ZSxuPTE7aWYoLTEhPT1yLmluZGV4T2YoIl8iKSYmKHI9ci5yZXBsYWNlKC9fL2csIiIpKSwiLSIhPT0odD1yWzBdKSYmIisiIT09dHx8KCItIj09PXQmJihuPS0xKSx0PShyPXIuc2xpY2UoMSkpWzBdKSwiMCI9PT1yKXJldHVybiAwO2lmKCIwIj09PXQpe2lmKCJiIj09PXJbMV0pcmV0dXJuIG4qcGFyc2VJbnQoci5zbGljZSgyKSwyKTtpZigieCI9PT1yWzFdKXJldHVybiBuKnBhcnNlSW50KHIuc2xpY2UoMiksMTYpO2lmKCJvIj09PXJbMV0pcmV0dXJuIG4qcGFyc2VJbnQoci5zbGljZSgyKSw4KX1yZXR1cm4gbipwYXJzZUludChyLDEwKX0scHJlZGljYXRlOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpJiZlJTE9PTAmJiFuLmlzTmVnYXRpdmVaZXJvKGUpfSxyZXByZXNlbnQ6e2JpbmFyeTpmdW5jdGlvbihlKXtyZXR1cm4gZT49MD8iMGIiK2UudG9TdHJpbmcoMik6Ii0wYiIrZS50b1N0cmluZygyKS5zbGljZSgxKX0sb2N0YWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTA/IjBvIitlLnRvU3RyaW5nKDgpOiItMG8iK2UudG9TdHJpbmcoOCkuc2xpY2UoMSl9LGRlY2ltYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9TdHJpbmcoMTApfSxoZXhhZGVjaW1hbDpmdW5jdGlvbihlKXtyZXR1cm4gZT49MD8iMHgiK2UudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk6Ii0weCIrZS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5zbGljZSgxKX19LGRlZmF1bHRTdHlsZToiZGVjaW1hbCIsc3R5bGVBbGlhc2VzOntiaW5hcnk6WzIsImJpbiJdLG9jdGFsOls4LCJvY3QiXSxkZWNpbWFsOlsxMCwiZGVjIl0saGV4YWRlY2ltYWw6WzE2LCJoZXgiXX19KX0sMjM2OTooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXIoNTM4OCk7ZS5leHBvcnRzPW5ldyBuKCJ0YWc6eWFtbC5vcmcsMjAwMjptYXAiLHtraW5kOiJtYXBwaW5nIixjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lP2U6e319fSl9LDE4NTE6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDUzODgpO2UuZXhwb3J0cz1uZXcgbigidGFnOnlhbWwub3JnLDIwMDI6bWVyZ2UiLHtraW5kOiJzY2FsYXIiLHJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIjw8Ij09PWV8fG51bGw9PT1lfX0pfSw5MTk4OihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig1Mzg4KTtlLmV4cG9ydHM9bmV3IG4oInRhZzp5YW1sLm9yZywyMDAyOm51bGwiLHtraW5kOiJzY2FsYXIiLHJlc29sdmU6ZnVuY3Rpb24oZSl7aWYobnVsbD09PWUpcmV0dXJuITA7dmFyIHQ9ZS5sZW5ndGg7cmV0dXJuIDE9PT10JiYifiI9PT1lfHw0PT09dCYmKCJudWxsIj09PWV8fCJOdWxsIj09PWV8fCJOVUxMIj09PWUpfSxjb25zdHJ1Y3Q6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0scHJlZGljYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZX0scmVwcmVzZW50OntjYW5vbmljYWw6ZnVuY3Rpb24oKXtyZXR1cm4ifiJ9LGxvd2VyY2FzZTpmdW5jdGlvbigpe3JldHVybiJudWxsIn0sdXBwZXJjYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIk5VTEwifSxjYW1lbGNhc2U6ZnVuY3Rpb24oKXtyZXR1cm4iTnVsbCJ9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIiJ9fSxkZWZhdWx0U3R5bGU6Imxvd2VyY2FzZSJ9KX0sNjk0NjooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXIoNTM4OCksbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztlLmV4cG9ydHM9bmV3IG4oInRhZzp5YW1sLm9yZywyMDAyOm9tYXAiLHtraW5kOiJzZXF1ZW5jZSIscmVzb2x2ZTpmdW5jdGlvbihlKXtpZihudWxsPT09ZSlyZXR1cm4hMDt2YXIgdCxyLG4sYSxzLGw9W10sYz1lO2Zvcih0PTAscj1jLmxlbmd0aDt0PHI7dCs9MSl7aWYobj1jW3RdLHM9ITEsIltvYmplY3QgT2JqZWN0XSIhPT1pLmNhbGwobikpcmV0dXJuITE7Zm9yKGEgaW4gbilpZihvLmNhbGwobixhKSl7aWYocylyZXR1cm4hMTtzPSEwfWlmKCFzKXJldHVybiExO2lmKC0xIT09bC5pbmRleE9mKGEpKXJldHVybiExO2wucHVzaChhKX1yZXR1cm4hMH0sY29uc3RydWN0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZT9lOltdfX0pfSw2OTQyOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig1Mzg4KSxvPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZS5leHBvcnRzPW5ldyBuKCJ0YWc6eWFtbC5vcmcsMjAwMjpwYWlycyIse2tpbmQ6InNlcXVlbmNlIixyZXNvbHZlOmZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lKXJldHVybiEwO3ZhciB0LHIsbixpLGEscz1lO2ZvcihhPW5ldyBBcnJheShzLmxlbmd0aCksdD0wLHI9cy5sZW5ndGg7dDxyO3QrPTEpe2lmKG49c1t0XSwiW29iamVjdCBPYmplY3RdIiE9PW8uY2FsbChuKSlyZXR1cm4hMTtpZigxIT09KGk9T2JqZWN0LmtleXMobikpLmxlbmd0aClyZXR1cm4hMTthW3RdPVtpWzBdLG5baVswXV1dfXJldHVybiEwfSxjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSl7aWYobnVsbD09PWUpcmV0dXJuW107dmFyIHQscixuLG8saSxhPWU7Zm9yKGk9bmV3IEFycmF5KGEubGVuZ3RoKSx0PTAscj1hLmxlbmd0aDt0PHI7dCs9MSluPWFbdF0sbz1PYmplY3Qua2V5cyhuKSxpW3RdPVtvWzBdLG5bb1swXV1dO3JldHVybiBpfX0pfSw4NjM2OihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49cig1Mzg4KTtlLmV4cG9ydHM9bmV3IG4oInRhZzp5YW1sLm9yZywyMDAyOnNlcSIse2tpbmQ6InNlcXVlbmNlIixjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lP2U6W119fSl9LDY2NjM6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDUzODgpLG89T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtlLmV4cG9ydHM9bmV3IG4oInRhZzp5YW1sLm9yZywyMDAyOnNldCIse2tpbmQ6Im1hcHBpbmciLHJlc29sdmU6ZnVuY3Rpb24oZSl7aWYobnVsbD09PWUpcmV0dXJuITA7dmFyIHQscj1lO2Zvcih0IGluIHIpaWYoby5jYWxsKHIsdCkmJm51bGwhPT1yW3RdKXJldHVybiExO3JldHVybiEwfSxjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lP2U6e319fSl9LDcyMTI6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDUzODgpO2UuZXhwb3J0cz1uZXcgbigidGFnOnlhbWwub3JnLDIwMDI6c3RyIix7a2luZDoic2NhbGFyIixjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lP2U6IiJ9fSl9LDEyNzooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXIoNTM4OCksbz1uZXcgUmVnRXhwKCJeKFswLTldWzAtOV1bMC05XVswLTldKS0oWzAtOV1bMC05XSktKFswLTldWzAtOV0pJCIpLGk9bmV3IFJlZ0V4cCgiXihbMC05XVswLTldWzAtOV1bMC05XSktKFswLTldWzAtOV0/KS0oWzAtOV1bMC05XT8pKD86W1R0XXxbIFxcdF0rKShbMC05XVswLTldPyk6KFswLTldWzAtOV0pOihbMC05XVswLTldKSg/OlxcLihbMC05XSopKT8oPzpbIFxcdF0qKFp8KFstK10pKFswLTldWzAtOV0/KSg/OjooWzAtOV1bMC05XSkpPykpPyQiKTtlLmV4cG9ydHM9bmV3IG4oInRhZzp5YW1sLm9yZywyMDAyOnRpbWVzdGFtcCIse2tpbmQ6InNjYWxhciIscmVzb2x2ZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJihudWxsIT09by5leGVjKGUpfHxudWxsIT09aS5leGVjKGUpKX0sY29uc3RydWN0OmZ1bmN0aW9uKGUpe3ZhciB0LHIsbixhLHMsbCxjLHUscD0wLGQ9bnVsbDtpZihudWxsPT09KHQ9by5leGVjKGUpKSYmKHQ9aS5leGVjKGUpKSxudWxsPT09dCl0aHJvdyBuZXcgRXJyb3IoIkRhdGUgcmVzb2x2ZSBlcnJvciIpO2lmKHI9K3RbMV0sbj0rdFsyXS0xLGE9K3RbM10sIXRbNF0pcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHIsbixhKSk7aWYocz0rdFs0XSxsPSt0WzVdLGM9K3RbNl0sdFs3XSl7Zm9yKHA9dFs3XS5zbGljZSgwLDMpO3AubGVuZ3RoPDM7KXArPSIwIjtwPStwfXJldHVybiB0WzldJiYoZD02ZTQqKDYwKit0WzEwXSsgKyh0WzExXXx8MCkpLCItIj09PXRbOV0mJihkPS1kKSksdT1uZXcgRGF0ZShEYXRlLlVUQyhyLG4sYSxzLGwsYyxwKSksZCYmdS5zZXRUaW1lKHUuZ2V0VGltZSgpLWQpLHV9LGluc3RhbmNlT2Y6RGF0ZSxyZXByZXNlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9JU09TdHJpbmcoKX19KX0sODg3OmZ1bmN0aW9uKGUsdCl7dmFyIHIsbjt2b2lkIDA9PT0obj0iZnVuY3Rpb24iPT10eXBlb2Yocj1mdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxyPSJib29sZWFuIj09dHlwZW9mKG5ldyBSZWdFeHApLnN0aWNreTtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiYiW29iamVjdCBSZWdFeHBdIj09PXQuY2FsbChlKX1mdW5jdGlvbiBvKGUpe3JldHVybiBlJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFuKGUpJiYhQXJyYXkuaXNBcnJheShlKX1mdW5jdGlvbiBpKGUpe3JldHVybiIoIitlKyIpIn1mdW5jdGlvbiBhKGUpe3JldHVybiBlLmxlbmd0aD8iKD86IitlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIig/OiIrZSsiKSJ9KSkuam9pbigifCIpKyIpIjoiKD8hKSJ9ZnVuY3Rpb24gcyhlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIig/OiIrKGUucmVwbGFjZSgvWy1cL1xcXiQqKz8uKCl8W1xde31dL2csIlxcJCYiKSsiKSIpO2lmKG4oZSkpe2lmKGUuaWdub3JlQ2FzZSl0aHJvdyBuZXcgRXJyb3IoIlJlZ0V4cCAvaSBmbGFnIG5vdCBhbGxvd2VkIik7aWYoZS5nbG9iYWwpdGhyb3cgbmV3IEVycm9yKCJSZWdFeHAgL2cgZmxhZyBpcyBpbXBsaWVkIik7aWYoZS5zdGlja3kpdGhyb3cgbmV3IEVycm9yKCJSZWdFeHAgL3kgZmxhZyBpcyBpbXBsaWVkIik7aWYoZS5tdWx0aWxpbmUpdGhyb3cgbmV3IEVycm9yKCJSZWdFeHAgL20gZmxhZyBpcyBpbXBsaWVkIik7cmV0dXJuIGUuc291cmNlfXRocm93IG5ldyBFcnJvcigiTm90IGEgcGF0dGVybjogIitlKX1mdW5jdGlvbiBsKHQscil7aWYobyhyKXx8KHI9e21hdGNoOnJ9KSxyLmluY2x1ZGUpdGhyb3cgbmV3IEVycm9yKCJNYXRjaGluZyBydWxlcyBjYW5ub3QgYWxzbyBpbmNsdWRlIHN0YXRlcyIpO3ZhciBpPXtkZWZhdWx0VHlwZTp0LGxpbmVCcmVha3M6ISFyLmVycm9yfHwhIXIuZmFsbGJhY2sscG9wOiExLG5leHQ6bnVsbCxwdXNoOm51bGwsZXJyb3I6ITEsZmFsbGJhY2s6ITEsdmFsdWU6bnVsbCx0eXBlOm51bGwsc2hvdWxkVGhyb3c6ITF9O2Zvcih2YXIgYSBpbiByKWUuY2FsbChyLGEpJiYoaVthXT1yW2FdKTtpZigic3RyaW5nIj09dHlwZW9mIGkudHlwZSYmdCE9PWkudHlwZSl0aHJvdyBuZXcgRXJyb3IoIlR5cGUgdHJhbnNmb3JtIGNhbm5vdCBiZSBhIHN0cmluZyAodHlwZSAnIitpLnR5cGUrIicgZm9yIHRva2VuICciK3QrIicpIik7dmFyIHM9aS5tYXRjaDtyZXR1cm4gaS5tYXRjaD1BcnJheS5pc0FycmF5KHMpP3M6cz9bc106W10saS5tYXRjaC5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBuKGUpJiZuKHQpPzA6bih0KT8tMTpuKGUpPzE6dC5sZW5ndGgtZS5sZW5ndGh9KSksaX1mdW5jdGlvbiBjKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2Z1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBuPWVbcl07aWYobi5pbmNsdWRlKWZvcih2YXIgbz1bXS5jb25jYXQobi5pbmNsdWRlKSxpPTA7aTxvLmxlbmd0aDtpKyspdC5wdXNoKHtpbmNsdWRlOm9baV19KTtlbHNle2lmKCFuLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJSdWxlIGhhcyBubyB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KG4pKTt0LnB1c2gobChuLnR5cGUsbikpfX1yZXR1cm4gdH0oZSk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLHI9W10sbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dLGE9ZVtpXSxzPVtdLmNvbmNhdChhKTtpZigiaW5jbHVkZSIhPT1pKXt2YXIgYz1bXTtzLmZvckVhY2goKGZ1bmN0aW9uKGUpe28oZSk/KGMubGVuZ3RoJiZyLnB1c2gobChpLGMpKSxyLnB1c2gobChpLGUpKSxjPVtdKTpjLnB1c2goZSl9KSksYy5sZW5ndGgmJnIucHVzaChsKGksYykpfWVsc2UgZm9yKHZhciB1PTA7dTxzLmxlbmd0aDt1Kyspci5wdXNoKHtpbmNsdWRlOnNbdV19KX1yZXR1cm4gcn0oZSl9dmFyIHU9bCgiZXJyb3IiLHtsaW5lQnJlYWtzOiEwLHNob3VsZFRocm93OiEwfSk7ZnVuY3Rpb24gcChlLHQpe2Zvcih2YXIgbz1udWxsLGw9T2JqZWN0LmNyZWF0ZShudWxsKSxjPSEwLHA9bnVsbCxkPVtdLGY9W10saD0wO2g8ZS5sZW5ndGg7aCsrKWVbaF0uZmFsbGJhY2smJihjPSExKTtmb3IoaD0wO2g8ZS5sZW5ndGg7aCsrKXt2YXIgZz1lW2hdO2lmKGcuaW5jbHVkZSl0aHJvdyBuZXcgRXJyb3IoIkluaGVyaXRhbmNlIGlzIG5vdCBhbGxvd2VkIGluIHN0YXRlbGVzcyBsZXhlcnMiKTtpZihnLmVycm9yfHxnLmZhbGxiYWNrKXtpZihvKXRocm93IWcuZmFsbGJhY2s9PSFvLmZhbGxiYWNrP25ldyBFcnJvcigiTXVsdGlwbGUgIisoZy5mYWxsYmFjaz8iZmFsbGJhY2siOiJlcnJvciIpKyIgcnVsZXMgbm90IGFsbG93ZWQgKGZvciB0b2tlbiAnIitnLmRlZmF1bHRUeXBlKyInKSIpOm5ldyBFcnJvcigiZmFsbGJhY2sgYW5kIGVycm9yIGFyZSBtdXR1YWxseSBleGNsdXNpdmUgKGZvciB0b2tlbiAnIitnLmRlZmF1bHRUeXBlKyInKSIpO289Z312YXIgeT1nLm1hdGNoLnNsaWNlKCk7aWYoYylmb3IoO3kubGVuZ3RoJiYic3RyaW5nIj09dHlwZW9mIHlbMF0mJjE9PT15WzBdLmxlbmd0aDspbFt5LnNoaWZ0KCkuY2hhckNvZGVBdCgwKV09ZztpZihnLnBvcHx8Zy5wdXNofHxnLm5leHQpe2lmKCF0KXRocm93IG5ldyBFcnJvcigiU3RhdGUtc3dpdGNoaW5nIG9wdGlvbnMgYXJlIG5vdCBhbGxvd2VkIGluIHN0YXRlbGVzcyBsZXhlcnMgKGZvciB0b2tlbiAnIitnLmRlZmF1bHRUeXBlKyInKSIpO2lmKGcuZmFsbGJhY2spdGhyb3cgbmV3IEVycm9yKCJTdGF0ZS1zd2l0Y2hpbmcgb3B0aW9ucyBhcmUgbm90IGFsbG93ZWQgb24gZmFsbGJhY2sgdG9rZW5zIChmb3IgdG9rZW4gJyIrZy5kZWZhdWx0VHlwZSsiJykiKX1pZigwIT09eS5sZW5ndGgpe2M9ITEsZC5wdXNoKGcpO2Zvcih2YXIgbT0wO208eS5sZW5ndGg7bSsrKXt2YXIgYj15W21dO2lmKG4oYikpaWYobnVsbD09PXApcD1iLnVuaWNvZGU7ZWxzZSBpZihwIT09Yi51bmljb2RlJiYhMT09PWcuZmFsbGJhY2spdGhyb3cgbmV3IEVycm9yKCJJZiBvbmUgcnVsZSBpcyAvdSB0aGVuIGFsbCBtdXN0IGJlIil9dmFyIE89YSh5Lm1hcChzKSksVD1uZXcgUmVnRXhwKE8pO2lmKFQudGVzdCgiIikpdGhyb3cgbmV3IEVycm9yKCJSZWdFeHAgbWF0Y2hlcyBlbXB0eSBzdHJpbmc6ICIrVCk7aWYobmV3IFJlZ0V4cCgifCIrTykuZXhlYygiIikubGVuZ3RoLTE+MCl0aHJvdyBuZXcgRXJyb3IoIlJlZ0V4cCBoYXMgY2FwdHVyZSBncm91cHM6ICIrVCsiXG5Vc2UgKD86IOKApiApIGluc3RlYWQiKTtpZighZy5saW5lQnJlYWtzJiZULnRlc3QoIlxuIikpdGhyb3cgbmV3IEVycm9yKCJSdWxlIHNob3VsZCBkZWNsYXJlIGxpbmVCcmVha3M6ICIrVCk7Zi5wdXNoKGkoTykpfX12YXIgdj1vJiZvLmZhbGxiYWNrLHc9ciYmIXY/InltIjoiZ20iLGo9cnx8dj8iIjoifCI7cmV0dXJuITA9PT1wJiYodys9InUiKSx7cmVnZXhwOm5ldyBSZWdFeHAoYShmKStqLHcpLGdyb3VwczpkLGZhc3Q6bCxlcnJvcjpvfHx1fX1mdW5jdGlvbiBkKGUsdCxyKXt2YXIgbj1lJiYoZS5wdXNofHxlLm5leHQpO2lmKG4mJiFyW25dKXRocm93IG5ldyBFcnJvcigiTWlzc2luZyBzdGF0ZSAnIituKyInIChpbiB0b2tlbiAnIitlLmRlZmF1bHRUeXBlKyInIG9mIHN0YXRlICciK3QrIicpIik7aWYoZSYmZS5wb3AmJjEhPStlLnBvcCl0aHJvdyBuZXcgRXJyb3IoInBvcCBtdXN0IGJlIDEgKGluIHRva2VuICciK2UuZGVmYXVsdFR5cGUrIicgb2Ygc3RhdGUgJyIrdCsiJykiKX12YXIgZj1mdW5jdGlvbihlLHQpe3RoaXMuc3RhcnRTdGF0ZT10LHRoaXMuc3RhdGVzPWUsdGhpcy5idWZmZXI9IiIsdGhpcy5zdGFjaz1bXSx0aGlzLnJlc2V0KCl9O2YucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYnVmZmVyPWV8fCIiLHRoaXMuaW5kZXg9MCx0aGlzLmxpbmU9dD90LmxpbmU6MSx0aGlzLmNvbD10P3QuY29sOjEsdGhpcy5xdWV1ZWRUb2tlbj10P3QucXVldWVkVG9rZW46bnVsbCx0aGlzLnF1ZXVlZFRocm93PXQ/dC5xdWV1ZWRUaHJvdzpudWxsLHRoaXMuc2V0U3RhdGUodD90LnN0YXRlOnRoaXMuc3RhcnRTdGF0ZSksdGhpcy5zdGFjaz10JiZ0LnN0YWNrP3Quc3RhY2suc2xpY2UoKTpbXSx0aGlzfSxmLnByb3RvdHlwZS5zYXZlPWZ1bmN0aW9uKCl7cmV0dXJue2xpbmU6dGhpcy5saW5lLGNvbDp0aGlzLmNvbCxzdGF0ZTp0aGlzLnN0YXRlLHN0YWNrOnRoaXMuc3RhY2suc2xpY2UoKSxxdWV1ZWRUb2tlbjp0aGlzLnF1ZXVlZFRva2VuLHF1ZXVlZFRocm93OnRoaXMucXVldWVkVGhyb3d9fSxmLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihlKXtpZihlJiZ0aGlzLnN0YXRlIT09ZSl7dGhpcy5zdGF0ZT1lO3ZhciB0PXRoaXMuc3RhdGVzW2VdO3RoaXMuZ3JvdXBzPXQuZ3JvdXBzLHRoaXMuZXJyb3I9dC5lcnJvcix0aGlzLnJlPXQucmVnZXhwLHRoaXMuZmFzdD10LmZhc3R9fSxmLnByb3RvdHlwZS5wb3BTdGF0ZT1mdW5jdGlvbigpe3RoaXMuc2V0U3RhdGUodGhpcy5zdGFjay5wb3AoKSl9LGYucHJvdG90eXBlLnB1c2hTdGF0ZT1mdW5jdGlvbihlKXt0aGlzLnN0YWNrLnB1c2godGhpcy5zdGF0ZSksdGhpcy5zZXRTdGF0ZShlKX07dmFyIGg9cj9mdW5jdGlvbihlLHQpe3JldHVybiBlLmV4ZWModCl9OmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leGVjKHQpO3JldHVybiAwPT09clswXS5sZW5ndGg/bnVsbDpyfTtmdW5jdGlvbiBnKCl7cmV0dXJuIHRoaXMudmFsdWV9aWYoZi5wcm90b3R5cGUuX2dldEdyb3VwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmdyb3Vwcy5sZW5ndGgscj0wO3I8dDtyKyspaWYodm9pZCAwIT09ZVtyKzFdKXJldHVybiB0aGlzLmdyb3Vwc1tyXTt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRva2VuIHR5cGUgZm9yIG1hdGNoZWQgdGV4dCIpfSxmLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pbmRleDtpZih0aGlzLnF1ZXVlZEdyb3VwKXt2YXIgdD10aGlzLl90b2tlbih0aGlzLnF1ZXVlZEdyb3VwLHRoaXMucXVldWVkVGV4dCxlKTtyZXR1cm4gdGhpcy5xdWV1ZWRHcm91cD1udWxsLHRoaXMucXVldWVkVGV4dD0iIix0fXZhciByPXRoaXMuYnVmZmVyO2lmKGUhPT1yLmxlbmd0aCl7aWYoYT10aGlzLmZhc3Rbci5jaGFyQ29kZUF0KGUpXSlyZXR1cm4gdGhpcy5fdG9rZW4oYSxyLmNoYXJBdChlKSxlKTt2YXIgbj10aGlzLnJlO24ubGFzdEluZGV4PWU7dmFyIG89aChuLHIpLGk9dGhpcy5lcnJvcjtpZihudWxsPT1vKXJldHVybiB0aGlzLl90b2tlbihpLHIuc2xpY2UoZSxyLmxlbmd0aCksZSk7dmFyIGE9dGhpcy5fZ2V0R3JvdXAobykscz1vWzBdO3JldHVybiBpLmZhbGxiYWNrJiZvLmluZGV4IT09ZT8odGhpcy5xdWV1ZWRHcm91cD1hLHRoaXMucXVldWVkVGV4dD1zLHRoaXMuX3Rva2VuKGksci5zbGljZShlLG8uaW5kZXgpLGUpKTp0aGlzLl90b2tlbihhLHMsZSl9fSxmLnByb3RvdHlwZS5fdG9rZW49ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTA7aWYoZS5saW5lQnJlYWtzKXt2YXIgbz0vXG4vZyxpPTE7aWYoIlxuIj09PXQpbj0xO2Vsc2UgZm9yKDtvLmV4ZWModCk7KW4rKyxpPW8ubGFzdEluZGV4fXZhciBhPXt0eXBlOiJmdW5jdGlvbiI9PXR5cGVvZiBlLnR5cGUmJmUudHlwZSh0KXx8ZS5kZWZhdWx0VHlwZSx2YWx1ZToiZnVuY3Rpb24iPT10eXBlb2YgZS52YWx1ZT9lLnZhbHVlKHQpOnQsdGV4dDp0LHRvU3RyaW5nOmcsb2Zmc2V0OnIsbGluZUJyZWFrczpuLGxpbmU6dGhpcy5saW5lLGNvbDp0aGlzLmNvbH0scz10Lmxlbmd0aDtpZih0aGlzLmluZGV4Kz1zLHRoaXMubGluZSs9biwwIT09bj90aGlzLmNvbD1zLWkrMTp0aGlzLmNvbCs9cyxlLnNob3VsZFRocm93KXRocm93IG5ldyBFcnJvcih0aGlzLmZvcm1hdEVycm9yKGEsImludmFsaWQgc3ludGF4IikpO3JldHVybiBlLnBvcD90aGlzLnBvcFN0YXRlKCk6ZS5wdXNoP3RoaXMucHVzaFN0YXRlKGUucHVzaCk6ZS5uZXh0JiZ0aGlzLnNldFN0YXRlKGUubmV4dCksYX0sInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcil7dmFyIHk9ZnVuY3Rpb24oZSl7dGhpcy5sZXhlcj1lfTt5LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZXhlci5uZXh0KCk7cmV0dXJue3ZhbHVlOmUsZG9uZTohZX19LHkucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZi5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiBuZXcgeSh0aGlzKX19cmV0dXJuIGYucHJvdG90eXBlLmZvcm1hdEVycm9yPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSl7dmFyIHI9dGhpcy5idWZmZXIuc2xpY2UodGhpcy5pbmRleCk7ZT17dGV4dDpyLG9mZnNldDp0aGlzLmluZGV4LGxpbmVCcmVha3M6LTE9PT1yLmluZGV4T2YoIlxuIik/MDoxLGxpbmU6dGhpcy5saW5lLGNvbDp0aGlzLmNvbH19dmFyIG49TWF0aC5tYXgoMCxlLm9mZnNldC1lLmNvbCsxKSxvPWUubGluZUJyZWFrcz9lLnRleHQuaW5kZXhPZigiXG4iKTplLnRleHQubGVuZ3RoLGk9dGhpcy5idWZmZXIuc3Vic3RyaW5nKG4sZS5vZmZzZXQrbyk7cmV0dXJuIHQrPSIgYXQgbGluZSAiK2UubGluZSsiIGNvbCAiK2UuY29sKyI6XG5cbiIsKHQrPSIgICIraSsiXG4iKSsiICAiK0FycmF5KGUuY29sKS5qb2luKCIgIikrIl4ifSxmLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLnN0YXRlcyx0aGlzLnN0YXRlKX0sZi5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwfSx7Y29tcGlsZTpmdW5jdGlvbihlKXt2YXIgdD1wKGMoZSkpO3JldHVybiBuZXcgZih7c3RhcnQ6dH0sInN0YXJ0Iil9LHN0YXRlczpmdW5jdGlvbihlLHQpe3ZhciByPWUuJGFsbD9jKGUuJGFsbCk6W107ZGVsZXRlIGUuJGFsbDt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKTt0fHwodD1uWzBdKTtmb3IodmFyIG89T2JqZWN0LmNyZWF0ZShudWxsKSxpPTA7aTxuLmxlbmd0aDtpKyspb1tPPW5baV1dPWMoZVtPXSkuY29uY2F0KHIpO2ZvcihpPTA7aTxuLmxlbmd0aDtpKyspZm9yKHZhciBhPW9bTz1uW2ldXSxzPU9iamVjdC5jcmVhdGUobnVsbCksbD0wO2w8YS5sZW5ndGg7bCsrKXt2YXIgdT1hW2xdO2lmKHUuaW5jbHVkZSl7dmFyIGg9W2wsMV07aWYodS5pbmNsdWRlIT09TyYmIXNbdS5pbmNsdWRlXSl7c1t1LmluY2x1ZGVdPSEwO3ZhciBnPW9bdS5pbmNsdWRlXTtpZighZyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBpbmNsdWRlIG5vbmV4aXN0ZW50IHN0YXRlICciK3UuaW5jbHVkZSsiJyAoaW4gc3RhdGUgJyIrTysiJykiKTtmb3IodmFyIHk9MDt5PGcubGVuZ3RoO3krKyl7dmFyIG09Z1t5XTstMT09PWEuaW5kZXhPZihtKSYmaC5wdXNoKG0pfX1hLnNwbGljZS5hcHBseShhLGgpLGwtLX19dmFyIGI9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IoaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgTztiW089bltpXV09cChvW09dLCEwKX1mb3IoaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgVD1uW2ldLHY9YltUXSx3PXYuZ3JvdXBzO2ZvcihsPTA7bDx3Lmxlbmd0aDtsKyspZCh3W2xdLFQsYik7dmFyIGo9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModi5mYXN0KTtmb3IobD0wO2w8ai5sZW5ndGg7bCsrKWQodi5mYXN0W2pbbF1dLFQsYil9cmV0dXJuIG5ldyBmKGIsdCl9LGVycm9yOk9iamVjdC5mcmVlemUoe2Vycm9yOiEwfSksZmFsbGJhY2s6T2JqZWN0LmZyZWV6ZSh7ZmFsbGJhY2s6ITB9KSxrZXl3b3JkczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKSxyPU9iamVjdC5jcmVhdGUobnVsbCksbj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb10sYT1lW2ldOyhBcnJheS5pc0FycmF5KGEpP2E6W2FdKS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZigocltlLmxlbmd0aF09cltlLmxlbmd0aF18fFtdKS5wdXNoKGUpLCJzdHJpbmciIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoImtleXdvcmQgbXVzdCBiZSBzdHJpbmcgKGluIGtleXdvcmQgJyIraSsiJykiKTt0W2VdPWl9KSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9dmFyIGw9IiI7Zm9yKHZhciBjIGluIGwrPSJzd2l0Y2ggKHZhbHVlLmxlbmd0aCkge1xuIixyKXt2YXIgdT1yW2NdO2wrPSJjYXNlICIrYysiOlxuIixsKz0ic3dpdGNoICh2YWx1ZSkge1xuIix1LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPXRbZV07bCs9ImNhc2UgIitzKGUpKyI6IHJldHVybiAiK3MocikrIlxuIn0pKSxsKz0ifVxuIn1yZXR1cm4gbCs9In1cbiIsRnVuY3Rpb24oInZhbHVlIixsKX19fSk/ci5hcHBseSh0LFtdKTpyKXx8KGUuZXhwb3J0cz1uKX0sMjU0OTooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1yKDkxMDApfSw0NTY1OihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPXIoNDM5NCl9LDUwOTU6ZT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9bjt2YXIgdCxyPS9cL3xcLi87ZnVuY3Rpb24gbihlLHQpe3IudGVzdChlKXx8KGU9Imdvb2dsZS9wcm90b2J1Zi8iK2UrIi5wcm90byIsdD17bmVzdGVkOntnb29nbGU6e25lc3RlZDp7cHJvdG9idWY6e25lc3RlZDp0fX19fX0pLG5bZV09dH1uKCJhbnkiLHtBbnk6e2ZpZWxkczp7dHlwZV91cmw6e3R5cGU6InN0cmluZyIsaWQ6MX0sdmFsdWU6e3R5cGU6ImJ5dGVzIixpZDoyfX19fSksbigiZHVyYXRpb24iLHtEdXJhdGlvbjp0PXtmaWVsZHM6e3NlY29uZHM6e3R5cGU6ImludDY0IixpZDoxfSxuYW5vczp7dHlwZToiaW50MzIiLGlkOjJ9fX19KSxuKCJ0aW1lc3RhbXAiLHtUaW1lc3RhbXA6dH0pLG4oImVtcHR5Iix7RW1wdHk6e2ZpZWxkczp7fX19KSxuKCJzdHJ1Y3QiLHtTdHJ1Y3Q6e2ZpZWxkczp7ZmllbGRzOntrZXlUeXBlOiJzdHJpbmciLHR5cGU6IlZhbHVlIixpZDoxfX19LFZhbHVlOntvbmVvZnM6e2tpbmQ6e29uZW9mOlsibnVsbFZhbHVlIiwibnVtYmVyVmFsdWUiLCJzdHJpbmdWYWx1ZSIsImJvb2xWYWx1ZSIsInN0cnVjdFZhbHVlIiwibGlzdFZhbHVlIl19fSxmaWVsZHM6e251bGxWYWx1ZTp7dHlwZToiTnVsbFZhbHVlIixpZDoxfSxudW1iZXJWYWx1ZTp7dHlwZToiZG91YmxlIixpZDoyfSxzdHJpbmdWYWx1ZTp7dHlwZToic3RyaW5nIixpZDozfSxib29sVmFsdWU6e3R5cGU6ImJvb2wiLGlkOjR9LHN0cnVjdFZhbHVlOnt0eXBlOiJTdHJ1Y3QiLGlkOjV9LGxpc3RWYWx1ZTp7dHlwZToiTGlzdFZhbHVlIixpZDo2fX19LE51bGxWYWx1ZTp7dmFsdWVzOntOVUxMX1ZBTFVFOjB9fSxMaXN0VmFsdWU6e2ZpZWxkczp7dmFsdWVzOntydWxlOiJyZXBlYXRlZCIsdHlwZToiVmFsdWUiLGlkOjF9fX19KSxuKCJ3cmFwcGVycyIse0RvdWJsZVZhbHVlOntmaWVsZHM6e3ZhbHVlOnt0eXBlOiJkb3VibGUiLGlkOjF9fX0sRmxvYXRWYWx1ZTp7ZmllbGRzOnt2YWx1ZTp7dHlwZToiZmxvYXQiLGlkOjF9fX0sSW50NjRWYWx1ZTp7ZmllbGRzOnt2YWx1ZTp7dHlwZToiaW50NjQiLGlkOjF9fX0sVUludDY0VmFsdWU6e2ZpZWxkczp7dmFsdWU6e3R5cGU6InVpbnQ2NCIsaWQ6MX19fSxJbnQzMlZhbHVlOntmaWVsZHM6e3ZhbHVlOnt0eXBlOiJpbnQzMiIsaWQ6MX19fSxVSW50MzJWYWx1ZTp7ZmllbGRzOnt2YWx1ZTp7dHlwZToidWludDMyIixpZDoxfX19LEJvb2xWYWx1ZTp7ZmllbGRzOnt2YWx1ZTp7dHlwZToiYm9vbCIsaWQ6MX19fSxTdHJpbmdWYWx1ZTp7ZmllbGRzOnt2YWx1ZTp7dHlwZToic3RyaW5nIixpZDoxfX19LEJ5dGVzVmFsdWU6e2ZpZWxkczp7dmFsdWU6e3R5cGU6ImJ5dGVzIixpZDoxfX19fSksbigiZmllbGRfbWFzayIse0ZpZWxkTWFzazp7ZmllbGRzOntwYXRoczp7cnVsZToicmVwZWF0ZWQiLHR5cGU6InN0cmluZyIsaWQ6MX19fX0pLG4uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHxudWxsfX0sNzQ0OihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49dCxvPXIoNTY0MyksaT1yKDMyNjIpO2Z1bmN0aW9uIGEoZSx0LHIsbil7dmFyIGk9ITE7aWYodC5yZXNvbHZlZFR5cGUpaWYodC5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBvKXtlKCJzd2l0Y2goZCVzKXsiLG4pO2Zvcih2YXIgYT10LnJlc29sdmVkVHlwZS52YWx1ZXMscz1PYmplY3Qua2V5cyhhKSxsPTA7bDxzLmxlbmd0aDsrK2wpYVtzW2xdXSE9PXQudHlwZURlZmF1bHR8fGl8fChlKCJkZWZhdWx0OiIpKCdpZih0eXBlb2YoZCVzKT09PSJudW1iZXIiKXttJXM9ZCVzO2JyZWFrfScsbixuLG4pLHQucmVwZWF0ZWR8fGUoImJyZWFrIiksaT0hMCksZSgiY2FzZSVqOiIsc1tsXSkoImNhc2UgJWk6IixhW3NbbF1dKSgibSVzPSVqIixuLGFbc1tsXV0pKCJicmVhayIpO2UoIn0iKX1lbHNlIGUoJ2lmKHR5cGVvZiBkJXMhPT0ib2JqZWN0IiknLG4pKCJ0aHJvdyBUeXBlRXJyb3IoJWopIix0LmZ1bGxOYW1lKyI6IG9iamVjdCBleHBlY3RlZCIpKCJtJXM9dHlwZXNbJWldLmZyb21PYmplY3QoZCVzKSIsbixyLG4pO2Vsc2V7dmFyIGM9ITE7c3dpdGNoKHQudHlwZSl7Y2FzZSJkb3VibGUiOmNhc2UiZmxvYXQiOmUoIm0lcz1OdW1iZXIoZCVzKSIsbixuKTticmVhaztjYXNlInVpbnQzMiI6Y2FzZSJmaXhlZDMyIjplKCJtJXM9ZCVzPj4+MCIsbixuKTticmVhaztjYXNlImludDMyIjpjYXNlInNpbnQzMiI6Y2FzZSJzZml4ZWQzMiI6ZSgibSVzPWQlc3wwIixuLG4pO2JyZWFrO2Nhc2UidWludDY0IjpjPSEwO2Nhc2UiaW50NjQiOmNhc2Uic2ludDY0IjpjYXNlImZpeGVkNjQiOmNhc2Uic2ZpeGVkNjQiOmUoImlmKHV0aWwuTG9uZykiKSgiKG0lcz11dGlsLkxvbmcuZnJvbVZhbHVlKGQlcykpLnVuc2lnbmVkPSVqIixuLG4sYykoJ2Vsc2UgaWYodHlwZW9mIGQlcz09PSJzdHJpbmciKScsbikoIm0lcz1wYXJzZUludChkJXMsMTApIixuLG4pKCdlbHNlIGlmKHR5cGVvZiBkJXM9PT0ibnVtYmVyIiknLG4pKCJtJXM9ZCVzIixuLG4pKCdlbHNlIGlmKHR5cGVvZiBkJXM9PT0ib2JqZWN0IiknLG4pKCJtJXM9bmV3IHV0aWwuTG9uZ0JpdHMoZCVzLmxvdz4+PjAsZCVzLmhpZ2g+Pj4wKS50b051bWJlciglcykiLG4sbixuLGM/InRydWUiOiIiKTticmVhaztjYXNlImJ5dGVzIjplKCdpZih0eXBlb2YgZCVzPT09InN0cmluZyIpJyxuKSgidXRpbC5iYXNlNjQuZGVjb2RlKGQlcyxtJXM9dXRpbC5uZXdCdWZmZXIodXRpbC5iYXNlNjQubGVuZ3RoKGQlcykpLDApIixuLG4sbikoImVsc2UgaWYoZCVzLmxlbmd0aCA+PSAwKSIsbikoIm0lcz1kJXMiLG4sbik7YnJlYWs7Y2FzZSJzdHJpbmciOmUoIm0lcz1TdHJpbmcoZCVzKSIsbixuKTticmVhaztjYXNlImJvb2wiOmUoIm0lcz1Cb29sZWFuKGQlcykiLG4sbil9fXJldHVybiBlfWZ1bmN0aW9uIHMoZSx0LHIsbil7aWYodC5yZXNvbHZlZFR5cGUpdC5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBvP2UoImQlcz1vLmVudW1zPT09U3RyaW5nPyh0eXBlc1slaV0udmFsdWVzW20lc109PT11bmRlZmluZWQ/bSVzOnR5cGVzWyVpXS52YWx1ZXNbbSVzXSk6bSVzIixuLHIsbixuLHIsbixuKTplKCJkJXM9dHlwZXNbJWldLnRvT2JqZWN0KG0lcyxvKSIsbixyLG4pO2Vsc2V7dmFyIGk9ITE7c3dpdGNoKHQudHlwZSl7Y2FzZSJkb3VibGUiOmNhc2UiZmxvYXQiOmUoImQlcz1vLmpzb24mJiFpc0Zpbml0ZShtJXMpP1N0cmluZyhtJXMpOm0lcyIsbixuLG4sbik7YnJlYWs7Y2FzZSJ1aW50NjQiOmk9ITA7Y2FzZSJpbnQ2NCI6Y2FzZSJzaW50NjQiOmNhc2UiZml4ZWQ2NCI6Y2FzZSJzZml4ZWQ2NCI6ZSgnaWYodHlwZW9mIG0lcz09PSJudW1iZXIiKScsbikoImQlcz1vLmxvbmdzPT09U3RyaW5nP1N0cmluZyhtJXMpOm0lcyIsbixuLG4pKCJlbHNlIikoImQlcz1vLmxvbmdzPT09U3RyaW5nP3V0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtJXMpOm8ubG9uZ3M9PT1OdW1iZXI/bmV3IHV0aWwuTG9uZ0JpdHMobSVzLmxvdz4+PjAsbSVzLmhpZ2g+Pj4wKS50b051bWJlciglcyk6bSVzIixuLG4sbixuLGk/InRydWUiOiIiLG4pO2JyZWFrO2Nhc2UiYnl0ZXMiOmUoImQlcz1vLmJ5dGVzPT09U3RyaW5nP3V0aWwuYmFzZTY0LmVuY29kZShtJXMsMCxtJXMubGVuZ3RoKTpvLmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobSVzKTptJXMiLG4sbixuLG4sbik7YnJlYWs7ZGVmYXVsdDplKCJkJXM9bSVzIixuLG4pfX1yZXR1cm4gZX1uLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWVsZHNBcnJheSxyPWkuY29kZWdlbihbImQiXSxlLm5hbWUrIiRmcm9tT2JqZWN0IikoImlmKGQgaW5zdGFuY2VvZiB0aGlzLmN0b3IpIikoInJldHVybiBkIik7aWYoIXQubGVuZ3RoKXJldHVybiByKCJyZXR1cm4gbmV3IHRoaXMuY3RvciIpO3IoInZhciBtPW5ldyB0aGlzLmN0b3IiKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoOysrbil7dmFyIHM9dFtuXS5yZXNvbHZlKCksbD1pLnNhZmVQcm9wKHMubmFtZSk7cy5tYXA/KHIoImlmKGQlcyl7IixsKSgnaWYodHlwZW9mIGQlcyE9PSJvYmplY3QiKScsbCkoInRocm93IFR5cGVFcnJvciglaikiLHMuZnVsbE5hbWUrIjogb2JqZWN0IGV4cGVjdGVkIikoIm0lcz17fSIsbCkoImZvcih2YXIga3M9T2JqZWN0LmtleXMoZCVzKSxpPTA7aTxrcy5sZW5ndGg7KytpKXsiLGwpLGEocixzLG4sbCsiW2tzW2ldXSIpKCJ9IikoIn0iKSk6cy5yZXBlYXRlZD8ocigiaWYoZCVzKXsiLGwpKCJpZighQXJyYXkuaXNBcnJheShkJXMpKSIsbCkoInRocm93IFR5cGVFcnJvciglaikiLHMuZnVsbE5hbWUrIjogYXJyYXkgZXhwZWN0ZWQiKSgibSVzPVtdIixsKSgiZm9yKHZhciBpPTA7aTxkJXMubGVuZ3RoOysraSl7IixsKSxhKHIscyxuLGwrIltpXSIpKCJ9IikoIn0iKSk6KHMucmVzb2x2ZWRUeXBlIGluc3RhbmNlb2Ygb3x8cigiaWYoZCVzIT1udWxsKXsiLGwpLGEocixzLG4sbCkscy5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBvfHxyKCJ9IikpfXJldHVybiByKCJyZXR1cm4gbSIpfSxuLnRvT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PWUuZmllbGRzQXJyYXkuc2xpY2UoKS5zb3J0KGkuY29tcGFyZUZpZWxkc0J5SWQpO2lmKCF0Lmxlbmd0aClyZXR1cm4gaS5jb2RlZ2VuKCkoInJldHVybiB7fSIpO2Zvcih2YXIgcj1pLmNvZGVnZW4oWyJtIiwibyJdLGUubmFtZSsiJHRvT2JqZWN0IikoImlmKCFvKSIpKCJvPXt9IikoInZhciBkPXt9Iiksbj1bXSxhPVtdLGw9W10sYz0wO2M8dC5sZW5ndGg7KytjKXRbY10ucGFydE9mfHwodFtjXS5yZXNvbHZlKCkucmVwZWF0ZWQ/bjp0W2NdLm1hcD9hOmwpLnB1c2godFtjXSk7aWYobi5sZW5ndGgpe2ZvcihyKCJpZihvLmFycmF5c3x8by5kZWZhdWx0cyl7IiksYz0wO2M8bi5sZW5ndGg7KytjKXIoImQlcz1bXSIsaS5zYWZlUHJvcChuW2NdLm5hbWUpKTtyKCJ9Iil9aWYoYS5sZW5ndGgpe2ZvcihyKCJpZihvLm9iamVjdHN8fG8uZGVmYXVsdHMpeyIpLGM9MDtjPGEubGVuZ3RoOysrYylyKCJkJXM9e30iLGkuc2FmZVByb3AoYVtjXS5uYW1lKSk7cigifSIpfWlmKGwubGVuZ3RoKXtmb3IocigiaWYoby5kZWZhdWx0cyl7IiksYz0wO2M8bC5sZW5ndGg7KytjKXt2YXIgdT1sW2NdLHA9aS5zYWZlUHJvcCh1Lm5hbWUpO2lmKHUucmVzb2x2ZWRUeXBlIGluc3RhbmNlb2YgbylyKCJkJXM9by5lbnVtcz09PVN0cmluZz8lajolaiIscCx1LnJlc29sdmVkVHlwZS52YWx1ZXNCeUlkW3UudHlwZURlZmF1bHRdLHUudHlwZURlZmF1bHQpO2Vsc2UgaWYodS5sb25nKXIoImlmKHV0aWwuTG9uZyl7IikoInZhciBuPW5ldyB1dGlsLkxvbmcoJWksJWksJWopIix1LnR5cGVEZWZhdWx0Lmxvdyx1LnR5cGVEZWZhdWx0LmhpZ2gsdS50eXBlRGVmYXVsdC51bnNpZ25lZCkoImQlcz1vLmxvbmdzPT09U3RyaW5nP24udG9TdHJpbmcoKTpvLmxvbmdzPT09TnVtYmVyP24udG9OdW1iZXIoKTpuIixwKSgifWVsc2UiKSgiZCVzPW8ubG9uZ3M9PT1TdHJpbmc/JWo6JWkiLHAsdS50eXBlRGVmYXVsdC50b1N0cmluZygpLHUudHlwZURlZmF1bHQudG9OdW1iZXIoKSk7ZWxzZSBpZih1LmJ5dGVzKXt2YXIgZD0iWyIrQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodS50eXBlRGVmYXVsdCkuam9pbigiLCIpKyJdIjtyKCJpZihvLmJ5dGVzPT09U3RyaW5nKWQlcz0laiIscCxTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx1LnR5cGVEZWZhdWx0KSkoImVsc2V7IikoImQlcz0lcyIscCxkKSgiaWYoby5ieXRlcyE9PUFycmF5KWQlcz11dGlsLm5ld0J1ZmZlcihkJXMpIixwLHApKCJ9Iil9ZWxzZSByKCJkJXM9JWoiLHAsdS50eXBlRGVmYXVsdCl9cigifSIpfXZhciBmPSExO2ZvcihjPTA7Yzx0Lmxlbmd0aDsrK2Mpe3U9dFtjXTt2YXIgaD1lLl9maWVsZHNBcnJheS5pbmRleE9mKHUpO3A9aS5zYWZlUHJvcCh1Lm5hbWUpLHUubWFwPyhmfHwoZj0hMCxyKCJ2YXIga3MyIikpLHIoImlmKG0lcyYmKGtzMj1PYmplY3Qua2V5cyhtJXMpKS5sZW5ndGgpeyIscCxwKSgiZCVzPXt9IixwKSgiZm9yKHZhciBqPTA7ajxrczIubGVuZ3RoOysrail7IikscyhyLHUsaCxwKyJba3MyW2pdXSIpKCJ9IikpOnUucmVwZWF0ZWQ/KHIoImlmKG0lcyYmbSVzLmxlbmd0aCl7IixwLHApKCJkJXM9W10iLHApKCJmb3IodmFyIGo9MDtqPG0lcy5sZW5ndGg7KytqKXsiLHApLHMocix1LGgscCsiW2pdIikoIn0iKSk6KHIoImlmKG0lcyE9bnVsbCYmbS5oYXNPd25Qcm9wZXJ0eSglaikpeyIscCx1Lm5hbWUpLHMocix1LGgscCksdS5wYXJ0T2YmJnIoImlmKG8ub25lb2ZzKSIpKCJkJXM9JWoiLGkuc2FmZVByb3AodS5wYXJ0T2YubmFtZSksdS5uYW1lKSkscigifSIpfXJldHVybiByKCJyZXR1cm4gZCIpfX0sNzcyODooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1pLmNvZGVnZW4oWyJyIiwibCJdLGUubmFtZSsiJGRlY29kZSIpKCJpZighKHIgaW5zdGFuY2VvZiBSZWFkZXIpKSIpKCJyPVJlYWRlci5jcmVhdGUocikiKSgidmFyIGM9bD09PXVuZGVmaW5lZD9yLmxlbjpyLnBvcytsLG09bmV3IHRoaXMuY3RvciIrKGUuZmllbGRzQXJyYXkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXB9KSkubGVuZ3RoPyIsayx2YWx1ZSI6IiIpKSgid2hpbGUoci5wb3M8Yyl7IikoInZhciB0PXIudWludDMyKCkiKTtlLmdyb3VwJiZ0KCJpZigodCY3KT09PTQpIikoImJyZWFrIiksdCgic3dpdGNoKHQ+Pj4zKXsiKTtmb3IodmFyIHI9MDtyPGUuZmllbGRzQXJyYXkubGVuZ3RoOysrcil7dmFyIHM9ZS5fZmllbGRzQXJyYXlbcl0ucmVzb2x2ZSgpLGw9cy5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBuPyJpbnQzMiI6cy50eXBlLGM9Im0iK2kuc2FmZVByb3Aocy5uYW1lKTt0KCJjYXNlICVpOiB7IixzLmlkKSxzLm1hcD8odCgiaWYoJXM9PT11dGlsLmVtcHR5T2JqZWN0KSIsYykoIiVzPXt9IixjKSgidmFyIGMyID0gci51aW50MzIoKStyLnBvcyIpLHZvaWQgMCE9PW8uZGVmYXVsdHNbcy5rZXlUeXBlXT90KCJrPSVqIixvLmRlZmF1bHRzW3Mua2V5VHlwZV0pOnQoIms9bnVsbCIpLHZvaWQgMCE9PW8uZGVmYXVsdHNbbF0/dCgidmFsdWU9JWoiLG8uZGVmYXVsdHNbbF0pOnQoInZhbHVlPW51bGwiKSx0KCJ3aGlsZShyLnBvczxjMil7IikoInZhciB0YWcyPXIudWludDMyKCkiKSgic3dpdGNoKHRhZzI+Pj4zKXsiKSgiY2FzZSAxOiBrPXIuJXMoKTsgYnJlYWsiLHMua2V5VHlwZSkoImNhc2UgMjoiKSx2b2lkIDA9PT1vLmJhc2ljW2xdP3QoInZhbHVlPXR5cGVzWyVpXS5kZWNvZGUocixyLnVpbnQzMigpKSIscik6dCgidmFsdWU9ci4lcygpIixsKSx0KCJicmVhayIpKCJkZWZhdWx0OiIpKCJyLnNraXBUeXBlKHRhZzImNykiKSgiYnJlYWsiKSgifSIpKCJ9Iiksdm9pZCAwIT09by5sb25nW3Mua2V5VHlwZV0/dCgnJXNbdHlwZW9mIGs9PT0ib2JqZWN0Ij91dGlsLmxvbmdUb0hhc2goayk6a109dmFsdWUnLGMpOnQoIiVzW2tdPXZhbHVlIixjKSk6cy5yZXBlYXRlZD8odCgiaWYoISglcyYmJXMubGVuZ3RoKSkiLGMsYykoIiVzPVtdIixjKSx2b2lkIDAhPT1vLnBhY2tlZFtsXSYmdCgiaWYoKHQmNyk9PT0yKXsiKSgidmFyIGMyPXIudWludDMyKCkrci5wb3MiKSgid2hpbGUoci5wb3M8YzIpIikoIiVzLnB1c2goci4lcygpKSIsYyxsKSgifWVsc2UiKSx2b2lkIDA9PT1vLmJhc2ljW2xdP3Qocy5yZXNvbHZlZFR5cGUuZ3JvdXA/IiVzLnB1c2godHlwZXNbJWldLmRlY29kZShyKSkiOiIlcy5wdXNoKHR5cGVzWyVpXS5kZWNvZGUocixyLnVpbnQzMigpKSkiLGMscik6dCgiJXMucHVzaChyLiVzKCkpIixjLGwpKTp2b2lkIDA9PT1vLmJhc2ljW2xdP3Qocy5yZXNvbHZlZFR5cGUuZ3JvdXA/IiVzPXR5cGVzWyVpXS5kZWNvZGUocikiOiIlcz10eXBlc1slaV0uZGVjb2RlKHIsci51aW50MzIoKSkiLGMscik6dCgiJXM9ci4lcygpIixjLGwpLHQoImJyZWFrIikoIn0iKX1mb3IodCgiZGVmYXVsdDoiKSgici5za2lwVHlwZSh0JjcpIikoImJyZWFrIikoIn0iKSgifSIpLHI9MDtyPGUuX2ZpZWxkc0FycmF5Lmxlbmd0aDsrK3Ipe3ZhciB1PWUuX2ZpZWxkc0FycmF5W3JdO3UucmVxdWlyZWQmJnQoImlmKCFtLmhhc093blByb3BlcnR5KCVqKSkiLHUubmFtZSkoInRocm93IHV0aWwuUHJvdG9jb2xFcnJvciglaix7aW5zdGFuY2U6bX0pIixhKHUpKX1yZXR1cm4gdCgicmV0dXJuIG0iKX07dmFyIG49cig1NjQzKSxvPXIoMzYxKSxpPXIoMzI2Mik7ZnVuY3Rpb24gYShlKXtyZXR1cm4ibWlzc2luZyByZXF1aXJlZCAnIitlLm5hbWUrIicifX0sMTA4MDooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1pLmNvZGVnZW4oWyJtIiwidyJdLGUubmFtZSsiJGVuY29kZSIpKCJpZighdykiKSgidz1Xcml0ZXIuY3JlYXRlKCkiKSxzPWUuZmllbGRzQXJyYXkuc2xpY2UoKS5zb3J0KGkuY29tcGFyZUZpZWxkc0J5SWQpLGw9MDtsPHMubGVuZ3RoOysrbCl7dmFyIGM9c1tsXS5yZXNvbHZlKCksdT1lLl9maWVsZHNBcnJheS5pbmRleE9mKGMpLHA9Yy5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBuPyJpbnQzMiI6Yy50eXBlLGQ9by5iYXNpY1twXTt0PSJtIitpLnNhZmVQcm9wKGMubmFtZSksYy5tYXA/KHIoImlmKCVzIT1udWxsJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtLCVqKSl7Iix0LGMubmFtZSkoImZvcih2YXIga3M9T2JqZWN0LmtleXMoJXMpLGk9MDtpPGtzLmxlbmd0aDsrK2kpeyIsdCkoIncudWludDMyKCVpKS5mb3JrKCkudWludDMyKCVpKS4lcyhrc1tpXSkiLChjLmlkPDwzfDIpPj4+MCw4fG8ubWFwS2V5W2Mua2V5VHlwZV0sYy5rZXlUeXBlKSx2b2lkIDA9PT1kP3IoInR5cGVzWyVpXS5lbmNvZGUoJXNba3NbaV1dLHcudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpLmxkZWxpbSgpIix1LHQpOnIoIi51aW50MzIoJWkpLiVzKCVzW2tzW2ldXSkubGRlbGltKCkiLDE2fGQscCx0KSxyKCJ9IikoIn0iKSk6Yy5yZXBlYXRlZD8ocigiaWYoJXMhPW51bGwmJiVzLmxlbmd0aCl7Iix0LHQpLGMucGFja2VkJiZ2b2lkIDAhPT1vLnBhY2tlZFtwXT9yKCJ3LnVpbnQzMiglaSkuZm9yaygpIiwoYy5pZDw8M3wyKT4+PjApKCJmb3IodmFyIGk9MDtpPCVzLmxlbmd0aDsrK2kpIix0KSgidy4lcyglc1tpXSkiLHAsdCkoIncubGRlbGltKCkiKToocigiZm9yKHZhciBpPTA7aTwlcy5sZW5ndGg7KytpKSIsdCksdm9pZCAwPT09ZD9hKHIsYyx1LHQrIltpXSIpOnIoIncudWludDMyKCVpKS4lcyglc1tpXSkiLChjLmlkPDwzfGQpPj4+MCxwLHQpKSxyKCJ9IikpOihjLm9wdGlvbmFsJiZyKCJpZiglcyE9bnVsbCYmT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobSwlaikpIix0LGMubmFtZSksdm9pZCAwPT09ZD9hKHIsYyx1LHQpOnIoIncudWludDMyKCVpKS4lcyglcykiLChjLmlkPDwzfGQpPj4+MCxwLHQpKX1yZXR1cm4gcigicmV0dXJuIHciKX07dmFyIG49cig1NjQzKSxvPXIoMzYxKSxpPXIoMzI2Mik7ZnVuY3Rpb24gYShlLHQscixuKXtyZXR1cm4gdC5yZXNvbHZlZFR5cGUuZ3JvdXA/ZSgidHlwZXNbJWldLmVuY29kZSglcyx3LnVpbnQzMiglaSkpLnVpbnQzMiglaSkiLHIsbiwodC5pZDw8M3wzKT4+PjAsKHQuaWQ8PDN8NCk+Pj4wKTplKCJ0eXBlc1slaV0uZW5jb2RlKCVzLHcudWludDMyKCVpKS5mb3JrKCkpLmxkZWxpbSgpIixyLG4sKHQuaWQ8PDN8Mik+Pj4wKX19LDU2NDM6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9YTt2YXIgbj1yKDcyMDkpOygoYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEpLmNsYXNzTmFtZT0iRW51bSI7dmFyIG89cig4OTIzKSxpPXIoMzI2Mik7ZnVuY3Rpb24gYShlLHQscixvLGksYSl7aWYobi5jYWxsKHRoaXMsZSxyKSx0JiYib2JqZWN0IiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKCJ2YWx1ZXMgbXVzdCBiZSBhbiBvYmplY3QiKTtpZih0aGlzLnZhbHVlc0J5SWQ9e30sdGhpcy52YWx1ZXM9T2JqZWN0LmNyZWF0ZSh0aGlzLnZhbHVlc0J5SWQpLHRoaXMuY29tbWVudD1vLHRoaXMuY29tbWVudHM9aXx8e30sdGhpcy52YWx1ZXNPcHRpb25zPWEsdGhpcy5yZXNlcnZlZD12b2lkIDAsdClmb3IodmFyIHM9T2JqZWN0LmtleXModCksbD0wO2w8cy5sZW5ndGg7KytsKSJudW1iZXIiPT10eXBlb2YgdFtzW2xdXSYmKHRoaXMudmFsdWVzQnlJZFt0aGlzLnZhbHVlc1tzW2xdXT10W3NbbF1dXT1zW2xdKX1hLmZyb21KU09OPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGEoZSx0LnZhbHVlcyx0Lm9wdGlvbnMsdC5jb21tZW50LHQuY29tbWVudHMpO3JldHVybiByLnJlc2VydmVkPXQucmVzZXJ2ZWQscn0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGUpe3ZhciB0PSEhZSYmQm9vbGVhbihlLmtlZXBDb21tZW50cyk7cmV0dXJuIGkudG9PYmplY3QoWyJvcHRpb25zIix0aGlzLm9wdGlvbnMsInZhbHVlc09wdGlvbnMiLHRoaXMudmFsdWVzT3B0aW9ucywidmFsdWVzIix0aGlzLnZhbHVlcywicmVzZXJ2ZWQiLHRoaXMucmVzZXJ2ZWQmJnRoaXMucmVzZXJ2ZWQubGVuZ3RoP3RoaXMucmVzZXJ2ZWQ6dm9pZCAwLCJjb21tZW50Iix0P3RoaXMuY29tbWVudDp2b2lkIDAsImNvbW1lbnRzIix0P3RoaXMuY29tbWVudHM6dm9pZCAwXSl9LGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlLHQscixuKXtpZighaS5pc1N0cmluZyhlKSl0aHJvdyBUeXBlRXJyb3IoIm5hbWUgbXVzdCBiZSBhIHN0cmluZyIpO2lmKCFpLmlzSW50ZWdlcih0KSl0aHJvdyBUeXBlRXJyb3IoImlkIG11c3QgYmUgYW4gaW50ZWdlciIpO2lmKHZvaWQgMCE9PXRoaXMudmFsdWVzW2VdKXRocm93IEVycm9yKCJkdXBsaWNhdGUgbmFtZSAnIitlKyInIGluICIrdGhpcyk7aWYodGhpcy5pc1Jlc2VydmVkSWQodCkpdGhyb3cgRXJyb3IoImlkICIrdCsiIGlzIHJlc2VydmVkIGluICIrdGhpcyk7aWYodGhpcy5pc1Jlc2VydmVkTmFtZShlKSl0aHJvdyBFcnJvcigibmFtZSAnIitlKyInIGlzIHJlc2VydmVkIGluICIrdGhpcyk7aWYodm9pZCAwIT09dGhpcy52YWx1ZXNCeUlkW3RdKXtpZighdGhpcy5vcHRpb25zfHwhdGhpcy5vcHRpb25zLmFsbG93X2FsaWFzKXRocm93IEVycm9yKCJkdXBsaWNhdGUgaWQgIit0KyIgaW4gIit0aGlzKTt0aGlzLnZhbHVlc1tlXT10fWVsc2UgdGhpcy52YWx1ZXNCeUlkW3RoaXMudmFsdWVzW2VdPXRdPWU7cmV0dXJuIG4mJih2b2lkIDA9PT10aGlzLnZhbHVlc09wdGlvbnMmJih0aGlzLnZhbHVlc09wdGlvbnM9e30pLHRoaXMudmFsdWVzT3B0aW9uc1tlXT1ufHxudWxsKSx0aGlzLmNvbW1lbnRzW2VdPXJ8fG51bGwsdGhpc30sYS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe2lmKCFpLmlzU3RyaW5nKGUpKXRocm93IFR5cGVFcnJvcigibmFtZSBtdXN0IGJlIGEgc3RyaW5nIik7dmFyIHQ9dGhpcy52YWx1ZXNbZV07aWYobnVsbD09dCl0aHJvdyBFcnJvcigibmFtZSAnIitlKyInIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcyk7cmV0dXJuIGRlbGV0ZSB0aGlzLnZhbHVlc0J5SWRbdF0sZGVsZXRlIHRoaXMudmFsdWVzW2VdLGRlbGV0ZSB0aGlzLmNvbW1lbnRzW2VdLHRoaXMudmFsdWVzT3B0aW9ucyYmZGVsZXRlIHRoaXMudmFsdWVzT3B0aW9uc1tlXSx0aGlzfSxhLnByb3RvdHlwZS5pc1Jlc2VydmVkSWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG8uaXNSZXNlcnZlZElkKHRoaXMucmVzZXJ2ZWQsZSl9LGEucHJvdG90eXBlLmlzUmVzZXJ2ZWROYW1lPWZ1bmN0aW9uKGUpe3JldHVybiBvLmlzUmVzZXJ2ZWROYW1lKHRoaXMucmVzZXJ2ZWQsZSl9fSwxMzQ0OihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWM7dmFyIG49cig3MjA5KTsoKGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1jKS5jbGFzc05hbWU9IkZpZWxkIjt2YXIgbyxpPXIoNTY0MyksYT1yKDM2MSkscz1yKDMyNjIpLGw9L15yZXF1aXJlZHxvcHRpb25hbHxyZXBlYXRlZCQvO2Z1bmN0aW9uIGMoZSx0LHIsbyxpLGMsdSl7aWYocy5pc09iamVjdChvKT8odT1pLGM9byxvPWk9dm9pZCAwKTpzLmlzT2JqZWN0KGkpJiYodT1jLGM9aSxpPXZvaWQgMCksbi5jYWxsKHRoaXMsZSxjKSwhcy5pc0ludGVnZXIodCl8fHQ8MCl0aHJvdyBUeXBlRXJyb3IoImlkIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciIpO2lmKCFzLmlzU3RyaW5nKHIpKXRocm93IFR5cGVFcnJvcigidHlwZSBtdXN0IGJlIGEgc3RyaW5nIik7aWYodm9pZCAwIT09byYmIWwudGVzdChvPW8udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSl0aHJvdyBUeXBlRXJyb3IoInJ1bGUgbXVzdCBiZSBhIHN0cmluZyBydWxlIik7aWYodm9pZCAwIT09aSYmIXMuaXNTdHJpbmcoaSkpdGhyb3cgVHlwZUVycm9yKCJleHRlbmQgbXVzdCBiZSBhIHN0cmluZyIpOyJwcm90bzNfb3B0aW9uYWwiPT09byYmKG89Im9wdGlvbmFsIiksdGhpcy5ydWxlPW8mJiJvcHRpb25hbCIhPT1vP286dm9pZCAwLHRoaXMudHlwZT1yLHRoaXMuaWQ9dCx0aGlzLmV4dGVuZD1pfHx2b2lkIDAsdGhpcy5yZXF1aXJlZD0icmVxdWlyZWQiPT09byx0aGlzLm9wdGlvbmFsPSF0aGlzLnJlcXVpcmVkLHRoaXMucmVwZWF0ZWQ9InJlcGVhdGVkIj09PW8sdGhpcy5tYXA9ITEsdGhpcy5tZXNzYWdlPW51bGwsdGhpcy5wYXJ0T2Y9bnVsbCx0aGlzLnR5cGVEZWZhdWx0PW51bGwsdGhpcy5kZWZhdWx0VmFsdWU9bnVsbCx0aGlzLmxvbmc9ISFzLkxvbmcmJnZvaWQgMCE9PWEubG9uZ1tyXSx0aGlzLmJ5dGVzPSJieXRlcyI9PT1yLHRoaXMucmVzb2x2ZWRUeXBlPW51bGwsdGhpcy5leHRlbnNpb25GaWVsZD1udWxsLHRoaXMuZGVjbGFyaW5nRmllbGQ9bnVsbCx0aGlzLl9wYWNrZWQ9bnVsbCx0aGlzLmNvbW1lbnQ9dX1jLmZyb21KU09OPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBjKGUsdC5pZCx0LnR5cGUsdC5ydWxlLHQuZXh0ZW5kLHQub3B0aW9ucyx0LmNvbW1lbnQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsInBhY2tlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fcGFja2VkJiYodGhpcy5fcGFja2VkPSExIT09dGhpcy5nZXRPcHRpb24oInBhY2tlZCIpKSx0aGlzLl9wYWNrZWR9fSksYy5wcm90b3R5cGUuc2V0T3B0aW9uPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4icGFja2VkIj09PWUmJih0aGlzLl9wYWNrZWQ9bnVsbCksbi5wcm90b3R5cGUuc2V0T3B0aW9uLmNhbGwodGhpcyxlLHQscil9LGMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihlKXt2YXIgdD0hIWUmJkJvb2xlYW4oZS5rZWVwQ29tbWVudHMpO3JldHVybiBzLnRvT2JqZWN0KFsicnVsZSIsIm9wdGlvbmFsIiE9PXRoaXMucnVsZSYmdGhpcy5ydWxlfHx2b2lkIDAsInR5cGUiLHRoaXMudHlwZSwiaWQiLHRoaXMuaWQsImV4dGVuZCIsdGhpcy5leHRlbmQsIm9wdGlvbnMiLHRoaXMub3B0aW9ucywiY29tbWVudCIsdD90aGlzLmNvbW1lbnQ6dm9pZCAwXSl9LGMucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24oKXtpZih0aGlzLnJlc29sdmVkKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PSh0aGlzLnR5cGVEZWZhdWx0PWEuZGVmYXVsdHNbdGhpcy50eXBlXSk/KHRoaXMucmVzb2x2ZWRUeXBlPSh0aGlzLmRlY2xhcmluZ0ZpZWxkP3RoaXMuZGVjbGFyaW5nRmllbGQucGFyZW50OnRoaXMucGFyZW50KS5sb29rdXBUeXBlT3JFbnVtKHRoaXMudHlwZSksdGhpcy5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBvP3RoaXMudHlwZURlZmF1bHQ9bnVsbDp0aGlzLnR5cGVEZWZhdWx0PXRoaXMucmVzb2x2ZWRUeXBlLnZhbHVlc1tPYmplY3Qua2V5cyh0aGlzLnJlc29sdmVkVHlwZS52YWx1ZXMpWzBdXSk6dGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMucHJvdG8zX29wdGlvbmFsJiYodGhpcy50eXBlRGVmYXVsdD1udWxsKSx0aGlzLm9wdGlvbnMmJm51bGwhPXRoaXMub3B0aW9ucy5kZWZhdWx0JiYodGhpcy50eXBlRGVmYXVsdD10aGlzLm9wdGlvbnMuZGVmYXVsdCx0aGlzLnJlc29sdmVkVHlwZSBpbnN0YW5jZW9mIGkmJiJzdHJpbmciPT10eXBlb2YgdGhpcy50eXBlRGVmYXVsdCYmKHRoaXMudHlwZURlZmF1bHQ9dGhpcy5yZXNvbHZlZFR5cGUudmFsdWVzW3RoaXMudHlwZURlZmF1bHRdKSksdGhpcy5vcHRpb25zJiYoITAhPT10aGlzLm9wdGlvbnMucGFja2VkJiYodm9pZCAwPT09dGhpcy5vcHRpb25zLnBhY2tlZHx8IXRoaXMucmVzb2x2ZWRUeXBlfHx0aGlzLnJlc29sdmVkVHlwZSBpbnN0YW5jZW9mIGkpfHxkZWxldGUgdGhpcy5vcHRpb25zLnBhY2tlZCxPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpLmxlbmd0aHx8KHRoaXMub3B0aW9ucz12b2lkIDApKSx0aGlzLmxvbmcpdGhpcy50eXBlRGVmYXVsdD1zLkxvbmcuZnJvbU51bWJlcih0aGlzLnR5cGVEZWZhdWx0LCJ1Ij09PXRoaXMudHlwZS5jaGFyQXQoMCkpLE9iamVjdC5mcmVlemUmJk9iamVjdC5mcmVlemUodGhpcy50eXBlRGVmYXVsdCk7ZWxzZSBpZih0aGlzLmJ5dGVzJiYic3RyaW5nIj09dHlwZW9mIHRoaXMudHlwZURlZmF1bHQpe3ZhciBlO3MuYmFzZTY0LnRlc3QodGhpcy50eXBlRGVmYXVsdCk/cy5iYXNlNjQuZGVjb2RlKHRoaXMudHlwZURlZmF1bHQsZT1zLm5ld0J1ZmZlcihzLmJhc2U2NC5sZW5ndGgodGhpcy50eXBlRGVmYXVsdCkpLDApOnMudXRmOC53cml0ZSh0aGlzLnR5cGVEZWZhdWx0LGU9cy5uZXdCdWZmZXIocy51dGY4Lmxlbmd0aCh0aGlzLnR5cGVEZWZhdWx0KSksMCksdGhpcy50eXBlRGVmYXVsdD1lfXJldHVybiB0aGlzLm1hcD90aGlzLmRlZmF1bHRWYWx1ZT1zLmVtcHR5T2JqZWN0OnRoaXMucmVwZWF0ZWQ/dGhpcy5kZWZhdWx0VmFsdWU9cy5lbXB0eUFycmF5OnRoaXMuZGVmYXVsdFZhbHVlPXRoaXMudHlwZURlZmF1bHQsdGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBvJiYodGhpcy5wYXJlbnQuY3Rvci5wcm90b3R5cGVbdGhpcy5uYW1lXT10aGlzLmRlZmF1bHRWYWx1ZSksbi5wcm90b3R5cGUucmVzb2x2ZS5jYWxsKHRoaXMpfSxjLmQ9ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dD1zLmRlY29yYXRlVHlwZSh0KS5uYW1lOnQmJiJvYmplY3QiPT10eXBlb2YgdCYmKHQ9cy5kZWNvcmF0ZUVudW0odCkubmFtZSksZnVuY3Rpb24obyxpKXtzLmRlY29yYXRlVHlwZShvLmNvbnN0cnVjdG9yKS5hZGQobmV3IGMoaSxlLHQscix7ZGVmYXVsdDpufSkpfX0sYy5fY29uZmlndXJlPWZ1bmN0aW9uKGUpe289ZX19LDUzMjU6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lLmV4cG9ydHM9cig0Mzk0KTtuLmJ1aWxkPSJsaWdodCIsbi5sb2FkPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD8ocj10LHQ9bmV3IG4uUm9vdCk6dHx8KHQ9bmV3IG4uUm9vdCksdC5sb2FkKGUscil9LG4ubG9hZFN5bmM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9bmV3IG4uUm9vdCksdC5sb2FkU3luYyhlKX0sbi5lbmNvZGVyPXIoMTA4MCksbi5kZWNvZGVyPXIoNzcyOCksbi52ZXJpZmllcj1yKDQyMCksbi5jb252ZXJ0ZXI9cig3NDQpLG4uUmVmbGVjdGlvbk9iamVjdD1yKDcyMDkpLG4uTmFtZXNwYWNlPXIoODkyMyksbi5Sb290PXIoNTMzMCksbi5FbnVtPXIoNTY0Myksbi5UeXBlPXIoNzg4Miksbi5GaWVsZD1yKDEzNDQpLG4uT25lT2Y9cigxNDU3KSxuLk1hcEZpZWxkPXIoODI1Miksbi5TZXJ2aWNlPXIoOTY4Nyksbi5NZXRob2Q9cig4ODExKSxuLk1lc3NhZ2U9cigyNTUxKSxuLndyYXBwZXJzPXIoNjQzNCksbi50eXBlcz1yKDM2MSksbi51dGlsPXIoMzI2Miksbi5SZWZsZWN0aW9uT2JqZWN0Ll9jb25maWd1cmUobi5Sb290KSxuLk5hbWVzcGFjZS5fY29uZmlndXJlKG4uVHlwZSxuLlNlcnZpY2Usbi5FbnVtKSxuLlJvb3QuX2NvbmZpZ3VyZShuLlR5cGUpLG4uRmllbGQuX2NvbmZpZ3VyZShuLlR5cGUpfSw0Mzk0OihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG49dDtmdW5jdGlvbiBvKCl7bi51dGlsLl9jb25maWd1cmUoKSxuLldyaXRlci5fY29uZmlndXJlKG4uQnVmZmVyV3JpdGVyKSxuLlJlYWRlci5fY29uZmlndXJlKG4uQnVmZmVyUmVhZGVyKX1uLmJ1aWxkPSJtaW5pbWFsIixuLldyaXRlcj1yKDM0NDkpLG4uQnVmZmVyV3JpdGVyPXIoODE4KSxuLlJlYWRlcj1yKDYyMzcpLG4uQnVmZmVyUmVhZGVyPXIoMzE1OCksbi51dGlsPXIoMzYxMCksbi5ycGM9cig1MDQ3KSxuLnJvb3RzPXIoNDUyOSksbi5jb25maWd1cmU9byxvKCl9LDkxMDA6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lLmV4cG9ydHM9cig1MzI1KTtuLmJ1aWxkPSJmdWxsIixuLnRva2VuaXplPXIoNTI3KSxuLnBhcnNlPXIoNDg2Myksbi5jb21tb249cig1MDk1KSxuLlJvb3QuX2NvbmZpZ3VyZShuLlR5cGUsbi5wYXJzZSxuLmNvbW1vbil9LDgyNTI6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9YTt2YXIgbj1yKDEzNDQpOygoYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEpLmNsYXNzTmFtZT0iTWFwRmllbGQiO3ZhciBvPXIoMzYxKSxpPXIoMzI2Mik7ZnVuY3Rpb24gYShlLHQscixvLGEscyl7aWYobi5jYWxsKHRoaXMsZSx0LG8sdm9pZCAwLHZvaWQgMCxhLHMpLCFpLmlzU3RyaW5nKHIpKXRocm93IFR5cGVFcnJvcigia2V5VHlwZSBtdXN0IGJlIGEgc3RyaW5nIik7dGhpcy5rZXlUeXBlPXIsdGhpcy5yZXNvbHZlZEtleVR5cGU9bnVsbCx0aGlzLm1hcD0hMH1hLmZyb21KU09OPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBhKGUsdC5pZCx0LmtleVR5cGUsdC50eXBlLHQub3B0aW9ucyx0LmNvbW1lbnQpfSxhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oZSl7dmFyIHQ9ISFlJiZCb29sZWFuKGUua2VlcENvbW1lbnRzKTtyZXR1cm4gaS50b09iamVjdChbImtleVR5cGUiLHRoaXMua2V5VHlwZSwidHlwZSIsdGhpcy50eXBlLCJpZCIsdGhpcy5pZCwiZXh0ZW5kIix0aGlzLmV4dGVuZCwib3B0aW9ucyIsdGhpcy5vcHRpb25zLCJjb21tZW50Iix0P3RoaXMuY29tbWVudDp2b2lkIDBdKX0sYS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbigpe2lmKHRoaXMucmVzb2x2ZWQpcmV0dXJuIHRoaXM7aWYodm9pZCAwPT09by5tYXBLZXlbdGhpcy5rZXlUeXBlXSl0aHJvdyBFcnJvcigiaW52YWxpZCBrZXkgdHlwZTogIit0aGlzLmtleVR5cGUpO3JldHVybiBuLnByb3RvdHlwZS5yZXNvbHZlLmNhbGwodGhpcyl9LGEuZD1mdW5jdGlvbihlLHQscil7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHI/cj1pLmRlY29yYXRlVHlwZShyKS5uYW1lOnImJiJvYmplY3QiPT10eXBlb2YgciYmKHI9aS5kZWNvcmF0ZUVudW0ocikubmFtZSksZnVuY3Rpb24obixvKXtpLmRlY29yYXRlVHlwZShuLmNvbnN0cnVjdG9yKS5hZGQobmV3IGEobyxlLHQscikpfX19LDI1NTE6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9bzt2YXIgbj1yKDM2MTApO2Z1bmN0aW9uIG8oZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKXRoaXNbdFtyXV09ZVt0W3JdXX1vLmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kdHlwZS5jcmVhdGUoZSl9LG8uZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuJHR5cGUuZW5jb2RlKGUsdCl9LG8uZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuJHR5cGUuZW5jb2RlRGVsaW1pdGVkKGUsdCl9LG8uZGVjb2RlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLiR0eXBlLmRlY29kZShlKX0sby5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuJHR5cGUuZGVjb2RlRGVsaW1pdGVkKGUpfSxvLnZlcmlmeT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kdHlwZS52ZXJpZnkoZSl9LG8uZnJvbU9iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kdHlwZS5mcm9tT2JqZWN0KGUpfSxvLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuJHR5cGUudG9PYmplY3QoZSx0KX0sby5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHR5cGUudG9PYmplY3QodGhpcyxuLnRvSlNPTk9wdGlvbnMpfX0sODgxMTooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1pO3ZhciBuPXIoNzIwOSk7KChpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSkuY29uc3RydWN0b3I9aSkuY2xhc3NOYW1lPSJNZXRob2QiO3ZhciBvPXIoMzI2Mik7ZnVuY3Rpb24gaShlLHQscixpLGEscyxsLGMsdSl7aWYoby5pc09iamVjdChhKT8obD1hLGE9cz12b2lkIDApOm8uaXNPYmplY3QocykmJihsPXMscz12b2lkIDApLHZvaWQgMCE9PXQmJiFvLmlzU3RyaW5nKHQpKXRocm93IFR5cGVFcnJvcigidHlwZSBtdXN0IGJlIGEgc3RyaW5nIik7aWYoIW8uaXNTdHJpbmcocikpdGhyb3cgVHlwZUVycm9yKCJyZXF1ZXN0VHlwZSBtdXN0IGJlIGEgc3RyaW5nIik7aWYoIW8uaXNTdHJpbmcoaSkpdGhyb3cgVHlwZUVycm9yKCJyZXNwb25zZVR5cGUgbXVzdCBiZSBhIHN0cmluZyIpO24uY2FsbCh0aGlzLGUsbCksdGhpcy50eXBlPXR8fCJycGMiLHRoaXMucmVxdWVzdFR5cGU9cix0aGlzLnJlcXVlc3RTdHJlYW09ISFhfHx2b2lkIDAsdGhpcy5yZXNwb25zZVR5cGU9aSx0aGlzLnJlc3BvbnNlU3RyZWFtPSEhc3x8dm9pZCAwLHRoaXMucmVzb2x2ZWRSZXF1ZXN0VHlwZT1udWxsLHRoaXMucmVzb2x2ZWRSZXNwb25zZVR5cGU9bnVsbCx0aGlzLmNvbW1lbnQ9Yyx0aGlzLnBhcnNlZE9wdGlvbnM9dX1pLmZyb21KU09OPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBpKGUsdC50eXBlLHQucmVxdWVzdFR5cGUsdC5yZXNwb25zZVR5cGUsdC5yZXF1ZXN0U3RyZWFtLHQucmVzcG9uc2VTdHJlYW0sdC5vcHRpb25zLHQuY29tbWVudCx0LnBhcnNlZE9wdGlvbnMpfSxpLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oZSl7dmFyIHQ9ISFlJiZCb29sZWFuKGUua2VlcENvbW1lbnRzKTtyZXR1cm4gby50b09iamVjdChbInR5cGUiLCJycGMiIT09dGhpcy50eXBlJiZ0aGlzLnR5cGV8fHZvaWQgMCwicmVxdWVzdFR5cGUiLHRoaXMucmVxdWVzdFR5cGUsInJlcXVlc3RTdHJlYW0iLHRoaXMucmVxdWVzdFN0cmVhbSwicmVzcG9uc2VUeXBlIix0aGlzLnJlc3BvbnNlVHlwZSwicmVzcG9uc2VTdHJlYW0iLHRoaXMucmVzcG9uc2VTdHJlYW0sIm9wdGlvbnMiLHRoaXMub3B0aW9ucywiY29tbWVudCIsdD90aGlzLmNvbW1lbnQ6dm9pZCAwLCJwYXJzZWRPcHRpb25zIix0aGlzLnBhcnNlZE9wdGlvbnNdKX0saS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc29sdmVkP3RoaXM6KHRoaXMucmVzb2x2ZWRSZXF1ZXN0VHlwZT10aGlzLnBhcmVudC5sb29rdXBUeXBlKHRoaXMucmVxdWVzdFR5cGUpLHRoaXMucmVzb2x2ZWRSZXNwb25zZVR5cGU9dGhpcy5wYXJlbnQubG9va3VwVHlwZSh0aGlzLnJlc3BvbnNlVHlwZSksbi5wcm90b3R5cGUucmVzb2x2ZS5jYWxsKHRoaXMpKX19LDg5MjM6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9cDt2YXIgbj1yKDcyMDkpOygocC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPXApLmNsYXNzTmFtZT0iTmFtZXNwYWNlIjt2YXIgbyxpLGEscz1yKDEzNDQpLGw9cigzMjYyKSxjPXIoMTQ1Nyk7ZnVuY3Rpb24gdShlLHQpe2lmKGUmJmUubGVuZ3RoKXtmb3IodmFyIHI9e30sbj0wO248ZS5sZW5ndGg7KytuKXJbZVtuXS5uYW1lXT1lW25dLnRvSlNPTih0KTtyZXR1cm4gcn19ZnVuY3Rpb24gcChlLHQpe24uY2FsbCh0aGlzLGUsdCksdGhpcy5uZXN0ZWQ9dm9pZCAwLHRoaXMuX25lc3RlZEFycmF5PW51bGx9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZS5fbmVzdGVkQXJyYXk9bnVsbCxlfXAuZnJvbUpTT049ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHAoZSx0Lm9wdGlvbnMpLmFkZEpTT04odC5uZXN0ZWQpfSxwLmFycmF5VG9KU09OPXUscC5pc1Jlc2VydmVkSWQ9ZnVuY3Rpb24oZSx0KXtpZihlKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7KytyKWlmKCJzdHJpbmciIT10eXBlb2YgZVtyXSYmZVtyXVswXTw9dCYmZVtyXVsxXT50KXJldHVybiEwO3JldHVybiExfSxwLmlzUmVzZXJ2ZWROYW1lPWZ1bmN0aW9uKGUsdCl7aWYoZSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcilpZihlW3JdPT09dClyZXR1cm4hMDtyZXR1cm4hMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLCJuZXN0ZWRBcnJheSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZXN0ZWRBcnJheXx8KHRoaXMuX25lc3RlZEFycmF5PWwudG9BcnJheSh0aGlzLm5lc3RlZCkpfX0pLHAucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihlKXtyZXR1cm4gbC50b09iamVjdChbIm9wdGlvbnMiLHRoaXMub3B0aW9ucywibmVzdGVkIix1KHRoaXMubmVzdGVkQXJyYXksZSldKX0scC5wcm90b3R5cGUuYWRkSlNPTj1mdW5jdGlvbihlKXtpZihlKWZvcih2YXIgdCxyPU9iamVjdC5rZXlzKGUpLG49MDtuPHIubGVuZ3RoOysrbil0PWVbcltuXV0sdGhpcy5hZGQoKHZvaWQgMCE9PXQuZmllbGRzP28uZnJvbUpTT046dm9pZCAwIT09dC52YWx1ZXM/YS5mcm9tSlNPTjp2b2lkIDAhPT10Lm1ldGhvZHM/aS5mcm9tSlNPTjp2b2lkIDAhPT10LmlkP3MuZnJvbUpTT046cC5mcm9tSlNPTikocltuXSx0KSk7cmV0dXJuIHRoaXN9LHAucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5uZXN0ZWQmJnRoaXMubmVzdGVkW2VdfHxudWxsfSxwLnByb3RvdHlwZS5nZXRFbnVtPWZ1bmN0aW9uKGUpe2lmKHRoaXMubmVzdGVkJiZ0aGlzLm5lc3RlZFtlXWluc3RhbmNlb2YgYSlyZXR1cm4gdGhpcy5uZXN0ZWRbZV0udmFsdWVzO3Rocm93IEVycm9yKCJubyBzdWNoIGVudW06ICIrZSl9LHAucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXtpZighKGUgaW5zdGFuY2VvZiBzJiZ2b2lkIDAhPT1lLmV4dGVuZHx8ZSBpbnN0YW5jZW9mIG98fGUgaW5zdGFuY2VvZiBjfHxlIGluc3RhbmNlb2YgYXx8ZSBpbnN0YW5jZW9mIGl8fGUgaW5zdGFuY2VvZiBwKSl0aHJvdyBUeXBlRXJyb3IoIm9iamVjdCBtdXN0IGJlIGEgdmFsaWQgbmVzdGVkIG9iamVjdCIpO2lmKHRoaXMubmVzdGVkKXt2YXIgdD10aGlzLmdldChlLm5hbWUpO2lmKHQpe2lmKCEodCBpbnN0YW5jZW9mIHAmJmUgaW5zdGFuY2VvZiBwKXx8dCBpbnN0YW5jZW9mIG98fHQgaW5zdGFuY2VvZiBpKXRocm93IEVycm9yKCJkdXBsaWNhdGUgbmFtZSAnIitlLm5hbWUrIicgaW4gIit0aGlzKTtmb3IodmFyIHI9dC5uZXN0ZWRBcnJheSxuPTA7bjxyLmxlbmd0aDsrK24pZS5hZGQocltuXSk7dGhpcy5yZW1vdmUodCksdGhpcy5uZXN0ZWR8fCh0aGlzLm5lc3RlZD17fSksZS5zZXRPcHRpb25zKHQub3B0aW9ucywhMCl9fWVsc2UgdGhpcy5uZXN0ZWQ9e307cmV0dXJuIHRoaXMubmVzdGVkW2UubmFtZV09ZSxlLm9uQWRkKHRoaXMpLGQodGhpcyl9LHAucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXtpZighKGUgaW5zdGFuY2VvZiBuKSl0aHJvdyBUeXBlRXJyb3IoIm9iamVjdCBtdXN0IGJlIGEgUmVmbGVjdGlvbk9iamVjdCIpO2lmKGUucGFyZW50IT09dGhpcyl0aHJvdyBFcnJvcihlKyIgaXMgbm90IGEgbWVtYmVyIG9mICIrdGhpcyk7cmV0dXJuIGRlbGV0ZSB0aGlzLm5lc3RlZFtlLm5hbWVdLE9iamVjdC5rZXlzKHRoaXMubmVzdGVkKS5sZW5ndGh8fCh0aGlzLm5lc3RlZD12b2lkIDApLGUub25SZW1vdmUodGhpcyksZCh0aGlzKX0scC5wcm90b3R5cGUuZGVmaW5lPWZ1bmN0aW9uKGUsdCl7aWYobC5pc1N0cmluZyhlKSllPWUuc3BsaXQoIi4iKTtlbHNlIGlmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IFR5cGVFcnJvcigiaWxsZWdhbCBwYXRoIik7aWYoZSYmZS5sZW5ndGgmJiIiPT09ZVswXSl0aHJvdyBFcnJvcigicGF0aCBtdXN0IGJlIHJlbGF0aXZlIik7Zm9yKHZhciByPXRoaXM7ZS5sZW5ndGg+MDspe3ZhciBuPWUuc2hpZnQoKTtpZihyLm5lc3RlZCYmci5uZXN0ZWRbbl0pe2lmKCEoKHI9ci5uZXN0ZWRbbl0paW5zdGFuY2VvZiBwKSl0aHJvdyBFcnJvcigicGF0aCBjb25mbGljdHMgd2l0aCBub24tbmFtZXNwYWNlIG9iamVjdHMiKX1lbHNlIHIuYWRkKHI9bmV3IHAobikpfXJldHVybiB0JiZyLmFkZEpTT04odCkscn0scC5wcm90b3R5cGUucmVzb2x2ZUFsbD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm5lc3RlZEFycmF5LHQ9MDt0PGUubGVuZ3RoOyllW3RdaW5zdGFuY2VvZiBwP2VbdCsrXS5yZXNvbHZlQWxsKCk6ZVt0KytdLnJlc29sdmUoKTtyZXR1cm4gdGhpcy5yZXNvbHZlKCl9LHAucHJvdG90eXBlLmxvb2t1cD1mdW5jdGlvbihlLHQscil7aWYoImJvb2xlYW4iPT10eXBlb2YgdD8ocj10LHQ9dm9pZCAwKTp0JiYhQXJyYXkuaXNBcnJheSh0KSYmKHQ9W3RdKSxsLmlzU3RyaW5nKGUpJiZlLmxlbmd0aCl7aWYoIi4iPT09ZSlyZXR1cm4gdGhpcy5yb290O2U9ZS5zcGxpdCgiLiIpfWVsc2UgaWYoIWUubGVuZ3RoKXJldHVybiB0aGlzO2lmKCIiPT09ZVswXSlyZXR1cm4gdGhpcy5yb290Lmxvb2t1cChlLnNsaWNlKDEpLHQpO3ZhciBuPXRoaXMuZ2V0KGVbMF0pO2lmKG4pe2lmKDE9PT1lLmxlbmd0aCl7aWYoIXR8fHQuaW5kZXhPZihuLmNvbnN0cnVjdG9yKT4tMSlyZXR1cm4gbn1lbHNlIGlmKG4gaW5zdGFuY2VvZiBwJiYobj1uLmxvb2t1cChlLnNsaWNlKDEpLHQsITApKSlyZXR1cm4gbn1lbHNlIGZvcih2YXIgbz0wO288dGhpcy5uZXN0ZWRBcnJheS5sZW5ndGg7KytvKWlmKHRoaXMuX25lc3RlZEFycmF5W29daW5zdGFuY2VvZiBwJiYobj10aGlzLl9uZXN0ZWRBcnJheVtvXS5sb29rdXAoZSx0LCEwKSkpcmV0dXJuIG47cmV0dXJuIG51bGw9PT10aGlzLnBhcmVudHx8cj9udWxsOnRoaXMucGFyZW50Lmxvb2t1cChlLHQpfSxwLnByb3RvdHlwZS5sb29rdXBUeXBlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubG9va3VwKGUsW29dKTtpZighdCl0aHJvdyBFcnJvcigibm8gc3VjaCB0eXBlOiAiK2UpO3JldHVybiB0fSxwLnByb3RvdHlwZS5sb29rdXBFbnVtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubG9va3VwKGUsW2FdKTtpZighdCl0aHJvdyBFcnJvcigibm8gc3VjaCBFbnVtICciK2UrIicgaW4gIit0aGlzKTtyZXR1cm4gdH0scC5wcm90b3R5cGUubG9va3VwVHlwZU9yRW51bT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmxvb2t1cChlLFtvLGFdKTtpZighdCl0aHJvdyBFcnJvcigibm8gc3VjaCBUeXBlIG9yIEVudW0gJyIrZSsiJyBpbiAiK3RoaXMpO3JldHVybiB0fSxwLnByb3RvdHlwZS5sb29rdXBTZXJ2aWNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubG9va3VwKGUsW2ldKTtpZighdCl0aHJvdyBFcnJvcigibm8gc3VjaCBTZXJ2aWNlICciK2UrIicgaW4gIit0aGlzKTtyZXR1cm4gdH0scC5fY29uZmlndXJlPWZ1bmN0aW9uKGUsdCxyKXtvPWUsaT10LGE9cn19LDcyMDk6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9aSxpLmNsYXNzTmFtZT0iUmVmbGVjdGlvbk9iamVjdCI7dmFyIG4sbz1yKDMyNjIpO2Z1bmN0aW9uIGkoZSx0KXtpZighby5pc1N0cmluZyhlKSl0aHJvdyBUeXBlRXJyb3IoIm5hbWUgbXVzdCBiZSBhIHN0cmluZyIpO2lmKHQmJiFvLmlzT2JqZWN0KHQpKXRocm93IFR5cGVFcnJvcigib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCIpO3RoaXMub3B0aW9ucz10LHRoaXMucGFyc2VkT3B0aW9ucz1udWxsLHRoaXMubmFtZT1lLHRoaXMucGFyZW50PW51bGwsdGhpcy5yZXNvbHZlZD0hMSx0aGlzLmNvbW1lbnQ9bnVsbCx0aGlzLmZpbGVuYW1lPW51bGx9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaS5wcm90b3R5cGUse3Jvb3Q6e2dldDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzO251bGwhPT1lLnBhcmVudDspZT1lLnBhcmVudDtyZXR1cm4gZX19LGZ1bGxOYW1lOntnZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W3RoaXMubmFtZV0sdD10aGlzLnBhcmVudDt0OyllLnVuc2hpZnQodC5uYW1lKSx0PXQucGFyZW50O3JldHVybiBlLmpvaW4oIi4iKX19fSksaS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoKX0saS5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50IT09ZSYmdGhpcy5wYXJlbnQucmVtb3ZlKHRoaXMpLHRoaXMucGFyZW50PWUsdGhpcy5yZXNvbHZlZD0hMTt2YXIgdD1lLnJvb3Q7dCBpbnN0YW5jZW9mIG4mJnQuX2hhbmRsZUFkZCh0aGlzKX0saS5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yb290O3QgaW5zdGFuY2VvZiBuJiZ0Ll9oYW5kbGVSZW1vdmUodGhpcyksdGhpcy5wYXJlbnQ9bnVsbCx0aGlzLnJlc29sdmVkPSExfSxpLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzb2x2ZWR8fHRoaXMucm9vdCBpbnN0YW5jZW9mIG4mJih0aGlzLnJlc29sdmVkPSEwKSx0aGlzfSxpLnByb3RvdHlwZS5nZXRPcHRpb249ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zKXJldHVybiB0aGlzLm9wdGlvbnNbZV19LGkucHJvdG90eXBlLnNldE9wdGlvbj1mdW5jdGlvbihlLHQscil7cmV0dXJuIHImJnRoaXMub3B0aW9ucyYmdm9pZCAwIT09dGhpcy5vcHRpb25zW2VdfHwoKHRoaXMub3B0aW9uc3x8KHRoaXMub3B0aW9ucz17fSkpW2VdPXQpLHRoaXN9LGkucHJvdG90eXBlLnNldFBhcnNlZE9wdGlvbj1mdW5jdGlvbihlLHQscil7dGhpcy5wYXJzZWRPcHRpb25zfHwodGhpcy5wYXJzZWRPcHRpb25zPVtdKTt2YXIgbj10aGlzLnBhcnNlZE9wdGlvbnM7aWYocil7dmFyIGk9bi5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9KSk7aWYoaSl7dmFyIGE9aVtlXTtvLnNldFByb3BlcnR5KGEscix0KX1lbHNlKGk9e30pW2VdPW8uc2V0UHJvcGVydHkoe30scix0KSxuLnB1c2goaSl9ZWxzZXt2YXIgcz17fTtzW2VdPXQsbi5wdXNoKHMpfXJldHVybiB0aGlzfSxpLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKGUsdCl7aWYoZSlmb3IodmFyIHI9T2JqZWN0LmtleXMoZSksbj0wO248ci5sZW5ndGg7KytuKXRoaXMuc2V0T3B0aW9uKHJbbl0sZVtyW25dXSx0KTtyZXR1cm4gdGhpc30saS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnN0cnVjdG9yLmNsYXNzTmFtZSx0PXRoaXMuZnVsbE5hbWU7cmV0dXJuIHQubGVuZ3RoP2UrIiAiK3Q6ZX0saS5fY29uZmlndXJlPWZ1bmN0aW9uKGUpe249ZX19LDE0NTc6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9YTt2YXIgbj1yKDcyMDkpOygoYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEpLmNsYXNzTmFtZT0iT25lT2YiO3ZhciBvPXIoMTM0NCksaT1yKDMyNjIpO2Z1bmN0aW9uIGEoZSx0LHIsbyl7aWYoQXJyYXkuaXNBcnJheSh0KXx8KHI9dCx0PXZvaWQgMCksbi5jYWxsKHRoaXMsZSxyKSx2b2lkIDAhPT10JiYhQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBUeXBlRXJyb3IoImZpZWxkTmFtZXMgbXVzdCBiZSBhbiBBcnJheSIpO3RoaXMub25lb2Y9dHx8W10sdGhpcy5maWVsZHNBcnJheT1bXSx0aGlzLmNvbW1lbnQ9b31mdW5jdGlvbiBzKGUpe2lmKGUucGFyZW50KWZvcih2YXIgdD0wO3Q8ZS5maWVsZHNBcnJheS5sZW5ndGg7Kyt0KWUuZmllbGRzQXJyYXlbdF0ucGFyZW50fHxlLnBhcmVudC5hZGQoZS5maWVsZHNBcnJheVt0XSl9YS5mcm9tSlNPTj1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgYShlLHQub25lb2YsdC5vcHRpb25zLHQuY29tbWVudCl9LGEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihlKXt2YXIgdD0hIWUmJkJvb2xlYW4oZS5rZWVwQ29tbWVudHMpO3JldHVybiBpLnRvT2JqZWN0KFsib3B0aW9ucyIsdGhpcy5vcHRpb25zLCJvbmVvZiIsdGhpcy5vbmVvZiwiY29tbWVudCIsdD90aGlzLmNvbW1lbnQ6dm9pZCAwXSl9LGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXtpZighKGUgaW5zdGFuY2VvZiBvKSl0aHJvdyBUeXBlRXJyb3IoImZpZWxkIG11c3QgYmUgYSBGaWVsZCIpO3JldHVybiBlLnBhcmVudCYmZS5wYXJlbnQhPT10aGlzLnBhcmVudCYmZS5wYXJlbnQucmVtb3ZlKGUpLHRoaXMub25lb2YucHVzaChlLm5hbWUpLHRoaXMuZmllbGRzQXJyYXkucHVzaChlKSxlLnBhcnRPZj10aGlzLHModGhpcyksdGhpc30sYS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIG8pKXRocm93IFR5cGVFcnJvcigiZmllbGQgbXVzdCBiZSBhIEZpZWxkIik7dmFyIHQ9dGhpcy5maWVsZHNBcnJheS5pbmRleE9mKGUpO2lmKHQ8MCl0aHJvdyBFcnJvcihlKyIgaXMgbm90IGEgbWVtYmVyIG9mICIrdGhpcyk7cmV0dXJuIHRoaXMuZmllbGRzQXJyYXkuc3BsaWNlKHQsMSksKHQ9dGhpcy5vbmVvZi5pbmRleE9mKGUubmFtZSkpPi0xJiZ0aGlzLm9uZW9mLnNwbGljZSh0LDEpLGUucGFydE9mPW51bGwsdGhpc30sYS5wcm90b3R5cGUub25BZGQ9ZnVuY3Rpb24oZSl7bi5wcm90b3R5cGUub25BZGQuY2FsbCh0aGlzLGUpO2Zvcih2YXIgdD0wO3Q8dGhpcy5vbmVvZi5sZW5ndGg7Kyt0KXt2YXIgcj1lLmdldCh0aGlzLm9uZW9mW3RdKTtyJiYhci5wYXJ0T2YmJihyLnBhcnRPZj10aGlzLHRoaXMuZmllbGRzQXJyYXkucHVzaChyKSl9cyh0aGlzKX0sYS5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9MDtyPHRoaXMuZmllbGRzQXJyYXkubGVuZ3RoOysrcikodD10aGlzLmZpZWxkc0FycmF5W3JdKS5wYXJlbnQmJnQucGFyZW50LnJlbW92ZSh0KTtuLnByb3RvdHlwZS5vblJlbW92ZS5jYWxsKHRoaXMsZSl9LGEuZD1mdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDspZVt0XT1hcmd1bWVudHNbdCsrXTtyZXR1cm4gZnVuY3Rpb24odCxyKXtpLmRlY29yYXRlVHlwZSh0LmNvbnN0cnVjdG9yKS5hZGQobmV3IGEocixlKSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7Z2V0Omkub25lT2ZHZXR0ZXIoZSksc2V0Omkub25lT2ZTZXR0ZXIoZSl9KX19fSw0ODYzOihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPUEsQS5maWxlbmFtZT1udWxsLEEuZGVmYXVsdHM9e2tlZXBDYXNlOiExfTt2YXIgbj1yKDUyNyksbz1yKDUzMzApLGk9cig3ODgyKSxhPXIoMTM0NCkscz1yKDgyNTIpLGw9cigxNDU3KSxjPXIoNTY0MyksdT1yKDk2ODcpLHA9cig4ODExKSxkPXIoMzYxKSxmPXIoMzI2MiksaD0vXlsxLTldWzAtOV0qJC8sZz0vXi0/WzEtOV1bMC05XSokLyx5PS9eMFt4XVswLTlhLWZBLUZdKyQvLG09L14tPzBbeF1bMC05YS1mQS1GXSskLyxiPS9eMFswLTddKyQvLE89L14tPzBbMC03XSskLyxUPS9eKD8hW2VFXSlbMC05XSooPzpcLlswLTldKik/KD86W2VFXVsrLV0/WzAtOV0rKT8kLyx2PS9eW2EtekEtWl9dW2EtekEtWl8wLTldKiQvLHc9L14oPzpcLj9bYS16QS1aX11bYS16QS1aXzAtOV0qKSg/OlwuW2EtekEtWl9dW2EtekEtWl8wLTldKikqJC8saj0vXig/OlwuW2EtekEtWl9dW2EtekEtWl8wLTldKikrJC87ZnVuY3Rpb24gQShlLHQscil7dCBpbnN0YW5jZW9mIG98fChyPXQsdD1uZXcgbykscnx8KHI9QS5kZWZhdWx0cyk7dmFyIFAsQyxTLEUsayx4PXIucHJlZmVyVHJhaWxpbmdDb21tZW50fHwhMSxOPW4oZSxyLmFsdGVybmF0ZUNvbW1lbnRNb2RlfHwhMSksRD1OLm5leHQsXz1OLnB1c2gscT1OLnBlZWssTD1OLnNraXAsUj1OLmNtbnQsQj0hMCxNPSExLEk9dCxVPXIua2VlcENhc2U/ZnVuY3Rpb24oZSl7cmV0dXJuIGV9OmYuY2FtZWxDYXNlO2Z1bmN0aW9uIEYoZSx0LHIpe3ZhciBuPUEuZmlsZW5hbWU7cmV0dXJuIHJ8fChBLmZpbGVuYW1lPW51bGwpLEVycm9yKCJpbGxlZ2FsICIrKHR8fCJ0b2tlbiIpKyIgJyIrZSsiJyAoIisobj9uKyIsICI6IiIpKyJsaW5lICIrTi5saW5lKyIpIil9ZnVuY3Rpb24gSygpe3ZhciBlLHQ9W107ZG97aWYoJyInIT09KGU9RCgpKSYmIiciIT09ZSl0aHJvdyBGKGUpO3QucHVzaChEKCkpLEwoZSksZT1xKCl9d2hpbGUoJyInPT09ZXx8IiciPT09ZSk7cmV0dXJuIHQuam9pbigiIil9ZnVuY3Rpb24gUShlKXt2YXIgdD1EKCk7c3dpdGNoKHQpe2Nhc2UiJyI6Y2FzZSciJzpyZXR1cm4gXyh0KSxLKCk7Y2FzZSJ0cnVlIjpjYXNlIlRSVUUiOnJldHVybiEwO2Nhc2UiZmFsc2UiOmNhc2UiRkFMU0UiOnJldHVybiExfXRyeXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9MTtzd2l0Y2goIi0iPT09ZS5jaGFyQXQoMCkmJih0PS0xLGU9ZS5zdWJzdHJpbmcoMSkpLGUpe2Nhc2UiaW5mIjpjYXNlIklORiI6Y2FzZSJJbmYiOnJldHVybiB0KigxLzApO2Nhc2UibmFuIjpjYXNlIk5BTiI6Y2FzZSJOYW4iOmNhc2UiTmFOIjpyZXR1cm4gTmFOO2Nhc2UiMCI6cmV0dXJuIDB9aWYoaC50ZXN0KGUpKXJldHVybiB0KnBhcnNlSW50KGUsMTApO2lmKHkudGVzdChlKSlyZXR1cm4gdCpwYXJzZUludChlLDE2KTtpZihiLnRlc3QoZSkpcmV0dXJuIHQqcGFyc2VJbnQoZSw4KTtpZihULnRlc3QoZSkpcmV0dXJuIHQqcGFyc2VGbG9hdChlKTt0aHJvdyBGKGUsIm51bWJlciIsITApfSh0KX1jYXRjaChyKXtpZihlJiZ3LnRlc3QodCkpcmV0dXJuIHQ7dGhyb3cgRih0LCJ2YWx1ZSIpfX1mdW5jdGlvbiBHKGUsdCl7dmFyIHIsbjtkb3shdHx8JyInIT09KHI9cSgpKSYmIiciIT09cj9lLnB1c2goW249SihEKCkpLEwoInRvIiwhMCk/SihEKCkpOm5dKTplLnB1c2goSygpKX13aGlsZShMKCIsIiwhMCkpO0woIjsiKX1mdW5jdGlvbiBKKGUsdCl7c3dpdGNoKGUpe2Nhc2UibWF4IjpjYXNlIk1BWCI6Y2FzZSJNYXgiOnJldHVybiA1MzY4NzA5MTE7Y2FzZSIwIjpyZXR1cm4gMH1pZighdCYmIi0iPT09ZS5jaGFyQXQoMCkpdGhyb3cgRihlLCJpZCIpO2lmKGcudGVzdChlKSlyZXR1cm4gcGFyc2VJbnQoZSwxMCk7aWYobS50ZXN0KGUpKXJldHVybiBwYXJzZUludChlLDE2KTtpZihPLnRlc3QoZSkpcmV0dXJuIHBhcnNlSW50KGUsOCk7dGhyb3cgRihlLCJpZCIpfWZ1bmN0aW9uICQoKXtpZih2b2lkIDAhPT1QKXRocm93IEYoInBhY2thZ2UiKTtpZihQPUQoKSwhdy50ZXN0KFApKXRocm93IEYoUCwibmFtZSIpO0k9SS5kZWZpbmUoUCksTCgiOyIpfWZ1bmN0aW9uIFYoKXt2YXIgZSx0PXEoKTtzd2l0Y2godCl7Y2FzZSJ3ZWFrIjplPVN8fChTPVtdKSxEKCk7YnJlYWs7Y2FzZSJwdWJsaWMiOkQoKTtkZWZhdWx0OmU9Q3x8KEM9W10pfXQ9SygpLEwoIjsiKSxlLnB1c2godCl9ZnVuY3Rpb24gVygpe2lmKEwoIj0iKSxFPUsoKSwhKE09InByb3RvMyI9PT1FKSYmInByb3RvMiIhPT1FKXRocm93IEYoRSwic3ludGF4Iik7TCgiOyIpfWZ1bmN0aW9uIEgoZSx0KXtzd2l0Y2godCl7Y2FzZSJvcHRpb24iOnJldHVybiBlZShlLHQpLEwoIjsiKSwhMDtjYXNlIm1lc3NhZ2UiOnJldHVybiBZKGUsdCksITA7Y2FzZSJlbnVtIjpyZXR1cm4gWChlLHQpLCEwO2Nhc2Uic2VydmljZSI6cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoIXYudGVzdCh0PUQoKSkpdGhyb3cgRih0LCJzZXJ2aWNlIG5hbWUiKTt2YXIgcj1uZXcgdSh0KTt6KHIsKGZ1bmN0aW9uKGUpe2lmKCFIKHIsZSkpe2lmKCJycGMiIT09ZSl0aHJvdyBGKGUpOyFmdW5jdGlvbihlLHQpe3ZhciByPVIoKSxuPXQ7aWYoIXYudGVzdCh0PUQoKSkpdGhyb3cgRih0LCJuYW1lIik7dmFyIG8saSxhLHMsbD10O2lmKEwoIigiKSxMKCJzdHJlYW0iLCEwKSYmKGk9ITApLCF3LnRlc3QodD1EKCkpKXRocm93IEYodCk7aWYobz10LEwoIikiKSxMKCJyZXR1cm5zIiksTCgiKCIpLEwoInN0cmVhbSIsITApJiYocz0hMCksIXcudGVzdCh0PUQoKSkpdGhyb3cgRih0KTthPXQsTCgiKSIpO3ZhciBjPW5ldyBwKGwsbixvLGEsaSxzKTtjLmNvbW1lbnQ9cix6KGMsKGZ1bmN0aW9uKGUpe2lmKCJvcHRpb24iIT09ZSl0aHJvdyBGKGUpO2VlKGMsZSksTCgiOyIpfSkpLGUuYWRkKGMpfShyLGUpfX0pKSxlLmFkZChyKX0oZSx0KSwhMDtjYXNlImV4dGVuZCI6cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoIXcudGVzdCh0PUQoKSkpdGhyb3cgRih0LCJyZWZlcmVuY2UiKTt2YXIgcj10O3oobnVsbCwoZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UicmVxdWlyZWQiOmNhc2UicmVwZWF0ZWQiOlooZSx0LHIpO2JyZWFrO2Nhc2Uib3B0aW9uYWwiOlooZSxNPyJwcm90bzNfb3B0aW9uYWwiOiJvcHRpb25hbCIscik7YnJlYWs7ZGVmYXVsdDppZighTXx8IXcudGVzdCh0KSl0aHJvdyBGKHQpO18odCksWihlLCJvcHRpb25hbCIscil9fSkpfShlLHQpLCEwfXJldHVybiExfWZ1bmN0aW9uIHooZSx0LHIpe3ZhciBuPU4ubGluZTtpZihlJiYoInN0cmluZyIhPXR5cGVvZiBlLmNvbW1lbnQmJihlLmNvbW1lbnQ9UigpKSxlLmZpbGVuYW1lPUEuZmlsZW5hbWUpLEwoInsiLCEwKSl7Zm9yKHZhciBvOyJ9IiE9PShvPUQoKSk7KXQobyk7TCgiOyIsITApfWVsc2UgciYmcigpLEwoIjsiKSxlJiYoInN0cmluZyIhPXR5cGVvZiBlLmNvbW1lbnR8fHgpJiYoZS5jb21tZW50PVIobil8fGUuY29tbWVudCl9ZnVuY3Rpb24gWShlLHQpe2lmKCF2LnRlc3QodD1EKCkpKXRocm93IEYodCwidHlwZSBuYW1lIik7dmFyIHI9bmV3IGkodCk7eihyLChmdW5jdGlvbihlKXtpZighSChyLGUpKXN3aXRjaChlKXtjYXNlIm1hcCI6IWZ1bmN0aW9uKGUpe0woIjwiKTt2YXIgdD1EKCk7aWYodm9pZCAwPT09ZC5tYXBLZXlbdF0pdGhyb3cgRih0LCJ0eXBlIik7TCgiLCIpO3ZhciByPUQoKTtpZighdy50ZXN0KHIpKXRocm93IEYociwidHlwZSIpO0woIj4iKTt2YXIgbj1EKCk7aWYoIXYudGVzdChuKSl0aHJvdyBGKG4sIm5hbWUiKTtMKCI9Iik7dmFyIG89bmV3IHMoVShuKSxKKEQoKSksdCxyKTt6KG8sKGZ1bmN0aW9uKGUpe2lmKCJvcHRpb24iIT09ZSl0aHJvdyBGKGUpO2VlKG8sZSksTCgiOyIpfSksKGZ1bmN0aW9uKCl7bmUobyl9KSksZS5hZGQobyl9KHIpO2JyZWFrO2Nhc2UicmVxdWlyZWQiOmNhc2UicmVwZWF0ZWQiOloocixlKTticmVhaztjYXNlIm9wdGlvbmFsIjpaKHIsTT8icHJvdG8zX29wdGlvbmFsIjoib3B0aW9uYWwiKTticmVhaztjYXNlIm9uZW9mIjohZnVuY3Rpb24oZSx0KXtpZighdi50ZXN0KHQ9RCgpKSl0aHJvdyBGKHQsIm5hbWUiKTt2YXIgcj1uZXcgbChVKHQpKTt6KHIsKGZ1bmN0aW9uKGUpeyJvcHRpb24iPT09ZT8oZWUocixlKSxMKCI7IikpOihfKGUpLFoociwib3B0aW9uYWwiKSl9KSksZS5hZGQocil9KHIsZSk7YnJlYWs7Y2FzZSJleHRlbnNpb25zIjpHKHIuZXh0ZW5zaW9uc3x8KHIuZXh0ZW5zaW9ucz1bXSkpO2JyZWFrO2Nhc2UicmVzZXJ2ZWQiOkcoci5yZXNlcnZlZHx8KHIucmVzZXJ2ZWQ9W10pLCEwKTticmVhaztkZWZhdWx0OmlmKCFNfHwhdy50ZXN0KGUpKXRocm93IEYoZSk7XyhlKSxaKHIsIm9wdGlvbmFsIil9fSkpLGUuYWRkKHIpfWZ1bmN0aW9uIFooZSx0LHIpe3ZhciBuPUQoKTtpZigiZ3JvdXAiIT09bil7Zm9yKDtuLmVuZHNXaXRoKCIuIil8fHEoKS5zdGFydHNXaXRoKCIuIik7KW4rPUQoKTtpZighdy50ZXN0KG4pKXRocm93IEYobiwidHlwZSIpO3ZhciBvPUQoKTtpZighdi50ZXN0KG8pKXRocm93IEYobywibmFtZSIpO289VShvKSxMKCI9Iik7dmFyIHM9bmV3IGEobyxKKEQoKSksbix0LHIpO2lmKHoocywoZnVuY3Rpb24oZSl7aWYoIm9wdGlvbiIhPT1lKXRocm93IEYoZSk7ZWUocyxlKSxMKCI7Iil9KSwoZnVuY3Rpb24oKXtuZShzKX0pKSwicHJvdG8zX29wdGlvbmFsIj09PXQpe3ZhciBjPW5ldyBsKCJfIitvKTtzLnNldE9wdGlvbigicHJvdG8zX29wdGlvbmFsIiwhMCksYy5hZGQocyksZS5hZGQoYyl9ZWxzZSBlLmFkZChzKTtNfHwhcy5yZXBlYXRlZHx8dm9pZCAwPT09ZC5wYWNrZWRbbl0mJnZvaWQgMCE9PWQuYmFzaWNbbl18fHMuc2V0T3B0aW9uKCJwYWNrZWQiLCExLCEwKX1lbHNlIWZ1bmN0aW9uKGUsdCl7dmFyIHI9RCgpO2lmKCF2LnRlc3QocikpdGhyb3cgRihyLCJuYW1lIik7dmFyIG49Zi5sY0ZpcnN0KHIpO3I9PT1uJiYocj1mLnVjRmlyc3QocikpLEwoIj0iKTt2YXIgbz1KKEQoKSkscz1uZXcgaShyKTtzLmdyb3VwPSEwO3ZhciBsPW5ldyBhKG4sbyxyLHQpO2wuZmlsZW5hbWU9QS5maWxlbmFtZSx6KHMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIm9wdGlvbiI6ZWUocyxlKSxMKCI7Iik7YnJlYWs7Y2FzZSJyZXF1aXJlZCI6Y2FzZSJyZXBlYXRlZCI6WihzLGUpO2JyZWFrO2Nhc2Uib3B0aW9uYWwiOloocyxNPyJwcm90bzNfb3B0aW9uYWwiOiJvcHRpb25hbCIpO2JyZWFrO2Nhc2UibWVzc2FnZSI6WShzLGUpO2JyZWFrO2Nhc2UiZW51bSI6WChzLGUpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRihlKX19KSksZS5hZGQocykuYWRkKGwpfShlLHQpfWZ1bmN0aW9uIFgoZSx0KXtpZighdi50ZXN0KHQ9RCgpKSl0aHJvdyBGKHQsIm5hbWUiKTt2YXIgcj1uZXcgYyh0KTt6KHIsKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIm9wdGlvbiI6ZWUocixlKSxMKCI7Iik7YnJlYWs7Y2FzZSJyZXNlcnZlZCI6RyhyLnJlc2VydmVkfHwoci5yZXNlcnZlZD1bXSksITApO2JyZWFrO2RlZmF1bHQ6IWZ1bmN0aW9uKGUsdCl7aWYoIXYudGVzdCh0KSl0aHJvdyBGKHQsIm5hbWUiKTtMKCI9Iik7dmFyIHI9SihEKCksITApLG49e29wdGlvbnM6dm9pZCAwLHNldE9wdGlvbjpmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXRoaXMub3B0aW9ucyYmKHRoaXMub3B0aW9ucz17fSksdGhpcy5vcHRpb25zW2VdPXR9fTt6KG4sKGZ1bmN0aW9uKGUpe2lmKCJvcHRpb24iIT09ZSl0aHJvdyBGKGUpO2VlKG4sZSksTCgiOyIpfSksKGZ1bmN0aW9uKCl7bmUobil9KSksZS5hZGQodCxyLG4uY29tbWVudCxuLm9wdGlvbnMpfShyLGUpfX0pKSxlLmFkZChyKX1mdW5jdGlvbiBlZShlLHQpe3ZhciByPUwoIigiLCEwKTtpZighdy50ZXN0KHQ9RCgpKSl0aHJvdyBGKHQsIm5hbWUiKTt2YXIgbixvPXQsaT1vO3ImJihMKCIpIiksaT1vPSIoIitvKyIpIix0PXEoKSxqLnRlc3QodCkmJihuPXQuc2xpY2UoMSksbys9dCxEKCkpKSxMKCI9IiksZnVuY3Rpb24oZSx0LHIsbil7ZS5zZXRQYXJzZWRPcHRpb24mJmUuc2V0UGFyc2VkT3B0aW9uKHQscixuKX0oZSxpLHRlKGUsbyksbil9ZnVuY3Rpb24gdGUoZSx0KXtpZihMKCJ7IiwhMCkpe2Zvcih2YXIgcj17fTshTCgifSIsITApOyl7aWYoIXYudGVzdChrPUQoKSkpdGhyb3cgRihrLCJuYW1lIik7aWYobnVsbD09PWspdGhyb3cgRihrLCJlbmQgb2YgaW5wdXQiKTt2YXIgbixvPWs7aWYoTCgiOiIsITApLCJ7Ij09PXEoKSluPXRlKGUsdCsiLiIrayk7ZWxzZSBpZigiWyI9PT1xKCkpe3ZhciBpO2lmKG49W10sTCgiWyIsITApKXtkb3tpPVEoITApLG4ucHVzaChpKX13aGlsZShMKCIsIiwhMCkpO0woIl0iKSx2b2lkIDAhPT1pJiZyZShlLHQrIi4iK2ssaSl9fWVsc2Ugbj1RKCEwKSxyZShlLHQrIi4iK2ssbik7dmFyIGE9cltvXTthJiYobj1bXS5jb25jYXQoYSkuY29uY2F0KG4pKSxyW29dPW4sTCgiLCIsITApLEwoIjsiLCEwKX1yZXR1cm4gcn12YXIgcz1RKCEwKTtyZXR1cm4gcmUoZSx0LHMpLHN9ZnVuY3Rpb24gcmUoZSx0LHIpe2Uuc2V0T3B0aW9uJiZlLnNldE9wdGlvbih0LHIpfWZ1bmN0aW9uIG5lKGUpe2lmKEwoIlsiLCEwKSl7ZG97ZWUoZSwib3B0aW9uIil9d2hpbGUoTCgiLCIsITApKTtMKCJdIil9cmV0dXJuIGV9Zm9yKDtudWxsIT09KGs9RCgpKTspc3dpdGNoKGspe2Nhc2UicGFja2FnZSI6aWYoIUIpdGhyb3cgRihrKTskKCk7YnJlYWs7Y2FzZSJpbXBvcnQiOmlmKCFCKXRocm93IEYoayk7VigpO2JyZWFrO2Nhc2Uic3ludGF4IjppZighQil0aHJvdyBGKGspO1coKTticmVhaztjYXNlIm9wdGlvbiI6ZWUoSSxrKSxMKCI7Iik7YnJlYWs7ZGVmYXVsdDppZihIKEksaykpe0I9ITE7Y29udGludWV9dGhyb3cgRihrKX1yZXR1cm4gQS5maWxlbmFtZT1udWxsLHtwYWNrYWdlOlAsaW1wb3J0czpDLHdlYWtJbXBvcnRzOlMsc3ludGF4OkUscm9vdDp0fX19LDYyMzc6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9bDt2YXIgbixvPXIoMzYxMCksaT1vLkxvbmdCaXRzLGE9by51dGY4O2Z1bmN0aW9uIHMoZSx0KXtyZXR1cm4gUmFuZ2VFcnJvcigiaW5kZXggb3V0IG9mIHJhbmdlOiAiK2UucG9zKyIgKyAiKyh0fHwxKSsiID4gIitlLmxlbil9ZnVuY3Rpb24gbChlKXt0aGlzLmJ1Zj1lLHRoaXMucG9zPTAsdGhpcy5sZW49ZS5sZW5ndGh9dmFyIGMsdT0idW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXk/ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIG5ldyBsKGUpO3Rocm93IEVycm9yKCJpbGxlZ2FsIGJ1ZmZlciIpfTpmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBuZXcgbChlKTt0aHJvdyBFcnJvcigiaWxsZWdhbCBidWZmZXIiKX0scD1mdW5jdGlvbigpe3JldHVybiBvLkJ1ZmZlcj9mdW5jdGlvbihlKXtyZXR1cm4obC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG8uQnVmZmVyLmlzQnVmZmVyKGUpP25ldyBuKGUpOnUoZSl9KShlKX06dX07ZnVuY3Rpb24gZCgpe3ZhciBlPW5ldyBpKDAsMCksdD0wO2lmKCEodGhpcy5sZW4tdGhpcy5wb3M+NCkpe2Zvcig7dDwzOysrdCl7aWYodGhpcy5wb3M+PXRoaXMubGVuKXRocm93IHModGhpcyk7aWYoZS5sbz0oZS5sb3woMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDcqdCk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gZX1yZXR1cm4gZS5sbz0oZS5sb3woMTI3JnRoaXMuYnVmW3RoaXMucG9zKytdKTw8Nyp0KT4+PjAsZX1mb3IoO3Q8NDsrK3QpaWYoZS5sbz0oZS5sb3woMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDcqdCk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gZTtpZihlLmxvPShlLmxvfCgxMjcmdGhpcy5idWZbdGhpcy5wb3NdKTw8MjgpPj4+MCxlLmhpPShlLmhpfCgxMjcmdGhpcy5idWZbdGhpcy5wb3NdKT4+NCk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gZTtpZih0PTAsdGhpcy5sZW4tdGhpcy5wb3M+NCl7Zm9yKDt0PDU7Kyt0KWlmKGUuaGk9KGUuaGl8KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDw3KnQrMyk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gZX1lbHNlIGZvcig7dDw1OysrdCl7aWYodGhpcy5wb3M+PXRoaXMubGVuKXRocm93IHModGhpcyk7aWYoZS5oaT0oZS5oaXwoMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDcqdCszKT4+PjAsdGhpcy5idWZbdGhpcy5wb3MrK108MTI4KXJldHVybiBlfXRocm93IEVycm9yKCJpbnZhbGlkIHZhcmludCBlbmNvZGluZyIpfWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4oZVt0LTRdfGVbdC0zXTw8OHxlW3QtMl08PDE2fGVbdC0xXTw8MjQpPj4+MH1mdW5jdGlvbiBoKCl7aWYodGhpcy5wb3MrOD50aGlzLmxlbil0aHJvdyBzKHRoaXMsOCk7cmV0dXJuIG5ldyBpKGYodGhpcy5idWYsdGhpcy5wb3MrPTQpLGYodGhpcy5idWYsdGhpcy5wb3MrPTQpKX1sLmNyZWF0ZT1wKCksbC5wcm90b3R5cGUuX3NsaWNlPW8uQXJyYXkucHJvdG90eXBlLnN1YmFycmF5fHxvLkFycmF5LnByb3RvdHlwZS5zbGljZSxsLnByb3RvdHlwZS51aW50MzI9KGM9NDI5NDk2NzI5NSxmdW5jdGlvbigpe2lmKGM9KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIGM7aWYoYz0oY3woMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDcpPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIGM7aWYoYz0oY3woMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDE0KT4+PjAsdGhpcy5idWZbdGhpcy5wb3MrK108MTI4KXJldHVybiBjO2lmKGM9KGN8KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDwyMSk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gYztpZihjPShjfCgxNSZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDwyOCk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gYztpZigodGhpcy5wb3MrPTUpPnRoaXMubGVuKXRocm93IHRoaXMucG9zPXRoaXMubGVuLHModGhpcywxMCk7cmV0dXJuIGN9KSxsLnByb3RvdHlwZS5pbnQzMj1mdW5jdGlvbigpe3JldHVybiAwfHRoaXMudWludDMyKCl9LGwucHJvdG90eXBlLnNpbnQzMj1mdW5jdGlvbigpe3ZhciBlPXRoaXMudWludDMyKCk7cmV0dXJuIGU+Pj4xXi0oMSZlKX0sbC5wcm90b3R5cGUuYm9vbD1mdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy51aW50MzIoKX0sbC5wcm90b3R5cGUuZml4ZWQzMj1mdW5jdGlvbigpe2lmKHRoaXMucG9zKzQ+dGhpcy5sZW4pdGhyb3cgcyh0aGlzLDQpO3JldHVybiBmKHRoaXMuYnVmLHRoaXMucG9zKz00KX0sbC5wcm90b3R5cGUuc2ZpeGVkMzI9ZnVuY3Rpb24oKXtpZih0aGlzLnBvcys0PnRoaXMubGVuKXRocm93IHModGhpcyw0KTtyZXR1cm4gMHxmKHRoaXMuYnVmLHRoaXMucG9zKz00KX0sbC5wcm90b3R5cGUuZmxvYXQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBvcys0PnRoaXMubGVuKXRocm93IHModGhpcyw0KTt2YXIgZT1vLmZsb2F0LnJlYWRGbG9hdExFKHRoaXMuYnVmLHRoaXMucG9zKTtyZXR1cm4gdGhpcy5wb3MrPTQsZX0sbC5wcm90b3R5cGUuZG91YmxlPWZ1bmN0aW9uKCl7aWYodGhpcy5wb3MrOD50aGlzLmxlbil0aHJvdyBzKHRoaXMsNCk7dmFyIGU9by5mbG9hdC5yZWFkRG91YmxlTEUodGhpcy5idWYsdGhpcy5wb3MpO3JldHVybiB0aGlzLnBvcys9OCxlfSxsLnByb3RvdHlwZS5ieXRlcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMudWludDMyKCksdD10aGlzLnBvcyxyPXRoaXMucG9zK2U7aWYocj50aGlzLmxlbil0aHJvdyBzKHRoaXMsZSk7aWYodGhpcy5wb3MrPWUsQXJyYXkuaXNBcnJheSh0aGlzLmJ1ZikpcmV0dXJuIHRoaXMuYnVmLnNsaWNlKHQscik7aWYodD09PXIpe3ZhciBuPW8uQnVmZmVyO3JldHVybiBuP24uYWxsb2MoMCk6bmV3IHRoaXMuYnVmLmNvbnN0cnVjdG9yKDApfXJldHVybiB0aGlzLl9zbGljZS5jYWxsKHRoaXMuYnVmLHQscil9LGwucHJvdG90eXBlLnN0cmluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnl0ZXMoKTtyZXR1cm4gYS5yZWFkKGUsMCxlLmxlbmd0aCl9LGwucHJvdG90eXBlLnNraXA9ZnVuY3Rpb24oZSl7aWYoIm51bWJlciI9PXR5cGVvZiBlKXtpZih0aGlzLnBvcytlPnRoaXMubGVuKXRocm93IHModGhpcyxlKTt0aGlzLnBvcys9ZX1lbHNlIGRve2lmKHRoaXMucG9zPj10aGlzLmxlbil0aHJvdyBzKHRoaXMpfXdoaWxlKDEyOCZ0aGlzLmJ1Zlt0aGlzLnBvcysrXSk7cmV0dXJuIHRoaXN9LGwucHJvdG90eXBlLnNraXBUeXBlPWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIDA6dGhpcy5za2lwKCk7YnJlYWs7Y2FzZSAxOnRoaXMuc2tpcCg4KTticmVhaztjYXNlIDI6dGhpcy5za2lwKHRoaXMudWludDMyKCkpO2JyZWFrO2Nhc2UgMzpmb3IoOzQhPShlPTcmdGhpcy51aW50MzIoKSk7KXRoaXMuc2tpcFR5cGUoZSk7YnJlYWs7Y2FzZSA1OnRoaXMuc2tpcCg0KTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJpbnZhbGlkIHdpcmUgdHlwZSAiK2UrIiBhdCBvZmZzZXQgIit0aGlzLnBvcyl9cmV0dXJuIHRoaXN9LGwuX2NvbmZpZ3VyZT1mdW5jdGlvbihlKXtuPWUsbC5jcmVhdGU9cCgpLG4uX2NvbmZpZ3VyZSgpO3ZhciB0PW8uTG9uZz8idG9Mb25nIjoidG9OdW1iZXIiO28ubWVyZ2UobC5wcm90b3R5cGUse2ludDY0OmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKVt0XSghMSl9LHVpbnQ2NDpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcylbdF0oITApfSxzaW50NjQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpLnp6RGVjb2RlKClbdF0oITEpfSxmaXhlZDY0OmZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbCh0aGlzKVt0XSghMCl9LHNmaXhlZDY0OmZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbCh0aGlzKVt0XSghMSl9fSl9fSwzMTU4OihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWk7dmFyIG49cig2MjM3KTsoaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWk7dmFyIG89cigzNjEwKTtmdW5jdGlvbiBpKGUpe24uY2FsbCh0aGlzLGUpfWkuX2NvbmZpZ3VyZT1mdW5jdGlvbigpe28uQnVmZmVyJiYoaS5wcm90b3R5cGUuX3NsaWNlPW8uQnVmZmVyLnByb3RvdHlwZS5zbGljZSl9LGkucHJvdG90eXBlLnN0cmluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXMudWludDMyKCk7cmV0dXJuIHRoaXMuYnVmLnV0ZjhTbGljZT90aGlzLmJ1Zi51dGY4U2xpY2UodGhpcy5wb3MsdGhpcy5wb3M9TWF0aC5taW4odGhpcy5wb3MrZSx0aGlzLmxlbikpOnRoaXMuYnVmLnRvU3RyaW5nKCJ1dGYtOCIsdGhpcy5wb3MsdGhpcy5wb3M9TWF0aC5taW4odGhpcy5wb3MrZSx0aGlzLmxlbikpfSxpLl9jb25maWd1cmUoKX0sNTMzMDooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1wO3ZhciBuPXIoODkyMyk7KChwLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSkuY29uc3RydWN0b3I9cCkuY2xhc3NOYW1lPSJSb290Ijt2YXIgbyxpLGEscz1yKDEzNDQpLGw9cig1NjQzKSxjPXIoMTQ1NyksdT1yKDMyNjIpO2Z1bmN0aW9uIHAoZSl7bi5jYWxsKHRoaXMsIiIsZSksdGhpcy5kZWZlcnJlZD1bXSx0aGlzLmZpbGVzPVtdfWZ1bmN0aW9uIGQoKXt9cC5mcm9tSlNPTj1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD1uZXcgcCksZS5vcHRpb25zJiZ0LnNldE9wdGlvbnMoZS5vcHRpb25zKSx0LmFkZEpTT04oZS5uZXN0ZWQpfSxwLnByb3RvdHlwZS5yZXNvbHZlUGF0aD11LnBhdGgucmVzb2x2ZSxwLnByb3RvdHlwZS5mZXRjaD11LmZldGNoLHAucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24gZSh0LHIsbil7ImZ1bmN0aW9uIj09dHlwZW9mIHImJihuPXIscj12b2lkIDApO3ZhciBvPXRoaXM7aWYoIW4pcmV0dXJuIHUuYXNQcm9taXNlKGUsbyx0LHIpO3ZhciBzPW49PT1kO2Z1bmN0aW9uIGwoZSx0KXtpZihuKXt2YXIgcj1uO2lmKG49bnVsbCxzKXRocm93IGU7cihlLHQpfX1mdW5jdGlvbiBjKGUpe3ZhciB0PWUubGFzdEluZGV4T2YoImdvb2dsZS9wcm90b2J1Zi8iKTtpZih0Pi0xKXt2YXIgcj1lLnN1YnN0cmluZyh0KTtpZihyIGluIGEpcmV0dXJuIHJ9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcChlLHQpe3RyeXtpZih1LmlzU3RyaW5nKHQpJiYieyI9PT10LmNoYXJBdCgwKSYmKHQ9SlNPTi5wYXJzZSh0KSksdS5pc1N0cmluZyh0KSl7aS5maWxlbmFtZT1lO3ZhciBuLGE9aSh0LG8scikscD0wO2lmKGEuaW1wb3J0cylmb3IoO3A8YS5pbXBvcnRzLmxlbmd0aDsrK3ApKG49YyhhLmltcG9ydHNbcF0pfHxvLnJlc29sdmVQYXRoKGUsYS5pbXBvcnRzW3BdKSkmJmYobik7aWYoYS53ZWFrSW1wb3J0cylmb3IocD0wO3A8YS53ZWFrSW1wb3J0cy5sZW5ndGg7KytwKShuPWMoYS53ZWFrSW1wb3J0c1twXSl8fG8ucmVzb2x2ZVBhdGgoZSxhLndlYWtJbXBvcnRzW3BdKSkmJmYobiwhMCl9ZWxzZSBvLnNldE9wdGlvbnModC5vcHRpb25zKS5hZGRKU09OKHQubmVzdGVkKX1jYXRjaChlKXtsKGUpfXN8fGh8fGwobnVsbCxvKX1mdW5jdGlvbiBmKGUsdCl7aWYoZT1jKGUpfHxlLCEoby5maWxlcy5pbmRleE9mKGUpPi0xKSlpZihvLmZpbGVzLnB1c2goZSksZSBpbiBhKXM/cChlLGFbZV0pOigrK2gsc2V0VGltZW91dCgoZnVuY3Rpb24oKXstLWgscChlLGFbZV0pfSkpKTtlbHNlIGlmKHMpe3ZhciByO3RyeXtyPXUuZnMucmVhZEZpbGVTeW5jKGUpLnRvU3RyaW5nKCJ1dGY4Iil9Y2F0Y2goZSl7cmV0dXJuIHZvaWQodHx8bChlKSl9cChlLHIpfWVsc2UrK2gsby5mZXRjaChlLChmdW5jdGlvbihyLGkpey0taCxuJiYocj90P2h8fGwobnVsbCxvKTpsKHIpOnAoZSxpKSl9KSl9dmFyIGg9MDt1LmlzU3RyaW5nKHQpJiYodD1bdF0pO2Zvcih2YXIgZyx5PTA7eTx0Lmxlbmd0aDsrK3kpKGc9by5yZXNvbHZlUGF0aCgiIix0W3ldKSkmJmYoZyk7aWYocylyZXR1cm4gbztofHxsKG51bGwsbyl9LHAucHJvdG90eXBlLmxvYWRTeW5jPWZ1bmN0aW9uKGUsdCl7aWYoIXUuaXNOb2RlKXRocm93IEVycm9yKCJub3Qgc3VwcG9ydGVkIik7cmV0dXJuIHRoaXMubG9hZChlLHQsZCl9LHAucHJvdG90eXBlLnJlc29sdmVBbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmRlZmVycmVkLmxlbmd0aCl0aHJvdyBFcnJvcigidW5yZXNvbHZhYmxlIGV4dGVuc2lvbnM6ICIrdGhpcy5kZWZlcnJlZC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiInZXh0ZW5kICIrZS5leHRlbmQrIicgaW4gIitlLnBhcmVudC5mdWxsTmFtZX0pKS5qb2luKCIsICIpKTtyZXR1cm4gbi5wcm90b3R5cGUucmVzb2x2ZUFsbC5jYWxsKHRoaXMpfTt2YXIgZj0vXltBLVpdLztmdW5jdGlvbiBoKGUsdCl7dmFyIHI9dC5wYXJlbnQubG9va3VwKHQuZXh0ZW5kKTtpZihyKXt2YXIgbj1uZXcgcyh0LmZ1bGxOYW1lLHQuaWQsdC50eXBlLHQucnVsZSx2b2lkIDAsdC5vcHRpb25zKTtyZXR1cm4gci5nZXQobi5uYW1lKXx8KG4uZGVjbGFyaW5nRmllbGQ9dCx0LmV4dGVuc2lvbkZpZWxkPW4sci5hZGQobikpLCEwfXJldHVybiExfXAucHJvdG90eXBlLl9oYW5kbGVBZGQ9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHMpdm9pZCAwPT09ZS5leHRlbmR8fGUuZXh0ZW5zaW9uRmllbGR8fGgoMCxlKXx8dGhpcy5kZWZlcnJlZC5wdXNoKGUpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIGwpZi50ZXN0KGUubmFtZSkmJihlLnBhcmVudFtlLm5hbWVdPWUudmFsdWVzKTtlbHNlIGlmKCEoZSBpbnN0YW5jZW9mIGMpKXtpZihlIGluc3RhbmNlb2Ygbylmb3IodmFyIHQ9MDt0PHRoaXMuZGVmZXJyZWQubGVuZ3RoOyloKDAsdGhpcy5kZWZlcnJlZFt0XSk/dGhpcy5kZWZlcnJlZC5zcGxpY2UodCwxKTorK3Q7Zm9yKHZhciByPTA7cjxlLm5lc3RlZEFycmF5Lmxlbmd0aDsrK3IpdGhpcy5faGFuZGxlQWRkKGUuX25lc3RlZEFycmF5W3JdKTtmLnRlc3QoZS5uYW1lKSYmKGUucGFyZW50W2UubmFtZV09ZSl9fSxwLnByb3RvdHlwZS5faGFuZGxlUmVtb3ZlPWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBzKXtpZih2b2lkIDAhPT1lLmV4dGVuZClpZihlLmV4dGVuc2lvbkZpZWxkKWUuZXh0ZW5zaW9uRmllbGQucGFyZW50LnJlbW92ZShlLmV4dGVuc2lvbkZpZWxkKSxlLmV4dGVuc2lvbkZpZWxkPW51bGw7ZWxzZXt2YXIgdD10aGlzLmRlZmVycmVkLmluZGV4T2YoZSk7dD4tMSYmdGhpcy5kZWZlcnJlZC5zcGxpY2UodCwxKX19ZWxzZSBpZihlIGluc3RhbmNlb2YgbClmLnRlc3QoZS5uYW1lKSYmZGVsZXRlIGUucGFyZW50W2UubmFtZV07ZWxzZSBpZihlIGluc3RhbmNlb2Ygbil7Zm9yKHZhciByPTA7cjxlLm5lc3RlZEFycmF5Lmxlbmd0aDsrK3IpdGhpcy5faGFuZGxlUmVtb3ZlKGUuX25lc3RlZEFycmF5W3JdKTtmLnRlc3QoZS5uYW1lKSYmZGVsZXRlIGUucGFyZW50W2UubmFtZV19fSxwLl9jb25maWd1cmU9ZnVuY3Rpb24oZSx0LHIpe289ZSxpPXQsYT1yfX0sNDUyOTplPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz17fX0sNTA0NzooZSx0LHIpPT57InVzZSBzdHJpY3QiO3QuU2VydmljZT1yKDc1OTUpfSw3NTk1OihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPW87dmFyIG49cigzNjEwKTtmdW5jdGlvbiBvKGUsdCxyKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoInJwY0ltcGwgbXVzdCBiZSBhIGZ1bmN0aW9uIik7bi5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSx0aGlzLnJwY0ltcGw9ZSx0aGlzLnJlcXVlc3REZWxpbWl0ZWQ9Qm9vbGVhbih0KSx0aGlzLnJlc3BvbnNlRGVsaW1pdGVkPUJvb2xlYW4ocil9KG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3I9byxvLnByb3RvdHlwZS5ycGNDYWxsPWZ1bmN0aW9uIGUodCxyLG8saSxhKXtpZighaSl0aHJvdyBUeXBlRXJyb3IoInJlcXVlc3QgbXVzdCBiZSBzcGVjaWZpZWQiKTt2YXIgcz10aGlzO2lmKCFhKXJldHVybiBuLmFzUHJvbWlzZShlLHMsdCxyLG8saSk7aWYocy5ycGNJbXBsKXRyeXtyZXR1cm4gcy5ycGNJbXBsKHQscltzLnJlcXVlc3REZWxpbWl0ZWQ/ImVuY29kZURlbGltaXRlZCI6ImVuY29kZSJdKGkpLmZpbmlzaCgpLChmdW5jdGlvbihlLHIpe2lmKGUpcmV0dXJuIHMuZW1pdCgiZXJyb3IiLGUsdCksYShlKTtpZihudWxsIT09cil7aWYoIShyIGluc3RhbmNlb2YgbykpdHJ5e3I9b1tzLnJlc3BvbnNlRGVsaW1pdGVkPyJkZWNvZGVEZWxpbWl0ZWQiOiJkZWNvZGUiXShyKX1jYXRjaChlKXtyZXR1cm4gcy5lbWl0KCJlcnJvciIsZSx0KSxhKGUpfXJldHVybiBzLmVtaXQoImRhdGEiLHIsdCksYShudWxsLHIpfXMuZW5kKCEwKX0pKX1jYXRjaChlKXtyZXR1cm4gcy5lbWl0KCJlcnJvciIsZSx0KSx2b2lkIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7YShlKX0pLDApfWVsc2Ugc2V0VGltZW91dCgoZnVuY3Rpb24oKXthKEVycm9yKCJhbHJlYWR5IGVuZGVkIikpfSksMCl9LG8ucHJvdG90eXBlLmVuZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ycGNJbXBsJiYoZXx8dGhpcy5ycGNJbXBsKG51bGwsbnVsbCxudWxsKSx0aGlzLnJwY0ltcGw9bnVsbCx0aGlzLmVtaXQoImVuZCIpLm9mZigpKSx0aGlzfX0sOTY4NzooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1zO3ZhciBuPXIoODkyMyk7KChzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSkuY29uc3RydWN0b3I9cykuY2xhc3NOYW1lPSJTZXJ2aWNlIjt2YXIgbz1yKDg4MTEpLGk9cigzMjYyKSxhPXIoNTA0Nyk7ZnVuY3Rpb24gcyhlLHQpe24uY2FsbCh0aGlzLGUsdCksdGhpcy5tZXRob2RzPXt9LHRoaXMuX21ldGhvZHNBcnJheT1udWxsfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUuX21ldGhvZHNBcnJheT1udWxsLGV9cy5mcm9tSlNPTj1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBzKGUsdC5vcHRpb25zKTtpZih0Lm1ldGhvZHMpZm9yKHZhciBuPU9iamVjdC5rZXlzKHQubWV0aG9kcyksaT0wO2k8bi5sZW5ndGg7KytpKXIuYWRkKG8uZnJvbUpTT04obltpXSx0Lm1ldGhvZHNbbltpXV0pKTtyZXR1cm4gdC5uZXN0ZWQmJnIuYWRkSlNPTih0Lm5lc3RlZCksci5jb21tZW50PXQuY29tbWVudCxyfSxzLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oZSl7dmFyIHQ9bi5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxlKSxyPSEhZSYmQm9vbGVhbihlLmtlZXBDb21tZW50cyk7cmV0dXJuIGkudG9PYmplY3QoWyJvcHRpb25zIix0JiZ0Lm9wdGlvbnN8fHZvaWQgMCwibWV0aG9kcyIsbi5hcnJheVRvSlNPTih0aGlzLm1ldGhvZHNBcnJheSxlKXx8e30sIm5lc3RlZCIsdCYmdC5uZXN0ZWR8fHZvaWQgMCwiY29tbWVudCIscj90aGlzLmNvbW1lbnQ6dm9pZCAwXSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSwibWV0aG9kc0FycmF5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ldGhvZHNBcnJheXx8KHRoaXMuX21ldGhvZHNBcnJheT1pLnRvQXJyYXkodGhpcy5tZXRob2RzKSl9fSkscy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1ldGhvZHNbZV18fG4ucHJvdG90eXBlLmdldC5jYWxsKHRoaXMsZSl9LHMucHJvdG90eXBlLnJlc29sdmVBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5tZXRob2RzQXJyYXksdD0wO3Q8ZS5sZW5ndGg7Kyt0KWVbdF0ucmVzb2x2ZSgpO3JldHVybiBuLnByb3RvdHlwZS5yZXNvbHZlLmNhbGwodGhpcyl9LHMucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXtpZih0aGlzLmdldChlLm5hbWUpKXRocm93IEVycm9yKCJkdXBsaWNhdGUgbmFtZSAnIitlLm5hbWUrIicgaW4gIit0aGlzKTtyZXR1cm4gZSBpbnN0YW5jZW9mIG8/KHRoaXMubWV0aG9kc1tlLm5hbWVdPWUsZS5wYXJlbnQ9dGhpcyxsKHRoaXMpKTpuLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLGUpfSxzLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIG8pe2lmKHRoaXMubWV0aG9kc1tlLm5hbWVdIT09ZSl0aHJvdyBFcnJvcihlKyIgaXMgbm90IGEgbWVtYmVyIG9mICIrdGhpcyk7cmV0dXJuIGRlbGV0ZSB0aGlzLm1ldGhvZHNbZS5uYW1lXSxlLnBhcmVudD1udWxsLGwodGhpcyl9cmV0dXJuIG4ucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsZSl9LHMucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuLG89bmV3IGEuU2VydmljZShlLHQscikscz0wO3M8dGhpcy5tZXRob2RzQXJyYXkubGVuZ3RoOysrcyl7dmFyIGw9aS5sY0ZpcnN0KChuPXRoaXMuX21ldGhvZHNBcnJheVtzXSkucmVzb2x2ZSgpLm5hbWUpLnJlcGxhY2UoL1teJFx3X10vZywiIik7b1tsXT1pLmNvZGVnZW4oWyJyIiwiYyJdLGkuaXNSZXNlcnZlZChsKT9sKyJfIjpsKSgicmV0dXJuIHRoaXMucnBjQ2FsbChtLHEscyxyLGMpIikoe206bixxOm4ucmVzb2x2ZWRSZXF1ZXN0VHlwZS5jdG9yLHM6bi5yZXNvbHZlZFJlc3BvbnNlVHlwZS5jdG9yfSl9cmV0dXJuIG99fSw1Mjc6ZT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9cDt2YXIgdD0vW1xze309OzpbXF0sJyIoKTw+XS9nLHI9Lyg/OiIoW14iXFxdKig/OlxcLlteIlxcXSopKikiKS9nLG49Lyg/OicoW14nXFxdKig/OlxcLlteJ1xcXSopKiknKS9nLG89L14gKlsqL10rICovLGk9L15ccypcKj9cLyovLGE9L1xuL2cscz0vXHMvLGw9L1xcKC4/KS9nLGM9ezA6IlwwIixyOiJcciIsbjoiXG4iLHQ6Ilx0In07ZnVuY3Rpb24gdShlKXtyZXR1cm4gZS5yZXBsYWNlKGwsKGZ1bmN0aW9uKGUsdCl7c3dpdGNoKHQpe2Nhc2UiXFwiOmNhc2UiIjpyZXR1cm4gdDtkZWZhdWx0OnJldHVybiBjW3RdfHwiIn19KSl9ZnVuY3Rpb24gcChlLGwpe2U9ZS50b1N0cmluZygpO3ZhciBjPTAscD1lLmxlbmd0aCxkPTEsZj0wLGg9e30sZz1bXSx5PW51bGw7ZnVuY3Rpb24gbShlKXtyZXR1cm4gRXJyb3IoImlsbGVnYWwgIitlKyIgKGxpbmUgIitkKyIpIil9ZnVuY3Rpb24gYih0KXtyZXR1cm4gZS5jaGFyQXQodCl9ZnVuY3Rpb24gTyh0LHIsbil7dmFyIHMsYz17dHlwZTplLmNoYXJBdCh0KyspLGxpbmVFbXB0eTohMSxsZWFkaW5nOm59LHU9dC0obD8yOjMpO2Rve2lmKC0tdTwwfHwiXG4iPT09KHM9ZS5jaGFyQXQodSkpKXtjLmxpbmVFbXB0eT0hMDticmVha319d2hpbGUoIiAiPT09c3x8Ilx0Ij09PXMpO2Zvcih2YXIgcD1lLnN1YnN0cmluZyh0LHIpLnNwbGl0KGEpLGc9MDtnPHAubGVuZ3RoOysrZylwW2ddPXBbZ10ucmVwbGFjZShsP2k6bywiIikudHJpbSgpO2MudGV4dD1wLmpvaW4oIlxuIikudHJpbSgpLGhbZF09YyxmPWR9ZnVuY3Rpb24gVCh0KXt2YXIgcj12KHQpLG49ZS5zdWJzdHJpbmcodCxyKTtyZXR1cm4vXlxzKlwvXC8vLnRlc3Qobil9ZnVuY3Rpb24gdihlKXtmb3IodmFyIHQ9ZTt0PHAmJiJcbiIhPT1iKHQpOyl0Kys7cmV0dXJuIHR9ZnVuY3Rpb24gdygpe2lmKGcubGVuZ3RoPjApcmV0dXJuIGcuc2hpZnQoKTtpZih5KXJldHVybiBmdW5jdGlvbigpe3ZhciB0PSInIj09PXk/bjpyO3QubGFzdEluZGV4PWMtMTt2YXIgbz10LmV4ZWMoZSk7aWYoIW8pdGhyb3cgbSgic3RyaW5nIik7cmV0dXJuIGM9dC5sYXN0SW5kZXgsaih5KSx5PW51bGwsdShvWzFdKX0oKTt2YXIgbyxpLGEsZixoLHc9MD09PWM7ZG97aWYoYz09PXApcmV0dXJuIG51bGw7Zm9yKG89ITE7cy50ZXN0KGE9YihjKSk7KWlmKCJcbiI9PT1hJiYodz0hMCwrK2QpLCsrYz09PXApcmV0dXJuIG51bGw7aWYoIi8iPT09YihjKSl7aWYoKytjPT09cCl0aHJvdyBtKCJjb21tZW50Iik7aWYoIi8iPT09YihjKSlpZihsKXtpZihmPWMsaD0hMSxUKGMtMSkpe2g9ITA7ZG97aWYoKGM9dihjKSk9PT1wKWJyZWFrO2lmKGMrKywhdylicmVha313aGlsZShUKGMpKX1lbHNlIGM9TWF0aC5taW4ocCx2KGMpKzEpO2gmJihPKGYsYyx3KSx3PSEwKSxkKyssbz0hMH1lbHNle2ZvcihoPSIvIj09PWIoZj1jKzEpOyJcbiIhPT1iKCsrYyk7KWlmKGM9PT1wKXJldHVybiBudWxsOysrYyxoJiYoTyhmLGMtMSx3KSx3PSEwKSwrK2Qsbz0hMH1lbHNle2lmKCIqIiE9PShhPWIoYykpKXJldHVybiIvIjtmPWMrMSxoPWx8fCIqIj09PWIoZik7ZG97aWYoIlxuIj09PWEmJisrZCwrK2M9PT1wKXRocm93IG0oImNvbW1lbnQiKTtpPWEsYT1iKGMpfXdoaWxlKCIqIiE9PWl8fCIvIiE9PWEpOysrYyxoJiYoTyhmLGMtMix3KSx3PSEwKSxvPSEwfX19d2hpbGUobyk7dmFyIEE9YztpZih0Lmxhc3RJbmRleD0wLCF0LnRlc3QoYihBKyspKSlmb3IoO0E8cCYmIXQudGVzdChiKEEpKTspKytBO3ZhciBQPWUuc3Vic3RyaW5nKGMsYz1BKTtyZXR1cm4nIichPT1QJiYiJyIhPT1QfHwoeT1QKSxQfWZ1bmN0aW9uIGooZSl7Zy5wdXNoKGUpfWZ1bmN0aW9uIEEoKXtpZighZy5sZW5ndGgpe3ZhciBlPXcoKTtpZihudWxsPT09ZSlyZXR1cm4gbnVsbDtqKGUpfXJldHVybiBnWzBdfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe25leHQ6dyxwZWVrOkEscHVzaDpqLHNraXA6ZnVuY3Rpb24oZSx0KXt2YXIgcj1BKCk7aWYocj09PWUpcmV0dXJuIHcoKSwhMDtpZighdCl0aHJvdyBtKCJ0b2tlbiAnIityKyInLCAnIitlKyInIGV4cGVjdGVkIik7cmV0dXJuITF9LGNtbnQ6ZnVuY3Rpb24oZSl7dmFyIHQscj1udWxsO3JldHVybiB2b2lkIDA9PT1lPyh0PWhbZC0xXSxkZWxldGUgaFtkLTFdLHQmJihsfHwiKiI9PT10LnR5cGV8fHQubGluZUVtcHR5KSYmKHI9dC5sZWFkaW5nP3QudGV4dDpudWxsKSk6KGY8ZSYmQSgpLHQ9aFtlXSxkZWxldGUgaFtlXSwhdHx8dC5saW5lRW1wdHl8fCFsJiYiLyIhPT10LnR5cGV8fChyPXQubGVhZGluZz9udWxsOnQudGV4dCkpLHJ9fSwibGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiBkfX0pfXAudW5lc2NhcGU9dX0sNzg4MjooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1iO3ZhciBuPXIoODkyMyk7KChiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSkuY29uc3RydWN0b3I9YikuY2xhc3NOYW1lPSJUeXBlIjt2YXIgbz1yKDU2NDMpLGk9cigxNDU3KSxhPXIoMTM0NCkscz1yKDgyNTIpLGw9cig5Njg3KSxjPXIoMjU1MSksdT1yKDYyMzcpLHA9cigzNDQ5KSxkPXIoMzI2MiksZj1yKDEwODApLGg9cig3NzI4KSxnPXIoNDIwKSx5PXIoNzQ0KSxtPXIoNjQzNCk7ZnVuY3Rpb24gYihlLHQpe24uY2FsbCh0aGlzLGUsdCksdGhpcy5maWVsZHM9e30sdGhpcy5vbmVvZnM9dm9pZCAwLHRoaXMuZXh0ZW5zaW9ucz12b2lkIDAsdGhpcy5yZXNlcnZlZD12b2lkIDAsdGhpcy5ncm91cD12b2lkIDAsdGhpcy5fZmllbGRzQnlJZD1udWxsLHRoaXMuX2ZpZWxkc0FycmF5PW51bGwsdGhpcy5fb25lb2ZzQXJyYXk9bnVsbCx0aGlzLl9jdG9yPW51bGx9ZnVuY3Rpb24gTyhlKXtyZXR1cm4gZS5fZmllbGRzQnlJZD1lLl9maWVsZHNBcnJheT1lLl9vbmVvZnNBcnJheT1udWxsLGRlbGV0ZSBlLmVuY29kZSxkZWxldGUgZS5kZWNvZGUsZGVsZXRlIGUudmVyaWZ5LGV9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYi5wcm90b3R5cGUse2ZpZWxkc0J5SWQ6e2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX2ZpZWxkc0J5SWQpcmV0dXJuIHRoaXMuX2ZpZWxkc0J5SWQ7dGhpcy5fZmllbGRzQnlJZD17fTtmb3IodmFyIGU9T2JqZWN0LmtleXModGhpcy5maWVsZHMpLHQ9MDt0PGUubGVuZ3RoOysrdCl7dmFyIHI9dGhpcy5maWVsZHNbZVt0XV0sbj1yLmlkO2lmKHRoaXMuX2ZpZWxkc0J5SWRbbl0pdGhyb3cgRXJyb3IoImR1cGxpY2F0ZSBpZCAiK24rIiBpbiAiK3RoaXMpO3RoaXMuX2ZpZWxkc0J5SWRbbl09cn1yZXR1cm4gdGhpcy5fZmllbGRzQnlJZH19LGZpZWxkc0FycmF5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmllbGRzQXJyYXl8fCh0aGlzLl9maWVsZHNBcnJheT1kLnRvQXJyYXkodGhpcy5maWVsZHMpKX19LG9uZW9mc0FycmF5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25lb2ZzQXJyYXl8fCh0aGlzLl9vbmVvZnNBcnJheT1kLnRvQXJyYXkodGhpcy5vbmVvZnMpKX19LGN0b3I6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdG9yfHwodGhpcy5jdG9yPWIuZ2VuZXJhdGVDb25zdHJ1Y3Rvcih0aGlzKSgpKX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucHJvdG90eXBlO3QgaW5zdGFuY2VvZiBjfHwoKGUucHJvdG90eXBlPW5ldyBjKS5jb25zdHJ1Y3Rvcj1lLGQubWVyZ2UoZS5wcm90b3R5cGUsdCkpLGUuJHR5cGU9ZS5wcm90b3R5cGUuJHR5cGU9dGhpcyxkLm1lcmdlKGUsYywhMCksdGhpcy5fY3Rvcj1lO2Zvcih2YXIgcj0wO3I8dGhpcy5maWVsZHNBcnJheS5sZW5ndGg7KytyKXRoaXMuX2ZpZWxkc0FycmF5W3JdLnJlc29sdmUoKTt2YXIgbj17fTtmb3Iocj0wO3I8dGhpcy5vbmVvZnNBcnJheS5sZW5ndGg7KytyKW5bdGhpcy5fb25lb2ZzQXJyYXlbcl0ucmVzb2x2ZSgpLm5hbWVdPXtnZXQ6ZC5vbmVPZkdldHRlcih0aGlzLl9vbmVvZnNBcnJheVtyXS5vbmVvZiksc2V0OmQub25lT2ZTZXR0ZXIodGhpcy5fb25lb2ZzQXJyYXlbcl0ub25lb2YpfTtyJiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKX19fSksYi5nZW5lcmF0ZUNvbnN0cnVjdG9yPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPWQuY29kZWdlbihbInAiXSxlLm5hbWUpLG49MDtuPGUuZmllbGRzQXJyYXkubGVuZ3RoOysrbikodD1lLl9maWVsZHNBcnJheVtuXSkubWFwP3IoInRoaXMlcz17fSIsZC5zYWZlUHJvcCh0Lm5hbWUpKTp0LnJlcGVhdGVkJiZyKCJ0aGlzJXM9W10iLGQuc2FmZVByb3AodC5uYW1lKSk7cmV0dXJuIHIoImlmKHApZm9yKHZhciBrcz1PYmplY3Qua2V5cyhwKSxpPTA7aTxrcy5sZW5ndGg7KytpKWlmKHBba3NbaV1dIT1udWxsKSIpKCJ0aGlzW2tzW2ldXT1wW2tzW2ldXSIpfSxiLmZyb21KU09OPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGIoZSx0Lm9wdGlvbnMpO3IuZXh0ZW5zaW9ucz10LmV4dGVuc2lvbnMsci5yZXNlcnZlZD10LnJlc2VydmVkO2Zvcih2YXIgYz1PYmplY3Qua2V5cyh0LmZpZWxkcyksdT0wO3U8Yy5sZW5ndGg7Kyt1KXIuYWRkKCh2b2lkIDAhPT10LmZpZWxkc1tjW3VdXS5rZXlUeXBlP3MuZnJvbUpTT046YS5mcm9tSlNPTikoY1t1XSx0LmZpZWxkc1tjW3VdXSkpO2lmKHQub25lb2ZzKWZvcihjPU9iamVjdC5rZXlzKHQub25lb2ZzKSx1PTA7dTxjLmxlbmd0aDsrK3Upci5hZGQoaS5mcm9tSlNPTihjW3VdLHQub25lb2ZzW2NbdV1dKSk7aWYodC5uZXN0ZWQpZm9yKGM9T2JqZWN0LmtleXModC5uZXN0ZWQpLHU9MDt1PGMubGVuZ3RoOysrdSl7dmFyIHA9dC5uZXN0ZWRbY1t1XV07ci5hZGQoKHZvaWQgMCE9PXAuaWQ/YS5mcm9tSlNPTjp2b2lkIDAhPT1wLmZpZWxkcz9iLmZyb21KU09OOnZvaWQgMCE9PXAudmFsdWVzP28uZnJvbUpTT046dm9pZCAwIT09cC5tZXRob2RzP2wuZnJvbUpTT046bi5mcm9tSlNPTikoY1t1XSxwKSl9cmV0dXJuIHQuZXh0ZW5zaW9ucyYmdC5leHRlbnNpb25zLmxlbmd0aCYmKHIuZXh0ZW5zaW9ucz10LmV4dGVuc2lvbnMpLHQucmVzZXJ2ZWQmJnQucmVzZXJ2ZWQubGVuZ3RoJiYoci5yZXNlcnZlZD10LnJlc2VydmVkKSx0Lmdyb3VwJiYoci5ncm91cD0hMCksdC5jb21tZW50JiYoci5jb21tZW50PXQuY29tbWVudCkscn0sYi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGUpe3ZhciB0PW4ucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsZSkscj0hIWUmJkJvb2xlYW4oZS5rZWVwQ29tbWVudHMpO3JldHVybiBkLnRvT2JqZWN0KFsib3B0aW9ucyIsdCYmdC5vcHRpb25zfHx2b2lkIDAsIm9uZW9mcyIsbi5hcnJheVRvSlNPTih0aGlzLm9uZW9mc0FycmF5LGUpLCJmaWVsZHMiLG4uYXJyYXlUb0pTT04odGhpcy5maWVsZHNBcnJheS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmRlY2xhcmluZ0ZpZWxkfSkpLGUpfHx7fSwiZXh0ZW5zaW9ucyIsdGhpcy5leHRlbnNpb25zJiZ0aGlzLmV4dGVuc2lvbnMubGVuZ3RoP3RoaXMuZXh0ZW5zaW9uczp2b2lkIDAsInJlc2VydmVkIix0aGlzLnJlc2VydmVkJiZ0aGlzLnJlc2VydmVkLmxlbmd0aD90aGlzLnJlc2VydmVkOnZvaWQgMCwiZ3JvdXAiLHRoaXMuZ3JvdXB8fHZvaWQgMCwibmVzdGVkIix0JiZ0Lm5lc3RlZHx8dm9pZCAwLCJjb21tZW50IixyP3RoaXMuY29tbWVudDp2b2lkIDBdKX0sYi5wcm90b3R5cGUucmVzb2x2ZUFsbD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmZpZWxkc0FycmF5LHQ9MDt0PGUubGVuZ3RoOyllW3QrK10ucmVzb2x2ZSgpO3ZhciByPXRoaXMub25lb2ZzQXJyYXk7Zm9yKHQ9MDt0PHIubGVuZ3RoOylyW3QrK10ucmVzb2x2ZSgpO3JldHVybiBuLnByb3RvdHlwZS5yZXNvbHZlQWxsLmNhbGwodGhpcyl9LGIucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5maWVsZHNbZV18fHRoaXMub25lb2ZzJiZ0aGlzLm9uZW9mc1tlXXx8dGhpcy5uZXN0ZWQmJnRoaXMubmVzdGVkW2VdfHxudWxsfSxiLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5nZXQoZS5uYW1lKSl0aHJvdyBFcnJvcigiZHVwbGljYXRlIG5hbWUgJyIrZS5uYW1lKyInIGluICIrdGhpcyk7aWYoZSBpbnN0YW5jZW9mIGEmJnZvaWQgMD09PWUuZXh0ZW5kKXtpZih0aGlzLl9maWVsZHNCeUlkP3RoaXMuX2ZpZWxkc0J5SWRbZS5pZF06dGhpcy5maWVsZHNCeUlkW2UuaWRdKXRocm93IEVycm9yKCJkdXBsaWNhdGUgaWQgIitlLmlkKyIgaW4gIit0aGlzKTtpZih0aGlzLmlzUmVzZXJ2ZWRJZChlLmlkKSl0aHJvdyBFcnJvcigiaWQgIitlLmlkKyIgaXMgcmVzZXJ2ZWQgaW4gIit0aGlzKTtpZih0aGlzLmlzUmVzZXJ2ZWROYW1lKGUubmFtZSkpdGhyb3cgRXJyb3IoIm5hbWUgJyIrZS5uYW1lKyInIGlzIHJlc2VydmVkIGluICIrdGhpcyk7cmV0dXJuIGUucGFyZW50JiZlLnBhcmVudC5yZW1vdmUoZSksdGhpcy5maWVsZHNbZS5uYW1lXT1lLGUubWVzc2FnZT10aGlzLGUub25BZGQodGhpcyksTyh0aGlzKX1yZXR1cm4gZSBpbnN0YW5jZW9mIGk/KHRoaXMub25lb2ZzfHwodGhpcy5vbmVvZnM9e30pLHRoaXMub25lb2ZzW2UubmFtZV09ZSxlLm9uQWRkKHRoaXMpLE8odGhpcykpOm4ucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsZSl9LGIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYSYmdm9pZCAwPT09ZS5leHRlbmQpe2lmKCF0aGlzLmZpZWxkc3x8dGhpcy5maWVsZHNbZS5uYW1lXSE9PWUpdGhyb3cgRXJyb3IoZSsiIGlzIG5vdCBhIG1lbWJlciBvZiAiK3RoaXMpO3JldHVybiBkZWxldGUgdGhpcy5maWVsZHNbZS5uYW1lXSxlLnBhcmVudD1udWxsLGUub25SZW1vdmUodGhpcyksTyh0aGlzKX1pZihlIGluc3RhbmNlb2YgaSl7aWYoIXRoaXMub25lb2ZzfHx0aGlzLm9uZW9mc1tlLm5hbWVdIT09ZSl0aHJvdyBFcnJvcihlKyIgaXMgbm90IGEgbWVtYmVyIG9mICIrdGhpcyk7cmV0dXJuIGRlbGV0ZSB0aGlzLm9uZW9mc1tlLm5hbWVdLGUucGFyZW50PW51bGwsZS5vblJlbW92ZSh0aGlzKSxPKHRoaXMpfXJldHVybiBuLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLGUpfSxiLnByb3RvdHlwZS5pc1Jlc2VydmVkSWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uaXNSZXNlcnZlZElkKHRoaXMucmVzZXJ2ZWQsZSl9LGIucHJvdG90eXBlLmlzUmVzZXJ2ZWROYW1lPWZ1bmN0aW9uKGUpe3JldHVybiBuLmlzUmVzZXJ2ZWROYW1lKHRoaXMucmVzZXJ2ZWQsZSl9LGIucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHRoaXMuY3RvcihlKX0sYi5wcm90b3R5cGUuc2V0dXA9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5mdWxsTmFtZSx0PVtdLHI9MDtyPHRoaXMuZmllbGRzQXJyYXkubGVuZ3RoOysrcil0LnB1c2godGhpcy5fZmllbGRzQXJyYXlbcl0ucmVzb2x2ZSgpLnJlc29sdmVkVHlwZSk7dGhpcy5lbmNvZGU9Zih0aGlzKSh7V3JpdGVyOnAsdHlwZXM6dCx1dGlsOmR9KSx0aGlzLmRlY29kZT1oKHRoaXMpKHtSZWFkZXI6dSx0eXBlczp0LHV0aWw6ZH0pLHRoaXMudmVyaWZ5PWcodGhpcykoe3R5cGVzOnQsdXRpbDpkfSksdGhpcy5mcm9tT2JqZWN0PXkuZnJvbU9iamVjdCh0aGlzKSh7dHlwZXM6dCx1dGlsOmR9KSx0aGlzLnRvT2JqZWN0PXkudG9PYmplY3QodGhpcykoe3R5cGVzOnQsdXRpbDpkfSk7dmFyIG49bVtlXTtpZihuKXt2YXIgbz1PYmplY3QuY3JlYXRlKHRoaXMpO28uZnJvbU9iamVjdD10aGlzLmZyb21PYmplY3QsdGhpcy5mcm9tT2JqZWN0PW4uZnJvbU9iamVjdC5iaW5kKG8pLG8udG9PYmplY3Q9dGhpcy50b09iamVjdCx0aGlzLnRvT2JqZWN0PW4udG9PYmplY3QuYmluZChvKX1yZXR1cm4gdGhpc30sYi5wcm90b3R5cGUuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2V0dXAoKS5lbmNvZGUoZSx0KX0sYi5wcm90b3R5cGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCYmdC5sZW4/dC5mb3JrKCk6dCkubGRlbGltKCl9LGIucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldHVwKCkuZGVjb2RlKGUsdCl9LGIucHJvdG90eXBlLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHV8fChlPXUuY3JlYXRlKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSxiLnByb3RvdHlwZS52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0dXAoKS52ZXJpZnkoZSl9LGIucHJvdG90eXBlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0dXAoKS5mcm9tT2JqZWN0KGUpfSxiLnByb3RvdHlwZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldHVwKCkudG9PYmplY3QoZSx0KX0sYi5kPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtkLmRlY29yYXRlVHlwZSh0LGUpfX19LDM2MTooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXQsbz1yKDMyNjIpLGk9WyJkb3VibGUiLCJmbG9hdCIsImludDMyIiwidWludDMyIiwic2ludDMyIiwiZml4ZWQzMiIsInNmaXhlZDMyIiwiaW50NjQiLCJ1aW50NjQiLCJzaW50NjQiLCJmaXhlZDY0Iiwic2ZpeGVkNjQiLCJib29sIiwic3RyaW5nIiwiYnl0ZXMiXTtmdW5jdGlvbiBhKGUsdCl7dmFyIHI9MCxuPXt9O2Zvcih0fD0wO3I8ZS5sZW5ndGg7KW5baVtyK3RdXT1lW3IrK107cmV0dXJuIG59bi5iYXNpYz1hKFsxLDUsMCwwLDAsNSw1LDAsMCwwLDEsMSwwLDIsMl0pLG4uZGVmYXVsdHM9YShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsITEsIiIsby5lbXB0eUFycmF5LG51bGxdKSxuLmxvbmc9YShbMCwwLDAsMSwxXSw3KSxuLm1hcEtleT1hKFswLDAsMCw1LDUsMCwwLDAsMSwxLDAsMl0sMiksbi5wYWNrZWQ9YShbMSw1LDAsMCwwLDUsNSwwLDAsMCwxLDEsMF0pfSwzMjYyOihlLHQscik9PnsidXNlIHN0cmljdCI7dmFyIG4sbyxpPWUuZXhwb3J0cz1yKDM2MTApLGE9cig0NTI5KTtpLmNvZGVnZW49cig4NTYxKSxpLmZldGNoPXIoNTIxMiksaS5wYXRoPXIoOTIwNyksaS5mcz1pLmlucXVpcmUoImZzIiksaS50b0FycmF5PWZ1bmN0aW9uKGUpe2lmKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPW5ldyBBcnJheSh0Lmxlbmd0aCksbj0wO248dC5sZW5ndGg7KXJbbl09ZVt0W24rK11dO3JldHVybiByfXJldHVybltdfSxpLnRvT2JqZWN0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxyPTA7cjxlLmxlbmd0aDspe3ZhciBuPWVbcisrXSxvPWVbcisrXTt2b2lkIDAhPT1vJiYodFtuXT1vKX1yZXR1cm4gdH07dmFyIHM9L1xcL2csbD0vIi9nO2kuaXNSZXNlcnZlZD1mdW5jdGlvbihlKXtyZXR1cm4vXig/OmRvfGlmfGlufGZvcnxsZXR8bmV3fHRyeXx2YXJ8Y2FzZXxlbHNlfGVudW18ZXZhbHxmYWxzZXxudWxsfHRoaXN8dHJ1ZXx2b2lkfHdpdGh8YnJlYWt8Y2F0Y2h8Y2xhc3N8Y29uc3R8c3VwZXJ8dGhyb3d8d2hpbGV8eWllbGR8ZGVsZXRlfGV4cG9ydHxpbXBvcnR8cHVibGljfHJldHVybnxzdGF0aWN8c3dpdGNofHR5cGVvZnxkZWZhdWx0fGV4dGVuZHN8ZmluYWxseXxwYWNrYWdlfHByaXZhdGV8Y29udGludWV8ZGVidWdnZXJ8ZnVuY3Rpb258YXJndW1lbnRzfGludGVyZmFjZXxwcm90ZWN0ZWR8aW1wbGVtZW50c3xpbnN0YW5jZW9mKSQvLnRlc3QoZSl9LGkuc2FmZVByb3A9ZnVuY3Rpb24oZSl7cmV0dXJuIS9eWyRcd19dKyQvLnRlc3QoZSl8fGkuaXNSZXNlcnZlZChlKT8nWyInK2UucmVwbGFjZShzLCJcXFxcIikucmVwbGFjZShsLCdcXCInKSsnIl0nOiIuIitlfSxpLnVjRmlyc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHJpbmcoMSl9O3ZhciBjPS9fKFthLXpdKS9nO2kuY2FtZWxDYXNlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnN1YnN0cmluZygwLDEpK2Uuc3Vic3RyaW5nKDEpLnJlcGxhY2UoYywoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSkpfSxpLmNvbXBhcmVGaWVsZHNCeUlkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuaWQtdC5pZH0saS5kZWNvcmF0ZVR5cGU9ZnVuY3Rpb24oZSx0KXtpZihlLiR0eXBlKXJldHVybiB0JiZlLiR0eXBlLm5hbWUhPT10JiYoaS5kZWNvcmF0ZVJvb3QucmVtb3ZlKGUuJHR5cGUpLGUuJHR5cGUubmFtZT10LGkuZGVjb3JhdGVSb290LmFkZChlLiR0eXBlKSksZS4kdHlwZTtufHwobj1yKDc4ODIpKTt2YXIgbz1uZXcgbih0fHxlLm5hbWUpO3JldHVybiBpLmRlY29yYXRlUm9vdC5hZGQobyksby5jdG9yPWUsT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIiR0eXBlIix7dmFsdWU6byxlbnVtZXJhYmxlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCIkdHlwZSIse3ZhbHVlOm8sZW51bWVyYWJsZTohMX0pLG99O3ZhciB1PTA7aS5kZWNvcmF0ZUVudW09ZnVuY3Rpb24oZSl7aWYoZS4kdHlwZSlyZXR1cm4gZS4kdHlwZTtvfHwobz1yKDU2NDMpKTt2YXIgdD1uZXcgbygiRW51bSIrdSsrLGUpO3JldHVybiBpLmRlY29yYXRlUm9vdC5hZGQodCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIiR0eXBlIix7dmFsdWU6dCxlbnVtZXJhYmxlOiExfSksdH0saS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihlLHQscil7aWYoIm9iamVjdCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcigiZHN0IG11c3QgYmUgYW4gb2JqZWN0Iik7aWYoIXQpdGhyb3cgVHlwZUVycm9yKCJwYXRoIG11c3QgYmUgc3BlY2lmaWVkIik7cmV0dXJuIGZ1bmN0aW9uIGUodCxyLG4pe3ZhciBvPXIuc2hpZnQoKTtpZigiX19wcm90b19fIj09PW98fCJwcm90b3R5cGUiPT09bylyZXR1cm4gdDtpZihyLmxlbmd0aD4wKXRbb109ZSh0W29dfHx7fSxyLG4pO2Vsc2V7dmFyIGk9dFtvXTtpJiYobj1bXS5jb25jYXQoaSkuY29uY2F0KG4pKSx0W29dPW59cmV0dXJuIHR9KGUsdD10LnNwbGl0KCIuIikscil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJkZWNvcmF0ZVJvb3QiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5kZWNvcmF0ZWR8fChhLmRlY29yYXRlZD1uZXcocig1MzMwKSkpfX0pfSwyMjM5OihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPW87dmFyIG49cigzNjEwKTtmdW5jdGlvbiBvKGUsdCl7dGhpcy5sbz1lPj4+MCx0aGlzLmhpPXQ+Pj4wfXZhciBpPW8uemVybz1uZXcgbygwLDApO2kudG9OdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gMH0saS56ekVuY29kZT1pLnp6RGVjb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGkubGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIDF9O3ZhciBhPW8uemVyb0hhc2g9IlwwXDBcMFwwXDBcMFwwXDAiO28uZnJvbU51bWJlcj1mdW5jdGlvbihlKXtpZigwPT09ZSlyZXR1cm4gaTt2YXIgdD1lPDA7dCYmKGU9LWUpO3ZhciByPWU+Pj4wLG49KGUtcikvNDI5NDk2NzI5Nj4+PjA7cmV0dXJuIHQmJihuPX5uPj4+MCxyPX5yPj4+MCwrK3I+NDI5NDk2NzI5NSYmKHI9MCwrK24+NDI5NDk2NzI5NSYmKG49MCkpKSxuZXcgbyhyLG4pfSxvLmZyb209ZnVuY3Rpb24oZSl7aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiBvLmZyb21OdW1iZXIoZSk7aWYobi5pc1N0cmluZyhlKSl7aWYoIW4uTG9uZylyZXR1cm4gby5mcm9tTnVtYmVyKHBhcnNlSW50KGUsMTApKTtlPW4uTG9uZy5mcm9tU3RyaW5nKGUpfXJldHVybiBlLmxvd3x8ZS5oaWdoP25ldyBvKGUubG93Pj4+MCxlLmhpZ2g+Pj4wKTppfSxvLnByb3RvdHlwZS50b051bWJlcj1mdW5jdGlvbihlKXtpZighZSYmdGhpcy5oaT4+PjMxKXt2YXIgdD0xK350aGlzLmxvPj4+MCxyPX50aGlzLmhpPj4+MDtyZXR1cm4gdHx8KHI9cisxPj4+MCksLSh0KzQyOTQ5NjcyOTYqcil9cmV0dXJuIHRoaXMubG8rNDI5NDk2NzI5Nip0aGlzLmhpfSxvLnByb3RvdHlwZS50b0xvbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uTG9uZz9uZXcgbi5Mb25nKDB8dGhpcy5sbywwfHRoaXMuaGksQm9vbGVhbihlKSk6e2xvdzowfHRoaXMubG8saGlnaDowfHRoaXMuaGksdW5zaWduZWQ6Qm9vbGVhbihlKX19O3ZhciBzPVN0cmluZy5wcm90b3R5cGUuY2hhckNvZGVBdDtvLmZyb21IYXNoPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09YT9pOm5ldyBvKChzLmNhbGwoZSwwKXxzLmNhbGwoZSwxKTw8OHxzLmNhbGwoZSwyKTw8MTZ8cy5jYWxsKGUsMyk8PDI0KT4+PjAsKHMuY2FsbChlLDQpfHMuY2FsbChlLDUpPDw4fHMuY2FsbChlLDYpPDwxNnxzLmNhbGwoZSw3KTw8MjQpPj4+MCl9LG8ucHJvdG90eXBlLnRvSGFzaD1mdW5jdGlvbigpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZ0aGlzLmxvLHRoaXMubG8+Pj44JjI1NSx0aGlzLmxvPj4+MTYmMjU1LHRoaXMubG8+Pj4yNCwyNTUmdGhpcy5oaSx0aGlzLmhpPj4+OCYyNTUsdGhpcy5oaT4+PjE2JjI1NSx0aGlzLmhpPj4+MjQpfSxvLnByb3RvdHlwZS56ekVuY29kZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGk+PjMxO3JldHVybiB0aGlzLmhpPSgodGhpcy5oaTw8MXx0aGlzLmxvPj4+MzEpXmUpPj4+MCx0aGlzLmxvPSh0aGlzLmxvPDwxXmUpPj4+MCx0aGlzfSxvLnByb3RvdHlwZS56ekRlY29kZT1mdW5jdGlvbigpe3ZhciBlPS0oMSZ0aGlzLmxvKTtyZXR1cm4gdGhpcy5sbz0oKHRoaXMubG8+Pj4xfHRoaXMuaGk8PDMxKV5lKT4+PjAsdGhpcy5oaT0odGhpcy5oaT4+PjFeZSk+Pj4wLHRoaXN9LG8ucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3ZhciBlPXRoaXMubG8sdD0odGhpcy5sbz4+PjI4fHRoaXMuaGk8PDQpPj4+MCxyPXRoaXMuaGk+Pj4yNDtyZXR1cm4gMD09PXI/MD09PXQ/ZTwxNjM4ND9lPDEyOD8xOjI6ZTwyMDk3MTUyPzM6NDp0PDE2Mzg0P3Q8MTI4PzU6Njp0PDIwOTcxNTI/Nzo4OnI8MTI4Pzk6MTB9fSwzNjEwOmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49dDtmdW5jdGlvbiBvKGUsdCxyKXtmb3IodmFyIG49T2JqZWN0LmtleXModCksbz0wO288bi5sZW5ndGg7KytvKXZvaWQgMCE9PWVbbltvXV0mJnJ8fChlW25bb11dPXRbbltvXV0pO3JldHVybiBlfWZ1bmN0aW9uIGkoZSl7ZnVuY3Rpb24gdChlLHIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHQpKXJldHVybiBuZXcgdChlLHIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJtZXNzYWdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSksRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyx0KTpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZToobmV3IEVycm9yKS5zdGFja3x8IiJ9KSxyJiZvKHRoaXMscil9cmV0dXJuIHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0sbmFtZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LHNldDp2b2lkIDAsZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9LHRvU3RyaW5nOnt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUrIjogIit0aGlzLm1lc3NhZ2V9LHdyaXRhYmxlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfX0pLHR9bi5hc1Byb21pc2U9cig4MDQ1KSxuLmJhc2U2ND1yKDg4MzkpLG4uRXZlbnRFbWl0dGVyPXIoNDM1OCksbi5mbG9hdD1yKDk0MTApLG4uaW5xdWlyZT1yKDQxNTMpLG4udXRmOD1yKDE0NDcpLG4ucG9vbD1yKDkzOTApLG4uTG9uZ0JpdHM9cigyMjM5KSxuLmlzTm9kZT1Cb29sZWFuKCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJmdsb2JhbC5wcm9jZXNzJiZnbG9iYWwucHJvY2Vzcy52ZXJzaW9ucyYmZ2xvYmFsLnByb2Nlc3MudmVyc2lvbnMubm9kZSksbi5nbG9iYWw9bi5pc05vZGUmJmdsb2JhbHx8InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvd3x8InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmfHx0aGlzLG4uZW1wdHlBcnJheT1PYmplY3QuZnJlZXplP09iamVjdC5mcmVlemUoW10pOltdLG4uZW1wdHlPYmplY3Q9T2JqZWN0LmZyZWV6ZT9PYmplY3QuZnJlZXplKHt9KTp7fSxuLmlzSW50ZWdlcj1OdW1iZXIuaXNJbnRlZ2VyfHxmdW5jdGlvbihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmlzRmluaXRlKGUpJiZNYXRoLmZsb29yKGUpPT09ZX0sbi5pc1N0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBTdHJpbmd9LG4uaXNPYmplY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJvYmplY3QiPT10eXBlb2YgZX0sbi5pc3NldD1uLmlzU2V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVt0XTtyZXR1cm4hKG51bGw9PXJ8fCFlLmhhc093blByb3BlcnR5KHQpKSYmKCJvYmplY3QiIT10eXBlb2Ygcnx8KEFycmF5LmlzQXJyYXkocik/ci5sZW5ndGg6T2JqZWN0LmtleXMocikubGVuZ3RoKT4wKX0sbi5CdWZmZXI9ZnVuY3Rpb24oKXt0cnl7dmFyIGU9bi5pbnF1aXJlKCJidWZmZXIiKS5CdWZmZXI7cmV0dXJuIGUucHJvdG90eXBlLnV0ZjhXcml0ZT9lOm51bGx9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fSgpLG4uX0J1ZmZlcl9mcm9tPW51bGwsbi5fQnVmZmVyX2FsbG9jVW5zYWZlPW51bGwsbi5uZXdCdWZmZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlP24uQnVmZmVyP24uX0J1ZmZlcl9hbGxvY1Vuc2FmZShlKTpuZXcgbi5BcnJheShlKTpuLkJ1ZmZlcj9uLl9CdWZmZXJfZnJvbShlKToidW5kZWZpbmVkIj09dHlwZW9mIFVpbnQ4QXJyYXk/ZTpuZXcgVWludDhBcnJheShlKX0sbi5BcnJheT0idW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxuLkxvbmc9bi5nbG9iYWwuZGNvZGVJTyYmbi5nbG9iYWwuZGNvZGVJTy5Mb25nfHxuLmdsb2JhbC5Mb25nfHxuLmlucXVpcmUoImxvbmciKSxuLmtleTJSZT0vXnRydWV8ZmFsc2V8MHwxJC8sbi5rZXkzMlJlPS9eLT8oPzowfFsxLTldWzAtOV0qKSQvLG4ua2V5NjRSZT0vXig/OltcXHgwMC1cXHhmZl17OH18LT8oPzowfFsxLTldWzAtOV0qKSkkLyxuLmxvbmdUb0hhc2g9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/bi5Mb25nQml0cy5mcm9tKGUpLnRvSGFzaCgpOm4uTG9uZ0JpdHMuemVyb0hhc2h9LG4ubG9uZ0Zyb21IYXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bi5Mb25nQml0cy5mcm9tSGFzaChlKTtyZXR1cm4gbi5Mb25nP24uTG9uZy5mcm9tQml0cyhyLmxvLHIuaGksdCk6ci50b051bWJlcihCb29sZWFuKHQpKX0sbi5tZXJnZT1vLG4ubGNGaXJzdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKStlLnN1YnN0cmluZygxKX0sbi5uZXdFcnJvcj1pLG4uUHJvdG9jb2xFcnJvcj1pKCJQcm90b2NvbEVycm9yIiksbi5vbmVPZkdldHRlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9e30scj0wO3I8ZS5sZW5ndGg7KytyKXRbZVtyXV09MTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGU9T2JqZWN0LmtleXModGhpcykscj1lLmxlbmd0aC0xO3I+LTE7LS1yKWlmKDE9PT10W2Vbcl1dJiZ2b2lkIDAhPT10aGlzW2Vbcl1dJiZudWxsIT09dGhpc1tlW3JdXSlyZXR1cm4gZVtyXX19LG4ub25lT2ZTZXR0ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7KytyKWVbcl0hPT10JiZkZWxldGUgdGhpc1tlW3JdXX19LG4udG9KU09OT3B0aW9ucz17bG9uZ3M6U3RyaW5nLGVudW1zOlN0cmluZyxieXRlczpTdHJpbmcsanNvbjohMH0sbi5fY29uZmlndXJlPWZ1bmN0aW9uKCl7dmFyIGU9bi5CdWZmZXI7ZT8obi5fQnVmZmVyX2Zyb209ZS5mcm9tIT09VWludDhBcnJheS5mcm9tJiZlLmZyb218fGZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBlKHQscil9LG4uX0J1ZmZlcl9hbGxvY1Vuc2FmZT1lLmFsbG9jVW5zYWZlfHxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9KTpuLl9CdWZmZXJfZnJvbT1uLl9CdWZmZXJfYWxsb2NVbnNhZmU9bnVsbH19LDQyMDooZSx0LHIpPT57InVzZSBzdHJpY3QiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1vLmNvZGVnZW4oWyJtIl0sZS5uYW1lKyIkdmVyaWZ5IikoJ2lmKHR5cGVvZiBtIT09Im9iamVjdCJ8fG09PT1udWxsKScpKCJyZXR1cm4laiIsIm9iamVjdCBleHBlY3RlZCIpLHI9e307ZS5vbmVvZnNBcnJheS5sZW5ndGgmJnQoInZhciBwPXt9Iik7Zm9yKHZhciBuPTA7bjxlLmZpZWxkc0FycmF5Lmxlbmd0aDsrK24pe3ZhciBsPWUuX2ZpZWxkc0FycmF5W25dLnJlc29sdmUoKSxjPSJtIitvLnNhZmVQcm9wKGwubmFtZSk7aWYobC5vcHRpb25hbCYmdCgiaWYoJXMhPW51bGwmJm0uaGFzT3duUHJvcGVydHkoJWopKXsiLGMsbC5uYW1lKSxsLm1hcCl0KCJpZighdXRpbC5pc09iamVjdCglcykpIixjKSgicmV0dXJuJWoiLGkobCwib2JqZWN0IikpKCJ2YXIgaz1PYmplY3Qua2V5cyglcykiLGMpKCJmb3IodmFyIGk9MDtpPGsubGVuZ3RoOysraSl7Iikscyh0LGwsImtbaV0iKSxhKHQsbCxuLGMrIltrW2ldXSIpKCJ9Iik7ZWxzZSBpZihsLnJlcGVhdGVkKXQoImlmKCFBcnJheS5pc0FycmF5KCVzKSkiLGMpKCJyZXR1cm4laiIsaShsLCJhcnJheSIpKSgiZm9yKHZhciBpPTA7aTwlcy5sZW5ndGg7KytpKXsiLGMpLGEodCxsLG4sYysiW2ldIikoIn0iKTtlbHNle2lmKGwucGFydE9mKXt2YXIgdT1vLnNhZmVQcm9wKGwucGFydE9mLm5hbWUpOzE9PT1yW2wucGFydE9mLm5hbWVdJiZ0KCJpZihwJXM9PT0xKSIsdSkoInJldHVybiVqIixsLnBhcnRPZi5uYW1lKyI6IG11bHRpcGxlIHZhbHVlcyIpLHJbbC5wYXJ0T2YubmFtZV09MSx0KCJwJXM9MSIsdSl9YSh0LGwsbixjKX1sLm9wdGlvbmFsJiZ0KCJ9Iil9cmV0dXJuIHQoInJldHVybiBudWxsIil9O3ZhciBuPXIoNTY0Myksbz1yKDMyNjIpO2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZS5uYW1lKyI6ICIrdCsoZS5yZXBlYXRlZCYmImFycmF5IiE9PXQ/IltdIjplLm1hcCYmIm9iamVjdCIhPT10PyJ7azoiK2Uua2V5VHlwZSsifSI6IiIpKyIgZXhwZWN0ZWQifWZ1bmN0aW9uIGEoZSx0LHIsbyl7aWYodC5yZXNvbHZlZFR5cGUpaWYodC5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBuKXtlKCJzd2l0Y2goJXMpeyIsbykoImRlZmF1bHQ6IikoInJldHVybiVqIixpKHQsImVudW0gdmFsdWUiKSk7Zm9yKHZhciBhPU9iamVjdC5rZXlzKHQucmVzb2x2ZWRUeXBlLnZhbHVlcykscz0wO3M8YS5sZW5ndGg7KytzKWUoImNhc2UgJWk6Iix0LnJlc29sdmVkVHlwZS52YWx1ZXNbYVtzXV0pO2UoImJyZWFrIikoIn0iKX1lbHNlIGUoInsiKSgidmFyIGU9dHlwZXNbJWldLnZlcmlmeSglcyk7IixyLG8pKCJpZihlKSIpKCJyZXR1cm4laitlIix0Lm5hbWUrIi4iKSgifSIpO2Vsc2Ugc3dpdGNoKHQudHlwZSl7Y2FzZSJpbnQzMiI6Y2FzZSJ1aW50MzIiOmNhc2Uic2ludDMyIjpjYXNlImZpeGVkMzIiOmNhc2Uic2ZpeGVkMzIiOmUoImlmKCF1dGlsLmlzSW50ZWdlciglcykpIixvKSgicmV0dXJuJWoiLGkodCwiaW50ZWdlciIpKTticmVhaztjYXNlImludDY0IjpjYXNlInVpbnQ2NCI6Y2FzZSJzaW50NjQiOmNhc2UiZml4ZWQ2NCI6Y2FzZSJzZml4ZWQ2NCI6ZSgiaWYoIXV0aWwuaXNJbnRlZ2VyKCVzKSYmISglcyYmdXRpbC5pc0ludGVnZXIoJXMubG93KSYmdXRpbC5pc0ludGVnZXIoJXMuaGlnaCkpKSIsbyxvLG8sbykoInJldHVybiVqIixpKHQsImludGVnZXJ8TG9uZyIpKTticmVhaztjYXNlImZsb2F0IjpjYXNlImRvdWJsZSI6ZSgnaWYodHlwZW9mICVzIT09Im51bWJlciIpJyxvKSgicmV0dXJuJWoiLGkodCwibnVtYmVyIikpO2JyZWFrO2Nhc2UiYm9vbCI6ZSgnaWYodHlwZW9mICVzIT09ImJvb2xlYW4iKScsbykoInJldHVybiVqIixpKHQsImJvb2xlYW4iKSk7YnJlYWs7Y2FzZSJzdHJpbmciOmUoImlmKCF1dGlsLmlzU3RyaW5nKCVzKSkiLG8pKCJyZXR1cm4laiIsaSh0LCJzdHJpbmciKSk7YnJlYWs7Y2FzZSJieXRlcyI6ZSgnaWYoISglcyYmdHlwZW9mICVzLmxlbmd0aD09PSJudW1iZXIifHx1dGlsLmlzU3RyaW5nKCVzKSkpJyxvLG8sbykoInJldHVybiVqIixpKHQsImJ1ZmZlciIpKX1yZXR1cm4gZX1mdW5jdGlvbiBzKGUsdCxyKXtzd2l0Y2godC5rZXlUeXBlKXtjYXNlImludDMyIjpjYXNlInVpbnQzMiI6Y2FzZSJzaW50MzIiOmNhc2UiZml4ZWQzMiI6Y2FzZSJzZml4ZWQzMiI6ZSgiaWYoIXV0aWwua2V5MzJSZS50ZXN0KCVzKSkiLHIpKCJyZXR1cm4laiIsaSh0LCJpbnRlZ2VyIGtleSIpKTticmVhaztjYXNlImludDY0IjpjYXNlInVpbnQ2NCI6Y2FzZSJzaW50NjQiOmNhc2UiZml4ZWQ2NCI6Y2FzZSJzZml4ZWQ2NCI6ZSgiaWYoIXV0aWwua2V5NjRSZS50ZXN0KCVzKSkiLHIpKCJyZXR1cm4laiIsaSh0LCJpbnRlZ2VyfExvbmcga2V5IikpO2JyZWFrO2Nhc2UiYm9vbCI6ZSgiaWYoIXV0aWwua2V5MlJlLnRlc3QoJXMpKSIscikoInJldHVybiVqIixpKHQsImJvb2xlYW4ga2V5IikpfXJldHVybiBlfX0sNjQzNDooZSx0LHIpPT57InVzZSBzdHJpY3QiO3ZhciBuPXQsbz1yKDI1NTEpO25bIi5nb29nbGUucHJvdG9idWYuQW55Il09e2Zyb21PYmplY3Q6ZnVuY3Rpb24oZSl7aWYoZSYmZVsiQHR5cGUiXSl7dmFyIHQ9ZVsiQHR5cGUiXS5zdWJzdHJpbmcoZVsiQHR5cGUiXS5sYXN0SW5kZXhPZigiLyIpKzEpLHI9dGhpcy5sb29rdXAodCk7aWYocil7dmFyIG49Ii4iPT09ZVsiQHR5cGUiXS5jaGFyQXQoMCk/ZVsiQHR5cGUiXS5zbGljZSgxKTplWyJAdHlwZSJdO3JldHVybi0xPT09bi5pbmRleE9mKCIvIikmJihuPSIvIituKSx0aGlzLmNyZWF0ZSh7dHlwZV91cmw6bix2YWx1ZTpyLmVuY29kZShyLmZyb21PYmplY3QoZSkpLmZpbmlzaCgpfSl9fXJldHVybiB0aGlzLmZyb21PYmplY3QoZSl9LHRvT2JqZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9IiIsbj0iIjtpZih0JiZ0Lmpzb24mJmUudHlwZV91cmwmJmUudmFsdWUpe249ZS50eXBlX3VybC5zdWJzdHJpbmcoZS50eXBlX3VybC5sYXN0SW5kZXhPZigiLyIpKzEpLHI9ZS50eXBlX3VybC5zdWJzdHJpbmcoMCxlLnR5cGVfdXJsLmxhc3RJbmRleE9mKCIvIikrMSk7dmFyIGk9dGhpcy5sb29rdXAobik7aSYmKGU9aS5kZWNvZGUoZS52YWx1ZSkpfWlmKCEoZSBpbnN0YW5jZW9mIHRoaXMuY3RvcikmJmUgaW5zdGFuY2VvZiBvKXt2YXIgYT1lLiR0eXBlLnRvT2JqZWN0KGUsdCk7cmV0dXJuIiI9PT1yJiYocj0idHlwZS5nb29nbGVhcGlzLmNvbS8iKSxuPXIrKCIuIj09PWUuJHR5cGUuZnVsbE5hbWVbMF0/ZS4kdHlwZS5mdWxsTmFtZS5zbGljZSgxKTplLiR0eXBlLmZ1bGxOYW1lKSxhWyJAdHlwZSJdPW4sYX1yZXR1cm4gdGhpcy50b09iamVjdChlLHQpfX19LDM0NDk6KGUsdCxyKT0+eyJ1c2Ugc3RyaWN0IjtlLmV4cG9ydHM9cDt2YXIgbixvPXIoMzYxMCksaT1vLkxvbmdCaXRzLGE9by5iYXNlNjQscz1vLnV0Zjg7ZnVuY3Rpb24gbChlLHQscil7dGhpcy5mbj1lLHRoaXMubGVuPXQsdGhpcy5uZXh0PXZvaWQgMCx0aGlzLnZhbD1yfWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gdShlKXt0aGlzLmhlYWQ9ZS5oZWFkLHRoaXMudGFpbD1lLnRhaWwsdGhpcy5sZW49ZS5sZW4sdGhpcy5uZXh0PWUuc3RhdGVzfWZ1bmN0aW9uIHAoKXt0aGlzLmxlbj0wLHRoaXMuaGVhZD1uZXcgbChjLDAsMCksdGhpcy50YWlsPXRoaXMuaGVhZCx0aGlzLnN0YXRlcz1udWxsfXZhciBkPWZ1bmN0aW9uKCl7cmV0dXJuIG8uQnVmZmVyP2Z1bmN0aW9uKCl7cmV0dXJuKHAuY3JlYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBufSkoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHB9fTtmdW5jdGlvbiBmKGUsdCxyKXt0W3JdPTI1NSZlfWZ1bmN0aW9uIGgoZSx0KXt0aGlzLmxlbj1lLHRoaXMubmV4dD12b2lkIDAsdGhpcy52YWw9dH1mdW5jdGlvbiBnKGUsdCxyKXtmb3IoO2UuaGk7KXRbcisrXT0xMjcmZS5sb3wxMjgsZS5sbz0oZS5sbz4+Pjd8ZS5oaTw8MjUpPj4+MCxlLmhpPj4+PTc7Zm9yKDtlLmxvPjEyNzspdFtyKytdPTEyNyZlLmxvfDEyOCxlLmxvPWUubG8+Pj43O3RbcisrXT1lLmxvfWZ1bmN0aW9uIHkoZSx0LHIpe3Rbcl09MjU1JmUsdFtyKzFdPWU+Pj44JjI1NSx0W3IrMl09ZT4+PjE2JjI1NSx0W3IrM109ZT4+PjI0fXAuY3JlYXRlPWQoKSxwLmFsbG9jPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgby5BcnJheShlKX0sby5BcnJheSE9PUFycmF5JiYocC5hbGxvYz1vLnBvb2wocC5hbGxvYyxvLkFycmF5LnByb3RvdHlwZS5zdWJhcnJheSkpLHAucHJvdG90eXBlLl9wdXNoPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy50YWlsPXRoaXMudGFpbC5uZXh0PW5ldyBsKGUsdCxyKSx0aGlzLmxlbis9dCx0aGlzfSxoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGwucHJvdG90eXBlKSxoLnByb3RvdHlwZS5mbj1mdW5jdGlvbihlLHQscil7Zm9yKDtlPjEyNzspdFtyKytdPTEyNyZlfDEyOCxlPj4+PTc7dFtyXT1lfSxwLnByb3RvdHlwZS51aW50MzI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGVuKz0odGhpcy50YWlsPXRoaXMudGFpbC5uZXh0PW5ldyBoKChlPj4+PTApPDEyOD8xOmU8MTYzODQ/MjplPDIwOTcxNTI/MzplPDI2ODQzNTQ1Nj80OjUsZSkpLmxlbix0aGlzfSxwLnByb3RvdHlwZS5pbnQzMj1mdW5jdGlvbihlKXtyZXR1cm4gZTwwP3RoaXMuX3B1c2goZywxMCxpLmZyb21OdW1iZXIoZSkpOnRoaXMudWludDMyKGUpfSxwLnByb3RvdHlwZS5zaW50MzI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudWludDMyKChlPDwxXmU+PjMxKT4+PjApfSxwLnByb3RvdHlwZS51aW50NjQ9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5mcm9tKGUpO3JldHVybiB0aGlzLl9wdXNoKGcsdC5sZW5ndGgoKSx0KX0scC5wcm90b3R5cGUuaW50NjQ9cC5wcm90b3R5cGUudWludDY0LHAucHJvdG90eXBlLnNpbnQ2ND1mdW5jdGlvbihlKXt2YXIgdD1pLmZyb20oZSkuenpFbmNvZGUoKTtyZXR1cm4gdGhpcy5fcHVzaChnLHQubGVuZ3RoKCksdCl9LHAucHJvdG90eXBlLmJvb2w9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3B1c2goZiwxLGU/MTowKX0scC5wcm90b3R5cGUuZml4ZWQzMj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHVzaCh5LDQsZT4+PjApfSxwLnByb3RvdHlwZS5zZml4ZWQzMj1wLnByb3RvdHlwZS5maXhlZDMyLHAucHJvdG90eXBlLmZpeGVkNjQ9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5mcm9tKGUpO3JldHVybiB0aGlzLl9wdXNoKHksNCx0LmxvKS5fcHVzaCh5LDQsdC5oaSl9LHAucHJvdG90eXBlLnNmaXhlZDY0PXAucHJvdG90eXBlLmZpeGVkNjQscC5wcm90b3R5cGUuZmxvYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3B1c2goby5mbG9hdC53cml0ZUZsb2F0TEUsNCxlKX0scC5wcm90b3R5cGUuZG91YmxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wdXNoKG8uZmxvYXQud3JpdGVEb3VibGVMRSw4LGUpfTt2YXIgbT1vLkFycmF5LnByb3RvdHlwZS5zZXQ/ZnVuY3Rpb24oZSx0LHIpe3Quc2V0KGUscil9OmZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoOysrbil0W3Irbl09ZVtuXX07cC5wcm90b3R5cGUuYnl0ZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg+Pj4wO2lmKCF0KXJldHVybiB0aGlzLl9wdXNoKGYsMSwwKTtpZihvLmlzU3RyaW5nKGUpKXt2YXIgcj1wLmFsbG9jKHQ9YS5sZW5ndGgoZSkpO2EuZGVjb2RlKGUsciwwKSxlPXJ9cmV0dXJuIHRoaXMudWludDMyKHQpLl9wdXNoKG0sdCxlKX0scC5wcm90b3R5cGUuc3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0PXMubGVuZ3RoKGUpO3JldHVybiB0P3RoaXMudWludDMyKHQpLl9wdXNoKHMud3JpdGUsdCxlKTp0aGlzLl9wdXNoKGYsMSwwKX0scC5wcm90b3R5cGUuZm9yaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlcz1uZXcgdSh0aGlzKSx0aGlzLmhlYWQ9dGhpcy50YWlsPW5ldyBsKGMsMCwwKSx0aGlzLmxlbj0wLHRoaXN9LHAucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVzPyh0aGlzLmhlYWQ9dGhpcy5zdGF0ZXMuaGVhZCx0aGlzLnRhaWw9dGhpcy5zdGF0ZXMudGFpbCx0aGlzLmxlbj10aGlzLnN0YXRlcy5sZW4sdGhpcy5zdGF0ZXM9dGhpcy5zdGF0ZXMubmV4dCk6KHRoaXMuaGVhZD10aGlzLnRhaWw9bmV3IGwoYywwLDApLHRoaXMubGVuPTApLHRoaXN9LHAucHJvdG90eXBlLmxkZWxpbT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGVhZCx0PXRoaXMudGFpbCxyPXRoaXMubGVuO3JldHVybiB0aGlzLnJlc2V0KCkudWludDMyKHIpLHImJih0aGlzLnRhaWwubmV4dD1lLm5leHQsdGhpcy50YWlsPXQsdGhpcy5sZW4rPXIpLHRoaXN9LHAucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmhlYWQubmV4dCx0PXRoaXMuY29uc3RydWN0b3IuYWxsb2ModGhpcy5sZW4pLHI9MDtlOyllLmZuKGUudmFsLHQscikscis9ZS5sZW4sZT1lLm5leHQ7cmV0dXJuIHR9LHAuX2NvbmZpZ3VyZT1mdW5jdGlvbihlKXtuPWUscC5jcmVhdGU9ZCgpLG4uX2NvbmZpZ3VyZSgpfX0sODE4OihlLHQscik9PnsidXNlIHN0cmljdCI7ZS5leHBvcnRzPWk7dmFyIG49cigzNDQ5KTsoaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWk7dmFyIG89cigzNjEwKTtmdW5jdGlvbiBpKCl7bi5jYWxsKHRoaXMpfWZ1bmN0aW9uIGEoZSx0LHIpe2UubGVuZ3RoPDQwP28udXRmOC53cml0ZShlLHQscik6dC51dGY4V3JpdGU/dC51dGY4V3JpdGUoZSxyKTp0LndyaXRlKGUscil9aS5fY29uZmlndXJlPWZ1bmN0aW9uKCl7aS5hbGxvYz1vLl9CdWZmZXJfYWxsb2NVbnNhZmUsaS53cml0ZUJ5dGVzQnVmZmVyPW8uQnVmZmVyJiZvLkJ1ZmZlci5wcm90b3R5cGUgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYic2V0Ij09PW8uQnVmZmVyLnByb3RvdHlwZS5zZXQubmFtZT9mdW5jdGlvbihlLHQscil7dC5zZXQoZSxyKX06ZnVuY3Rpb24oZSx0LHIpe2lmKGUuY29weSllLmNvcHkodCxyLDAsZS5sZW5ndGgpO2Vsc2UgZm9yKHZhciBuPTA7bjxlLmxlbmd0aDspdFtyKytdPWVbbisrXX19LGkucHJvdG90eXBlLmJ5dGVzPWZ1bmN0aW9uKGUpe28uaXNTdHJpbmcoZSkmJihlPW8uX0J1ZmZlcl9mcm9tKGUsImJhc2U2NCIpKTt2YXIgdD1lLmxlbmd0aD4+PjA7cmV0dXJuIHRoaXMudWludDMyKHQpLHQmJnRoaXMuX3B1c2goaS53cml0ZUJ5dGVzQnVmZmVyLHQsZSksdGhpc30saS5wcm90b3R5cGUuc3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0PW8uQnVmZmVyLmJ5dGVMZW5ndGgoZSk7cmV0dXJuIHRoaXMudWludDMyKHQpLHQmJnRoaXMuX3B1c2goYSx0LGUpLHRoaXN9LGkuX2NvbmZpZ3VyZSgpfSw5MzY0OmU9PntjbGFzcyB0e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5uYW1lPWUsdGhpcy5zdWNjZXNzb3JzPXQsdGhpcy5yZXNldCgpfXJlc2V0KCl7dGhpcy5pbmRleD0tMSx0aGlzLmxvd0xpbms9LTEsdGhpcy5vblN0YWNrPSExLHRoaXMudmlzaXRlZD0hMX19Y2xhc3Mgcntjb25zdHJ1Y3Rvcigpe3RoaXMudmVydGljZXM9e319YWRkKGUscil7Y29uc3Qgbj0ocj1BcnJheS5pc0FycmF5KHIpP3I6W3JdKS5tYXAoKGU9Pih0aGlzLnZlcnRpY2VzW2VdfHwodGhpcy52ZXJ0aWNlc1tlXT1uZXcgdChlLFtdKSksdGhpcy52ZXJ0aWNlc1tlXSkpKTtyZXR1cm4gdGhpcy52ZXJ0aWNlc1tlXXx8KHRoaXMudmVydGljZXNbZV09bmV3IHQoZSkpLHRoaXMudmVydGljZXNbZV0uc3VjY2Vzc29ycz1uLmNvbmNhdChbXSkucmV2ZXJzZSgpLHRoaXN9cmVzZXQoKXtPYmplY3Qua2V5cyh0aGlzLnZlcnRpY2VzKS5mb3JFYWNoKChlPT57dGhpcy52ZXJ0aWNlc1tlXS5yZXNldCgpfSkpfWFkZEFuZFZlcmlmeShlLHQpe3RoaXMuYWRkKGUsdCk7Y29uc3Qgcj10aGlzLmdldEN5Y2xlcygpO2lmKHIubGVuZ3RoKXtsZXQgZT1gRGV0ZWN0ZWQgJHtyLmxlbmd0aH0gY3ljbGUkezE9PT1yLmxlbmd0aD8iIjoicyJ9OmA7ZSs9IlxuIityLm1hcCgoZT0+e2NvbnN0IHQ9ZS5tYXAoKGU9PmUubmFtZSkpO3JldHVybmAgICR7dC5qb2luKCIgLT4gIil9IC0+ICR7dFswXX1gfSkpLmpvaW4oIlxuIik7Y29uc3QgdD1uZXcgRXJyb3IoZSk7dGhyb3cgdC5jeWNsZXM9cix0fXJldHVybiB0aGlzfWRmcyhlLHQpe3RoaXMucmVzZXQoKTtjb25zdCByPVt0aGlzLnZlcnRpY2VzW2VdXTtsZXQgbjtmb3IoO249ci5wb3AoKTspbi52aXNpdGVkfHwodChuKSxuLnZpc2l0ZWQ9ITAsbi5zdWNjZXNzb3JzLmZvckVhY2goKGU9PnIucHVzaChlKSkpKX1nZXREZXNjZW5kYW50cyhlKXtjb25zdCB0PVtdO2xldCByPSEwO3JldHVybiB0aGlzLmRmcyhlLChlPT57cj9yPSExOnQucHVzaChlLm5hbWUpfSkpLHR9aGFzQ3ljbGUoKXtyZXR1cm4gdGhpcy5nZXRDeWNsZXMoKS5sZW5ndGg+MH1nZXRTdHJvbmdseUNvbm5lY3RlZENvbXBvbmVudHMoKXtjb25zdCBlPU9iamVjdC5rZXlzKHRoaXMudmVydGljZXMpLm1hcCgoZT0+KHRoaXMudmVydGljZXNbZV0ucmVzZXQoKSx0aGlzLnZlcnRpY2VzW2VdKSkpO2xldCB0PTA7Y29uc3Qgcj1bXSxuPVtdLG89ZT0+e2lmKGUuaW5kZXg9dCxlLmxvd0xpbms9dCx0Kyssci5wdXNoKGUpLGUub25TdGFjaz0hMCxlLnN1Y2Nlc3NvcnMuZm9yRWFjaCgodD0+e3QuaW5kZXg8MD8obyh0KSxlLmxvd0xpbms9TWF0aC5taW4oZS5sb3dMaW5rLHQubG93TGluaykpOnQub25TdGFjayYmKGUubG93TGluaz1NYXRoLm1pbihlLmxvd0xpbmssdC5pbmRleCkpfSkpLGUubG93TGluaz09PWUuaW5kZXgpe2NvbnN0IHQ9W107bGV0IG87ZG97bz1yLnBvcCgpLG8ub25TdGFjaz0hMSx0LnB1c2gobyl9d2hpbGUobyE9PWUpO24ucHVzaCh0KX19O3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuaW5kZXg8MCYmbyhlKX0pKSxufWdldEN5Y2xlcygpe3JldHVybiB0aGlzLmdldFN0cm9uZ2x5Q29ubmVjdGVkQ29tcG9uZW50cygpLmZpbHRlcigoZT0+e2lmKGUubGVuZ3RoPjEpcmV0dXJuITA7Y29uc3QgdD1lWzBdO3JldHVybiB0JiZ0LnN1Y2Nlc3NvcnMuc29tZSgoZT0+ZT09PXQpKX0pKX1jbG9uZSgpe2NvbnN0IGU9bmV3IHI7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudmVydGljZXMpLmZvckVhY2goKHQ9Pntjb25zdCByPXRoaXMudmVydGljZXNbdF07ZS5hZGQoci5uYW1lLHIuc3VjY2Vzc29ycy5tYXAoKGU9PmUubmFtZSkpKX0pKSxlfXRvRG90KCl7Y29uc3QgZT10aGlzLnZlcnRpY2VzLHQ9WyJkaWdyYXBoIHsiXTtyZXR1cm4gdGhpcy5nZXRDeWNsZXMoKS5mb3JFYWNoKCgoZSxyKT0+e3QucHVzaCgiICBzdWJncmFwaCBjbHVzdGVyIityKyIgeyIpLHQucHVzaCgiICAgIGNvbG9yPXJlZDsiKSx0LnB1c2goIiAgICAiK2UubWFwKChlPT5lLm5hbWUpKS5qb2luKCI7ICIpKyI7IiksdC5wdXNoKCIgIH0iKX0pKSxPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChyPT57Y29uc3Qgbj1lW3JdO24uc3VjY2Vzc29ycy5sZW5ndGgmJm4uc3VjY2Vzc29ycy5mb3JFYWNoKChlPT57dC5wdXNoKGAgICR7bi5uYW1lfSAtPiAke2UubmFtZX1gKX0pKX0pKSx0LnB1c2goIn0iKSx0LmpvaW4oIlxuIikrIlxuIn19ZS5leHBvcnRzPXJ9fSxfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX189e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhlKXt2YXIgdD1fX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bZV07aWYodm9pZCAwIT09dClyZXR1cm4gdC5leHBvcnRzO3ZhciByPV9fd2VicGFja19tb2R1bGVfY2FjaGVfX1tlXT17ZXhwb3J0czp7fX07cmV0dXJuIF9fd2VicGFja19tb2R1bGVzX19bZV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksci5leHBvcnRzfXZhciBfX3dlYnBhY2tfZXhwb3J0c19fPXt9OygoKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgZT1fX3dlYnBhY2tfZXhwb3J0c19fO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdD1fX3dlYnBhY2tfcmVxdWlyZV9fKDI2MTgpO2UuY29tcGlsZXI9dC5jb21waWxlcixlLmluZGV4RmlsZUdlbmVyYXRvcj10LmluZGV4RmlsZUdlbmVyYXRvcixlLm1haW49dC5tYWluLGUuc2Vzc2lvbj10LnNlc3Npb24sZS5zdXBwb3J0ZWRGZWF0dXJlcz10LnN1cHBvcnRlZEZlYXR1cmVzLGUudmVyc2lvbj10LnZlcnNpb259KSgpLG1vZHVsZS5leHBvcnRzPV9fd2VicGFja19leHBvcnRzX199KSgpOw=="
}
