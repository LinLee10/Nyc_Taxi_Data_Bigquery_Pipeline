{
  "fileContents": "aW1wb3J0ICogYXMgJHByb3RvYnVmIGZyb20gJ3Byb3RvYnVmanMnOwoKZGVjbGFyZSBmdW5jdGlvbiBjb21waWxlKGNvZGU6IHN0cmluZywgcGF0aDogc3RyaW5nKTogc3RyaW5nOwoKZGVjbGFyZSBmdW5jdGlvbiBtYWluKGNvcmVFeGVjdXRpb25SZXF1ZXN0OiBVaW50OEFycmF5IHwgc3RyaW5nKTogVWludDhBcnJheSB8IHN0cmluZzsKCi8qKiBOYW1lc3BhY2UgZGF0YWZvcm0uICovCm5hbWVzcGFjZSBkYXRhZm9ybSB7CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBXb3JrZmxvd1NldHRpbmdzLiAqLwogICAgaW50ZXJmYWNlIElXb3JrZmxvd1NldHRpbmdzIHsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgZGF0YWZvcm1Db3JlVmVyc2lvbiAqLwogICAgICAgIGRhdGFmb3JtQ29yZVZlcnNpb24/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyBkZWZhdWx0UHJvamVjdCAqLwogICAgICAgIGRlZmF1bHRQcm9qZWN0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgZGVmYXVsdERhdGFzZXQgKi8KICAgICAgICBkZWZhdWx0RGF0YXNldD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIGRlZmF1bHRMb2NhdGlvbiAqLwogICAgICAgIGRlZmF1bHRMb2NhdGlvbj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIGRlZmF1bHRBc3NlcnRpb25EYXRhc2V0ICovCiAgICAgICAgZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyB2YXJzICovCiAgICAgICAgdmFycz86ICh7IFtrOiBzdHJpbmddOiBzdHJpbmcgfXxudWxsKTsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgcHJvamVjdFN1ZmZpeCAqLwogICAgICAgIHByb2plY3RTdWZmaXg/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyBkYXRhc2V0U3VmZml4ICovCiAgICAgICAgZGF0YXNldFN1ZmZpeD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIG5hbWVQcmVmaXggKi8KICAgICAgICBuYW1lUHJlZml4PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMgKi8KICAgICAgICBkZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz86IChkYXRhZm9ybS5JTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZ3xudWxsKTsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXggKi8KICAgICAgICBidWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeD86IChzdHJpbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBXb3JrZmxvd1NldHRpbmdzLiAqLwogICAgY2xhc3MgV29ya2Zsb3dTZXR0aW5ncyBpbXBsZW1lbnRzIElXb3JrZmxvd1NldHRpbmdzIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBXb3JrZmxvd1NldHRpbmdzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSVdvcmtmbG93U2V0dGluZ3MpOwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyBkYXRhZm9ybUNvcmVWZXJzaW9uLiAqLwogICAgICAgIHB1YmxpYyBkYXRhZm9ybUNvcmVWZXJzaW9uOiBzdHJpbmc7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIGRlZmF1bHRQcm9qZWN0LiAqLwogICAgICAgIHB1YmxpYyBkZWZhdWx0UHJvamVjdDogc3RyaW5nOwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyBkZWZhdWx0RGF0YXNldC4gKi8KICAgICAgICBwdWJsaWMgZGVmYXVsdERhdGFzZXQ6IHN0cmluZzsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgZGVmYXVsdExvY2F0aW9uLiAqLwogICAgICAgIHB1YmxpYyBkZWZhdWx0TG9jYXRpb246IHN0cmluZzsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgZGVmYXVsdEFzc2VydGlvbkRhdGFzZXQuICovCiAgICAgICAgcHVibGljIGRlZmF1bHRBc3NlcnRpb25EYXRhc2V0OiBzdHJpbmc7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIHZhcnMuICovCiAgICAgICAgcHVibGljIHZhcnM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB9OwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyBwcm9qZWN0U3VmZml4LiAqLwogICAgICAgIHB1YmxpYyBwcm9qZWN0U3VmZml4OiBzdHJpbmc7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIGRhdGFzZXRTdWZmaXguICovCiAgICAgICAgcHVibGljIGRhdGFzZXRTdWZmaXg6IHN0cmluZzsKCiAgICAgICAgLyoqIFdvcmtmbG93U2V0dGluZ3MgbmFtZVByZWZpeC4gKi8KICAgICAgICBwdWJsaWMgbmFtZVByZWZpeDogc3RyaW5nOwoKICAgICAgICAvKiogV29ya2Zsb3dTZXR0aW5ncyBkZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucy4gKi8KICAgICAgICBwdWJsaWMgZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnM/OiAoZGF0YWZvcm0uSU5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBXb3JrZmxvd1NldHRpbmdzIGJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4LiAqLwogICAgICAgIHB1YmxpYyBidWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeDogc3RyaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFdvcmtmbG93U2V0dGluZ3MgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBXb3JrZmxvd1NldHRpbmdzIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklXb3JrZmxvd1NldHRpbmdzKTogZGF0YWZvcm0uV29ya2Zsb3dTZXR0aW5nczsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFdvcmtmbG93U2V0dGluZ3MgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uV29ya2Zsb3dTZXR0aW5ncy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBXb3JrZmxvd1NldHRpbmdzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSVdvcmtmbG93U2V0dGluZ3MsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgV29ya2Zsb3dTZXR0aW5ncyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5Xb3JrZmxvd1NldHRpbmdzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFdvcmtmbG93U2V0dGluZ3MgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JV29ya2Zsb3dTZXR0aW5ncywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBXb3JrZmxvd1NldHRpbmdzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBXb3JrZmxvd1NldHRpbmdzCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5Xb3JrZmxvd1NldHRpbmdzOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgV29ya2Zsb3dTZXR0aW5ncyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIFdvcmtmbG93U2V0dGluZ3MKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5Xb3JrZmxvd1NldHRpbmdzOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIFdvcmtmbG93U2V0dGluZ3MgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgV29ya2Zsb3dTZXR0aW5ncyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBXb3JrZmxvd1NldHRpbmdzCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5Xb3JrZmxvd1NldHRpbmdzOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBXb3JrZmxvd1NldHRpbmdzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBXb3JrZmxvd1NldHRpbmdzCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLldvcmtmbG93U2V0dGluZ3MsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgV29ya2Zsb3dTZXR0aW5ncyB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgV29ya2Zsb3dTZXR0aW5ncwogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEFjdGlvbkNvbmZpZ3MuICovCiAgICBpbnRlcmZhY2UgSUFjdGlvbkNvbmZpZ3MgewoKICAgICAgICAvKiogQWN0aW9uQ29uZmlncyBhY3Rpb25zICovCiAgICAgICAgYWN0aW9ucz86IChkYXRhZm9ybS5JQWN0aW9uQ29uZmlnW118bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gQWN0aW9uQ29uZmlncy4gKi8KICAgIGNsYXNzIEFjdGlvbkNvbmZpZ3MgaW1wbGVtZW50cyBJQWN0aW9uQ29uZmlncyB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQWN0aW9uQ29uZmlncy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklBY3Rpb25Db25maWdzKTsKCiAgICAgICAgLyoqIEFjdGlvbkNvbmZpZ3MgYWN0aW9ucy4gKi8KICAgICAgICBwdWJsaWMgYWN0aW9uczogZGF0YWZvcm0uSUFjdGlvbkNvbmZpZ1tdOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEFjdGlvbkNvbmZpZ3MgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBBY3Rpb25Db25maWdzIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklBY3Rpb25Db25maWdzKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnczsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFjdGlvbkNvbmZpZ3MgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlncy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBBY3Rpb25Db25maWdzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUFjdGlvbkNvbmZpZ3MsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQWN0aW9uQ29uZmlncyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25Db25maWdzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFjdGlvbkNvbmZpZ3MgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JQWN0aW9uQ29uZmlncywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gQWN0aW9uQ29uZmlncyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQWN0aW9uQ29uZmlncwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnczsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhbiBBY3Rpb25Db25maWdzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgQWN0aW9uQ29uZmlncwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZ3M7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGFuIEFjdGlvbkNvbmZpZ3MgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuIEFjdGlvbkNvbmZpZ3MgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQWN0aW9uQ29uZmlncwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnczsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEFjdGlvbkNvbmZpZ3MgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFjdGlvbkNvbmZpZ3MKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlncywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBBY3Rpb25Db25maWdzIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBBY3Rpb25Db25maWdzCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYW4gQWN0aW9uQ29uZmlnLiAqLwogICAgaW50ZXJmYWNlIElBY3Rpb25Db25maWcgewoKICAgICAgICAvKiogQWN0aW9uQ29uZmlnIHRhYmxlICovCiAgICAgICAgdGFibGU/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUNvbmZpZ3xudWxsKTsKCiAgICAgICAgLyoqIEFjdGlvbkNvbmZpZyB2aWV3ICovCiAgICAgICAgdmlldz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSVZpZXdDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgaW5jcmVtZW50YWxUYWJsZSAqLwogICAgICAgIGluY3JlbWVudGFsVGFibGU/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklJbmNyZW1lbnRhbFRhYmxlQ29uZmlnfG51bGwpOwoKICAgICAgICAvKiogQWN0aW9uQ29uZmlnIGFzc2VydGlvbiAqLwogICAgICAgIGFzc2VydGlvbj86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSUFzc2VydGlvbkNvbmZpZ3xudWxsKTsKCiAgICAgICAgLyoqIEFjdGlvbkNvbmZpZyBvcGVyYXRpb24gKi8KICAgICAgICBvcGVyYXRpb24/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklPcGVyYXRpb25Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgZGVjbGFyYXRpb24gKi8KICAgICAgICBkZWNsYXJhdGlvbj86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSURlY2xhcmF0aW9uQ29uZmlnfG51bGwpOwoKICAgICAgICAvKiogQWN0aW9uQ29uZmlnIG5vdGVib29rICovCiAgICAgICAgbm90ZWJvb2s/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklOb3RlYm9va0NvbmZpZ3xudWxsKTsKCiAgICAgICAgLyoqIEFjdGlvbkNvbmZpZyBkYXRhUHJlcGFyYXRpb24gKi8KICAgICAgICBkYXRhUHJlcGFyYXRpb24/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEYXRhUHJlcGFyYXRpb25Db25maWd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gQWN0aW9uQ29uZmlnLiAqLwogICAgY2xhc3MgQWN0aW9uQ29uZmlnIGltcGxlbWVudHMgSUFjdGlvbkNvbmZpZyB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQWN0aW9uQ29uZmlnLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUFjdGlvbkNvbmZpZyk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgdGFibGUuICovCiAgICAgICAgcHVibGljIHRhYmxlPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgdmlldy4gKi8KICAgICAgICBwdWJsaWMgdmlldz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSVZpZXdDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgaW5jcmVtZW50YWxUYWJsZS4gKi8KICAgICAgICBwdWJsaWMgaW5jcmVtZW50YWxUYWJsZT86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSUluY3JlbWVudGFsVGFibGVDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgYXNzZXJ0aW9uLiAqLwogICAgICAgIHB1YmxpYyBhc3NlcnRpb24/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklBc3NlcnRpb25Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgb3BlcmF0aW9uLiAqLwogICAgICAgIHB1YmxpYyBvcGVyYXRpb24/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklPcGVyYXRpb25Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgZGVjbGFyYXRpb24uICovCiAgICAgICAgcHVibGljIGRlY2xhcmF0aW9uPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JRGVjbGFyYXRpb25Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgbm90ZWJvb2suICovCiAgICAgICAgcHVibGljIG5vdGVib29rPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JTm90ZWJvb2tDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgZGF0YVByZXBhcmF0aW9uLiAqLwogICAgICAgIHB1YmxpYyBkYXRhUHJlcGFyYXRpb24/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEYXRhUHJlcGFyYXRpb25Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25Db25maWcgYWN0aW9uLiAqLwogICAgICAgIHB1YmxpYyBhY3Rpb24/OiAoInRhYmxlInwidmlldyJ8ImluY3JlbWVudGFsVGFibGUifCJhc3NlcnRpb24ifCJvcGVyYXRpb24ifCJkZWNsYXJhdGlvbiJ8Im5vdGVib29rInwiZGF0YVByZXBhcmF0aW9uIik7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQWN0aW9uQ29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQWN0aW9uQ29uZmlnIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklBY3Rpb25Db25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBBY3Rpb25Db25maWcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFjdGlvbkNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklBY3Rpb25Db25maWcsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQWN0aW9uQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBBY3Rpb25Db25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JQWN0aW9uQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhbiBBY3Rpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIEFjdGlvbkNvbmZpZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEFjdGlvbkNvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIEFjdGlvbkNvbmZpZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYW4gQWN0aW9uQ29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbiBBY3Rpb25Db25maWcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQWN0aW9uQ29uZmlnCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5BY3Rpb25Db25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhbiBBY3Rpb25Db25maWcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFjdGlvbkNvbmZpZwogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgQWN0aW9uQ29uZmlnIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBBY3Rpb25Db25maWcKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICBuYW1lc3BhY2UgQWN0aW9uQ29uZmlnIHsKCiAgICAgICAgLyoqIFByb3BlcnRpZXMgb2YgYSBUYXJnZXQuICovCiAgICAgICAgaW50ZXJmYWNlIElUYXJnZXQgewoKICAgICAgICAgICAgLyoqIFRhcmdldCBwcm9qZWN0ICovCiAgICAgICAgICAgIHByb2plY3Q/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhcmdldCBkYXRhc2V0ICovCiAgICAgICAgICAgIGRhdGFzZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhcmdldCBuYW1lICovCiAgICAgICAgICAgIG5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhcmdldCBpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucz86IChib29sZWFufG51bGwpOwogICAgICAgIH0KCiAgICAgICAgLyoqIFJlcHJlc2VudHMgYSBUYXJnZXQuICovCiAgICAgICAgY2xhc3MgVGFyZ2V0IGltcGxlbWVudHMgSVRhcmdldCB7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUYXJnZXQuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldCk7CgogICAgICAgICAgICAvKiogVGFyZ2V0IHByb2plY3QuICovCiAgICAgICAgICAgIHB1YmxpYyBwcm9qZWN0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVGFyZ2V0IGRhdGFzZXQuICovCiAgICAgICAgICAgIHB1YmxpYyBkYXRhc2V0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVGFyZ2V0IG5hbWUuICovCiAgICAgICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVGFyZ2V0IGluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM6IGJvb2xlYW47CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBUYXJnZXQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqIEByZXR1cm5zIFRhcmdldCBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhcmdldDsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGFyZ2V0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRhcmdldCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldCwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRhcmdldCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUYXJnZXQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYXJnZXQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIERlY29kZXMgYSBUYXJnZXQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIFRhcmdldAogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQ7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIFRhcmdldCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHJldHVybnMgVGFyZ2V0CiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQ7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogVmVyaWZpZXMgYSBUYXJnZXQgbWVzc2FnZS4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgVGFyZ2V0IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgVGFyZ2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYXJnZXQ7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVGFyZ2V0IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFyZ2V0CiAgICAgICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFyZ2V0LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVGFyZ2V0IHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRhcmdldAogICAgICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgICAgICB9CgogICAgICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgQ29sdW1uRGVzY3JpcHRvci4gKi8KICAgICAgICBpbnRlcmZhY2UgSUNvbHVtbkRlc2NyaXB0b3IgewoKICAgICAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgcGF0aCAqLwogICAgICAgICAgICBwYXRoPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgZGVzY3JpcHRpb24gKi8KICAgICAgICAgICAgZGVzY3JpcHRpb24/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgYmlncXVlcnlQb2xpY3lUYWdzICovCiAgICAgICAgICAgIGJpZ3F1ZXJ5UG9saWN5VGFncz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBDb2x1bW5EZXNjcmlwdG9yIHRhZ3MgKi8KICAgICAgICAgICAgdGFncz86IChzdHJpbmdbXXxudWxsKTsKICAgICAgICB9CgogICAgICAgIC8qKiBSZXByZXNlbnRzIGEgQ29sdW1uRGVzY3JpcHRvci4gKi8KICAgICAgICBjbGFzcyBDb2x1bW5EZXNjcmlwdG9yIGltcGxlbWVudHMgSUNvbHVtbkRlc2NyaXB0b3IgewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29sdW1uRGVzY3JpcHRvci4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JQ29sdW1uRGVzY3JpcHRvcik7CgogICAgICAgICAgICAvKiogQ29sdW1uRGVzY3JpcHRvciBwYXRoLiAqLwogICAgICAgICAgICBwdWJsaWMgcGF0aDogc3RyaW5nW107CgogICAgICAgICAgICAvKiogQ29sdW1uRGVzY3JpcHRvciBkZXNjcmlwdGlvbi4gKi8KICAgICAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogQ29sdW1uRGVzY3JpcHRvciBiaWdxdWVyeVBvbGljeVRhZ3MuICovCiAgICAgICAgICAgIHB1YmxpYyBiaWdxdWVyeVBvbGljeVRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgdGFncy4gKi8KICAgICAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQ29sdW1uRGVzY3JpcHRvciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICogQHJldHVybnMgQ29sdW1uRGVzY3JpcHRvciBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JQ29sdW1uRGVzY3JpcHRvcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JQ29sdW1uRGVzY3JpcHRvciwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbHVtbkRlc2NyaXB0b3IgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvbHVtbkRlc2NyaXB0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ29sdW1uRGVzY3JpcHRvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgICAgICogQHJldHVybnMgQ29sdW1uRGVzY3JpcHRvcgogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIERlY29kZXMgYSBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcmV0dXJucyBDb2x1bW5EZXNjcmlwdG9yCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgQ29sdW1uRGVzY3JpcHRvciBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgQ29sdW1uRGVzY3JpcHRvcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuQ29sdW1uRGVzY3JpcHRvcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29sdW1uRGVzY3JpcHRvcgogICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3IsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBDb2x1bW5EZXNjcmlwdG9yIHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIENvbHVtbkRlc2NyaXB0b3IKICAgICAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICAgICAgfQoKICAgICAgICAvKiogUHJvcGVydGllcyBvZiBhIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZy4gKi8KICAgICAgICBpbnRlcmZhY2UgSVRhYmxlQXNzZXJ0aW9uc0NvbmZpZyB7CgogICAgICAgICAgICAvKiogVGFibGVBc3NlcnRpb25zQ29uZmlnIHVuaXF1ZUtleSAqLwogICAgICAgICAgICB1bmlxdWVLZXk/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVBc3NlcnRpb25zQ29uZmlnIHVuaXF1ZUtleXMgKi8KICAgICAgICAgICAgdW5pcXVlS2V5cz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLklVbmlxdWVLZXlbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUFzc2VydGlvbnNDb25maWcgbm9uTnVsbCAqLwogICAgICAgICAgICBub25OdWxsPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyByb3dDb25kaXRpb25zICovCiAgICAgICAgICAgIHJvd0NvbmRpdGlvbnM/OiAoc3RyaW5nW118bnVsbCk7CiAgICAgICAgfQoKICAgICAgICAvKiogUmVwcmVzZW50cyBhIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZy4gKi8KICAgICAgICBjbGFzcyBUYWJsZUFzc2VydGlvbnNDb25maWcgaW1wbGVtZW50cyBJVGFibGVBc3NlcnRpb25zQ29uZmlnIHsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRhYmxlQXNzZXJ0aW9uc0NvbmZpZy4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVBc3NlcnRpb25zQ29uZmlnKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUFzc2VydGlvbnNDb25maWcgdW5pcXVlS2V5LiAqLwogICAgICAgICAgICBwdWJsaWMgdW5pcXVlS2V5OiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUFzc2VydGlvbnNDb25maWcgdW5pcXVlS2V5cy4gKi8KICAgICAgICAgICAgcHVibGljIHVuaXF1ZUtleXM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuSVVuaXF1ZUtleVtdOwoKICAgICAgICAgICAgLyoqIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyBub25OdWxsLiAqLwogICAgICAgICAgICBwdWJsaWMgbm9uTnVsbDogc3RyaW5nW107CgogICAgICAgICAgICAvKiogVGFibGVBc3NlcnRpb25zQ29uZmlnIHJvd0NvbmRpdGlvbnMuICovCiAgICAgICAgICAgIHB1YmxpYyByb3dDb25kaXRpb25zOiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICogQHJldHVybnMgVGFibGVBc3NlcnRpb25zQ29uZmlnIGluc3RhbmNlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUFzc2VydGlvbnNDb25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUYWJsZUFzc2VydGlvbnNDb25maWcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGVBc3NlcnRpb25zQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVBc3NlcnRpb25zQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGFibGVBc3NlcnRpb25zQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhYmxlQXNzZXJ0aW9uc0NvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgICAgICogQHJldHVybnMgVGFibGVBc3NlcnRpb25zQ29uZmlnCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgVGFibGVBc3NlcnRpb25zQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcmV0dXJucyBUYWJsZUFzc2VydGlvbnNDb25maWcKICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBWZXJpZmllcyBhIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBUYWJsZUFzc2VydGlvbnNDb25maWcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAgICAgKiBAcmV0dXJucyBUYWJsZUFzc2VydGlvbnNDb25maWcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUYWJsZUFzc2VydGlvbnNDb25maWcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUYWJsZUFzc2VydGlvbnNDb25maWcKICAgICAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBUYWJsZUFzc2VydGlvbnNDb25maWcgdG8gSlNPTi4KICAgICAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVGFibGVBc3NlcnRpb25zQ29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KCiAgICAgICAgbmFtZXNwYWNlIFRhYmxlQXNzZXJ0aW9uc0NvbmZpZyB7CgogICAgICAgICAgICAvKiogUHJvcGVydGllcyBvZiBhbiBVbmlxdWVLZXkuICovCiAgICAgICAgICAgIGludGVyZmFjZSBJVW5pcXVlS2V5IHsKCiAgICAgICAgICAgICAgICAvKiogVW5pcXVlS2V5IHVuaXF1ZUtleSAqLwogICAgICAgICAgICAgICAgdW5pcXVlS2V5PzogKHN0cmluZ1tdfG51bGwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvKiogUmVwcmVzZW50cyBhbiBVbmlxdWVLZXkuICovCiAgICAgICAgICAgIGNsYXNzIFVuaXF1ZUtleSBpbXBsZW1lbnRzIElVbmlxdWVLZXkgewoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBVbmlxdWVLZXkuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLklVbmlxdWVLZXkpOwoKICAgICAgICAgICAgICAgIC8qKiBVbmlxdWVLZXkgdW5pcXVlS2V5LiAqLwogICAgICAgICAgICAgICAgcHVibGljIHVuaXF1ZUtleTogc3RyaW5nW107CgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFVuaXF1ZUtleSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBVbmlxdWVLZXkgaW5zdGFuY2UKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuSVVuaXF1ZUtleSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuVW5pcXVlS2V5OwoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFVuaXF1ZUtleSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFVuaXF1ZUtleSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5JVW5pcXVlS2V5LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBVbmlxdWVLZXkgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXkudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBVbmlxdWVLZXkgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuSVVuaXF1ZUtleSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGFuIFVuaXF1ZUtleSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAgICAgICAgICogQHJldHVybnMgVW5pcXVlS2V5CiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcuVW5pcXVlS2V5OwoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBVbmlxdWVLZXkgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgICAgICogQHJldHVybnMgVW5pcXVlS2V5CiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleTsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIFZlcmlmaWVzIGFuIFVuaXF1ZUtleSBtZXNzYWdlLgogICAgICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgYW4gVW5pcXVlS2V5IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBVbmlxdWVLZXkKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVBc3NlcnRpb25zQ29uZmlnLlVuaXF1ZUtleTsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhbiBVbmlxdWVLZXkgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVW5pcXVlS2V5CiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQXNzZXJ0aW9uc0NvbmZpZy5VbmlxdWVLZXksIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFVuaXF1ZUtleSB0byBKU09OLgogICAgICAgICAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFVuaXF1ZUtleQogICAgICAgICAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgVGFibGVDb25maWcuICovCiAgICAgICAgaW50ZXJmYWNlIElUYWJsZUNvbmZpZyB7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgbmFtZSAqLwogICAgICAgICAgICBuYW1lPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBkYXRhc2V0ICovCiAgICAgICAgICAgIGRhdGFzZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIHByb2plY3QgKi8KICAgICAgICAgICAgcHJvamVjdD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgZGVwZW5kZW5jeVRhcmdldHMgKi8KICAgICAgICAgICAgZGVwZW5kZW5jeVRhcmdldHM/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYXJnZXRbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBmaWxlbmFtZSAqLwogICAgICAgICAgICBmaWxlbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgdGFncyAqLwogICAgICAgICAgICB0YWdzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGRpc2FibGVkICovCiAgICAgICAgICAgIGRpc2FibGVkPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgcHJlT3BlcmF0aW9ucyAqLwogICAgICAgICAgICBwcmVPcGVyYXRpb25zPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIHBvc3RPcGVyYXRpb25zICovCiAgICAgICAgICAgIHBvc3RPcGVyYXRpb25zPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGRlc2NyaXB0aW9uICovCiAgICAgICAgICAgIGRlc2NyaXB0aW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBjb2x1bW5zICovCiAgICAgICAgICAgIGNvbHVtbnM/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yW118bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgcGFydGl0aW9uQnkgKi8KICAgICAgICAgICAgcGFydGl0aW9uQnk/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIHBhcnRpdGlvbkV4cGlyYXRpb25EYXlzICovCiAgICAgICAgICAgIHBhcnRpdGlvbkV4cGlyYXRpb25EYXlzPzogKG51bWJlcnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyByZXF1aXJlUGFydGl0aW9uRmlsdGVyICovCiAgICAgICAgICAgIHJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBjbHVzdGVyQnkgKi8KICAgICAgICAgICAgY2x1c3RlckJ5PzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGxhYmVscyAqLwogICAgICAgICAgICBsYWJlbHM/OiAoeyBbazogc3RyaW5nXTogc3RyaW5nIH18bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgYWRkaXRpb25hbE9wdGlvbnMgKi8KICAgICAgICAgICAgYWRkaXRpb25hbE9wdGlvbnM/OiAoeyBbazogc3RyaW5nXTogc3RyaW5nIH18bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgYXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBhc3NlcnRpb25zPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVBc3NlcnRpb25zQ29uZmlnfG51bGwpOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGhlcm1ldGljICovCiAgICAgICAgICAgIGhlcm1ldGljPzogKGJvb2xlYW58bnVsbCk7CiAgICAgICAgfQoKICAgICAgICAvKiogUmVwcmVzZW50cyBhIFRhYmxlQ29uZmlnLiAqLwogICAgICAgIGNsYXNzIFRhYmxlQ29uZmlnIGltcGxlbWVudHMgSVRhYmxlQ29uZmlnIHsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRhYmxlQ29uZmlnLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUNvbmZpZyk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBkYXRhc2V0LiAqLwogICAgICAgICAgICBwdWJsaWMgZGF0YXNldDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIHByb2plY3QuICovCiAgICAgICAgICAgIHB1YmxpYyBwcm9qZWN0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgZGVwZW5kZW5jeVRhcmdldHMuICovCiAgICAgICAgICAgIHB1YmxpYyBkZXBlbmRlbmN5VGFyZ2V0czogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYXJnZXRbXTsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBmaWxlbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIGZpbGVuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgdGFncy4gKi8KICAgICAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGRpc2FibGVkLiAqLwogICAgICAgICAgICBwdWJsaWMgZGlzYWJsZWQ6IGJvb2xlYW47CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgcHJlT3BlcmF0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIHByZU9wZXJhdGlvbnM6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIHBvc3RPcGVyYXRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgcG9zdE9wZXJhdGlvbnM6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGRlc2NyaXB0aW9uLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBjb2x1bW5zLiAqLwogICAgICAgICAgICBwdWJsaWMgY29sdW1uczogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yW107CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgcGFydGl0aW9uQnkuICovCiAgICAgICAgICAgIHB1YmxpYyBwYXJ0aXRpb25CeTogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIHBhcnRpdGlvbkV4cGlyYXRpb25EYXlzLiAqLwogICAgICAgICAgICBwdWJsaWMgcGFydGl0aW9uRXhwaXJhdGlvbkRheXM6IG51bWJlcjsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyByZXF1aXJlUGFydGl0aW9uRmlsdGVyLiAqLwogICAgICAgICAgICBwdWJsaWMgcmVxdWlyZVBhcnRpdGlvbkZpbHRlcjogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBUYWJsZUNvbmZpZyBjbHVzdGVyQnkuICovCiAgICAgICAgICAgIHB1YmxpYyBjbHVzdGVyQnk6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIFRhYmxlQ29uZmlnIGxhYmVscy4gKi8KICAgICAgICAgICAgcHVibGljIGxhYmVsczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgYWRkaXRpb25hbE9wdGlvbnMuICovCiAgICAgICAgICAgIHB1YmxpYyBhZGRpdGlvbmFsT3B0aW9uczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM6IGJvb2xlYW47CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgYXNzZXJ0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIGFzc2VydGlvbnM/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUFzc2VydGlvbnNDb25maWd8bnVsbCk7CgogICAgICAgICAgICAvKiogVGFibGVDb25maWcgaGVybWV0aWMuICovCiAgICAgICAgICAgIHB1YmxpYyBoZXJtZXRpYzogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRhYmxlQ29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKiBAcmV0dXJucyBUYWJsZUNvbmZpZyBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVDb25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRhYmxlQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGVDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRhYmxlQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGVDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIFRhYmxlQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAgICAgKiBAcmV0dXJucyBUYWJsZUNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgVGFibGVDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIFRhYmxlQ29uZmlnCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBWZXJpZmllcyBhIFRhYmxlQ29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIFRhYmxlQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgVGFibGVDb25maWcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlRhYmxlQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRhYmxlQ29uZmlnIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGVDb25maWcKICAgICAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRhYmxlQ29uZmlnIHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRhYmxlQ29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KCiAgICAgICAgLyoqIFByb3BlcnRpZXMgb2YgYSBWaWV3Q29uZmlnLiAqLwogICAgICAgIGludGVyZmFjZSBJVmlld0NvbmZpZyB7CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBuYW1lICovCiAgICAgICAgICAgIG5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgZGF0YXNldCAqLwogICAgICAgICAgICBkYXRhc2V0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIHByb2plY3QgKi8KICAgICAgICAgICAgcHJvamVjdD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBkZXBlbmRlbmN5VGFyZ2V0cyAqLwogICAgICAgICAgICBkZXBlbmRlbmN5VGFyZ2V0cz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldFtdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgZmlsZW5hbWUgKi8KICAgICAgICAgICAgZmlsZW5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgdGFncyAqLwogICAgICAgICAgICB0YWdzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgZGlzYWJsZWQgKi8KICAgICAgICAgICAgZGlzYWJsZWQ/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIHByZU9wZXJhdGlvbnMgKi8KICAgICAgICAgICAgcHJlT3BlcmF0aW9ucz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIHBvc3RPcGVyYXRpb25zICovCiAgICAgICAgICAgIHBvc3RPcGVyYXRpb25zPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgbWF0ZXJpYWxpemVkICovCiAgICAgICAgICAgIG1hdGVyaWFsaXplZD86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgZGVzY3JpcHRpb24gKi8KICAgICAgICAgICAgZGVzY3JpcHRpb24/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgY29sdW1ucyAqLwogICAgICAgICAgICBjb2x1bW5zPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JQ29sdW1uRGVzY3JpcHRvcltdfG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgbGFiZWxzICovCiAgICAgICAgICAgIGxhYmVscz86ICh7IFtrOiBzdHJpbmddOiBzdHJpbmcgfXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIGFkZGl0aW9uYWxPcHRpb25zICovCiAgICAgICAgICAgIGFkZGl0aW9uYWxPcHRpb25zPzogKHsgW2s6IHN0cmluZ106IHN0cmluZyB9fG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBoZXJtZXRpYyAqLwogICAgICAgICAgICBoZXJtZXRpYz86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgYXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBhc3NlcnRpb25zPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVBc3NlcnRpb25zQ29uZmlnfG51bGwpOwogICAgICAgIH0KCiAgICAgICAgLyoqIFJlcHJlc2VudHMgYSBWaWV3Q29uZmlnLiAqLwogICAgICAgIGNsYXNzIFZpZXdDb25maWcgaW1wbGVtZW50cyBJVmlld0NvbmZpZyB7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBWaWV3Q29uZmlnLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklWaWV3Q29uZmlnKTsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIG5hbWUuICovCiAgICAgICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBkYXRhc2V0LiAqLwogICAgICAgICAgICBwdWJsaWMgZGF0YXNldDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgcHJvamVjdC4gKi8KICAgICAgICAgICAgcHVibGljIHByb2plY3Q6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIGRlcGVuZGVuY3lUYXJnZXRzLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kZW5jeVRhcmdldHM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0W107CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBmaWxlbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIGZpbGVuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyB0YWdzLiAqLwogICAgICAgICAgICBwdWJsaWMgdGFnczogc3RyaW5nW107CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBkaXNhYmxlZC4gKi8KICAgICAgICAgICAgcHVibGljIGRpc2FibGVkOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgcHJlT3BlcmF0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIHByZU9wZXJhdGlvbnM6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgcG9zdE9wZXJhdGlvbnMuICovCiAgICAgICAgICAgIHB1YmxpYyBwb3N0T3BlcmF0aW9uczogc3RyaW5nW107CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBtYXRlcmlhbGl6ZWQuICovCiAgICAgICAgICAgIHB1YmxpYyBtYXRlcmlhbGl6ZWQ6IGJvb2xlYW47CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBkZXNjcmlwdGlvbi4gKi8KICAgICAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBjb2x1bW5zLiAqLwogICAgICAgICAgICBwdWJsaWMgY29sdW1uczogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yW107CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBsYWJlbHMuICovCiAgICAgICAgICAgIHB1YmxpYyBsYWJlbHM6IHsgW2s6IHN0cmluZ106IHN0cmluZyB9OwoKICAgICAgICAgICAgLyoqIFZpZXdDb25maWcgYWRkaXRpb25hbE9wdGlvbnMuICovCiAgICAgICAgICAgIHB1YmxpYyBhZGRpdGlvbmFsT3B0aW9uczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBWaWV3Q29uZmlnIGhlcm1ldGljLiAqLwogICAgICAgICAgICBwdWJsaWMgaGVybWV0aWM6IGJvb2xlYW47CgogICAgICAgICAgICAvKiogVmlld0NvbmZpZyBhc3NlcnRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgYXNzZXJ0aW9ucz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhYmxlQXNzZXJ0aW9uc0NvbmZpZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFZpZXdDb25maWcgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqIEByZXR1cm5zIFZpZXdDb25maWcgaW5zdGFuY2UKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVZpZXdDb25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVmlld0NvbmZpZyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVmlld0NvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVZpZXdDb25maWcsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBWaWV3Q29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBWaWV3Q29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVmlld0NvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIFZpZXdDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIFZpZXdDb25maWcKICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgVmlld0NvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHJldHVybnMgVmlld0NvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBWZXJpZmllcyBhIFZpZXdDb25maWcgbWVzc2FnZS4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgVmlld0NvbmZpZyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqIEByZXR1cm5zIFZpZXdDb25maWcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLlZpZXdDb25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVmlld0NvbmZpZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFZpZXdDb25maWcKICAgICAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5WaWV3Q29uZmlnLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmlld0NvbmZpZyB0byBKU09OLgogICAgICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBWaWV3Q29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KCiAgICAgICAgLyoqIE9uU2NoZW1hQ2hhbmdlIGVudW0uICovCiAgICAgICAgZW51bSBPblNjaGVtYUNoYW5nZSB7CiAgICAgICAgICAgIElHTk9SRSA9IDAsCiAgICAgICAgICAgIEZBSUwgPSAxLAogICAgICAgICAgICBFWFRFTkQgPSAyLAogICAgICAgICAgICBTWU5DSFJPTklaRSA9IDMKICAgICAgICB9CgogICAgICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEluY3JlbWVudGFsVGFibGVDb25maWcuICovCiAgICAgICAgaW50ZXJmYWNlIElJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIG5hbWUgKi8KICAgICAgICAgICAgbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBkYXRhc2V0ICovCiAgICAgICAgICAgIGRhdGFzZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgcHJvamVjdCAqLwogICAgICAgICAgICBwcm9qZWN0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGRlcGVuZGVuY3lUYXJnZXRzICovCiAgICAgICAgICAgIGRlcGVuZGVuY3lUYXJnZXRzPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBmaWxlbmFtZSAqLwogICAgICAgICAgICBmaWxlbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyB0YWdzICovCiAgICAgICAgICAgIHRhZ3M/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBkaXNhYmxlZCAqLwogICAgICAgICAgICBkaXNhYmxlZD86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgcHJlT3BlcmF0aW9ucyAqLwogICAgICAgICAgICBwcmVPcGVyYXRpb25zPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgcG9zdE9wZXJhdGlvbnMgKi8KICAgICAgICAgICAgcG9zdE9wZXJhdGlvbnM/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwcm90ZWN0ZWQgKi8KICAgICAgICAgICAgInByb3RlY3RlZCI/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHVuaXF1ZUtleSAqLwogICAgICAgICAgICB1bmlxdWVLZXk/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBkZXNjcmlwdGlvbiAqLwogICAgICAgICAgICBkZXNjcmlwdGlvbj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBjb2x1bW5zICovCiAgICAgICAgICAgIGNvbHVtbnM/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yW118bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwYXJ0aXRpb25CeSAqLwogICAgICAgICAgICBwYXJ0aXRpb25CeT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwYXJ0aXRpb25FeHBpcmF0aW9uRGF5cyAqLwogICAgICAgICAgICBwYXJ0aXRpb25FeHBpcmF0aW9uRGF5cz86IChudW1iZXJ8bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyByZXF1aXJlUGFydGl0aW9uRmlsdGVyICovCiAgICAgICAgICAgIHJlcXVpcmVQYXJ0aXRpb25GaWx0ZXI/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHVwZGF0ZVBhcnRpdGlvbkZpbHRlciAqLwogICAgICAgICAgICB1cGRhdGVQYXJ0aXRpb25GaWx0ZXI/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgY2x1c3RlckJ5ICovCiAgICAgICAgICAgIGNsdXN0ZXJCeT86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGxhYmVscyAqLwogICAgICAgICAgICBsYWJlbHM/OiAoeyBbazogc3RyaW5nXTogc3RyaW5nIH18bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBhZGRpdGlvbmFsT3B0aW9ucyAqLwogICAgICAgICAgICBhZGRpdGlvbmFsT3B0aW9ucz86ICh7IFtrOiBzdHJpbmddOiBzdHJpbmcgfXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMgKi8KICAgICAgICAgICAgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgYXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBhc3NlcnRpb25zPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFibGVBc3NlcnRpb25zQ29uZmlnfG51bGwpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgaGVybWV0aWMgKi8KICAgICAgICAgICAgaGVybWV0aWM/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIG9uU2NoZW1hQ2hhbmdlICovCiAgICAgICAgICAgIG9uU2NoZW1hQ2hhbmdlPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PblNjaGVtYUNoYW5nZXxudWxsKTsKICAgICAgICB9CgogICAgICAgIC8qKiBSZXByZXNlbnRzIGFuIEluY3JlbWVudGFsVGFibGVDb25maWcuICovCiAgICAgICAgY2xhc3MgSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBpbXBsZW1lbnRzIElJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEluY3JlbWVudGFsVGFibGVDb25maWcuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSUluY3JlbWVudGFsVGFibGVDb25maWcpOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGRhdGFzZXQuICovCiAgICAgICAgICAgIHB1YmxpYyBkYXRhc2V0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwcm9qZWN0LiAqLwogICAgICAgICAgICBwdWJsaWMgcHJvamVjdDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgZGVwZW5kZW5jeVRhcmdldHMuICovCiAgICAgICAgICAgIHB1YmxpYyBkZXBlbmRlbmN5VGFyZ2V0czogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYXJnZXRbXTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGZpbGVuYW1lLiAqLwogICAgICAgICAgICBwdWJsaWMgZmlsZW5hbWU6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHRhZ3MuICovCiAgICAgICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGRpc2FibGVkLiAqLwogICAgICAgICAgICBwdWJsaWMgZGlzYWJsZWQ6IGJvb2xlYW47CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwcmVPcGVyYXRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgcHJlT3BlcmF0aW9uczogc3RyaW5nW107CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwb3N0T3BlcmF0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIHBvc3RPcGVyYXRpb25zOiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHByb3RlY3RlZC4gKi8KICAgICAgICAgICAgcHVibGljIHByb3RlY3RlZDogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHVuaXF1ZUtleS4gKi8KICAgICAgICAgICAgcHVibGljIHVuaXF1ZUtleTogc3RyaW5nW107CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBkZXNjcmlwdGlvbi4gKi8KICAgICAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBjb2x1bW5zLiAqLwogICAgICAgICAgICBwdWJsaWMgY29sdW1uczogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yW107CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwYXJ0aXRpb25CeS4gKi8KICAgICAgICAgICAgcHVibGljIHBhcnRpdGlvbkJ5OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBwYXJ0aXRpb25FeHBpcmF0aW9uRGF5cy4gKi8KICAgICAgICAgICAgcHVibGljIHBhcnRpdGlvbkV4cGlyYXRpb25EYXlzOiBudW1iZXI7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyByZXF1aXJlUGFydGl0aW9uRmlsdGVyLiAqLwogICAgICAgICAgICBwdWJsaWMgcmVxdWlyZVBhcnRpdGlvbkZpbHRlcjogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHVwZGF0ZVBhcnRpdGlvbkZpbHRlci4gKi8KICAgICAgICAgICAgcHVibGljIHVwZGF0ZVBhcnRpdGlvbkZpbHRlcjogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgY2x1c3RlckJ5LiAqLwogICAgICAgICAgICBwdWJsaWMgY2x1c3RlckJ5OiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGxhYmVscy4gKi8KICAgICAgICAgICAgcHVibGljIGxhYmVsczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBhZGRpdGlvbmFsT3B0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIGFkZGl0aW9uYWxPcHRpb25zOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfTsKCiAgICAgICAgICAgIC8qKiBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMuICovCiAgICAgICAgICAgIHB1YmxpYyBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgYXNzZXJ0aW9ucy4gKi8KICAgICAgICAgICAgcHVibGljIGFzc2VydGlvbnM/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklUYWJsZUFzc2VydGlvbnNDb25maWd8bnVsbCk7CgogICAgICAgICAgICAvKiogSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBoZXJtZXRpYy4gKi8KICAgICAgICAgICAgcHVibGljIGhlcm1ldGljOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqIEluY3JlbWVudGFsVGFibGVDb25maWcgb25TY2hlbWFDaGFuZ2UuICovCiAgICAgICAgICAgIHB1YmxpYyBvblNjaGVtYUNoYW5nZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9uU2NoZW1hQ2hhbmdlOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICogQHJldHVybnMgSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JSW5jcmVtZW50YWxUYWJsZUNvbmZpZyk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JSW5jcmVtZW50YWxUYWJsZUNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEluY3JlbWVudGFsVGFibGVDb25maWcgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEluY3JlbWVudGFsVGFibGVDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklJbmNyZW1lbnRhbFRhYmxlQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEluY3JlbWVudGFsVGFibGVDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIEluY3JlbWVudGFsVGFibGVDb25maWcKICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEluY3JlbWVudGFsVGFibGVDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIEluY3JlbWVudGFsVGFibGVDb25maWcKICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogVmVyaWZpZXMgYW4gSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYW4gSW5jcmVtZW50YWxUYWJsZUNvbmZpZyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqIEByZXR1cm5zIEluY3JlbWVudGFsVGFibGVDb25maWcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkluY3JlbWVudGFsVGFibGVDb25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEluY3JlbWVudGFsVGFibGVDb25maWcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBJbmNyZW1lbnRhbFRhYmxlQ29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSW5jcmVtZW50YWxUYWJsZUNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEluY3JlbWVudGFsVGFibGVDb25maWcgdG8gSlNPTi4KICAgICAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgSW5jcmVtZW50YWxUYWJsZUNvbmZpZwogICAgICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgICAgICB9CgogICAgICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEFzc2VydGlvbkNvbmZpZy4gKi8KICAgICAgICBpbnRlcmZhY2UgSUFzc2VydGlvbkNvbmZpZyB7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIG5hbWUgKi8KICAgICAgICAgICAgbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIGRhdGFzZXQgKi8KICAgICAgICAgICAgZGF0YXNldD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIHByb2plY3QgKi8KICAgICAgICAgICAgcHJvamVjdD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIGRlcGVuZGVuY3lUYXJnZXRzICovCiAgICAgICAgICAgIGRlcGVuZGVuY3lUYXJnZXRzPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIGZpbGVuYW1lICovCiAgICAgICAgICAgIGZpbGVuYW1lPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBBc3NlcnRpb25Db25maWcgdGFncyAqLwogICAgICAgICAgICB0YWdzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBkaXNhYmxlZCAqLwogICAgICAgICAgICBkaXNhYmxlZD86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBkZXNjcmlwdGlvbiAqLwogICAgICAgICAgICBkZXNjcmlwdGlvbj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIGhlcm1ldGljICovCiAgICAgICAgICAgIGhlcm1ldGljPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMgKi8KICAgICAgICAgICAgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz86IChib29sZWFufG51bGwpOwogICAgICAgIH0KCiAgICAgICAgLyoqIFJlcHJlc2VudHMgYW4gQXNzZXJ0aW9uQ29uZmlnLiAqLwogICAgICAgIGNsYXNzIEFzc2VydGlvbkNvbmZpZyBpbXBsZW1lbnRzIElBc3NlcnRpb25Db25maWcgewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQXNzZXJ0aW9uQ29uZmlnLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklBc3NlcnRpb25Db25maWcpOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBuYW1lLiAqLwogICAgICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBkYXRhc2V0LiAqLwogICAgICAgICAgICBwdWJsaWMgZGF0YXNldDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBwcm9qZWN0LiAqLwogICAgICAgICAgICBwdWJsaWMgcHJvamVjdDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBkZXBlbmRlbmN5VGFyZ2V0cy4gKi8KICAgICAgICAgICAgcHVibGljIGRlcGVuZGVuY3lUYXJnZXRzOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldFtdOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBmaWxlbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIGZpbGVuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogQXNzZXJ0aW9uQ29uZmlnIHRhZ3MuICovCiAgICAgICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBBc3NlcnRpb25Db25maWcgZGlzYWJsZWQuICovCiAgICAgICAgICAgIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBBc3NlcnRpb25Db25maWcgZGVzY3JpcHRpb24uICovCiAgICAgICAgICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBoZXJtZXRpYy4gKi8KICAgICAgICAgICAgcHVibGljIGhlcm1ldGljOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqIEFzc2VydGlvbkNvbmZpZyBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEFzc2VydGlvbkNvbmZpZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICogQHJldHVybnMgQXNzZXJ0aW9uQ29uZmlnIGluc3RhbmNlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklBc3NlcnRpb25Db25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuQXNzZXJ0aW9uQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBBc3NlcnRpb25Db25maWcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQXNzZXJ0aW9uQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JQXNzZXJ0aW9uQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQXNzZXJ0aW9uQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFzc2VydGlvbkNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSUFzc2VydGlvbkNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhbiBBc3NlcnRpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIEFzc2VydGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhbiBBc3NlcnRpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIEFzc2VydGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuQXNzZXJ0aW9uQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFZlcmlmaWVzIGFuIEFzc2VydGlvbkNvbmZpZyBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYW4gQXNzZXJ0aW9uQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgQXNzZXJ0aW9uQ29uZmlnCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEFzc2VydGlvbkNvbmZpZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFzc2VydGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkFzc2VydGlvbkNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEFzc2VydGlvbkNvbmZpZyB0byBKU09OLgogICAgICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBBc3NlcnRpb25Db25maWcKICAgICAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICAgICAgfQoKICAgICAgICAvKiogUHJvcGVydGllcyBvZiBhbiBPcGVyYXRpb25Db25maWcuICovCiAgICAgICAgaW50ZXJmYWNlIElPcGVyYXRpb25Db25maWcgewoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBuYW1lICovCiAgICAgICAgICAgIG5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBkYXRhc2V0ICovCiAgICAgICAgICAgIGRhdGFzZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBwcm9qZWN0ICovCiAgICAgICAgICAgIHByb2plY3Q/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBkZXBlbmRlbmN5VGFyZ2V0cyAqLwogICAgICAgICAgICBkZXBlbmRlbmN5VGFyZ2V0cz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldFtdfG51bGwpOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBmaWxlbmFtZSAqLwogICAgICAgICAgICBmaWxlbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIHRhZ3MgKi8KICAgICAgICAgICAgdGFncz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBPcGVyYXRpb25Db25maWcgZGlzYWJsZWQgKi8KICAgICAgICAgICAgZGlzYWJsZWQ/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBPcGVyYXRpb25Db25maWcgaGFzT3V0cHV0ICovCiAgICAgICAgICAgIGhhc091dHB1dD86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBkZXNjcmlwdGlvbiAqLwogICAgICAgICAgICBkZXNjcmlwdGlvbj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIGNvbHVtbnMgKi8KICAgICAgICAgICAgY29sdW1ucz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSUNvbHVtbkRlc2NyaXB0b3JbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBPcGVyYXRpb25Db25maWcgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyAqLwogICAgICAgICAgICBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIGhlcm1ldGljICovCiAgICAgICAgICAgIGhlcm1ldGljPzogKGJvb2xlYW58bnVsbCk7CiAgICAgICAgfQoKICAgICAgICAvKiogUmVwcmVzZW50cyBhbiBPcGVyYXRpb25Db25maWcuICovCiAgICAgICAgY2xhc3MgT3BlcmF0aW9uQ29uZmlnIGltcGxlbWVudHMgSU9wZXJhdGlvbkNvbmZpZyB7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBPcGVyYXRpb25Db25maWcuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSU9wZXJhdGlvbkNvbmZpZyk7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIG5hbWUuICovCiAgICAgICAgICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIGRhdGFzZXQuICovCiAgICAgICAgICAgIHB1YmxpYyBkYXRhc2V0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIHByb2plY3QuICovCiAgICAgICAgICAgIHB1YmxpYyBwcm9qZWN0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIGRlcGVuZGVuY3lUYXJnZXRzLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kZW5jeVRhcmdldHM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0W107CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIGZpbGVuYW1lLiAqLwogICAgICAgICAgICBwdWJsaWMgZmlsZW5hbWU6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBPcGVyYXRpb25Db25maWcgdGFncy4gKi8KICAgICAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBkaXNhYmxlZC4gKi8KICAgICAgICAgICAgcHVibGljIGRpc2FibGVkOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBoYXNPdXRwdXQuICovCiAgICAgICAgICAgIHB1YmxpYyBoYXNPdXRwdXQ6IGJvb2xlYW47CgogICAgICAgICAgICAvKiogT3BlcmF0aW9uQ29uZmlnIGRlc2NyaXB0aW9uLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBPcGVyYXRpb25Db25maWcgY29sdW1ucy4gKi8KICAgICAgICAgICAgcHVibGljIGNvbHVtbnM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JQ29sdW1uRGVzY3JpcHRvcltdOwoKICAgICAgICAgICAgLyoqIE9wZXJhdGlvbkNvbmZpZyBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBPcGVyYXRpb25Db25maWcgaGVybWV0aWMuICovCiAgICAgICAgICAgIHB1YmxpYyBoZXJtZXRpYzogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IE9wZXJhdGlvbkNvbmZpZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICogQHJldHVybnMgT3BlcmF0aW9uQ29uZmlnIGluc3RhbmNlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklPcGVyYXRpb25Db25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBPcGVyYXRpb25Db25maWcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9wZXJhdGlvbkNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgT3BlcmF0aW9uQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JT3BlcmF0aW9uQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgT3BlcmF0aW9uQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE9wZXJhdGlvbkNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSU9wZXJhdGlvbkNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhbiBPcGVyYXRpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIE9wZXJhdGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhbiBPcGVyYXRpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIE9wZXJhdGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuT3BlcmF0aW9uQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFZlcmlmaWVzIGFuIE9wZXJhdGlvbkNvbmZpZyBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYW4gT3BlcmF0aW9uQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgT3BlcmF0aW9uQ29uZmlnCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIE9wZXJhdGlvbkNvbmZpZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE9wZXJhdGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk9wZXJhdGlvbkNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIE9wZXJhdGlvbkNvbmZpZyB0byBKU09OLgogICAgICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBPcGVyYXRpb25Db25maWcKICAgICAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICAgICAgfQoKICAgICAgICAvKiogUHJvcGVydGllcyBvZiBhIERlY2xhcmF0aW9uQ29uZmlnLiAqLwogICAgICAgIGludGVyZmFjZSBJRGVjbGFyYXRpb25Db25maWcgewoKICAgICAgICAgICAgLyoqIERlY2xhcmF0aW9uQ29uZmlnIG5hbWUgKi8KICAgICAgICAgICAgbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogRGVjbGFyYXRpb25Db25maWcgZGF0YXNldCAqLwogICAgICAgICAgICBkYXRhc2V0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBEZWNsYXJhdGlvbkNvbmZpZyBwcm9qZWN0ICovCiAgICAgICAgICAgIHByb2plY3Q/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIERlY2xhcmF0aW9uQ29uZmlnIGRlc2NyaXB0aW9uICovCiAgICAgICAgICAgIGRlc2NyaXB0aW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBEZWNsYXJhdGlvbkNvbmZpZyBjb2x1bW5zICovCiAgICAgICAgICAgIGNvbHVtbnM/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklDb2x1bW5EZXNjcmlwdG9yW118bnVsbCk7CiAgICAgICAgfQoKICAgICAgICAvKiogUmVwcmVzZW50cyBhIERlY2xhcmF0aW9uQ29uZmlnLiAqLwogICAgICAgIGNsYXNzIERlY2xhcmF0aW9uQ29uZmlnIGltcGxlbWVudHMgSURlY2xhcmF0aW9uQ29uZmlnIHsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlY2xhcmF0aW9uQ29uZmlnLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEZWNsYXJhdGlvbkNvbmZpZyk7CgogICAgICAgICAgICAvKiogRGVjbGFyYXRpb25Db25maWcgbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBEZWNsYXJhdGlvbkNvbmZpZyBkYXRhc2V0LiAqLwogICAgICAgICAgICBwdWJsaWMgZGF0YXNldDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIERlY2xhcmF0aW9uQ29uZmlnIHByb2plY3QuICovCiAgICAgICAgICAgIHB1YmxpYyBwcm9qZWN0OiBzdHJpbmc7CgogICAgICAgICAgICAvKiogRGVjbGFyYXRpb25Db25maWcgZGVzY3JpcHRpb24uICovCiAgICAgICAgICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIERlY2xhcmF0aW9uQ29uZmlnIGNvbHVtbnMuICovCiAgICAgICAgICAgIHB1YmxpYyBjb2x1bW5zOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSUNvbHVtbkRlc2NyaXB0b3JbXTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERlY2xhcmF0aW9uQ29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKiBAcmV0dXJucyBEZWNsYXJhdGlvbkNvbmZpZyBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JRGVjbGFyYXRpb25Db25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGVjbGFyYXRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlY2xhcmF0aW9uQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRGVjbGFyYXRpb25Db25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEZWNsYXJhdGlvbkNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERlY2xhcmF0aW9uQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRGVjbGFyYXRpb25Db25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEZWNsYXJhdGlvbkNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIERlY2xhcmF0aW9uQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAgICAgKiBAcmV0dXJucyBEZWNsYXJhdGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgRGVjbGFyYXRpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIERlY2xhcmF0aW9uQ29uZmlnCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBWZXJpZmllcyBhIERlY2xhcmF0aW9uQ29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIERlY2xhcmF0aW9uQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgRGVjbGFyYXRpb25Db25maWcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIERlY2xhcmF0aW9uQ29uZmlnIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRGVjbGFyYXRpb25Db25maWcKICAgICAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EZWNsYXJhdGlvbkNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERlY2xhcmF0aW9uQ29uZmlnIHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIERlY2xhcmF0aW9uQ29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KCiAgICAgICAgLyoqIFByb3BlcnRpZXMgb2YgYSBOb3RlYm9va0NvbmZpZy4gKi8KICAgICAgICBpbnRlcmZhY2UgSU5vdGVib29rQ29uZmlnIHsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBuYW1lICovCiAgICAgICAgICAgIG5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIGxvY2F0aW9uICovCiAgICAgICAgICAgIGxvY2F0aW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBwcm9qZWN0ICovCiAgICAgICAgICAgIHByb2plY3Q/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIGRlcGVuZGVuY3lUYXJnZXRzICovCiAgICAgICAgICAgIGRlcGVuZGVuY3lUYXJnZXRzPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgICAgICAvKiogTm90ZWJvb2tDb25maWcgZmlsZW5hbWUgKi8KICAgICAgICAgICAgZmlsZW5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIHRhZ3MgKi8KICAgICAgICAgICAgdGFncz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBkaXNhYmxlZCAqLwogICAgICAgICAgICBkaXNhYmxlZD86IChib29sZWFufG51bGwpOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIGRlc2NyaXB0aW9uICovCiAgICAgICAgICAgIGRlc2NyaXB0aW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zICovCiAgICAgICAgICAgIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM/OiAoYm9vbGVhbnxudWxsKTsKICAgICAgICB9CgogICAgICAgIC8qKiBSZXByZXNlbnRzIGEgTm90ZWJvb2tDb25maWcuICovCiAgICAgICAgY2xhc3MgTm90ZWJvb2tDb25maWcgaW1wbGVtZW50cyBJTm90ZWJvb2tDb25maWcgewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTm90ZWJvb2tDb25maWcuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSU5vdGVib29rQ29uZmlnKTsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBuYW1lLiAqLwogICAgICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIGxvY2F0aW9uLiAqLwogICAgICAgICAgICBwdWJsaWMgbG9jYXRpb246IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBwcm9qZWN0LiAqLwogICAgICAgICAgICBwdWJsaWMgcHJvamVjdDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIGRlcGVuZGVuY3lUYXJnZXRzLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kZW5jeVRhcmdldHM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JVGFyZ2V0W107CgogICAgICAgICAgICAvKiogTm90ZWJvb2tDb25maWcgZmlsZW5hbWUuICovCiAgICAgICAgICAgIHB1YmxpYyBmaWxlbmFtZTogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIHRhZ3MuICovCiAgICAgICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBkaXNhYmxlZC4gKi8KICAgICAgICAgICAgcHVibGljIGRpc2FibGVkOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqIE5vdGVib29rQ29uZmlnIGRlc2NyaXB0aW9uLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBOb3RlYm9va0NvbmZpZyBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zLiAqLwogICAgICAgICAgICBwdWJsaWMgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IE5vdGVib29rQ29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKiBAcmV0dXJucyBOb3RlYm9va0NvbmZpZyBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JTm90ZWJvb2tDb25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuTm90ZWJvb2tDb25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vdGVib29rQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2tDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklOb3RlYm9va0NvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vdGVib29rQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2tDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklOb3RlYm9va0NvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIE5vdGVib29rQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAgICAgKiBAcmV0dXJucyBOb3RlYm9va0NvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgTm90ZWJvb2tDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIE5vdGVib29rQ29uZmlnCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBWZXJpZmllcyBhIE5vdGVib29rQ29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIE5vdGVib29rQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgTm90ZWJvb2tDb25maWcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLk5vdGVib29rQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIE5vdGVib29rQ29uZmlnIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2tDb25maWcKICAgICAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIE5vdGVib29rQ29uZmlnIHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIE5vdGVib29rQ29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KCiAgICAgICAgLyoqIFByb3BlcnRpZXMgb2YgYSBEYXRhUHJlcGFyYXRpb25Db25maWcuICovCiAgICAgICAgaW50ZXJmYWNlIElEYXRhUHJlcGFyYXRpb25Db25maWcgewoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBuYW1lICovCiAgICAgICAgICAgIG5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBkYXRhc2V0ICovCiAgICAgICAgICAgIGRhdGFzZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBwcm9qZWN0ICovCiAgICAgICAgICAgIHByb2plY3Q/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBkZXBlbmRlbmN5VGFyZ2V0cyAqLwogICAgICAgICAgICBkZXBlbmRlbmN5VGFyZ2V0cz86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldFtdfG51bGwpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBmaWxlbmFtZSAqLwogICAgICAgICAgICBmaWxlbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uQ29uZmlnIHRhZ3MgKi8KICAgICAgICAgICAgdGFncz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb25Db25maWcgZGlzYWJsZWQgKi8KICAgICAgICAgICAgZGlzYWJsZWQ/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb25Db25maWcgZGVzY3JpcHRpb24gKi8KICAgICAgICAgICAgZGVzY3JpcHRpb24/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBlcnJvclRhYmxlICovCiAgICAgICAgICAgIGVycm9yVGFibGU/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5JRXJyb3JUYWJsZUNvbmZpZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb25Db25maWcgbG9hZE1vZGUgKi8KICAgICAgICAgICAgbG9hZE1vZGU/OiAoZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklMb2FkTW9kZUNvbmZpZ3xudWxsKTsKICAgICAgICB9CgogICAgICAgIC8qKiBSZXByZXNlbnRzIGEgRGF0YVByZXBhcmF0aW9uQ29uZmlnLiAqLwogICAgICAgIGNsYXNzIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBpbXBsZW1lbnRzIElEYXRhUHJlcGFyYXRpb25Db25maWcgewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRGF0YVByZXBhcmF0aW9uQ29uZmlnLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEYXRhUHJlcGFyYXRpb25Db25maWcpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBuYW1lLiAqLwogICAgICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBkYXRhc2V0LiAqLwogICAgICAgICAgICBwdWJsaWMgZGF0YXNldDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBwcm9qZWN0LiAqLwogICAgICAgICAgICBwdWJsaWMgcHJvamVjdDogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBkZXBlbmRlbmN5VGFyZ2V0cy4gKi8KICAgICAgICAgICAgcHVibGljIGRlcGVuZGVuY3lUYXJnZXRzOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSVRhcmdldFtdOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBmaWxlbmFtZS4gKi8KICAgICAgICAgICAgcHVibGljIGZpbGVuYW1lOiBzdHJpbmc7CgogICAgICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uQ29uZmlnIHRhZ3MuICovCiAgICAgICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTsKCiAgICAgICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb25Db25maWcgZGlzYWJsZWQuICovCiAgICAgICAgICAgIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbjsKCiAgICAgICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb25Db25maWcgZGVzY3JpcHRpb24uICovCiAgICAgICAgICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBlcnJvclRhYmxlLiAqLwogICAgICAgICAgICBwdWJsaWMgZXJyb3JUYWJsZT86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLklFcnJvclRhYmxlQ29uZmlnfG51bGwpOwoKICAgICAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBsb2FkTW9kZS4gKi8KICAgICAgICAgICAgcHVibGljIGxvYWRNb2RlPzogKGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JTG9hZE1vZGVDb25maWd8bnVsbCk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBEYXRhUHJlcGFyYXRpb25Db25maWcgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqIEByZXR1cm5zIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBpbnN0YW5jZQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JRGF0YVByZXBhcmF0aW9uQ29uZmlnKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGF0YVByZXBhcmF0aW9uQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSURhdGFQcmVwYXJhdGlvbkNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBEYXRhUHJlcGFyYXRpb25Db25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklEYXRhUHJlcGFyYXRpb25Db25maWcsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIERlY29kZXMgYSBEYXRhUHJlcGFyYXRpb25Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIERhdGFQcmVwYXJhdGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhIERhdGFQcmVwYXJhdGlvbkNvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHJldHVybnMgRGF0YVByZXBhcmF0aW9uQ29uZmlnCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogVmVyaWZpZXMgYSBEYXRhUHJlcGFyYXRpb25Db25maWcgbWVzc2FnZS4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgRGF0YVByZXBhcmF0aW9uQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgRGF0YVByZXBhcmF0aW9uQ29uZmlnCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGF0YVByZXBhcmF0aW9uQ29uZmlnIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRGF0YVByZXBhcmF0aW9uQ29uZmlnCiAgICAgICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRGF0YVByZXBhcmF0aW9uQ29uZmlnIHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIERhdGFQcmVwYXJhdGlvbkNvbmZpZwogICAgICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgICAgICB9CgogICAgICAgIG5hbWVzcGFjZSBEYXRhUHJlcGFyYXRpb25Db25maWcgewoKICAgICAgICAgICAgLyoqIFByb3BlcnRpZXMgb2YgYW4gRXJyb3JUYWJsZUNvbmZpZy4gKi8KICAgICAgICAgICAgaW50ZXJmYWNlIElFcnJvclRhYmxlQ29uZmlnIHsKCiAgICAgICAgICAgICAgICAvKiogRXJyb3JUYWJsZUNvbmZpZyBuYW1lICovCiAgICAgICAgICAgICAgICBuYW1lPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgICAgICAvKiogRXJyb3JUYWJsZUNvbmZpZyBkYXRhc2V0ICovCiAgICAgICAgICAgICAgICBkYXRhc2V0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgICAgICAvKiogRXJyb3JUYWJsZUNvbmZpZyBwcm9qZWN0ICovCiAgICAgICAgICAgICAgICBwcm9qZWN0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgICAgICAvKiogRXJyb3JUYWJsZUNvbmZpZyByZXRlbnRpb25EYXlzICovCiAgICAgICAgICAgICAgICByZXRlbnRpb25EYXlzPzogKG51bWJlcnxudWxsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyoqIFJlcHJlc2VudHMgYW4gRXJyb3JUYWJsZUNvbmZpZy4gKi8KICAgICAgICAgICAgY2xhc3MgRXJyb3JUYWJsZUNvbmZpZyBpbXBsZW1lbnRzIElFcnJvclRhYmxlQ29uZmlnIHsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRXJyb3JUYWJsZUNvbmZpZy4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuSUVycm9yVGFibGVDb25maWcpOwoKICAgICAgICAgICAgICAgIC8qKiBFcnJvclRhYmxlQ29uZmlnIG5hbWUuICovCiAgICAgICAgICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nOwoKICAgICAgICAgICAgICAgIC8qKiBFcnJvclRhYmxlQ29uZmlnIGRhdGFzZXQuICovCiAgICAgICAgICAgICAgICBwdWJsaWMgZGF0YXNldDogc3RyaW5nOwoKICAgICAgICAgICAgICAgIC8qKiBFcnJvclRhYmxlQ29uZmlnIHByb2plY3QuICovCiAgICAgICAgICAgICAgICBwdWJsaWMgcHJvamVjdDogc3RyaW5nOwoKICAgICAgICAgICAgICAgIC8qKiBFcnJvclRhYmxlQ29uZmlnIHJldGVudGlvbkRheXMuICovCiAgICAgICAgICAgICAgICBwdWJsaWMgcmV0ZW50aW9uRGF5czogbnVtYmVyOwoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBFcnJvclRhYmxlQ29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIEVycm9yVGFibGVDb25maWcgaW5zdGFuY2UKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuSUVycm9yVGFibGVDb25maWcpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLkVycm9yVGFibGVDb25maWc7CgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXJyb3JUYWJsZUNvbmZpZyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLkVycm9yVGFibGVDb25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBFcnJvclRhYmxlQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLklFcnJvclRhYmxlQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBFcnJvclRhYmxlQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEVycm9yVGFibGVDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuSUVycm9yVGFibGVDb25maWcsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogRGVjb2RlcyBhbiBFcnJvclRhYmxlQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBFcnJvclRhYmxlQ29uZmlnCiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZzsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIERlY29kZXMgYW4gRXJyb3JUYWJsZUNvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBFcnJvclRhYmxlQ29uZmlnCiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuRGF0YVByZXBhcmF0aW9uQ29uZmlnLkVycm9yVGFibGVDb25maWc7CgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiBWZXJpZmllcyBhbiBFcnJvclRhYmxlQ29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogQ3JlYXRlcyBhbiBFcnJvclRhYmxlQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyBFcnJvclRhYmxlQ29uZmlnCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZy5FcnJvclRhYmxlQ29uZmlnOwoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEVycm9yVGFibGVDb25maWcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXJyb3JUYWJsZUNvbmZpZwogICAgICAgICAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5EYXRhUHJlcGFyYXRpb25Db25maWcuRXJyb3JUYWJsZUNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgRXJyb3JUYWJsZUNvbmZpZyB0byBKU09OLgogICAgICAgICAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIEVycm9yVGFibGVDb25maWcKICAgICAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiogUHJvcGVydGllcyBvZiBhIExvYWRNb2RlQ29uZmlnLiAqLwogICAgICAgIGludGVyZmFjZSBJTG9hZE1vZGVDb25maWcgewoKICAgICAgICAgICAgLyoqIExvYWRNb2RlQ29uZmlnIG1vZGUgKi8KICAgICAgICAgICAgbW9kZT86IChkYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGV8bnVsbCk7CgogICAgICAgICAgICAvKiogTG9hZE1vZGVDb25maWcgaW5jcmVtZW50YWxDb2x1bW4gKi8KICAgICAgICAgICAgaW5jcmVtZW50YWxDb2x1bW4/OiAoc3RyaW5nfG51bGwpOwogICAgICAgIH0KCiAgICAgICAgLyoqIFJlcHJlc2VudHMgYSBMb2FkTW9kZUNvbmZpZy4gKi8KICAgICAgICBjbGFzcyBMb2FkTW9kZUNvbmZpZyBpbXBsZW1lbnRzIElMb2FkTW9kZUNvbmZpZyB7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBMb2FkTW9kZUNvbmZpZy4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JTG9hZE1vZGVDb25maWcpOwoKICAgICAgICAgICAgLyoqIExvYWRNb2RlQ29uZmlnIG1vZGUuICovCiAgICAgICAgICAgIHB1YmxpYyBtb2RlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGU7CgogICAgICAgICAgICAvKiogTG9hZE1vZGVDb25maWcgaW5jcmVtZW50YWxDb2x1bW4uICovCiAgICAgICAgICAgIHB1YmxpYyBpbmNyZW1lbnRhbENvbHVtbjogc3RyaW5nOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgTG9hZE1vZGVDb25maWcgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqIEByZXR1cm5zIExvYWRNb2RlQ29uZmlnIGluc3RhbmNlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLklMb2FkTW9kZUNvbmZpZyk6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Mb2FkTW9kZUNvbmZpZzsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTG9hZE1vZGVDb25maWcgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBMb2FkTW9kZUNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSUxvYWRNb2RlQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTG9hZE1vZGVDb25maWcgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBMb2FkTW9kZUNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuSUxvYWRNb2RlQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgTG9hZE1vZGVDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIExvYWRNb2RlQ29uZmlnCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIERlY29kZXMgYSBMb2FkTW9kZUNvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHJldHVybnMgTG9hZE1vZGVDb25maWcKICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgTG9hZE1vZGVDb25maWcgbWVzc2FnZS4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgTG9hZE1vZGVDb25maWcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAgICAgKiBAcmV0dXJucyBMb2FkTW9kZUNvbmZpZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5BY3Rpb25Db25maWcuTG9hZE1vZGVDb25maWc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgTG9hZE1vZGVDb25maWcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBMb2FkTW9kZUNvbmZpZwogICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkxvYWRNb2RlQ29uZmlnLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgTG9hZE1vZGVDb25maWcgdG8gSlNPTi4KICAgICAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgTG9hZE1vZGVDb25maWcKICAgICAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICAgICAgfQoKICAgICAgICAvKiogTG9hZE1vZGUgZW51bS4gKi8KICAgICAgICBlbnVtIExvYWRNb2RlIHsKICAgICAgICAgICAgUkVQTEFDRV9UQUJMRSA9IDAsCiAgICAgICAgICAgIEFQUEVORCA9IDEsCiAgICAgICAgICAgIE1BWElNVU0gPSAyLAogICAgICAgICAgICBVTklRVUUgPSAzCiAgICAgICAgfQogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZy4gKi8KICAgIGludGVyZmFjZSBJTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyB7CgogICAgICAgIC8qKiBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIG91dHB1dEJ1Y2tldCAqLwogICAgICAgIG91dHB1dEJ1Y2tldD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIHJ1bnRpbWVUZW1wbGF0ZU5hbWUgKi8KICAgICAgICBydW50aW1lVGVtcGxhdGVOYW1lPzogKHN0cmluZ3xudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcuICovCiAgICBjbGFzcyBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIGltcGxlbWVudHMgSU5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyk7CgogICAgICAgIC8qKiBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIG91dHB1dEJ1Y2tldC4gKi8KICAgICAgICBwdWJsaWMgb3V0cHV0QnVja2V0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcgcnVudGltZVRlbXBsYXRlTmFtZS4gKi8KICAgICAgICBwdWJsaWMgcnVudGltZVRlbXBsYXRlTmFtZTogc3RyaW5nOwoKICAgICAgICAvKiogTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyBvdXRwdXRTaW5rLiAqLwogICAgICAgIHB1YmxpYyBvdXRwdXRTaW5rPzogIm91dHB1dEJ1Y2tldCI7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSU5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcpOiBkYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZyBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE5vdGVib29rUnVudGltZU9wdGlvbnNDb25maWcKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9uc0NvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBOb3RlYm9va1J1bnRpbWVPcHRpb25zQ29uZmlnCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBQcm9qZWN0Q29uZmlnLiAqLwogICAgaW50ZXJmYWNlIElQcm9qZWN0Q29uZmlnIHsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgd2FyZWhvdXNlICovCiAgICAgICAgd2FyZWhvdXNlPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgZGVmYXVsdERhdGFiYXNlICovCiAgICAgICAgZGVmYXVsdERhdGFiYXNlPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgZGVmYXVsdFNjaGVtYSAqLwogICAgICAgIGRlZmF1bHRTY2hlbWE/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogUHJvamVjdENvbmZpZyBkZWZhdWx0TG9jYXRpb24gKi8KICAgICAgICBkZWZhdWx0TG9jYXRpb24/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogUHJvamVjdENvbmZpZyBhc3NlcnRpb25TY2hlbWEgKi8KICAgICAgICBhc3NlcnRpb25TY2hlbWE/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogUHJvamVjdENvbmZpZyB2YXJzICovCiAgICAgICAgdmFycz86ICh7IFtrOiBzdHJpbmddOiBzdHJpbmcgfXxudWxsKTsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgZGF0YWJhc2VTdWZmaXggKi8KICAgICAgICBkYXRhYmFzZVN1ZmZpeD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIHNjaGVtYVN1ZmZpeCAqLwogICAgICAgIHNjaGVtYVN1ZmZpeD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIHRhYmxlUHJlZml4ICovCiAgICAgICAgdGFibGVQcmVmaXg/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogUHJvamVjdENvbmZpZyBidWlsdGluQXNzZXJ0aW9uTmFtZVByZWZpeCAqLwogICAgICAgIGJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgZGVmYXVsdE5vdGVib29rUnVudGltZU9wdGlvbnMgKi8KICAgICAgICBkZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz86IChkYXRhZm9ybS5JTm90ZWJvb2tSdW50aW1lT3B0aW9uc3xudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFByb2plY3RDb25maWcuICovCiAgICBjbGFzcyBQcm9qZWN0Q29uZmlnIGltcGxlbWVudHMgSVByb2plY3RDb25maWcgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFByb2plY3RDb25maWcuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JUHJvamVjdENvbmZpZyk7CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIHdhcmVob3VzZS4gKi8KICAgICAgICBwdWJsaWMgd2FyZWhvdXNlOiBzdHJpbmc7CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIGRlZmF1bHREYXRhYmFzZS4gKi8KICAgICAgICBwdWJsaWMgZGVmYXVsdERhdGFiYXNlOiBzdHJpbmc7CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIGRlZmF1bHRTY2hlbWEuICovCiAgICAgICAgcHVibGljIGRlZmF1bHRTY2hlbWE6IHN0cmluZzsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgZGVmYXVsdExvY2F0aW9uLiAqLwogICAgICAgIHB1YmxpYyBkZWZhdWx0TG9jYXRpb246IHN0cmluZzsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgYXNzZXJ0aW9uU2NoZW1hLiAqLwogICAgICAgIHB1YmxpYyBhc3NlcnRpb25TY2hlbWE6IHN0cmluZzsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgdmFycy4gKi8KICAgICAgICBwdWJsaWMgdmFyczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIGRhdGFiYXNlU3VmZml4LiAqLwogICAgICAgIHB1YmxpYyBkYXRhYmFzZVN1ZmZpeDogc3RyaW5nOwoKICAgICAgICAvKiogUHJvamVjdENvbmZpZyBzY2hlbWFTdWZmaXguICovCiAgICAgICAgcHVibGljIHNjaGVtYVN1ZmZpeDogc3RyaW5nOwoKICAgICAgICAvKiogUHJvamVjdENvbmZpZyB0YWJsZVByZWZpeC4gKi8KICAgICAgICBwdWJsaWMgdGFibGVQcmVmaXg6IHN0cmluZzsKCiAgICAgICAgLyoqIFByb2plY3RDb25maWcgYnVpbHRpbkFzc2VydGlvbk5hbWVQcmVmaXguICovCiAgICAgICAgcHVibGljIGJ1aWx0aW5Bc3NlcnRpb25OYW1lUHJlZml4OiBzdHJpbmc7CgogICAgICAgIC8qKiBQcm9qZWN0Q29uZmlnIGRlZmF1bHROb3RlYm9va1J1bnRpbWVPcHRpb25zLiAqLwogICAgICAgIHB1YmxpYyBkZWZhdWx0Tm90ZWJvb2tSdW50aW1lT3B0aW9ucz86IChkYXRhZm9ybS5JTm90ZWJvb2tSdW50aW1lT3B0aW9uc3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBQcm9qZWN0Q29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgUHJvamVjdENvbmZpZyBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JUHJvamVjdENvbmZpZyk6IGRhdGFmb3JtLlByb2plY3RDb25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBQcm9qZWN0Q29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlByb2plY3RDb25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUHJvamVjdENvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklQcm9qZWN0Q29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFByb2plY3RDb25maWcgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uUHJvamVjdENvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQcm9qZWN0Q29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVByb2plY3RDb25maWcsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgUHJvamVjdENvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgUHJvamVjdENvbmZpZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uUHJvamVjdENvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFByb2plY3RDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBQcm9qZWN0Q29uZmlnCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uUHJvamVjdENvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBQcm9qZWN0Q29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFByb2plY3RDb25maWcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgUHJvamVjdENvbmZpZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uUHJvamVjdENvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUHJvamVjdENvbmZpZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUHJvamVjdENvbmZpZwogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFByb2plY3RDb25maWcgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFByb2plY3RDb25maWcKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIENvbXBpbGVDb25maWcuICovCiAgICBpbnRlcmZhY2UgSUNvbXBpbGVDb25maWcgewoKICAgICAgICAvKiogQ29tcGlsZUNvbmZpZyBwcm9qZWN0RGlyICovCiAgICAgICAgcHJvamVjdERpcj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxlQ29uZmlnIGZpbGVQYXRocyAqLwogICAgICAgIGZpbGVQYXRocz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGVDb25maWcgcHJvamVjdENvbmZpZ092ZXJyaWRlICovCiAgICAgICAgcHJvamVjdENvbmZpZ092ZXJyaWRlPzogKGRhdGFmb3JtLklQcm9qZWN0Q29uZmlnfG51bGwpOwoKICAgICAgICAvKiogQ29tcGlsZUNvbmZpZyB0aW1lb3V0TWlsbGlzICovCiAgICAgICAgdGltZW91dE1pbGxpcz86IChudW1iZXJ8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBDb21waWxlQ29uZmlnLiAqLwogICAgY2xhc3MgQ29tcGlsZUNvbmZpZyBpbXBsZW1lbnRzIElDb21waWxlQ29uZmlnIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDb21waWxlQ29uZmlnLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUNvbXBpbGVDb25maWcpOwoKICAgICAgICAvKiogQ29tcGlsZUNvbmZpZyBwcm9qZWN0RGlyLiAqLwogICAgICAgIHB1YmxpYyBwcm9qZWN0RGlyOiBzdHJpbmc7CgogICAgICAgIC8qKiBDb21waWxlQ29uZmlnIGZpbGVQYXRocy4gKi8KICAgICAgICBwdWJsaWMgZmlsZVBhdGhzOiBzdHJpbmdbXTsKCiAgICAgICAgLyoqIENvbXBpbGVDb25maWcgcHJvamVjdENvbmZpZ092ZXJyaWRlLiAqLwogICAgICAgIHB1YmxpYyBwcm9qZWN0Q29uZmlnT3ZlcnJpZGU/OiAoZGF0YWZvcm0uSVByb2plY3RDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxlQ29uZmlnIHRpbWVvdXRNaWxsaXMuICovCiAgICAgICAgcHVibGljIHRpbWVvdXRNaWxsaXM6IG51bWJlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBDb21waWxlQ29uZmlnIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZUNvbmZpZyBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JQ29tcGlsZUNvbmZpZyk6IGRhdGFmb3JtLkNvbXBpbGVDb25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb21waWxlQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvbXBpbGVDb25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsZUNvbmZpZyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklDb21waWxlQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbXBpbGVDb25maWcgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQ29tcGlsZUNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb21waWxlQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSUNvbXBpbGVDb25maWcsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQ29tcGlsZUNvbmZpZyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZUNvbmZpZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQ29tcGlsZUNvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvbXBpbGVDb25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBDb21waWxlQ29uZmlnCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQ29tcGlsZUNvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBDb21waWxlQ29uZmlnIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIENvbXBpbGVDb25maWcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZUNvbmZpZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQ29tcGlsZUNvbmZpZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29tcGlsZUNvbmZpZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsZUNvbmZpZwogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Db21waWxlQ29uZmlnLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENvbXBpbGVDb25maWcgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIENvbXBpbGVDb25maWcKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIFRhcmdldC4gKi8KICAgIGludGVyZmFjZSBJVGFyZ2V0IHsKCiAgICAgICAgLyoqIFRhcmdldCBkYXRhYmFzZSAqLwogICAgICAgIGRhdGFiYXNlPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRhcmdldCBzY2hlbWEgKi8KICAgICAgICBzY2hlbWE/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogVGFyZ2V0IG5hbWUgKi8KICAgICAgICBuYW1lPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRhcmdldCBpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucyAqLwogICAgICAgIGluY2x1ZGVEZXBlbmRlbnRBc3NlcnRpb25zPzogKGJvb2xlYW58bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBUYXJnZXQuICovCiAgICBjbGFzcyBUYXJnZXQgaW1wbGVtZW50cyBJVGFyZ2V0IHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUYXJnZXQuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGFyZ2V0KTsKCiAgICAgICAgLyoqIFRhcmdldCBkYXRhYmFzZS4gKi8KICAgICAgICBwdWJsaWMgZGF0YWJhc2U6IHN0cmluZzsKCiAgICAgICAgLyoqIFRhcmdldCBzY2hlbWEuICovCiAgICAgICAgcHVibGljIHNjaGVtYTogc3RyaW5nOwoKICAgICAgICAvKiogVGFyZ2V0IG5hbWUuICovCiAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqIFRhcmdldCBpbmNsdWRlRGVwZW5kZW50QXNzZXJ0aW9ucy4gKi8KICAgICAgICBwdWJsaWMgaW5jbHVkZURlcGVuZGVudEFzc2VydGlvbnM6IGJvb2xlYW47CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVGFyZ2V0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgVGFyZ2V0IGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklUYXJnZXQpOiBkYXRhZm9ybS5UYXJnZXQ7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUYXJnZXQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uVGFyZ2V0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRhcmdldCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklUYXJnZXQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGFyZ2V0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRhcmdldC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUYXJnZXQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JVGFyZ2V0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFRhcmdldCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgVGFyZ2V0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5UYXJnZXQ7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBUYXJnZXQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBUYXJnZXQKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5UYXJnZXQ7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgVGFyZ2V0IG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFRhcmdldCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBUYXJnZXQKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLlRhcmdldDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVGFyZ2V0IG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUYXJnZXQKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uVGFyZ2V0LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRhcmdldCB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVGFyZ2V0CiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBCaWdRdWVyeU9wdGlvbnMuICovCiAgICBpbnRlcmZhY2UgSUJpZ1F1ZXJ5T3B0aW9ucyB7CgogICAgICAgIC8qKiBCaWdRdWVyeU9wdGlvbnMgcGFydGl0aW9uQnkgKi8KICAgICAgICBwYXJ0aXRpb25CeT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBCaWdRdWVyeU9wdGlvbnMgY2x1c3RlckJ5ICovCiAgICAgICAgY2x1c3RlckJ5PzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIHVwZGF0ZVBhcnRpdGlvbkZpbHRlciAqLwogICAgICAgIHVwZGF0ZVBhcnRpdGlvbkZpbHRlcj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBCaWdRdWVyeU9wdGlvbnMgbGFiZWxzICovCiAgICAgICAgbGFiZWxzPzogKHsgW2s6IHN0cmluZ106IHN0cmluZyB9fG51bGwpOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIHBhcnRpdGlvbkV4cGlyYXRpb25EYXlzICovCiAgICAgICAgcGFydGl0aW9uRXhwaXJhdGlvbkRheXM/OiAobnVtYmVyfG51bGwpOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIHJlcXVpcmVQYXJ0aXRpb25GaWx0ZXIgKi8KICAgICAgICByZXF1aXJlUGFydGl0aW9uRmlsdGVyPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgIC8qKiBCaWdRdWVyeU9wdGlvbnMgYWRkaXRpb25hbE9wdGlvbnMgKi8KICAgICAgICBhZGRpdGlvbmFsT3B0aW9ucz86ICh7IFtrOiBzdHJpbmddOiBzdHJpbmcgfXxudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIEJpZ1F1ZXJ5T3B0aW9ucy4gKi8KICAgIGNsYXNzIEJpZ1F1ZXJ5T3B0aW9ucyBpbXBsZW1lbnRzIElCaWdRdWVyeU9wdGlvbnMgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEJpZ1F1ZXJ5T3B0aW9ucy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklCaWdRdWVyeU9wdGlvbnMpOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIHBhcnRpdGlvbkJ5LiAqLwogICAgICAgIHB1YmxpYyBwYXJ0aXRpb25CeTogc3RyaW5nOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIGNsdXN0ZXJCeS4gKi8KICAgICAgICBwdWJsaWMgY2x1c3RlckJ5OiBzdHJpbmdbXTsKCiAgICAgICAgLyoqIEJpZ1F1ZXJ5T3B0aW9ucyB1cGRhdGVQYXJ0aXRpb25GaWx0ZXIuICovCiAgICAgICAgcHVibGljIHVwZGF0ZVBhcnRpdGlvbkZpbHRlcjogc3RyaW5nOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIGxhYmVscy4gKi8KICAgICAgICBwdWJsaWMgbGFiZWxzOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfTsKCiAgICAgICAgLyoqIEJpZ1F1ZXJ5T3B0aW9ucyBwYXJ0aXRpb25FeHBpcmF0aW9uRGF5cy4gKi8KICAgICAgICBwdWJsaWMgcGFydGl0aW9uRXhwaXJhdGlvbkRheXM6IG51bWJlcjsKCiAgICAgICAgLyoqIEJpZ1F1ZXJ5T3B0aW9ucyByZXF1aXJlUGFydGl0aW9uRmlsdGVyLiAqLwogICAgICAgIHB1YmxpYyByZXF1aXJlUGFydGl0aW9uRmlsdGVyOiBib29sZWFuOwoKICAgICAgICAvKiogQmlnUXVlcnlPcHRpb25zIGFkZGl0aW9uYWxPcHRpb25zLiAqLwogICAgICAgIHB1YmxpYyBhZGRpdGlvbmFsT3B0aW9uczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQmlnUXVlcnlPcHRpb25zIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQmlnUXVlcnlPcHRpb25zIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklCaWdRdWVyeU9wdGlvbnMpOiBkYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnM7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCaWdRdWVyeU9wdGlvbnMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQmlnUXVlcnlPcHRpb25zLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEJpZ1F1ZXJ5T3B0aW9ucyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklCaWdRdWVyeU9wdGlvbnMsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQmlnUXVlcnlPcHRpb25zIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkJpZ1F1ZXJ5T3B0aW9ucy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdRdWVyeU9wdGlvbnMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JQmlnUXVlcnlPcHRpb25zLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIEJpZ1F1ZXJ5T3B0aW9ucyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQmlnUXVlcnlPcHRpb25zCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnM7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBCaWdRdWVyeU9wdGlvbnMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBCaWdRdWVyeU9wdGlvbnMKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5CaWdRdWVyeU9wdGlvbnM7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgQmlnUXVlcnlPcHRpb25zIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIEJpZ1F1ZXJ5T3B0aW9ucyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBCaWdRdWVyeU9wdGlvbnMKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkJpZ1F1ZXJ5T3B0aW9uczsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQmlnUXVlcnlPcHRpb25zIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdRdWVyeU9wdGlvbnMKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQmlnUXVlcnlPcHRpb25zLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEJpZ1F1ZXJ5T3B0aW9ucyB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgQmlnUXVlcnlPcHRpb25zCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBHcmFwaEVycm9ycy4gKi8KICAgIGludGVyZmFjZSBJR3JhcGhFcnJvcnMgewoKICAgICAgICAvKiogR3JhcGhFcnJvcnMgY29tcGlsYXRpb25FcnJvcnMgKi8KICAgICAgICBjb21waWxhdGlvbkVycm9ycz86IChkYXRhZm9ybS5JQ29tcGlsYXRpb25FcnJvcltdfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgR3JhcGhFcnJvcnMuICovCiAgICBjbGFzcyBHcmFwaEVycm9ycyBpbXBsZW1lbnRzIElHcmFwaEVycm9ycyB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgR3JhcGhFcnJvcnMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JR3JhcGhFcnJvcnMpOwoKICAgICAgICAvKiogR3JhcGhFcnJvcnMgY29tcGlsYXRpb25FcnJvcnMuICovCiAgICAgICAgcHVibGljIGNvbXBpbGF0aW9uRXJyb3JzOiBkYXRhZm9ybS5JQ29tcGlsYXRpb25FcnJvcltdOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEdyYXBoRXJyb3JzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgR3JhcGhFcnJvcnMgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUdyYXBoRXJyb3JzKTogZGF0YWZvcm0uR3JhcGhFcnJvcnM7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBHcmFwaEVycm9ycyBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5HcmFwaEVycm9ycy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBHcmFwaEVycm9ycyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklHcmFwaEVycm9ycywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBHcmFwaEVycm9ycyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5HcmFwaEVycm9ycy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBHcmFwaEVycm9ycyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklHcmFwaEVycm9ycywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBHcmFwaEVycm9ycyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgR3JhcGhFcnJvcnMKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkdyYXBoRXJyb3JzOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgR3JhcGhFcnJvcnMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBHcmFwaEVycm9ycwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkdyYXBoRXJyb3JzOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIEdyYXBoRXJyb3JzIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIEdyYXBoRXJyb3JzIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIEdyYXBoRXJyb3JzCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5HcmFwaEVycm9yczsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgR3JhcGhFcnJvcnMgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEdyYXBoRXJyb3JzCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkdyYXBoRXJyb3JzLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEdyYXBoRXJyb3JzIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBHcmFwaEVycm9ycwogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgQ29tcGlsYXRpb25FcnJvci4gKi8KICAgIGludGVyZmFjZSBJQ29tcGlsYXRpb25FcnJvciB7CgogICAgICAgIC8qKiBDb21waWxhdGlvbkVycm9yIGZpbGVOYW1lICovCiAgICAgICAgZmlsZU5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogQ29tcGlsYXRpb25FcnJvciBhY3Rpb25OYW1lICovCiAgICAgICAgYWN0aW9uTmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxhdGlvbkVycm9yIGFjdGlvblRhcmdldCAqLwogICAgICAgIGFjdGlvblRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogQ29tcGlsYXRpb25FcnJvciBtZXNzYWdlICovCiAgICAgICAgbWVzc2FnZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxhdGlvbkVycm9yIHN0YWNrICovCiAgICAgICAgc3RhY2s/OiAoc3RyaW5nfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgQ29tcGlsYXRpb25FcnJvci4gKi8KICAgIGNsYXNzIENvbXBpbGF0aW9uRXJyb3IgaW1wbGVtZW50cyBJQ29tcGlsYXRpb25FcnJvciB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29tcGlsYXRpb25FcnJvci4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklDb21waWxhdGlvbkVycm9yKTsKCiAgICAgICAgLyoqIENvbXBpbGF0aW9uRXJyb3IgZmlsZU5hbWUuICovCiAgICAgICAgcHVibGljIGZpbGVOYW1lOiBzdHJpbmc7CgogICAgICAgIC8qKiBDb21waWxhdGlvbkVycm9yIGFjdGlvbk5hbWUuICovCiAgICAgICAgcHVibGljIGFjdGlvbk5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqIENvbXBpbGF0aW9uRXJyb3IgYWN0aW9uVGFyZ2V0LiAqLwogICAgICAgIHB1YmxpYyBhY3Rpb25UYXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGF0aW9uRXJyb3IgbWVzc2FnZS4gKi8KICAgICAgICBwdWJsaWMgbWVzc2FnZTogc3RyaW5nOwoKICAgICAgICAvKiogQ29tcGlsYXRpb25FcnJvciBzdGFjay4gKi8KICAgICAgICBwdWJsaWMgc3RhY2s6IHN0cmluZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBDb21waWxhdGlvbkVycm9yIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsYXRpb25FcnJvciBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JQ29tcGlsYXRpb25FcnJvcik6IGRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3I7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb21waWxhdGlvbkVycm9yIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvbXBpbGF0aW9uRXJyb3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsYXRpb25FcnJvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklDb21waWxhdGlvbkVycm9yLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbXBpbGF0aW9uRXJyb3IgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQ29tcGlsYXRpb25FcnJvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb21waWxhdGlvbkVycm9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSUNvbXBpbGF0aW9uRXJyb3IsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQ29tcGlsYXRpb25FcnJvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQ29tcGlsYXRpb25FcnJvcgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQ29tcGlsYXRpb25FcnJvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvbXBpbGF0aW9uRXJyb3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBDb21waWxhdGlvbkVycm9yCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQ29tcGlsYXRpb25FcnJvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBDb21waWxhdGlvbkVycm9yIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIENvbXBpbGF0aW9uRXJyb3IgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsYXRpb25FcnJvcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQ29tcGlsYXRpb25FcnJvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29tcGlsYXRpb25FcnJvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsYXRpb25FcnJvcgogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Db21waWxhdGlvbkVycm9yLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENvbXBpbGF0aW9uRXJyb3IgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIENvbXBpbGF0aW9uRXJyb3IKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhbiBBY3Rpb25EZXNjcmlwdG9yLiAqLwogICAgaW50ZXJmYWNlIElBY3Rpb25EZXNjcmlwdG9yIHsKCiAgICAgICAgLyoqIEFjdGlvbkRlc2NyaXB0b3IgZGVzY3JpcHRpb24gKi8KICAgICAgICBkZXNjcmlwdGlvbj86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25EZXNjcmlwdG9yIGNvbHVtbnMgKi8KICAgICAgICBjb2x1bW5zPzogKGRhdGFmb3JtLklDb2x1bW5EZXNjcmlwdG9yW118bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25EZXNjcmlwdG9yIGJpZ3F1ZXJ5TGFiZWxzICovCiAgICAgICAgYmlncXVlcnlMYWJlbHM/OiAoeyBbazogc3RyaW5nXTogc3RyaW5nIH18bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gQWN0aW9uRGVzY3JpcHRvci4gKi8KICAgIGNsYXNzIEFjdGlvbkRlc2NyaXB0b3IgaW1wbGVtZW50cyBJQWN0aW9uRGVzY3JpcHRvciB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQWN0aW9uRGVzY3JpcHRvci4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklBY3Rpb25EZXNjcmlwdG9yKTsKCiAgICAgICAgLyoqIEFjdGlvbkRlc2NyaXB0b3IgZGVzY3JpcHRpb24uICovCiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgIC8qKiBBY3Rpb25EZXNjcmlwdG9yIGNvbHVtbnMuICovCiAgICAgICAgcHVibGljIGNvbHVtbnM6IGRhdGFmb3JtLklDb2x1bW5EZXNjcmlwdG9yW107CgogICAgICAgIC8qKiBBY3Rpb25EZXNjcmlwdG9yIGJpZ3F1ZXJ5TGFiZWxzLiAqLwogICAgICAgIHB1YmxpYyBiaWdxdWVyeUxhYmVsczogeyBbazogc3RyaW5nXTogc3RyaW5nIH07CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQWN0aW9uRGVzY3JpcHRvciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIEFjdGlvbkRlc2NyaXB0b3IgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUFjdGlvbkRlc2NyaXB0b3IpOiBkYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQWN0aW9uRGVzY3JpcHRvciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFjdGlvbkRlc2NyaXB0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JQWN0aW9uRGVzY3JpcHRvciwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBBY3Rpb25EZXNjcmlwdG9yIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkFjdGlvbkRlc2NyaXB0b3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQWN0aW9uRGVzY3JpcHRvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklBY3Rpb25EZXNjcmlwdG9yLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhbiBBY3Rpb25EZXNjcmlwdG9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBBY3Rpb25EZXNjcmlwdG9yCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEFjdGlvbkRlc2NyaXB0b3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBBY3Rpb25EZXNjcmlwdG9yCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQWN0aW9uRGVzY3JpcHRvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYW4gQWN0aW9uRGVzY3JpcHRvciBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW4gQWN0aW9uRGVzY3JpcHRvciBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBBY3Rpb25EZXNjcmlwdG9yCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYW4gQWN0aW9uRGVzY3JpcHRvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQWN0aW9uRGVzY3JpcHRvcgogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5BY3Rpb25EZXNjcmlwdG9yLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEFjdGlvbkRlc2NyaXB0b3IgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIEFjdGlvbkRlc2NyaXB0b3IKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIENvbHVtbkRlc2NyaXB0b3IuICovCiAgICBpbnRlcmZhY2UgSUNvbHVtbkRlc2NyaXB0b3IgewoKICAgICAgICAvKiogQ29sdW1uRGVzY3JpcHRvciBkZXNjcmlwdGlvbiAqLwogICAgICAgIGRlc2NyaXB0aW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgcGF0aCAqLwogICAgICAgIHBhdGg/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBDb2x1bW5EZXNjcmlwdG9yIGRpc3BsYXlOYW1lICovCiAgICAgICAgZGlzcGxheU5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogQ29sdW1uRGVzY3JpcHRvciB0YWdzICovCiAgICAgICAgdGFncz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgYmlncXVlcnlQb2xpY3lUYWdzICovCiAgICAgICAgYmlncXVlcnlQb2xpY3lUYWdzPzogKHN0cmluZ1tdfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgQ29sdW1uRGVzY3JpcHRvci4gKi8KICAgIGNsYXNzIENvbHVtbkRlc2NyaXB0b3IgaW1wbGVtZW50cyBJQ29sdW1uRGVzY3JpcHRvciB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29sdW1uRGVzY3JpcHRvci4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklDb2x1bW5EZXNjcmlwdG9yKTsKCiAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgZGVzY3JpcHRpb24uICovCiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgIC8qKiBDb2x1bW5EZXNjcmlwdG9yIHBhdGguICovCiAgICAgICAgcHVibGljIHBhdGg6IHN0cmluZ1tdOwoKICAgICAgICAvKiogQ29sdW1uRGVzY3JpcHRvciBkaXNwbGF5TmFtZS4gKi8KICAgICAgICBwdWJsaWMgZGlzcGxheU5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqIENvbHVtbkRlc2NyaXB0b3IgdGFncy4gKi8KICAgICAgICBwdWJsaWMgdGFnczogc3RyaW5nW107CgogICAgICAgIC8qKiBDb2x1bW5EZXNjcmlwdG9yIGJpZ3F1ZXJ5UG9saWN5VGFncy4gKi8KICAgICAgICBwdWJsaWMgYmlncXVlcnlQb2xpY3lUYWdzOiBzdHJpbmdbXTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBDb2x1bW5EZXNjcmlwdG9yIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQ29sdW1uRGVzY3JpcHRvciBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JQ29sdW1uRGVzY3JpcHRvcik6IGRhdGFmb3JtLkNvbHVtbkRlc2NyaXB0b3I7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvbHVtbkRlc2NyaXB0b3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29sdW1uRGVzY3JpcHRvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklDb2x1bW5EZXNjcmlwdG9yLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbHVtbkRlc2NyaXB0b3IgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSUNvbHVtbkRlc2NyaXB0b3IsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQ29sdW1uRGVzY3JpcHRvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQ29sdW1uRGVzY3JpcHRvcgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvbHVtbkRlc2NyaXB0b3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBDb2x1bW5EZXNjcmlwdG9yCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBDb2x1bW5EZXNjcmlwdG9yIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIENvbHVtbkRlc2NyaXB0b3IgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQ29sdW1uRGVzY3JpcHRvcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQ29sdW1uRGVzY3JpcHRvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29sdW1uRGVzY3JpcHRvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29sdW1uRGVzY3JpcHRvcgogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Db2x1bW5EZXNjcmlwdG9yLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENvbHVtbkRlc2NyaXB0b3IgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIENvbHVtbkRlc2NyaXB0b3IKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogVGFibGVUeXBlIGVudW0uICovCiAgICBlbnVtIFRhYmxlVHlwZSB7CiAgICAgICAgVU5LTk9XTl9UWVBFID0gMCwKICAgICAgICBUQUJMRSA9IDEsCiAgICAgICAgSU5DUkVNRU5UQUwgPSAyLAogICAgICAgIFZJRVcgPSAzCiAgICB9CgogICAgLyoqIE9uU2NoZW1hQ2hhbmdlIGVudW0uICovCiAgICBlbnVtIE9uU2NoZW1hQ2hhbmdlIHsKICAgICAgICBJR05PUkUgPSAwLAogICAgICAgIEZBSUwgPSAxLAogICAgICAgIEVYVEVORCA9IDIsCiAgICAgICAgU1lOQ0hST05JWkUgPSAzCiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBUYWJsZS4gKi8KICAgIGludGVyZmFjZSBJVGFibGUgewoKICAgICAgICAvKiogVGFibGUgZW51bVR5cGUgKi8KICAgICAgICBlbnVtVHlwZT86IChkYXRhZm9ybS5UYWJsZVR5cGV8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSB0YXJnZXQgKi8KICAgICAgICB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIFRhYmxlIGNhbm9uaWNhbFRhcmdldCAqLwogICAgICAgIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogVGFibGUgZGVwZW5kZW5jeVRhcmdldHMgKi8KICAgICAgICBkZXBlbmRlbmN5VGFyZ2V0cz86IChkYXRhZm9ybS5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBoZXJtZXRpY2l0eSAqLwogICAgICAgIGhlcm1ldGljaXR5PzogKGRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5fG51bGwpOwoKICAgICAgICAvKiogVGFibGUgZGlzYWJsZWQgKi8KICAgICAgICBkaXNhYmxlZD86IChib29sZWFufG51bGwpOwoKICAgICAgICAvKiogVGFibGUgdHlwZSAqLwogICAgICAgIHR5cGU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgcXVlcnkgKi8KICAgICAgICBxdWVyeT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBwcm90ZWN0ZWQgKi8KICAgICAgICAicHJvdGVjdGVkIj86IChib29sZWFufG51bGwpOwoKICAgICAgICAvKiogVGFibGUgbWF0ZXJpYWxpemVkICovCiAgICAgICAgbWF0ZXJpYWxpemVkPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBhY3Rpb25EZXNjcmlwdG9yICovCiAgICAgICAgYWN0aW9uRGVzY3JpcHRvcj86IChkYXRhZm9ybS5JQWN0aW9uRGVzY3JpcHRvcnxudWxsKTsKCiAgICAgICAgLyoqIFRhYmxlIHRhZ3MgKi8KICAgICAgICB0YWdzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgd2hlcmUgKi8KICAgICAgICB3aGVyZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBpbmNyZW1lbnRhbFF1ZXJ5ICovCiAgICAgICAgaW5jcmVtZW50YWxRdWVyeT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSB1bmlxdWVLZXkgKi8KICAgICAgICB1bmlxdWVLZXk/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBvblNjaGVtYUNoYW5nZSAqLwogICAgICAgIG9uU2NoZW1hQ2hhbmdlPzogKGRhdGFmb3JtLk9uU2NoZW1hQ2hhbmdlfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgcHJlT3BzICovCiAgICAgICAgcHJlT3BzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgcG9zdE9wcyAqLwogICAgICAgIHBvc3RPcHM/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBpbmNyZW1lbnRhbFByZU9wcyAqLwogICAgICAgIGluY3JlbWVudGFsUHJlT3BzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgaW5jcmVtZW50YWxQb3N0T3BzICovCiAgICAgICAgaW5jcmVtZW50YWxQb3N0T3BzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgYmlncXVlcnkgKi8KICAgICAgICBiaWdxdWVyeT86IChkYXRhZm9ybS5JQmlnUXVlcnlPcHRpb25zfG51bGwpOwoKICAgICAgICAvKiogVGFibGUgZmlsZU5hbWUgKi8KICAgICAgICBmaWxlTmFtZT86IChzdHJpbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBUYWJsZS4gKi8KICAgIGNsYXNzIFRhYmxlIGltcGxlbWVudHMgSVRhYmxlIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUYWJsZS4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklUYWJsZSk7CgogICAgICAgIC8qKiBUYWJsZSBlbnVtVHlwZS4gKi8KICAgICAgICBwdWJsaWMgZW51bVR5cGU6IGRhdGFmb3JtLlRhYmxlVHlwZTsKCiAgICAgICAgLyoqIFRhYmxlIHRhcmdldC4gKi8KICAgICAgICBwdWJsaWMgdGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBjYW5vbmljYWxUYXJnZXQuICovCiAgICAgICAgcHVibGljIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogVGFibGUgZGVwZW5kZW5jeVRhcmdldHMuICovCiAgICAgICAgcHVibGljIGRlcGVuZGVuY3lUYXJnZXRzOiBkYXRhZm9ybS5JVGFyZ2V0W107CgogICAgICAgIC8qKiBUYWJsZSBoZXJtZXRpY2l0eS4gKi8KICAgICAgICBwdWJsaWMgaGVybWV0aWNpdHk6IGRhdGFmb3JtLkFjdGlvbkhlcm1ldGljaXR5OwoKICAgICAgICAvKiogVGFibGUgZGlzYWJsZWQuICovCiAgICAgICAgcHVibGljIGRpc2FibGVkOiBib29sZWFuOwoKICAgICAgICAvKiogVGFibGUgdHlwZS4gKi8KICAgICAgICBwdWJsaWMgdHlwZTogc3RyaW5nOwoKICAgICAgICAvKiogVGFibGUgcXVlcnkuICovCiAgICAgICAgcHVibGljIHF1ZXJ5OiBzdHJpbmc7CgogICAgICAgIC8qKiBUYWJsZSBwcm90ZWN0ZWQuICovCiAgICAgICAgcHVibGljIHByb3RlY3RlZDogYm9vbGVhbjsKCiAgICAgICAgLyoqIFRhYmxlIG1hdGVyaWFsaXplZC4gKi8KICAgICAgICBwdWJsaWMgbWF0ZXJpYWxpemVkOiBib29sZWFuOwoKICAgICAgICAvKiogVGFibGUgYWN0aW9uRGVzY3JpcHRvci4gKi8KICAgICAgICBwdWJsaWMgYWN0aW9uRGVzY3JpcHRvcj86IChkYXRhZm9ybS5JQWN0aW9uRGVzY3JpcHRvcnxudWxsKTsKCiAgICAgICAgLyoqIFRhYmxlIHRhZ3MuICovCiAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAvKiogVGFibGUgd2hlcmUuICovCiAgICAgICAgcHVibGljIHdoZXJlOiBzdHJpbmc7CgogICAgICAgIC8qKiBUYWJsZSBpbmNyZW1lbnRhbFF1ZXJ5LiAqLwogICAgICAgIHB1YmxpYyBpbmNyZW1lbnRhbFF1ZXJ5OiBzdHJpbmc7CgogICAgICAgIC8qKiBUYWJsZSB1bmlxdWVLZXkuICovCiAgICAgICAgcHVibGljIHVuaXF1ZUtleTogc3RyaW5nW107CgogICAgICAgIC8qKiBUYWJsZSBvblNjaGVtYUNoYW5nZS4gKi8KICAgICAgICBwdWJsaWMgb25TY2hlbWFDaGFuZ2U6IGRhdGFmb3JtLk9uU2NoZW1hQ2hhbmdlOwoKICAgICAgICAvKiogVGFibGUgcHJlT3BzLiAqLwogICAgICAgIHB1YmxpYyBwcmVPcHM6IHN0cmluZ1tdOwoKICAgICAgICAvKiogVGFibGUgcG9zdE9wcy4gKi8KICAgICAgICBwdWJsaWMgcG9zdE9wczogc3RyaW5nW107CgogICAgICAgIC8qKiBUYWJsZSBpbmNyZW1lbnRhbFByZU9wcy4gKi8KICAgICAgICBwdWJsaWMgaW5jcmVtZW50YWxQcmVPcHM6IHN0cmluZ1tdOwoKICAgICAgICAvKiogVGFibGUgaW5jcmVtZW50YWxQb3N0T3BzLiAqLwogICAgICAgIHB1YmxpYyBpbmNyZW1lbnRhbFBvc3RPcHM6IHN0cmluZ1tdOwoKICAgICAgICAvKiogVGFibGUgYmlncXVlcnkuICovCiAgICAgICAgcHVibGljIGJpZ3F1ZXJ5PzogKGRhdGFmb3JtLklCaWdRdWVyeU9wdGlvbnN8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZSBmaWxlTmFtZS4gKi8KICAgICAgICBwdWJsaWMgZmlsZU5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBUYWJsZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIFRhYmxlIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklUYWJsZSk6IGRhdGFmb3JtLlRhYmxlOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGFibGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uVGFibGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JVGFibGUsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGFibGUgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uVGFibGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JVGFibGUsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgVGFibGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIFRhYmxlCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5UYWJsZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFRhYmxlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgVGFibGUKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5UYWJsZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBUYWJsZSBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBUYWJsZSBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBUYWJsZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uVGFibGU7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRhYmxlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUYWJsZQogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5UYWJsZSwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBUYWJsZSB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVGFibGUKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhbiBPcGVyYXRpb24uICovCiAgICBpbnRlcmZhY2UgSU9wZXJhdGlvbiB7CgogICAgICAgIC8qKiBPcGVyYXRpb24gdGFyZ2V0ICovCiAgICAgICAgdGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gY2Fub25pY2FsVGFyZ2V0ICovCiAgICAgICAgY2Fub25pY2FsVGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gZGVwZW5kZW5jeVRhcmdldHMgKi8KICAgICAgICBkZXBlbmRlbmN5VGFyZ2V0cz86IChkYXRhZm9ybS5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gaGVybWV0aWNpdHkgKi8KICAgICAgICBoZXJtZXRpY2l0eT86IChkYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eXxudWxsKTsKCiAgICAgICAgLyoqIE9wZXJhdGlvbiBkaXNhYmxlZCAqLwogICAgICAgIGRpc2FibGVkPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gcXVlcmllcyAqLwogICAgICAgIHF1ZXJpZXM/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gaGFzT3V0cHV0ICovCiAgICAgICAgaGFzT3V0cHV0PzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gdGFncyAqLwogICAgICAgIHRhZ3M/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gYWN0aW9uRGVzY3JpcHRvciAqLwogICAgICAgIGFjdGlvbkRlc2NyaXB0b3I/OiAoZGF0YWZvcm0uSUFjdGlvbkRlc2NyaXB0b3J8bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gZmlsZU5hbWUgKi8KICAgICAgICBmaWxlTmFtZT86IChzdHJpbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gT3BlcmF0aW9uLiAqLwogICAgY2xhc3MgT3BlcmF0aW9uIGltcGxlbWVudHMgSU9wZXJhdGlvbiB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgT3BlcmF0aW9uLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSU9wZXJhdGlvbik7CgogICAgICAgIC8qKiBPcGVyYXRpb24gdGFyZ2V0LiAqLwogICAgICAgIHB1YmxpYyB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIE9wZXJhdGlvbiBjYW5vbmljYWxUYXJnZXQuICovCiAgICAgICAgcHVibGljIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogT3BlcmF0aW9uIGRlcGVuZGVuY3lUYXJnZXRzLiAqLwogICAgICAgIHB1YmxpYyBkZXBlbmRlbmN5VGFyZ2V0czogZGF0YWZvcm0uSVRhcmdldFtdOwoKICAgICAgICAvKiogT3BlcmF0aW9uIGhlcm1ldGljaXR5LiAqLwogICAgICAgIHB1YmxpYyBoZXJtZXRpY2l0eTogZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gZGlzYWJsZWQuICovCiAgICAgICAgcHVibGljIGRpc2FibGVkOiBib29sZWFuOwoKICAgICAgICAvKiogT3BlcmF0aW9uIHF1ZXJpZXMuICovCiAgICAgICAgcHVibGljIHF1ZXJpZXM6IHN0cmluZ1tdOwoKICAgICAgICAvKiogT3BlcmF0aW9uIGhhc091dHB1dC4gKi8KICAgICAgICBwdWJsaWMgaGFzT3V0cHV0OiBib29sZWFuOwoKICAgICAgICAvKiogT3BlcmF0aW9uIHRhZ3MuICovCiAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAvKiogT3BlcmF0aW9uIGFjdGlvbkRlc2NyaXB0b3IuICovCiAgICAgICAgcHVibGljIGFjdGlvbkRlc2NyaXB0b3I/OiAoZGF0YWZvcm0uSUFjdGlvbkRlc2NyaXB0b3J8bnVsbCk7CgogICAgICAgIC8qKiBPcGVyYXRpb24gZmlsZU5hbWUuICovCiAgICAgICAgcHVibGljIGZpbGVOYW1lOiBzdHJpbmc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgT3BlcmF0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgT3BlcmF0aW9uIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklPcGVyYXRpb24pOiBkYXRhZm9ybS5PcGVyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBPcGVyYXRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uT3BlcmF0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE9wZXJhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklPcGVyYXRpb24sIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgT3BlcmF0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLk9wZXJhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBPcGVyYXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JT3BlcmF0aW9uLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhbiBPcGVyYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIE9wZXJhdGlvbgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uT3BlcmF0aW9uOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIE9wZXJhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIE9wZXJhdGlvbgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLk9wZXJhdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYW4gT3BlcmF0aW9uIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbiBPcGVyYXRpb24gbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgT3BlcmF0aW9uCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5PcGVyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhbiBPcGVyYXRpb24gbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE9wZXJhdGlvbgogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5PcGVyYXRpb24sIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgT3BlcmF0aW9uIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBPcGVyYXRpb24KICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhbiBBc3NlcnRpb24uICovCiAgICBpbnRlcmZhY2UgSUFzc2VydGlvbiB7CgogICAgICAgIC8qKiBBc3NlcnRpb24gdGFyZ2V0ICovCiAgICAgICAgdGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gY2Fub25pY2FsVGFyZ2V0ICovCiAgICAgICAgY2Fub25pY2FsVGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gZGVwZW5kZW5jeVRhcmdldHMgKi8KICAgICAgICBkZXBlbmRlbmN5VGFyZ2V0cz86IChkYXRhZm9ybS5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gaGVybWV0aWNpdHkgKi8KICAgICAgICBoZXJtZXRpY2l0eT86IChkYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eXxudWxsKTsKCiAgICAgICAgLyoqIEFzc2VydGlvbiBkaXNhYmxlZCAqLwogICAgICAgIGRpc2FibGVkPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gcXVlcnkgKi8KICAgICAgICBxdWVyeT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gdGFncyAqLwogICAgICAgIHRhZ3M/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gYWN0aW9uRGVzY3JpcHRvciAqLwogICAgICAgIGFjdGlvbkRlc2NyaXB0b3I/OiAoZGF0YWZvcm0uSUFjdGlvbkRlc2NyaXB0b3J8bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gcGFyZW50QWN0aW9uICovCiAgICAgICAgcGFyZW50QWN0aW9uPzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gZmlsZU5hbWUgKi8KICAgICAgICBmaWxlTmFtZT86IChzdHJpbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gQXNzZXJ0aW9uLiAqLwogICAgY2xhc3MgQXNzZXJ0aW9uIGltcGxlbWVudHMgSUFzc2VydGlvbiB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQXNzZXJ0aW9uLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUFzc2VydGlvbik7CgogICAgICAgIC8qKiBBc3NlcnRpb24gdGFyZ2V0LiAqLwogICAgICAgIHB1YmxpYyB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIEFzc2VydGlvbiBjYW5vbmljYWxUYXJnZXQuICovCiAgICAgICAgcHVibGljIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogQXNzZXJ0aW9uIGRlcGVuZGVuY3lUYXJnZXRzLiAqLwogICAgICAgIHB1YmxpYyBkZXBlbmRlbmN5VGFyZ2V0czogZGF0YWZvcm0uSVRhcmdldFtdOwoKICAgICAgICAvKiogQXNzZXJ0aW9uIGhlcm1ldGljaXR5LiAqLwogICAgICAgIHB1YmxpYyBoZXJtZXRpY2l0eTogZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gZGlzYWJsZWQuICovCiAgICAgICAgcHVibGljIGRpc2FibGVkOiBib29sZWFuOwoKICAgICAgICAvKiogQXNzZXJ0aW9uIHF1ZXJ5LiAqLwogICAgICAgIHB1YmxpYyBxdWVyeTogc3RyaW5nOwoKICAgICAgICAvKiogQXNzZXJ0aW9uIHRhZ3MuICovCiAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAvKiogQXNzZXJ0aW9uIGFjdGlvbkRlc2NyaXB0b3IuICovCiAgICAgICAgcHVibGljIGFjdGlvbkRlc2NyaXB0b3I/OiAoZGF0YWZvcm0uSUFjdGlvbkRlc2NyaXB0b3J8bnVsbCk7CgogICAgICAgIC8qKiBBc3NlcnRpb24gcGFyZW50QWN0aW9uLiAqLwogICAgICAgIHB1YmxpYyBwYXJlbnRBY3Rpb24/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIEFzc2VydGlvbiBmaWxlTmFtZS4gKi8KICAgICAgICBwdWJsaWMgZmlsZU5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBBc3NlcnRpb24gaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBBc3NlcnRpb24gaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUFzc2VydGlvbik6IGRhdGFmb3JtLkFzc2VydGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFzc2VydGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5Bc3NlcnRpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQXNzZXJ0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUFzc2VydGlvbiwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBBc3NlcnRpb24gbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQXNzZXJ0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFzc2VydGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklBc3NlcnRpb24sIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEFzc2VydGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQXNzZXJ0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5Bc3NlcnRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gQXNzZXJ0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgQXNzZXJ0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQXNzZXJ0aW9uOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhbiBBc3NlcnRpb24gbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuIEFzc2VydGlvbiBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBBc3NlcnRpb24KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkFzc2VydGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEFzc2VydGlvbiBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQXNzZXJ0aW9uCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFzc2VydGlvbiwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBBc3NlcnRpb24gdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIEFzc2VydGlvbgogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBBY3Rpb25IZXJtZXRpY2l0eSBlbnVtLiAqLwogICAgZW51bSBBY3Rpb25IZXJtZXRpY2l0eSB7CiAgICAgICAgVU5LTk9XTiA9IDAsCiAgICAgICAgSEVSTUVUSUMgPSAxLAogICAgICAgIE5PTl9IRVJNRVRJQyA9IDIKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIERlY2xhcmF0aW9uLiAqLwogICAgaW50ZXJmYWNlIElEZWNsYXJhdGlvbiB7CgogICAgICAgIC8qKiBEZWNsYXJhdGlvbiB0YXJnZXQgKi8KICAgICAgICB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIERlY2xhcmF0aW9uIGNhbm9uaWNhbFRhcmdldCAqLwogICAgICAgIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogRGVjbGFyYXRpb24gYWN0aW9uRGVzY3JpcHRvciAqLwogICAgICAgIGFjdGlvbkRlc2NyaXB0b3I/OiAoZGF0YWZvcm0uSUFjdGlvbkRlc2NyaXB0b3J8bnVsbCk7CgogICAgICAgIC8qKiBEZWNsYXJhdGlvbiBmaWxlTmFtZSAqLwogICAgICAgIGZpbGVOYW1lPzogKHN0cmluZ3xudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIERlY2xhcmF0aW9uLiAqLwogICAgY2xhc3MgRGVjbGFyYXRpb24gaW1wbGVtZW50cyBJRGVjbGFyYXRpb24gewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlY2xhcmF0aW9uLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSURlY2xhcmF0aW9uKTsKCiAgICAgICAgLyoqIERlY2xhcmF0aW9uIHRhcmdldC4gKi8KICAgICAgICBwdWJsaWMgdGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBEZWNsYXJhdGlvbiBjYW5vbmljYWxUYXJnZXQuICovCiAgICAgICAgcHVibGljIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogRGVjbGFyYXRpb24gYWN0aW9uRGVzY3JpcHRvci4gKi8KICAgICAgICBwdWJsaWMgYWN0aW9uRGVzY3JpcHRvcj86IChkYXRhZm9ybS5JQWN0aW9uRGVzY3JpcHRvcnxudWxsKTsKCiAgICAgICAgLyoqIERlY2xhcmF0aW9uIGZpbGVOYW1lLiAqLwogICAgICAgIHB1YmxpYyBmaWxlTmFtZTogc3RyaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IERlY2xhcmF0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgRGVjbGFyYXRpb24gaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSURlY2xhcmF0aW9uKTogZGF0YWZvcm0uRGVjbGFyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWNsYXJhdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5EZWNsYXJhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBEZWNsYXJhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklEZWNsYXJhdGlvbiwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEZWNsYXJhdGlvbiBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5EZWNsYXJhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBEZWNsYXJhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklEZWNsYXJhdGlvbiwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBEZWNsYXJhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgRGVjbGFyYXRpb24KICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkRlY2xhcmF0aW9uOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgRGVjbGFyYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBEZWNsYXJhdGlvbgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkRlY2xhcmF0aW9uOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIERlY2xhcmF0aW9uIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIERlY2xhcmF0aW9uIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIERlY2xhcmF0aW9uCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5EZWNsYXJhdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGVjbGFyYXRpb24gbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIERlY2xhcmF0aW9uCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkRlY2xhcmF0aW9uLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERlY2xhcmF0aW9uIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBEZWNsYXJhdGlvbgogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgVGVzdC4gKi8KICAgIGludGVyZmFjZSBJVGVzdCB7CgogICAgICAgIC8qKiBUZXN0IG5hbWUgKi8KICAgICAgICBuYW1lPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRlc3QgdGVzdFF1ZXJ5ICovCiAgICAgICAgdGVzdFF1ZXJ5PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRlc3QgZXhwZWN0ZWRPdXRwdXRRdWVyeSAqLwogICAgICAgIGV4cGVjdGVkT3V0cHV0UXVlcnk/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogVGVzdCBmaWxlTmFtZSAqLwogICAgICAgIGZpbGVOYW1lPzogKHN0cmluZ3xudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFRlc3QuICovCiAgICBjbGFzcyBUZXN0IGltcGxlbWVudHMgSVRlc3QgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRlc3QuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGVzdCk7CgogICAgICAgIC8qKiBUZXN0IG5hbWUuICovCiAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqIFRlc3QgdGVzdFF1ZXJ5LiAqLwogICAgICAgIHB1YmxpYyB0ZXN0UXVlcnk6IHN0cmluZzsKCiAgICAgICAgLyoqIFRlc3QgZXhwZWN0ZWRPdXRwdXRRdWVyeS4gKi8KICAgICAgICBwdWJsaWMgZXhwZWN0ZWRPdXRwdXRRdWVyeTogc3RyaW5nOwoKICAgICAgICAvKiogVGVzdCBmaWxlTmFtZS4gKi8KICAgICAgICBwdWJsaWMgZmlsZU5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBUZXN0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgVGVzdCBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGVzdCk6IGRhdGFmb3JtLlRlc3Q7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRlc3QudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklUZXN0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRlc3QgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uVGVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVRlc3QsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgVGVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgVGVzdAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uVGVzdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFRlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBUZXN0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uVGVzdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBUZXN0IG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFRlc3QgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgVGVzdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uVGVzdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVGVzdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGVzdAogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5UZXN0LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRlc3QgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRlc3QKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIE5vdGVib29rLiAqLwogICAgaW50ZXJmYWNlIElOb3RlYm9vayB7CgogICAgICAgIC8qKiBOb3RlYm9vayB0YXJnZXQgKi8KICAgICAgICB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIE5vdGVib29rIGNhbm9uaWNhbFRhcmdldCAqLwogICAgICAgIGNhbm9uaWNhbFRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogTm90ZWJvb2sgdGFncyAqLwogICAgICAgIHRhZ3M/OiAoc3RyaW5nW118bnVsbCk7CgogICAgICAgIC8qKiBOb3RlYm9vayBkZXBlbmRlbmN5VGFyZ2V0cyAqLwogICAgICAgIGRlcGVuZGVuY3lUYXJnZXRzPzogKGRhdGFmb3JtLklUYXJnZXRbXXxudWxsKTsKCiAgICAgICAgLyoqIE5vdGVib29rIGZpbGVOYW1lICovCiAgICAgICAgZmlsZU5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogTm90ZWJvb2sgZGlzYWJsZWQgKi8KICAgICAgICBkaXNhYmxlZD86IChib29sZWFufG51bGwpOwoKICAgICAgICAvKiogTm90ZWJvb2sgbm90ZWJvb2tDb250ZW50cyAqLwogICAgICAgIG5vdGVib29rQ29udGVudHM/OiAoc3RyaW5nfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgTm90ZWJvb2suICovCiAgICBjbGFzcyBOb3RlYm9vayBpbXBsZW1lbnRzIElOb3RlYm9vayB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTm90ZWJvb2suCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JTm90ZWJvb2spOwoKICAgICAgICAvKiogTm90ZWJvb2sgdGFyZ2V0LiAqLwogICAgICAgIHB1YmxpYyB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIE5vdGVib29rIGNhbm9uaWNhbFRhcmdldC4gKi8KICAgICAgICBwdWJsaWMgY2Fub25pY2FsVGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBOb3RlYm9vayB0YWdzLiAqLwogICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTsKCiAgICAgICAgLyoqIE5vdGVib29rIGRlcGVuZGVuY3lUYXJnZXRzLiAqLwogICAgICAgIHB1YmxpYyBkZXBlbmRlbmN5VGFyZ2V0czogZGF0YWZvcm0uSVRhcmdldFtdOwoKICAgICAgICAvKiogTm90ZWJvb2sgZmlsZU5hbWUuICovCiAgICAgICAgcHVibGljIGZpbGVOYW1lOiBzdHJpbmc7CgogICAgICAgIC8qKiBOb3RlYm9vayBkaXNhYmxlZC4gKi8KICAgICAgICBwdWJsaWMgZGlzYWJsZWQ6IGJvb2xlYW47CgogICAgICAgIC8qKiBOb3RlYm9vayBub3RlYm9va0NvbnRlbnRzLiAqLwogICAgICAgIHB1YmxpYyBub3RlYm9va0NvbnRlbnRzOiBzdHJpbmc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgTm90ZWJvb2sgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBOb3RlYm9vayBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JTm90ZWJvb2spOiBkYXRhZm9ybS5Ob3RlYm9vazsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vdGVib29rIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLk5vdGVib29rLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE5vdGVib29rIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSU5vdGVib29rLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vdGVib29rIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLk5vdGVib29rLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIE5vdGVib29rIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSU5vdGVib29rLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIE5vdGVib29rIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBOb3RlYm9vawogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uTm90ZWJvb2s7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBOb3RlYm9vayBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIE5vdGVib29rCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uTm90ZWJvb2s7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgTm90ZWJvb2sgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgTm90ZWJvb2sgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgTm90ZWJvb2sKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLk5vdGVib29rOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBOb3RlYm9vayBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2sKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uTm90ZWJvb2ssIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgTm90ZWJvb2sgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIE5vdGVib29rCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBOb3RlYm9va1J1bnRpbWVPcHRpb25zLiAqLwogICAgaW50ZXJmYWNlIElOb3RlYm9va1J1bnRpbWVPcHRpb25zIHsKCiAgICAgICAgLyoqIE5vdGVib29rUnVudGltZU9wdGlvbnMgb3V0cHV0QnVja2V0ICovCiAgICAgICAgb3V0cHV0QnVja2V0PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIE5vdGVib29rUnVudGltZU9wdGlvbnMgcnVudGltZVRlbXBsYXRlTmFtZSAqLwogICAgICAgIHJ1bnRpbWVUZW1wbGF0ZU5hbWU/OiAoc3RyaW5nfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgTm90ZWJvb2tSdW50aW1lT3B0aW9ucy4gKi8KICAgIGNsYXNzIE5vdGVib29rUnVudGltZU9wdGlvbnMgaW1wbGVtZW50cyBJTm90ZWJvb2tSdW50aW1lT3B0aW9ucyB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTm90ZWJvb2tSdW50aW1lT3B0aW9ucy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklOb3RlYm9va1J1bnRpbWVPcHRpb25zKTsKCiAgICAgICAgLyoqIE5vdGVib29rUnVudGltZU9wdGlvbnMgb3V0cHV0QnVja2V0LiAqLwogICAgICAgIHB1YmxpYyBvdXRwdXRCdWNrZXQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogTm90ZWJvb2tSdW50aW1lT3B0aW9ucyBydW50aW1lVGVtcGxhdGVOYW1lLiAqLwogICAgICAgIHB1YmxpYyBydW50aW1lVGVtcGxhdGVOYW1lOiBzdHJpbmc7CgogICAgICAgIC8qKiBOb3RlYm9va1J1bnRpbWVPcHRpb25zIG91dHB1dFNpbmsuICovCiAgICAgICAgcHVibGljIG91dHB1dFNpbms/OiAib3V0cHV0QnVja2V0IjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBOb3RlYm9va1J1bnRpbWVPcHRpb25zIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgTm90ZWJvb2tSdW50aW1lT3B0aW9ucyBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JTm90ZWJvb2tSdW50aW1lT3B0aW9ucyk6IGRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnM7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBOb3RlYm9va1J1bnRpbWVPcHRpb25zIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLk5vdGVib29rUnVudGltZU9wdGlvbnMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2tSdW50aW1lT3B0aW9ucyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklOb3RlYm9va1J1bnRpbWVPcHRpb25zLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIE5vdGVib29rUnVudGltZU9wdGlvbnMgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9ucy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBOb3RlYm9va1J1bnRpbWVPcHRpb25zIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSU5vdGVib29rUnVudGltZU9wdGlvbnMsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgTm90ZWJvb2tSdW50aW1lT3B0aW9ucyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgTm90ZWJvb2tSdW50aW1lT3B0aW9ucwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9uczsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIE5vdGVib29rUnVudGltZU9wdGlvbnMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBOb3RlYm9va1J1bnRpbWVPcHRpb25zCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9uczsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBOb3RlYm9va1J1bnRpbWVPcHRpb25zIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIE5vdGVib29rUnVudGltZU9wdGlvbnMgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgTm90ZWJvb2tSdW50aW1lT3B0aW9ucwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uTm90ZWJvb2tSdW50aW1lT3B0aW9uczsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgTm90ZWJvb2tSdW50aW1lT3B0aW9ucyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTm90ZWJvb2tSdW50aW1lT3B0aW9ucwogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Ob3RlYm9va1J1bnRpbWVPcHRpb25zLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIE5vdGVib29rUnVudGltZU9wdGlvbnMgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIE5vdGVib29rUnVudGltZU9wdGlvbnMKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIERhdGFQcmVwYXJhdGlvbi4gKi8KICAgIGludGVyZmFjZSBJRGF0YVByZXBhcmF0aW9uIHsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiB0YXJnZXQgKi8KICAgICAgICB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBjYW5vbmljYWxUYXJnZXQgKi8KICAgICAgICBjYW5vbmljYWxUYXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiB0YXJnZXRzICovCiAgICAgICAgdGFyZ2V0cz86IChkYXRhZm9ybS5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gY2Fub25pY2FsVGFyZ2V0cyAqLwogICAgICAgIGNhbm9uaWNhbFRhcmdldHM/OiAoZGF0YWZvcm0uSVRhcmdldFtdfG51bGwpOwoKICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uIHRhZ3MgKi8KICAgICAgICB0YWdzPzogKHN0cmluZ1tdfG51bGwpOwoKICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uIGRlcGVuZGVuY3lUYXJnZXRzICovCiAgICAgICAgZGVwZW5kZW5jeVRhcmdldHM/OiAoZGF0YWZvcm0uSVRhcmdldFtdfG51bGwpOwoKICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uIGZpbGVOYW1lICovCiAgICAgICAgZmlsZU5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uIGRpc2FibGVkICovCiAgICAgICAgZGlzYWJsZWQ/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBkYXRhUHJlcGFyYXRpb25ZYW1sICovCiAgICAgICAgZGF0YVByZXBhcmF0aW9uWWFtbD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gcXVlcnkgKi8KICAgICAgICBxdWVyeT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gZXJyb3JUYWJsZSAqLwogICAgICAgIGVycm9yVGFibGU/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBlcnJvclRhYmxlUmV0ZW50aW9uRGF5cyAqLwogICAgICAgIGVycm9yVGFibGVSZXRlbnRpb25EYXlzPzogKG51bWJlcnxudWxsKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBsb2FkICovCiAgICAgICAgbG9hZD86IChkYXRhZm9ybS5JTG9hZENvbmZpZ3VyYXRpb258bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBEYXRhUHJlcGFyYXRpb24uICovCiAgICBjbGFzcyBEYXRhUHJlcGFyYXRpb24gaW1wbGVtZW50cyBJRGF0YVByZXBhcmF0aW9uIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBEYXRhUHJlcGFyYXRpb24uCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JRGF0YVByZXBhcmF0aW9uKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiB0YXJnZXQuICovCiAgICAgICAgcHVibGljIHRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uIGNhbm9uaWNhbFRhcmdldC4gKi8KICAgICAgICBwdWJsaWMgY2Fub25pY2FsVGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gdGFyZ2V0cy4gKi8KICAgICAgICBwdWJsaWMgdGFyZ2V0czogZGF0YWZvcm0uSVRhcmdldFtdOwoKICAgICAgICAvKiogRGF0YVByZXBhcmF0aW9uIGNhbm9uaWNhbFRhcmdldHMuICovCiAgICAgICAgcHVibGljIGNhbm9uaWNhbFRhcmdldHM6IGRhdGFmb3JtLklUYXJnZXRbXTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiB0YWdzLiAqLwogICAgICAgIHB1YmxpYyB0YWdzOiBzdHJpbmdbXTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBkZXBlbmRlbmN5VGFyZ2V0cy4gKi8KICAgICAgICBwdWJsaWMgZGVwZW5kZW5jeVRhcmdldHM6IGRhdGFmb3JtLklUYXJnZXRbXTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBmaWxlTmFtZS4gKi8KICAgICAgICBwdWJsaWMgZmlsZU5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBkaXNhYmxlZC4gKi8KICAgICAgICBwdWJsaWMgZGlzYWJsZWQ6IGJvb2xlYW47CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gZGF0YVByZXBhcmF0aW9uWWFtbC4gKi8KICAgICAgICBwdWJsaWMgZGF0YVByZXBhcmF0aW9uWWFtbD86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gcXVlcnkuICovCiAgICAgICAgcHVibGljIHF1ZXJ5PzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIERhdGFQcmVwYXJhdGlvbiBlcnJvclRhYmxlLiAqLwogICAgICAgIHB1YmxpYyBlcnJvclRhYmxlPzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gZXJyb3JUYWJsZVJldGVudGlvbkRheXMuICovCiAgICAgICAgcHVibGljIGVycm9yVGFibGVSZXRlbnRpb25EYXlzOiBudW1iZXI7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gbG9hZC4gKi8KICAgICAgICBwdWJsaWMgbG9hZD86IChkYXRhZm9ybS5JTG9hZENvbmZpZ3VyYXRpb258bnVsbCk7CgogICAgICAgIC8qKiBEYXRhUHJlcGFyYXRpb24gZGVmaW5pdGlvbi4gKi8KICAgICAgICBwdWJsaWMgZGVmaW5pdGlvbj86ICgiZGF0YVByZXBhcmF0aW9uWWFtbCJ8InF1ZXJ5Iik7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRGF0YVByZXBhcmF0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgRGF0YVByZXBhcmF0aW9uIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklEYXRhUHJlcGFyYXRpb24pOiBkYXRhZm9ybS5EYXRhUHJlcGFyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBEYXRhUHJlcGFyYXRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIERhdGFQcmVwYXJhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklEYXRhUHJlcGFyYXRpb24sIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRGF0YVByZXBhcmF0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBEYXRhUHJlcGFyYXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JRGF0YVByZXBhcmF0aW9uLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIERhdGFQcmVwYXJhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgRGF0YVByZXBhcmF0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5EYXRhUHJlcGFyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBEYXRhUHJlcGFyYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBEYXRhUHJlcGFyYXRpb24KICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5EYXRhUHJlcGFyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgRGF0YVByZXBhcmF0aW9uIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIERhdGFQcmVwYXJhdGlvbiBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBEYXRhUHJlcGFyYXRpb24KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRGF0YVByZXBhcmF0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBEYXRhUHJlcGFyYXRpb24KICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIERhdGFQcmVwYXJhdGlvbiB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgRGF0YVByZXBhcmF0aW9uCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBMb2FkQ29uZmlndXJhdGlvbi4gKi8KICAgIGludGVyZmFjZSBJTG9hZENvbmZpZ3VyYXRpb24gewoKICAgICAgICAvKiogTG9hZENvbmZpZ3VyYXRpb24gcmVwbGFjZSAqLwogICAgICAgIHJlcGxhY2U/OiAoZGF0YWZvcm0uSVNpbXBsZUxvYWRNb2RlfG51bGwpOwoKICAgICAgICAvKiogTG9hZENvbmZpZ3VyYXRpb24gYXBwZW5kICovCiAgICAgICAgYXBwZW5kPzogKGRhdGFmb3JtLklTaW1wbGVMb2FkTW9kZXxudWxsKTsKCiAgICAgICAgLyoqIExvYWRDb25maWd1cmF0aW9uIG1heGltdW0gKi8KICAgICAgICBtYXhpbXVtPzogKGRhdGFmb3JtLklJbmNyZW1lbnRhbExvYWRNb2RlfG51bGwpOwoKICAgICAgICAvKiogTG9hZENvbmZpZ3VyYXRpb24gdW5pcXVlICovCiAgICAgICAgdW5pcXVlPzogKGRhdGFmb3JtLklJbmNyZW1lbnRhbExvYWRNb2RlfG51bGwpOwoKICAgICAgICAvKiogTG9hZENvbmZpZ3VyYXRpb24gYXV0b21hdGljICovCiAgICAgICAgYXV0b21hdGljPzogKGRhdGFmb3JtLklJbmNyZW1lbnRhbExvYWRNb2RlfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgTG9hZENvbmZpZ3VyYXRpb24uICovCiAgICBjbGFzcyBMb2FkQ29uZmlndXJhdGlvbiBpbXBsZW1lbnRzIElMb2FkQ29uZmlndXJhdGlvbiB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTG9hZENvbmZpZ3VyYXRpb24uCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JTG9hZENvbmZpZ3VyYXRpb24pOwoKICAgICAgICAvKiogTG9hZENvbmZpZ3VyYXRpb24gcmVwbGFjZS4gKi8KICAgICAgICBwdWJsaWMgcmVwbGFjZT86IChkYXRhZm9ybS5JU2ltcGxlTG9hZE1vZGV8bnVsbCk7CgogICAgICAgIC8qKiBMb2FkQ29uZmlndXJhdGlvbiBhcHBlbmQuICovCiAgICAgICAgcHVibGljIGFwcGVuZD86IChkYXRhZm9ybS5JU2ltcGxlTG9hZE1vZGV8bnVsbCk7CgogICAgICAgIC8qKiBMb2FkQ29uZmlndXJhdGlvbiBtYXhpbXVtLiAqLwogICAgICAgIHB1YmxpYyBtYXhpbXVtPzogKGRhdGFmb3JtLklJbmNyZW1lbnRhbExvYWRNb2RlfG51bGwpOwoKICAgICAgICAvKiogTG9hZENvbmZpZ3VyYXRpb24gdW5pcXVlLiAqLwogICAgICAgIHB1YmxpYyB1bmlxdWU/OiAoZGF0YWZvcm0uSUluY3JlbWVudGFsTG9hZE1vZGV8bnVsbCk7CgogICAgICAgIC8qKiBMb2FkQ29uZmlndXJhdGlvbiBhdXRvbWF0aWMuICovCiAgICAgICAgcHVibGljIGF1dG9tYXRpYz86IChkYXRhZm9ybS5JSW5jcmVtZW50YWxMb2FkTW9kZXxudWxsKTsKCiAgICAgICAgLyoqIExvYWRDb25maWd1cmF0aW9uIG1vZGUuICovCiAgICAgICAgcHVibGljIG1vZGU/OiAoInJlcGxhY2UifCJhcHBlbmQifCJtYXhpbXVtInwidW5pcXVlInwiYXV0b21hdGljIik7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgTG9hZENvbmZpZ3VyYXRpb24gaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBMb2FkQ29uZmlndXJhdGlvbiBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JTG9hZENvbmZpZ3VyYXRpb24pOiBkYXRhZm9ybS5Mb2FkQ29uZmlndXJhdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIExvYWRDb25maWd1cmF0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIExvYWRDb25maWd1cmF0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUxvYWRDb25maWd1cmF0aW9uLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIExvYWRDb25maWd1cmF0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIExvYWRDb25maWd1cmF0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSUxvYWRDb25maWd1cmF0aW9uLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIExvYWRDb25maWd1cmF0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBMb2FkQ29uZmlndXJhdGlvbgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uTG9hZENvbmZpZ3VyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBMb2FkQ29uZmlndXJhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIExvYWRDb25maWd1cmF0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uTG9hZENvbmZpZ3VyYXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgTG9hZENvbmZpZ3VyYXRpb24gbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgTG9hZENvbmZpZ3VyYXRpb24gbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgTG9hZENvbmZpZ3VyYXRpb24KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkxvYWRDb25maWd1cmF0aW9uOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBMb2FkQ29uZmlndXJhdGlvbiBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgTG9hZENvbmZpZ3VyYXRpb24KICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uTG9hZENvbmZpZ3VyYXRpb24sIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgTG9hZENvbmZpZ3VyYXRpb24gdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIExvYWRDb25maWd1cmF0aW9uCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBTaW1wbGVMb2FkTW9kZS4gKi8KICAgIGludGVyZmFjZSBJU2ltcGxlTG9hZE1vZGUgewogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgU2ltcGxlTG9hZE1vZGUuICovCiAgICBjbGFzcyBTaW1wbGVMb2FkTW9kZSBpbXBsZW1lbnRzIElTaW1wbGVMb2FkTW9kZSB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU2ltcGxlTG9hZE1vZGUuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JU2ltcGxlTG9hZE1vZGUpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbXBsZUxvYWRNb2RlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgU2ltcGxlTG9hZE1vZGUgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSVNpbXBsZUxvYWRNb2RlKTogZGF0YWZvcm0uU2ltcGxlTG9hZE1vZGU7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTaW1wbGVMb2FkTW9kZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5TaW1wbGVMb2FkTW9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBTaW1wbGVMb2FkTW9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklTaW1wbGVMb2FkTW9kZSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTaW1wbGVMb2FkTW9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5TaW1wbGVMb2FkTW9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBTaW1wbGVMb2FkTW9kZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklTaW1wbGVMb2FkTW9kZSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBTaW1wbGVMb2FkTW9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgU2ltcGxlTG9hZE1vZGUKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLlNpbXBsZUxvYWRNb2RlOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgU2ltcGxlTG9hZE1vZGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBTaW1wbGVMb2FkTW9kZQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLlNpbXBsZUxvYWRNb2RlOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIFNpbXBsZUxvYWRNb2RlIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFNpbXBsZUxvYWRNb2RlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIFNpbXBsZUxvYWRNb2RlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5TaW1wbGVMb2FkTW9kZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU2ltcGxlTG9hZE1vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFNpbXBsZUxvYWRNb2RlCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLlNpbXBsZUxvYWRNb2RlLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFNpbXBsZUxvYWRNb2RlIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBTaW1wbGVMb2FkTW9kZQogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEluY3JlbWVudGFsTG9hZE1vZGUuICovCiAgICBpbnRlcmZhY2UgSUluY3JlbWVudGFsTG9hZE1vZGUgewoKICAgICAgICAvKiogSW5jcmVtZW50YWxMb2FkTW9kZSBjb2x1bW5OYW1lICovCiAgICAgICAgY29sdW1uTmFtZT86IChzdHJpbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gSW5jcmVtZW50YWxMb2FkTW9kZS4gKi8KICAgIGNsYXNzIEluY3JlbWVudGFsTG9hZE1vZGUgaW1wbGVtZW50cyBJSW5jcmVtZW50YWxMb2FkTW9kZSB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgSW5jcmVtZW50YWxMb2FkTW9kZS4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklJbmNyZW1lbnRhbExvYWRNb2RlKTsKCiAgICAgICAgLyoqIEluY3JlbWVudGFsTG9hZE1vZGUgY29sdW1uTmFtZS4gKi8KICAgICAgICBwdWJsaWMgY29sdW1uTmFtZTogc3RyaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEluY3JlbWVudGFsTG9hZE1vZGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBJbmNyZW1lbnRhbExvYWRNb2RlIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklJbmNyZW1lbnRhbExvYWRNb2RlKTogZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEluY3JlbWVudGFsTG9hZE1vZGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBJbmNyZW1lbnRhbExvYWRNb2RlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUluY3JlbWVudGFsTG9hZE1vZGUsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgSW5jcmVtZW50YWxMb2FkTW9kZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5JbmNyZW1lbnRhbExvYWRNb2RlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEluY3JlbWVudGFsTG9hZE1vZGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JSW5jcmVtZW50YWxMb2FkTW9kZSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gSW5jcmVtZW50YWxMb2FkTW9kZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgSW5jcmVtZW50YWxMb2FkTW9kZQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhbiBJbmNyZW1lbnRhbExvYWRNb2RlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgSW5jcmVtZW50YWxMb2FkTW9kZQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkluY3JlbWVudGFsTG9hZE1vZGU7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGFuIEluY3JlbWVudGFsTG9hZE1vZGUgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuIEluY3JlbWVudGFsTG9hZE1vZGUgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgSW5jcmVtZW50YWxMb2FkTW9kZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEluY3JlbWVudGFsTG9hZE1vZGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEluY3JlbWVudGFsTG9hZE1vZGUKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uSW5jcmVtZW50YWxMb2FkTW9kZSwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBJbmNyZW1lbnRhbExvYWRNb2RlIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBJbmNyZW1lbnRhbExvYWRNb2RlCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBDb21waWxlZEdyYXBoLiAqLwogICAgaW50ZXJmYWNlIElDb21waWxlZEdyYXBoIHsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggcHJvamVjdENvbmZpZyAqLwogICAgICAgIHByb2plY3RDb25maWc/OiAoZGF0YWZvcm0uSVByb2plY3RDb25maWd8bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIHRhYmxlcyAqLwogICAgICAgIHRhYmxlcz86IChkYXRhZm9ybS5JVGFibGVbXXxudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggb3BlcmF0aW9ucyAqLwogICAgICAgIG9wZXJhdGlvbnM/OiAoZGF0YWZvcm0uSU9wZXJhdGlvbltdfG51bGwpOwoKICAgICAgICAvKiogQ29tcGlsZWRHcmFwaCBhc3NlcnRpb25zICovCiAgICAgICAgYXNzZXJ0aW9ucz86IChkYXRhZm9ybS5JQXNzZXJ0aW9uW118bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIGRlY2xhcmF0aW9ucyAqLwogICAgICAgIGRlY2xhcmF0aW9ucz86IChkYXRhZm9ybS5JRGVjbGFyYXRpb25bXXxudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggdGVzdHMgKi8KICAgICAgICB0ZXN0cz86IChkYXRhZm9ybS5JVGVzdFtdfG51bGwpOwoKICAgICAgICAvKiogQ29tcGlsZWRHcmFwaCBub3RlYm9va3MgKi8KICAgICAgICBub3RlYm9va3M/OiAoZGF0YWZvcm0uSU5vdGVib29rW118bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIGRhdGFQcmVwYXJhdGlvbnMgKi8KICAgICAgICBkYXRhUHJlcGFyYXRpb25zPzogKGRhdGFmb3JtLklEYXRhUHJlcGFyYXRpb25bXXxudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggZ3JhcGhFcnJvcnMgKi8KICAgICAgICBncmFwaEVycm9ycz86IChkYXRhZm9ybS5JR3JhcGhFcnJvcnN8bnVsbCk7CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIGRhdGFmb3JtQ29yZVZlcnNpb24gKi8KICAgICAgICBkYXRhZm9ybUNvcmVWZXJzaW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggdGFyZ2V0cyAqLwogICAgICAgIHRhcmdldHM/OiAoZGF0YWZvcm0uSVRhcmdldFtdfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgQ29tcGlsZWRHcmFwaC4gKi8KICAgIGNsYXNzIENvbXBpbGVkR3JhcGggaW1wbGVtZW50cyBJQ29tcGlsZWRHcmFwaCB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29tcGlsZWRHcmFwaC4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklDb21waWxlZEdyYXBoKTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggcHJvamVjdENvbmZpZy4gKi8KICAgICAgICBwdWJsaWMgcHJvamVjdENvbmZpZz86IChkYXRhZm9ybS5JUHJvamVjdENvbmZpZ3xudWxsKTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggdGFibGVzLiAqLwogICAgICAgIHB1YmxpYyB0YWJsZXM6IGRhdGFmb3JtLklUYWJsZVtdOwoKICAgICAgICAvKiogQ29tcGlsZWRHcmFwaCBvcGVyYXRpb25zLiAqLwogICAgICAgIHB1YmxpYyBvcGVyYXRpb25zOiBkYXRhZm9ybS5JT3BlcmF0aW9uW107CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIGFzc2VydGlvbnMuICovCiAgICAgICAgcHVibGljIGFzc2VydGlvbnM6IGRhdGFmb3JtLklBc3NlcnRpb25bXTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggZGVjbGFyYXRpb25zLiAqLwogICAgICAgIHB1YmxpYyBkZWNsYXJhdGlvbnM6IGRhdGFmb3JtLklEZWNsYXJhdGlvbltdOwoKICAgICAgICAvKiogQ29tcGlsZWRHcmFwaCB0ZXN0cy4gKi8KICAgICAgICBwdWJsaWMgdGVzdHM6IGRhdGFmb3JtLklUZXN0W107CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIG5vdGVib29rcy4gKi8KICAgICAgICBwdWJsaWMgbm90ZWJvb2tzOiBkYXRhZm9ybS5JTm90ZWJvb2tbXTsKCiAgICAgICAgLyoqIENvbXBpbGVkR3JhcGggZGF0YVByZXBhcmF0aW9ucy4gKi8KICAgICAgICBwdWJsaWMgZGF0YVByZXBhcmF0aW9uczogZGF0YWZvcm0uSURhdGFQcmVwYXJhdGlvbltdOwoKICAgICAgICAvKiogQ29tcGlsZWRHcmFwaCBncmFwaEVycm9ycy4gKi8KICAgICAgICBwdWJsaWMgZ3JhcGhFcnJvcnM/OiAoZGF0YWZvcm0uSUdyYXBoRXJyb3JzfG51bGwpOwoKICAgICAgICAvKiogQ29tcGlsZWRHcmFwaCBkYXRhZm9ybUNvcmVWZXJzaW9uLiAqLwogICAgICAgIHB1YmxpYyBkYXRhZm9ybUNvcmVWZXJzaW9uOiBzdHJpbmc7CgogICAgICAgIC8qKiBDb21waWxlZEdyYXBoIHRhcmdldHMuICovCiAgICAgICAgcHVibGljIHRhcmdldHM6IGRhdGFmb3JtLklUYXJnZXRbXTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBDb21waWxlZEdyYXBoIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZWRHcmFwaCBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JQ29tcGlsZWRHcmFwaCk6IGRhdGFmb3JtLkNvbXBpbGVkR3JhcGg7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb21waWxlZEdyYXBoIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvbXBpbGVkR3JhcGgudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsZWRHcmFwaCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklDb21waWxlZEdyYXBoLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbXBpbGVkR3JhcGggbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQ29tcGlsZWRHcmFwaC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb21waWxlZEdyYXBoIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSUNvbXBpbGVkR3JhcGgsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQ29tcGlsZWRHcmFwaCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZWRHcmFwaAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQ29tcGlsZWRHcmFwaDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvbXBpbGVkR3JhcGggbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBDb21waWxlZEdyYXBoCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQ29tcGlsZWRHcmFwaDsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBDb21waWxlZEdyYXBoIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIENvbXBpbGVkR3JhcGggbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZWRHcmFwaAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQ29tcGlsZWRHcmFwaDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29tcGlsZWRHcmFwaCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsZWRHcmFwaAogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Db21waWxlZEdyYXBoLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENvbXBpbGVkR3JhcGggdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIENvbXBpbGVkR3JhcGgKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIENvcmVFeGVjdXRpb25SZXF1ZXN0LiAqLwogICAgaW50ZXJmYWNlIElDb3JlRXhlY3V0aW9uUmVxdWVzdCB7CgogICAgICAgIC8qKiBDb3JlRXhlY3V0aW9uUmVxdWVzdCBjb21waWxlICovCiAgICAgICAgY29tcGlsZT86IChkYXRhZm9ybS5JQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3R8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBDb3JlRXhlY3V0aW9uUmVxdWVzdC4gKi8KICAgIGNsYXNzIENvcmVFeGVjdXRpb25SZXF1ZXN0IGltcGxlbWVudHMgSUNvcmVFeGVjdXRpb25SZXF1ZXN0IHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDb3JlRXhlY3V0aW9uUmVxdWVzdC4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklDb3JlRXhlY3V0aW9uUmVxdWVzdCk7CgogICAgICAgIC8qKiBDb3JlRXhlY3V0aW9uUmVxdWVzdCBjb21waWxlLiAqLwogICAgICAgIHB1YmxpYyBjb21waWxlPzogKGRhdGFmb3JtLklDb21waWxlRXhlY3V0aW9uUmVxdWVzdHxudWxsKTsKCiAgICAgICAgLyoqIENvcmVFeGVjdXRpb25SZXF1ZXN0IHJlcXVlc3QuICovCiAgICAgICAgcHVibGljIHJlcXVlc3Q/OiAiY29tcGlsZSI7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQ29yZUV4ZWN1dGlvblJlcXVlc3QgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBDb3JlRXhlY3V0aW9uUmVxdWVzdCBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JQ29yZUV4ZWN1dGlvblJlcXVlc3QpOiBkYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVxdWVzdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvcmVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvcmVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUNvcmVFeGVjdXRpb25SZXF1ZXN0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvcmVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXF1ZXN0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvcmVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSUNvcmVFeGVjdXRpb25SZXF1ZXN0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvcmVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBDb3JlRXhlY3V0aW9uUmVxdWVzdAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlcXVlc3Q7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBDb3JlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIENvcmVFeGVjdXRpb25SZXF1ZXN0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlcXVlc3Q7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgQ29yZUV4ZWN1dGlvblJlcXVlc3QgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgQ29yZUV4ZWN1dGlvblJlcXVlc3QgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgQ29yZUV4ZWN1dGlvblJlcXVlc3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXF1ZXN0OwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb3JlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29yZUV4ZWN1dGlvblJlcXVlc3QKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlcXVlc3QsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgQ29yZUV4ZWN1dGlvblJlcXVlc3QgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIENvcmVFeGVjdXRpb25SZXF1ZXN0CiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBDb3JlRXhlY3V0aW9uUmVzcG9uc2UuICovCiAgICBpbnRlcmZhY2UgSUNvcmVFeGVjdXRpb25SZXNwb25zZSB7CgogICAgICAgIC8qKiBDb3JlRXhlY3V0aW9uUmVzcG9uc2UgY29tcGlsZSAqLwogICAgICAgIGNvbXBpbGU/OiAoZGF0YWZvcm0uSUNvbXBpbGVFeGVjdXRpb25SZXNwb25zZXxudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIENvcmVFeGVjdXRpb25SZXNwb25zZS4gKi8KICAgIGNsYXNzIENvcmVFeGVjdXRpb25SZXNwb25zZSBpbXBsZW1lbnRzIElDb3JlRXhlY3V0aW9uUmVzcG9uc2UgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvcmVFeGVjdXRpb25SZXNwb25zZS4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklDb3JlRXhlY3V0aW9uUmVzcG9uc2UpOwoKICAgICAgICAvKiogQ29yZUV4ZWN1dGlvblJlc3BvbnNlIGNvbXBpbGUuICovCiAgICAgICAgcHVibGljIGNvbXBpbGU/OiAoZGF0YWZvcm0uSUNvbXBpbGVFeGVjdXRpb25SZXNwb25zZXxudWxsKTsKCiAgICAgICAgLyoqIENvcmVFeGVjdXRpb25SZXNwb25zZSByZXNwb25zZS4gKi8KICAgICAgICBwdWJsaWMgcmVzcG9uc2U/OiAiY29tcGlsZSI7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQ29yZUV4ZWN1dGlvblJlc3BvbnNlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQ29yZUV4ZWN1dGlvblJlc3BvbnNlIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklDb3JlRXhlY3V0aW9uUmVzcG9uc2UpOiBkYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVzcG9uc2U7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb3JlRXhlY3V0aW9uUmVzcG9uc2UgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlc3BvbnNlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvcmVFeGVjdXRpb25SZXNwb25zZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklDb3JlRXhlY3V0aW9uUmVzcG9uc2UsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ29yZUV4ZWN1dGlvblJlc3BvbnNlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXNwb25zZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb3JlRXhlY3V0aW9uUmVzcG9uc2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JQ29yZUV4ZWN1dGlvblJlc3BvbnNlLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvcmVFeGVjdXRpb25SZXNwb25zZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQ29yZUV4ZWN1dGlvblJlc3BvbnNlCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVzcG9uc2U7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBDb3JlRXhlY3V0aW9uUmVzcG9uc2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBDb3JlRXhlY3V0aW9uUmVzcG9uc2UKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5Db3JlRXhlY3V0aW9uUmVzcG9uc2U7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgQ29yZUV4ZWN1dGlvblJlc3BvbnNlIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIENvcmVFeGVjdXRpb25SZXNwb25zZSBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBDb3JlRXhlY3V0aW9uUmVzcG9uc2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkNvcmVFeGVjdXRpb25SZXNwb25zZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29yZUV4ZWN1dGlvblJlc3BvbnNlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb3JlRXhlY3V0aW9uUmVzcG9uc2UKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uQ29yZUV4ZWN1dGlvblJlc3BvbnNlLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENvcmVFeGVjdXRpb25SZXNwb25zZSB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgQ29yZUV4ZWN1dGlvblJlc3BvbnNlCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBDb21waWxlRXhlY3V0aW9uUmVxdWVzdC4gKi8KICAgIGludGVyZmFjZSBJQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QgewoKICAgICAgICAvKiogQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QgY29tcGlsZUNvbmZpZyAqLwogICAgICAgIGNvbXBpbGVDb25maWc/OiAoZGF0YWZvcm0uSUNvbXBpbGVDb25maWd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBDb21waWxlRXhlY3V0aW9uUmVxdWVzdC4gKi8KICAgIGNsYXNzIENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0IGltcGxlbWVudHMgSUNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0IHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBDb21waWxlRXhlY3V0aW9uUmVxdWVzdC4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklDb21waWxlRXhlY3V0aW9uUmVxdWVzdCk7CgogICAgICAgIC8qKiBDb21waWxlRXhlY3V0aW9uUmVxdWVzdCBjb21waWxlQ29uZmlnLiAqLwogICAgICAgIHB1YmxpYyBjb21waWxlQ29uZmlnPzogKGRhdGFmb3JtLklDb21waWxlQ29uZmlnfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0KTogZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3Q7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb21waWxlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb21waWxlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklDb21waWxlRXhlY3V0aW9uUmVxdWVzdCwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb21waWxlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBDb21waWxlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklDb21waWxlRXhlY3V0aW9uUmVxdWVzdCwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBDb21waWxlRXhlY3V0aW9uUmVxdWVzdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0OwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBDb21waWxlRXhlY3V0aW9uUmVxdWVzdAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0OwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVxdWVzdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQ29tcGlsZUV4ZWN1dGlvblJlcXVlc3QgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0CiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXF1ZXN0LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIENvbXBpbGVFeGVjdXRpb25SZXF1ZXN0IHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBDb21waWxlRXhlY3V0aW9uUmVxdWVzdAogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlLiAqLwogICAgaW50ZXJmYWNlIElDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgewoKICAgICAgICAvKiogQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlIGNvbXBpbGVkR3JhcGggKi8KICAgICAgICBjb21waWxlZEdyYXBoPzogKGRhdGFmb3JtLklDb21waWxlZEdyYXBofG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlLiAqLwogICAgY2xhc3MgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlIGltcGxlbWVudHMgSUNvbXBpbGVFeGVjdXRpb25SZXNwb25zZSB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUNvbXBpbGVFeGVjdXRpb25SZXNwb25zZSk7CgogICAgICAgIC8qKiBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgY29tcGlsZWRHcmFwaC4gKi8KICAgICAgICBwdWJsaWMgY29tcGlsZWRHcmFwaD86IChkYXRhZm9ybS5JQ29tcGlsZWRHcmFwaHxudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUNvbXBpbGVFeGVjdXRpb25SZXNwb25zZSk6IGRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIENvbXBpbGVFeGVjdXRpb25SZXNwb25zZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVzcG9uc2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUNvbXBpbGVFeGVjdXRpb25SZXNwb25zZSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvbXBpbGVFeGVjdXRpb25SZXNwb25zZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIENvbXBpbGVFeGVjdXRpb25SZXNwb25zZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIENvbXBpbGVFeGVjdXRpb25SZXNwb25zZQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkNvbXBpbGVFeGVjdXRpb25SZXNwb25zZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIENvbXBpbGVFeGVjdXRpb25SZXNwb25zZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIENvbXBpbGVFeGVjdXRpb25SZXNwb25zZQogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5Db21waWxlRXhlY3V0aW9uUmVzcG9uc2UsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgQ29tcGlsZUV4ZWN1dGlvblJlc3BvbnNlIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBDb21waWxlRXhlY3V0aW9uUmVzcG9uc2UKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogU3VwcG9ydGVkRmVhdHVyZXMgZW51bS4gKi8KICAgIGVudW0gU3VwcG9ydGVkRmVhdHVyZXMgewogICAgICAgIFVOS05PV05fRkVBVFVSRSA9IDAsCiAgICAgICAgQVJSQVlfQlVGRkVSX0lQQyA9IDEKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIFF1ZXJ5RXZhbHVhdGlvbkVycm9yLiAqLwogICAgaW50ZXJmYWNlIElRdWVyeUV2YWx1YXRpb25FcnJvciB7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb25FcnJvciBtZXNzYWdlICovCiAgICAgICAgbWVzc2FnZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb25FcnJvciBlcnJvckxvY2F0aW9uICovCiAgICAgICAgZXJyb3JMb2NhdGlvbj86IChkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5JRXJyb3JMb2NhdGlvbnxudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFF1ZXJ5RXZhbHVhdGlvbkVycm9yLiAqLwogICAgY2xhc3MgUXVlcnlFdmFsdWF0aW9uRXJyb3IgaW1wbGVtZW50cyBJUXVlcnlFdmFsdWF0aW9uRXJyb3IgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFF1ZXJ5RXZhbHVhdGlvbkVycm9yLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSVF1ZXJ5RXZhbHVhdGlvbkVycm9yKTsKCiAgICAgICAgLyoqIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIG1lc3NhZ2UuICovCiAgICAgICAgcHVibGljIG1lc3NhZ2U6IHN0cmluZzsKCiAgICAgICAgLyoqIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIGVycm9yTG9jYXRpb24uICovCiAgICAgICAgcHVibGljIGVycm9yTG9jYXRpb24/OiAoZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuSUVycm9yTG9jYXRpb258bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUXVlcnlFdmFsdWF0aW9uRXJyb3IgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBRdWVyeUV2YWx1YXRpb25FcnJvciBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JUXVlcnlFdmFsdWF0aW9uRXJyb3IpOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSVF1ZXJ5RXZhbHVhdGlvbkVycm9yLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVF1ZXJ5RXZhbHVhdGlvbkVycm9yLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBRdWVyeUV2YWx1YXRpb25FcnJvcgogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3I7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBRdWVyeUV2YWx1YXRpb25FcnJvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIFF1ZXJ5RXZhbHVhdGlvbkVycm9yCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3I7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgUXVlcnlFdmFsdWF0aW9uRXJyb3IgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgUXVlcnlFdmFsdWF0aW9uRXJyb3IgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgUXVlcnlFdmFsdWF0aW9uRXJyb3IKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBRdWVyeUV2YWx1YXRpb25FcnJvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUXVlcnlFdmFsdWF0aW9uRXJyb3IKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgUXVlcnlFdmFsdWF0aW9uRXJyb3IgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFF1ZXJ5RXZhbHVhdGlvbkVycm9yCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgbmFtZXNwYWNlIFF1ZXJ5RXZhbHVhdGlvbkVycm9yIHsKCiAgICAgICAgLyoqIFByb3BlcnRpZXMgb2YgYW4gRXJyb3JMb2NhdGlvbi4gKi8KICAgICAgICBpbnRlcmZhY2UgSUVycm9yTG9jYXRpb24gewoKICAgICAgICAgICAgLyoqIEVycm9yTG9jYXRpb24gbGluZSAqLwogICAgICAgICAgICBsaW5lPzogKG51bWJlcnxudWxsKTsKCiAgICAgICAgICAgIC8qKiBFcnJvckxvY2F0aW9uIGNvbHVtbiAqLwogICAgICAgICAgICBjb2x1bW4/OiAobnVtYmVyfG51bGwpOwogICAgICAgIH0KCiAgICAgICAgLyoqIFJlcHJlc2VudHMgYW4gRXJyb3JMb2NhdGlvbi4gKi8KICAgICAgICBjbGFzcyBFcnJvckxvY2F0aW9uIGltcGxlbWVudHMgSUVycm9yTG9jYXRpb24gewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRXJyb3JMb2NhdGlvbi4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLklFcnJvckxvY2F0aW9uKTsKCiAgICAgICAgICAgIC8qKiBFcnJvckxvY2F0aW9uIGxpbmUuICovCiAgICAgICAgICAgIHB1YmxpYyBsaW5lOiBudW1iZXI7CgogICAgICAgICAgICAvKiogRXJyb3JMb2NhdGlvbiBjb2x1bW4uICovCiAgICAgICAgICAgIHB1YmxpYyBjb2x1bW46IG51bWJlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEVycm9yTG9jYXRpb24gaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqIEByZXR1cm5zIEVycm9yTG9jYXRpb24gaW5zdGFuY2UKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5JRXJyb3JMb2NhdGlvbik6IGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbkVycm9yLkVycm9yTG9jYXRpb247CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEVycm9yTG9jYXRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXJyb3JMb2NhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5JRXJyb3JMb2NhdGlvbiwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEVycm9yTG9jYXRpb24gbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXJyb3JMb2NhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5JRXJyb3JMb2NhdGlvbiwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRGVjb2RlcyBhbiBFcnJvckxvY2F0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAgICAgKiBAcmV0dXJucyBFcnJvckxvY2F0aW9uCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGFuIEVycm9yTG9jYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIEVycm9yTG9jYXRpb24KICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBWZXJpZmllcyBhbiBFcnJvckxvY2F0aW9uIG1lc3NhZ2UuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhbiBFcnJvckxvY2F0aW9uIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgRXJyb3JMb2NhdGlvbgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb25FcnJvci5FcnJvckxvY2F0aW9uOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhbiBFcnJvckxvY2F0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXJyb3JMb2NhdGlvbgogICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uRXJyb3IuRXJyb3JMb2NhdGlvbiwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEVycm9yTG9jYXRpb24gdG8gSlNPTi4KICAgICAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgRXJyb3JMb2NhdGlvbgogICAgICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgICAgICB9CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBRdWVyeUV2YWx1YXRpb24uICovCiAgICBpbnRlcmZhY2UgSVF1ZXJ5RXZhbHVhdGlvbiB7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb24gc3RhdHVzICovCiAgICAgICAgc3RhdHVzPzogKGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbi5RdWVyeUV2YWx1YXRpb25TdGF0dXN8bnVsbCk7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb24gZXJyb3IgKi8KICAgICAgICBlcnJvcj86IChkYXRhZm9ybS5JUXVlcnlFdmFsdWF0aW9uRXJyb3J8bnVsbCk7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb24gaW5jcmVtZW50YWwgKi8KICAgICAgICBpbmNyZW1lbnRhbD86IChib29sZWFufG51bGwpOwoKICAgICAgICAvKiogUXVlcnlFdmFsdWF0aW9uIHF1ZXJ5ICovCiAgICAgICAgcXVlcnk/OiAoc3RyaW5nfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgUXVlcnlFdmFsdWF0aW9uLiAqLwogICAgY2xhc3MgUXVlcnlFdmFsdWF0aW9uIGltcGxlbWVudHMgSVF1ZXJ5RXZhbHVhdGlvbiB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgUXVlcnlFdmFsdWF0aW9uLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSVF1ZXJ5RXZhbHVhdGlvbik7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb24gc3RhdHVzLiAqLwogICAgICAgIHB1YmxpYyBzdGF0dXM6IGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbi5RdWVyeUV2YWx1YXRpb25TdGF0dXM7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb24gZXJyb3IuICovCiAgICAgICAgcHVibGljIGVycm9yPzogKGRhdGFmb3JtLklRdWVyeUV2YWx1YXRpb25FcnJvcnxudWxsKTsKCiAgICAgICAgLyoqIFF1ZXJ5RXZhbHVhdGlvbiBpbmNyZW1lbnRhbC4gKi8KICAgICAgICBwdWJsaWMgaW5jcmVtZW50YWw6IGJvb2xlYW47CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb24gcXVlcnkuICovCiAgICAgICAgcHVibGljIHF1ZXJ5OiBzdHJpbmc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUXVlcnlFdmFsdWF0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgUXVlcnlFdmFsdWF0aW9uIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklRdWVyeUV2YWx1YXRpb24pOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBRdWVyeUV2YWx1YXRpb24gbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFF1ZXJ5RXZhbHVhdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklRdWVyeUV2YWx1YXRpb24sIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUXVlcnlFdmFsdWF0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBRdWVyeUV2YWx1YXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JUXVlcnlFdmFsdWF0aW9uLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFF1ZXJ5RXZhbHVhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgUXVlcnlFdmFsdWF0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBRdWVyeUV2YWx1YXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBRdWVyeUV2YWx1YXRpb24KICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5RdWVyeUV2YWx1YXRpb247CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgUXVlcnlFdmFsdWF0aW9uIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFF1ZXJ5RXZhbHVhdGlvbiBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBRdWVyeUV2YWx1YXRpb24KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLlF1ZXJ5RXZhbHVhdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUXVlcnlFdmFsdWF0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBRdWVyeUV2YWx1YXRpb24KICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uUXVlcnlFdmFsdWF0aW9uLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFF1ZXJ5RXZhbHVhdGlvbiB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgUXVlcnlFdmFsdWF0aW9uCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgbmFtZXNwYWNlIFF1ZXJ5RXZhbHVhdGlvbiB7CgogICAgICAgIC8qKiBRdWVyeUV2YWx1YXRpb25TdGF0dXMgZW51bS4gKi8KICAgICAgICBlbnVtIFF1ZXJ5RXZhbHVhdGlvblN0YXR1cyB7CiAgICAgICAgICAgIFNVQ0NFU1MgPSAwLAogICAgICAgICAgICBGQUlMVVJFID0gMQogICAgICAgIH0KICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIFJ1bkNvbmZpZy4gKi8KICAgIGludGVyZmFjZSBJUnVuQ29uZmlnIHsKCiAgICAgICAgLyoqIFJ1bkNvbmZpZyBhY3Rpb25zICovCiAgICAgICAgYWN0aW9ucz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgLyoqIFJ1bkNvbmZpZyB0YWdzICovCiAgICAgICAgdGFncz86IChzdHJpbmdbXXxudWxsKTsKCiAgICAgICAgLyoqIFJ1bkNvbmZpZyBpbmNsdWRlRGVwZW5kZW5jaWVzICovCiAgICAgICAgaW5jbHVkZURlcGVuZGVuY2llcz86IChib29sZWFufG51bGwpOwoKICAgICAgICAvKiogUnVuQ29uZmlnIGluY2x1ZGVEZXBlbmRlbnRzICovCiAgICAgICAgaW5jbHVkZURlcGVuZGVudHM/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgLyoqIFJ1bkNvbmZpZyBmdWxsUmVmcmVzaCAqLwogICAgICAgIGZ1bGxSZWZyZXNoPzogKGJvb2xlYW58bnVsbCk7CgogICAgICAgIC8qKiBSdW5Db25maWcgdGltZW91dE1pbGxpcyAqLwogICAgICAgIHRpbWVvdXRNaWxsaXM/OiAobnVtYmVyfG51bGwpOwoKICAgICAgICAvKiogUnVuQ29uZmlnIGRpc2FibGVTZXRNZXRhZGF0YSAqLwogICAgICAgIGRpc2FibGVTZXRNZXRhZGF0YT86IChib29sZWFufG51bGwpOwoKICAgICAgICAvKiogUnVuQ29uZmlnIHVzZVJ1bkNhY2hlICovCiAgICAgICAgdXNlUnVuQ2FjaGU/OiAoYm9vbGVhbnxudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFJ1bkNvbmZpZy4gKi8KICAgIGNsYXNzIFJ1bkNvbmZpZyBpbXBsZW1lbnRzIElSdW5Db25maWcgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJ1bkNvbmZpZy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklSdW5Db25maWcpOwoKICAgICAgICAvKiogUnVuQ29uZmlnIGFjdGlvbnMuICovCiAgICAgICAgcHVibGljIGFjdGlvbnM6IHN0cmluZ1tdOwoKICAgICAgICAvKiogUnVuQ29uZmlnIHRhZ3MuICovCiAgICAgICAgcHVibGljIHRhZ3M6IHN0cmluZ1tdOwoKICAgICAgICAvKiogUnVuQ29uZmlnIGluY2x1ZGVEZXBlbmRlbmNpZXMuICovCiAgICAgICAgcHVibGljIGluY2x1ZGVEZXBlbmRlbmNpZXM6IGJvb2xlYW47CgogICAgICAgIC8qKiBSdW5Db25maWcgaW5jbHVkZURlcGVuZGVudHMuICovCiAgICAgICAgcHVibGljIGluY2x1ZGVEZXBlbmRlbnRzOiBib29sZWFuOwoKICAgICAgICAvKiogUnVuQ29uZmlnIGZ1bGxSZWZyZXNoLiAqLwogICAgICAgIHB1YmxpYyBmdWxsUmVmcmVzaDogYm9vbGVhbjsKCiAgICAgICAgLyoqIFJ1bkNvbmZpZyB0aW1lb3V0TWlsbGlzLiAqLwogICAgICAgIHB1YmxpYyB0aW1lb3V0TWlsbGlzOiBudW1iZXI7CgogICAgICAgIC8qKiBSdW5Db25maWcgZGlzYWJsZVNldE1ldGFkYXRhLiAqLwogICAgICAgIHB1YmxpYyBkaXNhYmxlU2V0TWV0YWRhdGE6IGJvb2xlYW47CgogICAgICAgIC8qKiBSdW5Db25maWcgdXNlUnVuQ2FjaGUuICovCiAgICAgICAgcHVibGljIHVzZVJ1bkNhY2hlOiBib29sZWFuOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJ1bkNvbmZpZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIFJ1bkNvbmZpZyBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JUnVuQ29uZmlnKTogZGF0YWZvcm0uUnVuQ29uZmlnOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUnVuQ29uZmlnIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlJ1bkNvbmZpZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBSdW5Db25maWcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JUnVuQ29uZmlnLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJ1bkNvbmZpZyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5SdW5Db25maWcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUnVuQ29uZmlnIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVJ1bkNvbmZpZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBSdW5Db25maWcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIFJ1bkNvbmZpZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uUnVuQ29uZmlnOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgUnVuQ29uZmlnIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgUnVuQ29uZmlnCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uUnVuQ29uZmlnOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIFJ1bkNvbmZpZyBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBSdW5Db25maWcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgUnVuQ29uZmlnCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5SdW5Db25maWc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFJ1bkNvbmZpZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUnVuQ29uZmlnCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLlJ1bkNvbmZpZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBSdW5Db25maWcgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFJ1bkNvbmZpZwogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEV4ZWN1dGlvblRhc2suICovCiAgICBpbnRlcmZhY2UgSUV4ZWN1dGlvblRhc2sgewoKICAgICAgICAvKiogRXhlY3V0aW9uVGFzayB0eXBlICovCiAgICAgICAgdHlwZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBFeGVjdXRpb25UYXNrIHN0YXRlbWVudCAqLwogICAgICAgIHN0YXRlbWVudD86IChzdHJpbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gRXhlY3V0aW9uVGFzay4gKi8KICAgIGNsYXNzIEV4ZWN1dGlvblRhc2sgaW1wbGVtZW50cyBJRXhlY3V0aW9uVGFzayB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRXhlY3V0aW9uVGFzay4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklFeGVjdXRpb25UYXNrKTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvblRhc2sgdHlwZS4gKi8KICAgICAgICBwdWJsaWMgdHlwZTogc3RyaW5nOwoKICAgICAgICAvKiogRXhlY3V0aW9uVGFzayBzdGF0ZW1lbnQuICovCiAgICAgICAgcHVibGljIHN0YXRlbWVudDogc3RyaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEV4ZWN1dGlvblRhc2sgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25UYXNrIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklFeGVjdXRpb25UYXNrKTogZGF0YWZvcm0uRXhlY3V0aW9uVGFzazsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEV4ZWN1dGlvblRhc2sgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRXhlY3V0aW9uVGFzay52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBFeGVjdXRpb25UYXNrIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUV4ZWN1dGlvblRhc2ssIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXhlY3V0aW9uVGFzayBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5FeGVjdXRpb25UYXNrLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEV4ZWN1dGlvblRhc2sgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JRXhlY3V0aW9uVGFzaywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gRXhlY3V0aW9uVGFzayBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uVGFzawogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uRXhlY3V0aW9uVGFzazsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhbiBFeGVjdXRpb25UYXNrIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uVGFzawogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkV4ZWN1dGlvblRhc2s7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGFuIEV4ZWN1dGlvblRhc2sgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuIEV4ZWN1dGlvblRhc2sgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uVGFzawogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uRXhlY3V0aW9uVGFzazsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEV4ZWN1dGlvblRhc2sgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEV4ZWN1dGlvblRhc2sKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uRXhlY3V0aW9uVGFzaywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBFeGVjdXRpb25UYXNrIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBFeGVjdXRpb25UYXNrCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYW4gRXhlY3V0aW9uQWN0aW9uLiAqLwogICAgaW50ZXJmYWNlIElFeGVjdXRpb25BY3Rpb24gewoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIHRhcmdldCAqLwogICAgICAgIHRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIGZpbGVOYW1lICovCiAgICAgICAgZmlsZU5hbWU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIHR5cGUgKi8KICAgICAgICB0eXBlPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbkFjdGlvbiB0YWJsZVR5cGUgKi8KICAgICAgICB0YWJsZVR5cGU/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIGRlcGVuZGVuY3lUYXJnZXRzICovCiAgICAgICAgZGVwZW5kZW5jeVRhcmdldHM/OiAoZGF0YWZvcm0uSVRhcmdldFtdfG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIGhlcm1ldGljaXR5ICovCiAgICAgICAgaGVybWV0aWNpdHk/OiAoZGF0YWZvcm0uQWN0aW9uSGVybWV0aWNpdHl8bnVsbCk7CgogICAgICAgIC8qKiBFeGVjdXRpb25BY3Rpb24gdGFza3MgKi8KICAgICAgICB0YXNrcz86IChkYXRhZm9ybS5JRXhlY3V0aW9uVGFza1tdfG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIGFjdGlvbkRlc2NyaXB0b3IgKi8KICAgICAgICBhY3Rpb25EZXNjcmlwdG9yPzogKGRhdGFmb3JtLklBY3Rpb25EZXNjcmlwdG9yfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGFuIEV4ZWN1dGlvbkFjdGlvbi4gKi8KICAgIGNsYXNzIEV4ZWN1dGlvbkFjdGlvbiBpbXBsZW1lbnRzIElFeGVjdXRpb25BY3Rpb24gewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEV4ZWN1dGlvbkFjdGlvbi4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklFeGVjdXRpb25BY3Rpb24pOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIHRhcmdldC4gKi8KICAgICAgICBwdWJsaWMgdGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBFeGVjdXRpb25BY3Rpb24gZmlsZU5hbWUuICovCiAgICAgICAgcHVibGljIGZpbGVOYW1lOiBzdHJpbmc7CgogICAgICAgIC8qKiBFeGVjdXRpb25BY3Rpb24gdHlwZS4gKi8KICAgICAgICBwdWJsaWMgdHlwZTogc3RyaW5nOwoKICAgICAgICAvKiogRXhlY3V0aW9uQWN0aW9uIHRhYmxlVHlwZS4gKi8KICAgICAgICBwdWJsaWMgdGFibGVUeXBlOiBzdHJpbmc7CgogICAgICAgIC8qKiBFeGVjdXRpb25BY3Rpb24gZGVwZW5kZW5jeVRhcmdldHMuICovCiAgICAgICAgcHVibGljIGRlcGVuZGVuY3lUYXJnZXRzOiBkYXRhZm9ybS5JVGFyZ2V0W107CgogICAgICAgIC8qKiBFeGVjdXRpb25BY3Rpb24gaGVybWV0aWNpdHkuICovCiAgICAgICAgcHVibGljIGhlcm1ldGljaXR5OiBkYXRhZm9ybS5BY3Rpb25IZXJtZXRpY2l0eTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbkFjdGlvbiB0YXNrcy4gKi8KICAgICAgICBwdWJsaWMgdGFza3M6IGRhdGFmb3JtLklFeGVjdXRpb25UYXNrW107CgogICAgICAgIC8qKiBFeGVjdXRpb25BY3Rpb24gYWN0aW9uRGVzY3JpcHRvci4gKi8KICAgICAgICBwdWJsaWMgYWN0aW9uRGVzY3JpcHRvcj86IChkYXRhZm9ybS5JQWN0aW9uRGVzY3JpcHRvcnxudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBFeGVjdXRpb25BY3Rpb24gaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25BY3Rpb24gaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUV4ZWN1dGlvbkFjdGlvbik6IGRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEV4ZWN1dGlvbkFjdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5FeGVjdXRpb25BY3Rpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXhlY3V0aW9uQWN0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUV4ZWN1dGlvbkFjdGlvbiwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBFeGVjdXRpb25BY3Rpb24gbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRXhlY3V0aW9uQWN0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEV4ZWN1dGlvbkFjdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklFeGVjdXRpb25BY3Rpb24sIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEV4ZWN1dGlvbkFjdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uQWN0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5FeGVjdXRpb25BY3Rpb247CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gRXhlY3V0aW9uQWN0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uQWN0aW9uCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uRXhlY3V0aW9uQWN0aW9uOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhbiBFeGVjdXRpb25BY3Rpb24gbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuIEV4ZWN1dGlvbkFjdGlvbiBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25BY3Rpb24KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEV4ZWN1dGlvbkFjdGlvbiBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXhlY3V0aW9uQWN0aW9uCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkV4ZWN1dGlvbkFjdGlvbiwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBFeGVjdXRpb25BY3Rpb24gdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIEV4ZWN1dGlvbkFjdGlvbgogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgV2FyZWhvdXNlU3RhdGUuICovCiAgICBpbnRlcmZhY2UgSVdhcmVob3VzZVN0YXRlIHsKCiAgICAgICAgLyoqIFdhcmVob3VzZVN0YXRlIHRhYmxlcyAqLwogICAgICAgIHRhYmxlcz86IChkYXRhZm9ybS5JVGFibGVNZXRhZGF0YVtdfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgV2FyZWhvdXNlU3RhdGUuICovCiAgICBjbGFzcyBXYXJlaG91c2VTdGF0ZSBpbXBsZW1lbnRzIElXYXJlaG91c2VTdGF0ZSB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgV2FyZWhvdXNlU3RhdGUuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JV2FyZWhvdXNlU3RhdGUpOwoKICAgICAgICAvKiogV2FyZWhvdXNlU3RhdGUgdGFibGVzLiAqLwogICAgICAgIHB1YmxpYyB0YWJsZXM6IGRhdGFmb3JtLklUYWJsZU1ldGFkYXRhW107CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgV2FyZWhvdXNlU3RhdGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBXYXJlaG91c2VTdGF0ZSBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JV2FyZWhvdXNlU3RhdGUpOiBkYXRhZm9ybS5XYXJlaG91c2VTdGF0ZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFdhcmVob3VzZVN0YXRlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLldhcmVob3VzZVN0YXRlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFdhcmVob3VzZVN0YXRlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSVdhcmVob3VzZVN0YXRlLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFdhcmVob3VzZVN0YXRlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLldhcmVob3VzZVN0YXRlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFdhcmVob3VzZVN0YXRlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVdhcmVob3VzZVN0YXRlLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFdhcmVob3VzZVN0YXRlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBXYXJlaG91c2VTdGF0ZQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uV2FyZWhvdXNlU3RhdGU7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBXYXJlaG91c2VTdGF0ZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEByZXR1cm5zIFdhcmVob3VzZVN0YXRlCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uV2FyZWhvdXNlU3RhdGU7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgV2FyZWhvdXNlU3RhdGUgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgV2FyZWhvdXNlU3RhdGUgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgV2FyZWhvdXNlU3RhdGUKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLldhcmVob3VzZVN0YXRlOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBXYXJlaG91c2VTdGF0ZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgV2FyZWhvdXNlU3RhdGUKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uV2FyZWhvdXNlU3RhdGUsIG9wdGlvbnM/OiAkcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgV2FyZWhvdXNlU3RhdGUgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFdhcmVob3VzZVN0YXRlCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYW4gRXhlY3V0aW9uR3JhcGguICovCiAgICBpbnRlcmZhY2UgSUV4ZWN1dGlvbkdyYXBoIHsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbkdyYXBoIHByb2plY3RDb25maWcgKi8KICAgICAgICBwcm9qZWN0Q29uZmlnPzogKGRhdGFmb3JtLklQcm9qZWN0Q29uZmlnfG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uR3JhcGggcnVuQ29uZmlnICovCiAgICAgICAgcnVuQ29uZmlnPzogKGRhdGFmb3JtLklSdW5Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBFeGVjdXRpb25HcmFwaCB3YXJlaG91c2VTdGF0ZSAqLwogICAgICAgIHdhcmVob3VzZVN0YXRlPzogKGRhdGFmb3JtLklXYXJlaG91c2VTdGF0ZXxudWxsKTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbkdyYXBoIGRlY2xhcmF0aW9uVGFyZ2V0cyAqLwogICAgICAgIGRlY2xhcmF0aW9uVGFyZ2V0cz86IChkYXRhZm9ybS5JVGFyZ2V0W118bnVsbCk7CgogICAgICAgIC8qKiBFeGVjdXRpb25HcmFwaCBhY3Rpb25zICovCiAgICAgICAgYWN0aW9ucz86IChkYXRhZm9ybS5JRXhlY3V0aW9uQWN0aW9uW118bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gRXhlY3V0aW9uR3JhcGguICovCiAgICBjbGFzcyBFeGVjdXRpb25HcmFwaCBpbXBsZW1lbnRzIElFeGVjdXRpb25HcmFwaCB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRXhlY3V0aW9uR3JhcGguCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JRXhlY3V0aW9uR3JhcGgpOwoKICAgICAgICAvKiogRXhlY3V0aW9uR3JhcGggcHJvamVjdENvbmZpZy4gKi8KICAgICAgICBwdWJsaWMgcHJvamVjdENvbmZpZz86IChkYXRhZm9ybS5JUHJvamVjdENvbmZpZ3xudWxsKTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbkdyYXBoIHJ1bkNvbmZpZy4gKi8KICAgICAgICBwdWJsaWMgcnVuQ29uZmlnPzogKGRhdGFmb3JtLklSdW5Db25maWd8bnVsbCk7CgogICAgICAgIC8qKiBFeGVjdXRpb25HcmFwaCB3YXJlaG91c2VTdGF0ZS4gKi8KICAgICAgICBwdWJsaWMgd2FyZWhvdXNlU3RhdGU/OiAoZGF0YWZvcm0uSVdhcmVob3VzZVN0YXRlfG51bGwpOwoKICAgICAgICAvKiogRXhlY3V0aW9uR3JhcGggZGVjbGFyYXRpb25UYXJnZXRzLiAqLwogICAgICAgIHB1YmxpYyBkZWNsYXJhdGlvblRhcmdldHM6IGRhdGFmb3JtLklUYXJnZXRbXTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbkdyYXBoIGFjdGlvbnMuICovCiAgICAgICAgcHVibGljIGFjdGlvbnM6IGRhdGFmb3JtLklFeGVjdXRpb25BY3Rpb25bXTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBFeGVjdXRpb25HcmFwaCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIEV4ZWN1dGlvbkdyYXBoIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklFeGVjdXRpb25HcmFwaCk6IGRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXhlY3V0aW9uR3JhcGggbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRXhlY3V0aW9uR3JhcGgudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXhlY3V0aW9uR3JhcGggbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JRXhlY3V0aW9uR3JhcGgsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXhlY3V0aW9uR3JhcGggbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRXhlY3V0aW9uR3JhcGgudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXhlY3V0aW9uR3JhcGggbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JRXhlY3V0aW9uR3JhcGgsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEV4ZWN1dGlvbkdyYXBoIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25HcmFwaAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uRXhlY3V0aW9uR3JhcGg7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gRXhlY3V0aW9uR3JhcGggbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25HcmFwaAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhbiBFeGVjdXRpb25HcmFwaCBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW4gRXhlY3V0aW9uR3JhcGggbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uR3JhcGgKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYW4gRXhlY3V0aW9uR3JhcGggbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEV4ZWN1dGlvbkdyYXBoCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkV4ZWN1dGlvbkdyYXBoLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEV4ZWN1dGlvbkdyYXBoIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBFeGVjdXRpb25HcmFwaAogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgVGltaW5nLiAqLwogICAgaW50ZXJmYWNlIElUaW1pbmcgewoKICAgICAgICAvKiogVGltaW5nIHN0YXJ0VGltZU1pbGxpcyAqLwogICAgICAgIHN0YXJ0VGltZU1pbGxpcz86IChMb25nfG51bGwpOwoKICAgICAgICAvKiogVGltaW5nIGVuZFRpbWVNaWxsaXMgKi8KICAgICAgICBlbmRUaW1lTWlsbGlzPzogKExvbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBUaW1pbmcuICovCiAgICBjbGFzcyBUaW1pbmcgaW1wbGVtZW50cyBJVGltaW5nIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUaW1pbmcuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGltaW5nKTsKCiAgICAgICAgLyoqIFRpbWluZyBzdGFydFRpbWVNaWxsaXMuICovCiAgICAgICAgcHVibGljIHN0YXJ0VGltZU1pbGxpczogTG9uZzsKCiAgICAgICAgLyoqIFRpbWluZyBlbmRUaW1lTWlsbGlzLiAqLwogICAgICAgIHB1YmxpYyBlbmRUaW1lTWlsbGlzOiBMb25nOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRpbWluZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIFRpbWluZyBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGltaW5nKTogZGF0YWZvcm0uVGltaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGltaW5nIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRpbWluZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaW1pbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JVGltaW5nLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRpbWluZyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5UaW1pbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGltaW5nIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVRpbWluZywgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBUaW1pbmcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIFRpbWluZwogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uVGltaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgVGltaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgVGltaW5nCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uVGltaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIFRpbWluZyBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBUaW1pbmcgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgVGltaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5UaW1pbmc7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRpbWluZyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGltaW5nCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLlRpbWluZywgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBUaW1pbmcgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRpbWluZwogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgUnVuUmVzdWx0LiAqLwogICAgaW50ZXJmYWNlIElSdW5SZXN1bHQgewoKICAgICAgICAvKiogUnVuUmVzdWx0IHN0YXR1cyAqLwogICAgICAgIHN0YXR1cz86IChkYXRhZm9ybS5SdW5SZXN1bHQuRXhlY3V0aW9uU3RhdHVzfG51bGwpOwoKICAgICAgICAvKiogUnVuUmVzdWx0IGFjdGlvbnMgKi8KICAgICAgICBhY3Rpb25zPzogKGRhdGFmb3JtLklBY3Rpb25SZXN1bHRbXXxudWxsKTsKCiAgICAgICAgLyoqIFJ1blJlc3VsdCB0aW1pbmcgKi8KICAgICAgICB0aW1pbmc/OiAoZGF0YWZvcm0uSVRpbWluZ3xudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFJ1blJlc3VsdC4gKi8KICAgIGNsYXNzIFJ1blJlc3VsdCBpbXBsZW1lbnRzIElSdW5SZXN1bHQgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJ1blJlc3VsdC4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLklSdW5SZXN1bHQpOwoKICAgICAgICAvKiogUnVuUmVzdWx0IHN0YXR1cy4gKi8KICAgICAgICBwdWJsaWMgc3RhdHVzOiBkYXRhZm9ybS5SdW5SZXN1bHQuRXhlY3V0aW9uU3RhdHVzOwoKICAgICAgICAvKiogUnVuUmVzdWx0IGFjdGlvbnMuICovCiAgICAgICAgcHVibGljIGFjdGlvbnM6IGRhdGFmb3JtLklBY3Rpb25SZXN1bHRbXTsKCiAgICAgICAgLyoqIFJ1blJlc3VsdCB0aW1pbmcuICovCiAgICAgICAgcHVibGljIHRpbWluZz86IChkYXRhZm9ybS5JVGltaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFJ1blJlc3VsdCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIFJ1blJlc3VsdCBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JUnVuUmVzdWx0KTogZGF0YWZvcm0uUnVuUmVzdWx0OwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUnVuUmVzdWx0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlJ1blJlc3VsdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBSdW5SZXN1bHQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JUnVuUmVzdWx0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJ1blJlc3VsdCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5SdW5SZXN1bHQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUnVuUmVzdWx0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVJ1blJlc3VsdCwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBSdW5SZXN1bHQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIFJ1blJlc3VsdAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uUnVuUmVzdWx0OwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgUnVuUmVzdWx0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgUnVuUmVzdWx0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uUnVuUmVzdWx0OwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIFJ1blJlc3VsdCBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBSdW5SZXN1bHQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgUnVuUmVzdWx0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5SdW5SZXN1bHQ7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFJ1blJlc3VsdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUnVuUmVzdWx0CiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLlJ1blJlc3VsdCwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBSdW5SZXN1bHQgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFJ1blJlc3VsdAogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIG5hbWVzcGFjZSBSdW5SZXN1bHQgewoKICAgICAgICAvKiogRXhlY3V0aW9uU3RhdHVzIGVudW0uICovCiAgICAgICAgZW51bSBFeGVjdXRpb25TdGF0dXMgewogICAgICAgICAgICBVTktOT1dOID0gMCwKICAgICAgICAgICAgUlVOTklORyA9IDEsCiAgICAgICAgICAgIFNVQ0NFU1NGVUwgPSAyLAogICAgICAgICAgICBGQUlMRUQgPSAzLAogICAgICAgICAgICBDQU5DRUxMRUQgPSA0LAogICAgICAgICAgICBUSU1FRF9PVVQgPSA1CiAgICAgICAgfQogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEFjdGlvblJlc3VsdC4gKi8KICAgIGludGVyZmFjZSBJQWN0aW9uUmVzdWx0IHsKCiAgICAgICAgLyoqIEFjdGlvblJlc3VsdCB0YXJnZXQgKi8KICAgICAgICB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIEFjdGlvblJlc3VsdCBzdGF0dXMgKi8KICAgICAgICBzdGF0dXM/OiAoZGF0YWZvcm0uQWN0aW9uUmVzdWx0LkV4ZWN1dGlvblN0YXR1c3xudWxsKTsKCiAgICAgICAgLyoqIEFjdGlvblJlc3VsdCB0YXNrcyAqLwogICAgICAgIHRhc2tzPzogKGRhdGFmb3JtLklUYXNrUmVzdWx0W118bnVsbCk7CgogICAgICAgIC8qKiBBY3Rpb25SZXN1bHQgdGltaW5nICovCiAgICAgICAgdGltaW5nPzogKGRhdGFmb3JtLklUaW1pbmd8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYW4gQWN0aW9uUmVzdWx0LiAqLwogICAgY2xhc3MgQWN0aW9uUmVzdWx0IGltcGxlbWVudHMgSUFjdGlvblJlc3VsdCB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQWN0aW9uUmVzdWx0LgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUFjdGlvblJlc3VsdCk7CgogICAgICAgIC8qKiBBY3Rpb25SZXN1bHQgdGFyZ2V0LiAqLwogICAgICAgIHB1YmxpYyB0YXJnZXQ/OiAoZGF0YWZvcm0uSVRhcmdldHxudWxsKTsKCiAgICAgICAgLyoqIEFjdGlvblJlc3VsdCBzdGF0dXMuICovCiAgICAgICAgcHVibGljIHN0YXR1czogZGF0YWZvcm0uQWN0aW9uUmVzdWx0LkV4ZWN1dGlvblN0YXR1czsKCiAgICAgICAgLyoqIEFjdGlvblJlc3VsdCB0YXNrcy4gKi8KICAgICAgICBwdWJsaWMgdGFza3M6IGRhdGFmb3JtLklUYXNrUmVzdWx0W107CgogICAgICAgIC8qKiBBY3Rpb25SZXN1bHQgdGltaW5nLiAqLwogICAgICAgIHB1YmxpYyB0aW1pbmc/OiAoZGF0YWZvcm0uSVRpbWluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBBY3Rpb25SZXN1bHQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKiBAcmV0dXJucyBBY3Rpb25SZXN1bHQgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUFjdGlvblJlc3VsdCk6IGRhdGFmb3JtLkFjdGlvblJlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFjdGlvblJlc3VsdCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5BY3Rpb25SZXN1bHQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQWN0aW9uUmVzdWx0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uSUFjdGlvblJlc3VsdCwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBBY3Rpb25SZXN1bHQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uQWN0aW9uUmVzdWx0LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEFjdGlvblJlc3VsdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklBY3Rpb25SZXN1bHQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEFjdGlvblJlc3VsdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQWN0aW9uUmVzdWx0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5BY3Rpb25SZXN1bHQ7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gQWN0aW9uUmVzdWx0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgQWN0aW9uUmVzdWx0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uQWN0aW9uUmVzdWx0OwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhbiBBY3Rpb25SZXN1bHQgbWVzc2FnZS4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICogQHJldHVybnMgYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuIEFjdGlvblJlc3VsdCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBBY3Rpb25SZXN1bHQKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkFjdGlvblJlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEFjdGlvblJlc3VsdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgQWN0aW9uUmVzdWx0CiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkFjdGlvblJlc3VsdCwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBBY3Rpb25SZXN1bHQgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIEFjdGlvblJlc3VsdAogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIG5hbWVzcGFjZSBBY3Rpb25SZXN1bHQgewoKICAgICAgICAvKiogRXhlY3V0aW9uU3RhdHVzIGVudW0uICovCiAgICAgICAgZW51bSBFeGVjdXRpb25TdGF0dXMgewogICAgICAgICAgICBVTktOT1dOID0gMCwKICAgICAgICAgICAgUlVOTklORyA9IDEsCiAgICAgICAgICAgIFNVQ0NFU1NGVUwgPSAyLAogICAgICAgICAgICBGQUlMRUQgPSAzLAogICAgICAgICAgICBTS0lQUEVEID0gNCwKICAgICAgICAgICAgRElTQUJMRUQgPSA1LAogICAgICAgICAgICBDQU5DRUxMRUQgPSA2CiAgICAgICAgfQogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGFuIEV4ZWN1dGlvbk1ldGFkYXRhLiAqLwogICAgaW50ZXJmYWNlIElFeGVjdXRpb25NZXRhZGF0YSB7CgogICAgICAgIC8qKiBFeGVjdXRpb25NZXRhZGF0YSBiaWdxdWVyeSAqLwogICAgICAgIGJpZ3F1ZXJ5PzogKGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLklCaWdxdWVyeU1ldGFkYXRhfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGFuIEV4ZWN1dGlvbk1ldGFkYXRhLiAqLwogICAgY2xhc3MgRXhlY3V0aW9uTWV0YWRhdGEgaW1wbGVtZW50cyBJRXhlY3V0aW9uTWV0YWRhdGEgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEV4ZWN1dGlvbk1ldGFkYXRhLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUV4ZWN1dGlvbk1ldGFkYXRhKTsKCiAgICAgICAgLyoqIEV4ZWN1dGlvbk1ldGFkYXRhIGJpZ3F1ZXJ5LiAqLwogICAgICAgIHB1YmxpYyBiaWdxdWVyeT86IChkYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5JQmlncXVlcnlNZXRhZGF0YXxudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBFeGVjdXRpb25NZXRhZGF0YSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIEV4ZWN1dGlvbk1ldGFkYXRhIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklFeGVjdXRpb25NZXRhZGF0YSk6IGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JRXhlY3V0aW9uTWV0YWRhdGEsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JRXhlY3V0aW9uTWV0YWRhdGEsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGFuIEV4ZWN1dGlvbk1ldGFkYXRhIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHBhcmFtIFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmQKICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25NZXRhZGF0YQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGE7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYW4gRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBFeGVjdXRpb25NZXRhZGF0YQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhOwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhbiBFeGVjdXRpb25NZXRhZGF0YSBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW4gRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgRXhlY3V0aW9uTWV0YWRhdGEKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYW4gRXhlY3V0aW9uTWV0YWRhdGEgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEV4ZWN1dGlvbk1ldGFkYXRhCiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEV4ZWN1dGlvbk1ldGFkYXRhIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBFeGVjdXRpb25NZXRhZGF0YQogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQoKICAgIG5hbWVzcGFjZSBFeGVjdXRpb25NZXRhZGF0YSB7CgogICAgICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgQmlncXVlcnlNZXRhZGF0YS4gKi8KICAgICAgICBpbnRlcmZhY2UgSUJpZ3F1ZXJ5TWV0YWRhdGEgewoKICAgICAgICAgICAgLyoqIEJpZ3F1ZXJ5TWV0YWRhdGEgam9iSWQgKi8KICAgICAgICAgICAgam9iSWQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqIEJpZ3F1ZXJ5TWV0YWRhdGEgdG90YWxCeXRlc1Byb2Nlc3NlZCAqLwogICAgICAgICAgICB0b3RhbEJ5dGVzUHJvY2Vzc2VkPzogKExvbmd8bnVsbCk7CgogICAgICAgICAgICAvKiogQmlncXVlcnlNZXRhZGF0YSB0b3RhbEJ5dGVzQmlsbGVkICovCiAgICAgICAgICAgIHRvdGFsQnl0ZXNCaWxsZWQ/OiAoTG9uZ3xudWxsKTsKICAgICAgICB9CgogICAgICAgIC8qKiBSZXByZXNlbnRzIGEgQmlncXVlcnlNZXRhZGF0YS4gKi8KICAgICAgICBjbGFzcyBCaWdxdWVyeU1ldGFkYXRhIGltcGxlbWVudHMgSUJpZ3F1ZXJ5TWV0YWRhdGEgewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQmlncXVlcnlNZXRhZGF0YS4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29uc3RydWN0b3IocHJvcGVydGllcz86IGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLklCaWdxdWVyeU1ldGFkYXRhKTsKCiAgICAgICAgICAgIC8qKiBCaWdxdWVyeU1ldGFkYXRhIGpvYklkLiAqLwogICAgICAgICAgICBwdWJsaWMgam9iSWQ6IHN0cmluZzsKCiAgICAgICAgICAgIC8qKiBCaWdxdWVyeU1ldGFkYXRhIHRvdGFsQnl0ZXNQcm9jZXNzZWQuICovCiAgICAgICAgICAgIHB1YmxpYyB0b3RhbEJ5dGVzUHJvY2Vzc2VkOiBMb25nOwoKICAgICAgICAgICAgLyoqIEJpZ3F1ZXJ5TWV0YWRhdGEgdG90YWxCeXRlc0JpbGxlZC4gKi8KICAgICAgICAgICAgcHVibGljIHRvdGFsQnl0ZXNCaWxsZWQ6IExvbmc7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBCaWdxdWVyeU1ldGFkYXRhIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAgICAgKiBAcmV0dXJucyBCaWdxdWVyeU1ldGFkYXRhIGluc3RhbmNlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuSUJpZ3F1ZXJ5TWV0YWRhdGEpOiBkYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5CaWdxdWVyeU1ldGFkYXRhOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCaWdxdWVyeU1ldGFkYXRhIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGEudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEJpZ3F1ZXJ5TWV0YWRhdGEgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGUobWVzc2FnZTogZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuSUJpZ3F1ZXJ5TWV0YWRhdGEsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCaWdxdWVyeU1ldGFkYXRhIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkV4ZWN1dGlvbk1ldGFkYXRhLkJpZ3F1ZXJ5TWV0YWRhdGEudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEJpZ3F1ZXJ5TWV0YWRhdGEgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuSUJpZ3F1ZXJ5TWV0YWRhdGEsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIERlY29kZXMgYSBCaWdxdWVyeU1ldGFkYXRhIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuCiAgICAgICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAgICAgKiBAcmV0dXJucyBCaWdxdWVyeU1ldGFkYXRhCiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uRXhlY3V0aW9uTWV0YWRhdGEuQmlncXVlcnlNZXRhZGF0YTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgQmlncXVlcnlNZXRhZGF0YSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLgogICAgICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgICAgICogQHJldHVybnMgQmlncXVlcnlNZXRhZGF0YQogICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5CaWdxdWVyeU1ldGFkYXRhOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgQmlncXVlcnlNZXRhZGF0YSBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBCaWdxdWVyeU1ldGFkYXRhIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICogQHJldHVybnMgQmlncXVlcnlNZXRhZGF0YQogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5CaWdxdWVyeU1ldGFkYXRhOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEJpZ3F1ZXJ5TWV0YWRhdGEgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdxdWVyeU1ldGFkYXRhCiAgICAgICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5FeGVjdXRpb25NZXRhZGF0YS5CaWdxdWVyeU1ldGFkYXRhLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgQmlncXVlcnlNZXRhZGF0YSB0byBKU09OLgogICAgICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBCaWdxdWVyeU1ldGFkYXRhCiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIFRhc2tSZXN1bHQuICovCiAgICBpbnRlcmZhY2UgSVRhc2tSZXN1bHQgewoKICAgICAgICAvKiogVGFza1Jlc3VsdCBzdGF0dXMgKi8KICAgICAgICBzdGF0dXM/OiAoZGF0YWZvcm0uVGFza1Jlc3VsdC5FeGVjdXRpb25TdGF0dXN8bnVsbCk7CgogICAgICAgIC8qKiBUYXNrUmVzdWx0IGVycm9yTWVzc2FnZSAqLwogICAgICAgIGVycm9yTWVzc2FnZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBUYXNrUmVzdWx0IHRpbWluZyAqLwogICAgICAgIHRpbWluZz86IChkYXRhZm9ybS5JVGltaW5nfG51bGwpOwoKICAgICAgICAvKiogVGFza1Jlc3VsdCBtZXRhZGF0YSAqLwogICAgICAgIG1ldGFkYXRhPzogKGRhdGFmb3JtLklFeGVjdXRpb25NZXRhZGF0YXxudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFRhc2tSZXN1bHQuICovCiAgICBjbGFzcyBUYXNrUmVzdWx0IGltcGxlbWVudHMgSVRhc2tSZXN1bHQgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRhc2tSZXN1bHQuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGFza1Jlc3VsdCk7CgogICAgICAgIC8qKiBUYXNrUmVzdWx0IHN0YXR1cy4gKi8KICAgICAgICBwdWJsaWMgc3RhdHVzOiBkYXRhZm9ybS5UYXNrUmVzdWx0LkV4ZWN1dGlvblN0YXR1czsKCiAgICAgICAgLyoqIFRhc2tSZXN1bHQgZXJyb3JNZXNzYWdlLiAqLwogICAgICAgIHB1YmxpYyBlcnJvck1lc3NhZ2U6IHN0cmluZzsKCiAgICAgICAgLyoqIFRhc2tSZXN1bHQgdGltaW5nLiAqLwogICAgICAgIHB1YmxpYyB0aW1pbmc/OiAoZGF0YWZvcm0uSVRpbWluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRhc2tSZXN1bHQgbWV0YWRhdGEuICovCiAgICAgICAgcHVibGljIG1ldGFkYXRhPzogKGRhdGFmb3JtLklFeGVjdXRpb25NZXRhZGF0YXxudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBUYXNrUmVzdWx0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgVGFza1Jlc3VsdCBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGFza1Jlc3VsdCk6IGRhdGFmb3JtLlRhc2tSZXN1bHQ7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUYXNrUmVzdWx0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRhc2tSZXN1bHQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFza1Jlc3VsdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklUYXNrUmVzdWx0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRhc2tSZXN1bHQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uVGFza1Jlc3VsdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUYXNrUmVzdWx0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVRhc2tSZXN1bHQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgVGFza1Jlc3VsdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgVGFza1Jlc3VsdAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uVGFza1Jlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFRhc2tSZXN1bHQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBUYXNrUmVzdWx0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uVGFza1Jlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBUYXNrUmVzdWx0IG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFRhc2tSZXN1bHQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgVGFza1Jlc3VsdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uVGFza1Jlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVGFza1Jlc3VsdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFza1Jlc3VsdAogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5UYXNrUmVzdWx0LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRhc2tSZXN1bHQgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRhc2tSZXN1bHQKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICBuYW1lc3BhY2UgVGFza1Jlc3VsdCB7CgogICAgICAgIC8qKiBFeGVjdXRpb25TdGF0dXMgZW51bS4gKi8KICAgICAgICBlbnVtIEV4ZWN1dGlvblN0YXR1cyB7CiAgICAgICAgICAgIFVOS05PV04gPSAwLAogICAgICAgICAgICBSVU5OSU5HID0gMSwKICAgICAgICAgICAgU1VDQ0VTU0ZVTCA9IDIsCiAgICAgICAgICAgIEZBSUxFRCA9IDMsCiAgICAgICAgICAgIFNLSVBQRUQgPSA0LAogICAgICAgICAgICBDQU5DRUxMRUQgPSA1CiAgICAgICAgfQogICAgfQoKICAgIC8qKiBQcm9wZXJ0aWVzIG9mIGEgVGVzdFJlc3VsdC4gKi8KICAgIGludGVyZmFjZSBJVGVzdFJlc3VsdCB7CgogICAgICAgIC8qKiBUZXN0UmVzdWx0IG5hbWUgKi8KICAgICAgICBuYW1lPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRlc3RSZXN1bHQgc3VjY2Vzc2Z1bCAqLwogICAgICAgIHN1Y2Nlc3NmdWw/OiAoYm9vbGVhbnxudWxsKTsKCiAgICAgICAgLyoqIFRlc3RSZXN1bHQgbWVzc2FnZXMgKi8KICAgICAgICBtZXNzYWdlcz86IChzdHJpbmdbXXxudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIFRlc3RSZXN1bHQuICovCiAgICBjbGFzcyBUZXN0UmVzdWx0IGltcGxlbWVudHMgSVRlc3RSZXN1bHQgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRlc3RSZXN1bHQuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGVzdFJlc3VsdCk7CgogICAgICAgIC8qKiBUZXN0UmVzdWx0IG5hbWUuICovCiAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZzsKCiAgICAgICAgLyoqIFRlc3RSZXN1bHQgc3VjY2Vzc2Z1bC4gKi8KICAgICAgICBwdWJsaWMgc3VjY2Vzc2Z1bDogYm9vbGVhbjsKCiAgICAgICAgLyoqIFRlc3RSZXN1bHQgbWVzc2FnZXMuICovCiAgICAgICAgcHVibGljIG1lc3NhZ2VzOiBzdHJpbmdbXTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBUZXN0UmVzdWx0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgVGVzdFJlc3VsdCBpbnN0YW5jZQogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JVGVzdFJlc3VsdCk6IGRhdGFmb3JtLlRlc3RSZXN1bHQ7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUZXN0UmVzdWx0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRlc3RSZXN1bHQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGVzdFJlc3VsdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklUZXN0UmVzdWx0LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRlc3RSZXN1bHQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uVGVzdFJlc3VsdC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUZXN0UmVzdWx0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAqIEBwYXJhbSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvCiAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZTogZGF0YWZvcm0uSVRlc3RSZXN1bHQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgVGVzdFJlc3VsdCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgVGVzdFJlc3VsdAogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uVGVzdFJlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFRlc3RSZXN1bHQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBUZXN0UmVzdWx0CiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZURlbGltaXRlZChyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpKTogZGF0YWZvcm0uVGVzdFJlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBUZXN0UmVzdWx0IG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFRlc3RSZXN1bHQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLgogICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICogQHJldHVybnMgVGVzdFJlc3VsdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uVGVzdFJlc3VsdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVGVzdFJlc3VsdCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGVzdFJlc3VsdAogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5UZXN0UmVzdWx0LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRlc3RSZXN1bHQgdG8gSlNPTi4KICAgICAgICAgKiBAcmV0dXJucyBKU09OIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB0b0pTT04oKTogeyBbazogc3RyaW5nXTogYW55IH07CgogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRlc3RSZXN1bHQKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIEZpZWxkLiAqLwogICAgaW50ZXJmYWNlIElGaWVsZCB7CgogICAgICAgIC8qKiBGaWVsZCBuYW1lICovCiAgICAgICAgbmFtZT86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBGaWVsZCBmbGFncyAqLwogICAgICAgIGZsYWdzPzogKGRhdGFmb3JtLkZpZWxkLkZsYWdbXXxudWxsKTsKCiAgICAgICAgLyoqIEZpZWxkIHByaW1pdGl2ZSAqLwogICAgICAgIHByaW1pdGl2ZT86IChkYXRhZm9ybS5GaWVsZC5QcmltaXRpdmV8bnVsbCk7CgogICAgICAgIC8qKiBGaWVsZCBzdHJ1Y3QgKi8KICAgICAgICBzdHJ1Y3Q/OiAoZGF0YWZvcm0uSUZpZWxkc3xudWxsKTsKCiAgICAgICAgLyoqIEZpZWxkIGRlc2NyaXB0aW9uICovCiAgICAgICAgZGVzY3JpcHRpb24/OiAoc3RyaW5nfG51bGwpOwogICAgfQoKICAgIC8qKiBSZXByZXNlbnRzIGEgRmllbGQuICovCiAgICBjbGFzcyBGaWVsZCBpbXBsZW1lbnRzIElGaWVsZCB7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRmllbGQuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JRmllbGQpOwoKICAgICAgICAvKiogRmllbGQgbmFtZS4gKi8KICAgICAgICBwdWJsaWMgbmFtZTogc3RyaW5nOwoKICAgICAgICAvKiogRmllbGQgZmxhZ3MuICovCiAgICAgICAgcHVibGljIGZsYWdzOiBkYXRhZm9ybS5GaWVsZC5GbGFnW107CgogICAgICAgIC8qKiBGaWVsZCBwcmltaXRpdmUuICovCiAgICAgICAgcHVibGljIHByaW1pdGl2ZT86IChkYXRhZm9ybS5GaWVsZC5QcmltaXRpdmV8bnVsbCk7CgogICAgICAgIC8qKiBGaWVsZCBzdHJ1Y3QuICovCiAgICAgICAgcHVibGljIHN0cnVjdD86IChkYXRhZm9ybS5JRmllbGRzfG51bGwpOwoKICAgICAgICAvKiogRmllbGQgZGVzY3JpcHRpb24uICovCiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgIC8qKiBGaWVsZCB0eXBlLiAqLwogICAgICAgIHB1YmxpYyB0eXBlPzogKCJwcmltaXRpdmUifCJzdHJ1Y3QiKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBGaWVsZCBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIEZpZWxkIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklGaWVsZCk6IGRhdGFmb3JtLkZpZWxkOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmllbGQgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRmllbGQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRmllbGQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JRmllbGQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmllbGQgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRmllbGQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgRmllbGQgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JRmllbGQsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgRmllbGQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIEZpZWxkCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5GaWVsZDsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIEZpZWxkIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgRmllbGQKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5GaWVsZDsKCiAgICAgICAgLyoqCiAgICAgICAgICogVmVyaWZpZXMgYSBGaWVsZCBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBGaWVsZCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBGaWVsZAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbU9iamVjdChvYmplY3Q6IHsgW2s6IHN0cmluZ106IGFueSB9KTogZGF0YWZvcm0uRmllbGQ7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEZpZWxkIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBGaWVsZAogICAgICAgICAqIEBwYXJhbSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zCiAgICAgICAgICogQHJldHVybnMgUGxhaW4gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyB0b09iamVjdChtZXNzYWdlOiBkYXRhZm9ybS5GaWVsZCwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBGaWVsZCB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgRmllbGQKICAgICAgICAgKiBAcGFyYW0gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCAidHlwZS5nb29nbGVhcGlzLmNvbSIpCiAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGdldFR5cGVVcmwodHlwZVVybFByZWZpeD86IHN0cmluZyk6IHN0cmluZzsKICAgIH0KCiAgICBuYW1lc3BhY2UgRmllbGQgewoKICAgICAgICAvKiogUHJpbWl0aXZlIGVudW0uICovCiAgICAgICAgZW51bSBQcmltaXRpdmUgewogICAgICAgICAgICBVTktOT1dOID0gMCwKICAgICAgICAgICAgSU5URUdFUiA9IDEsCiAgICAgICAgICAgIEZMT0FUID0gMiwKICAgICAgICAgICAgTlVNRVJJQyA9IDUsCiAgICAgICAgICAgIEJPT0xFQU4gPSAzLAogICAgICAgICAgICBTVFJJTkcgPSA0LAogICAgICAgICAgICBEQVRFID0gNiwKICAgICAgICAgICAgREFURVRJTUUgPSA3LAogICAgICAgICAgICBUSU1FU1RBTVAgPSA4LAogICAgICAgICAgICBUSU1FID0gOSwKICAgICAgICAgICAgQllURVMgPSAxMCwKICAgICAgICAgICAgQU5ZID0gMTEsCiAgICAgICAgICAgIEdFT0dSQVBIWSA9IDEyCiAgICAgICAgfQoKICAgICAgICAvKiogRmxhZyBlbnVtLiAqLwogICAgICAgIGVudW0gRmxhZyB7CiAgICAgICAgICAgIFVOS05PV05fRkxBRyA9IDAsCiAgICAgICAgICAgIFJFUEVBVEVEID0gMQogICAgICAgIH0KICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIEZpZWxkcy4gKi8KICAgIGludGVyZmFjZSBJRmllbGRzIHsKCiAgICAgICAgLyoqIEZpZWxkcyBmaWVsZHMgKi8KICAgICAgICBmaWVsZHM/OiAoZGF0YWZvcm0uSUZpZWxkW118bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBGaWVsZHMuICovCiAgICBjbGFzcyBGaWVsZHMgaW1wbGVtZW50cyBJRmllbGRzIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGaWVsZHMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5JRmllbGRzKTsKCiAgICAgICAgLyoqIEZpZWxkcyBmaWVsZHMuICovCiAgICAgICAgcHVibGljIGZpZWxkczogZGF0YWZvcm0uSUZpZWxkW107CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRmllbGRzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgRmllbGRzIGluc3RhbmNlCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBjcmVhdGUocHJvcGVydGllcz86IGRhdGFmb3JtLklGaWVsZHMpOiBkYXRhZm9ybS5GaWVsZHM7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBGaWVsZHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgZGF0YWZvcm0uRmllbGRzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEZpZWxkcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklGaWVsZHMsIHdyaXRlcj86ICRwcm90b2J1Zi5Xcml0ZXIpOiAkcHJvdG9idWYuV3JpdGVyOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmllbGRzIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLkZpZWxkcy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBGaWVsZHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZURlbGltaXRlZChtZXNzYWdlOiBkYXRhZm9ybS5JRmllbGRzLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIEZpZWxkcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgRmllbGRzCiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXIKICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGRlY29kZShyZWFkZXI6ICgkcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXkpLCBsZW5ndGg/OiBudW1iZXIpOiBkYXRhZm9ybS5GaWVsZHM7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBGaWVsZHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBGaWVsZHMKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlRGVsaW1pdGVkKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSkpOiBkYXRhZm9ybS5GaWVsZHM7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgRmllbGRzIG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIEZpZWxkcyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICogQHBhcmFtIG9iamVjdCBQbGFpbiBvYmplY3QKICAgICAgICAgKiBAcmV0dXJucyBGaWVsZHMKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLkZpZWxkczsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRmllbGRzIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBGaWVsZHMKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uRmllbGRzLCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEZpZWxkcyB0byBKU09OLgogICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHRvSlNPTigpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgRmllbGRzCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgLyoqIFByb3BlcnRpZXMgb2YgYSBUYWJsZU1ldGFkYXRhLiAqLwogICAgaW50ZXJmYWNlIElUYWJsZU1ldGFkYXRhIHsKCiAgICAgICAgLyoqIFRhYmxlTWV0YWRhdGEgdGFyZ2V0ICovCiAgICAgICAgdGFyZ2V0PzogKGRhdGFmb3JtLklUYXJnZXR8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZU1ldGFkYXRhIHR5cGUgKi8KICAgICAgICB0eXBlPzogKGRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuVHlwZXxudWxsKTsKCiAgICAgICAgLyoqIFRhYmxlTWV0YWRhdGEgZmllbGRzICovCiAgICAgICAgZmllbGRzPzogKGRhdGFmb3JtLklGaWVsZFtdfG51bGwpOwoKICAgICAgICAvKiogVGFibGVNZXRhZGF0YSBkZXNjcmlwdGlvbiAqLwogICAgICAgIGRlc2NyaXB0aW9uPzogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqIFRhYmxlTWV0YWRhdGEgbGFiZWxzICovCiAgICAgICAgbGFiZWxzPzogKHsgW2s6IHN0cmluZ106IHN0cmluZyB9fG51bGwpOwoKICAgICAgICAvKiogVGFibGVNZXRhZGF0YSBsYXN0VXBkYXRlZE1pbGxpcyAqLwogICAgICAgIGxhc3RVcGRhdGVkTWlsbGlzPzogKExvbmd8bnVsbCk7CgogICAgICAgIC8qKiBUYWJsZU1ldGFkYXRhIGJpZ3F1ZXJ5ICovCiAgICAgICAgYmlncXVlcnk/OiAoZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5JQmlnUXVlcnl8bnVsbCk7CiAgICB9CgogICAgLyoqIFJlcHJlc2VudHMgYSBUYWJsZU1ldGFkYXRhLiAqLwogICAgY2xhc3MgVGFibGVNZXRhZGF0YSBpbXBsZW1lbnRzIElUYWJsZU1ldGFkYXRhIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUYWJsZU1ldGFkYXRhLgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSVRhYmxlTWV0YWRhdGEpOwoKICAgICAgICAvKiogVGFibGVNZXRhZGF0YSB0YXJnZXQuICovCiAgICAgICAgcHVibGljIHRhcmdldD86IChkYXRhZm9ybS5JVGFyZ2V0fG51bGwpOwoKICAgICAgICAvKiogVGFibGVNZXRhZGF0YSB0eXBlLiAqLwogICAgICAgIHB1YmxpYyB0eXBlOiBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhLlR5cGU7CgogICAgICAgIC8qKiBUYWJsZU1ldGFkYXRhIGZpZWxkcy4gKi8KICAgICAgICBwdWJsaWMgZmllbGRzOiBkYXRhZm9ybS5JRmllbGRbXTsKCiAgICAgICAgLyoqIFRhYmxlTWV0YWRhdGEgZGVzY3JpcHRpb24uICovCiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmc7CgogICAgICAgIC8qKiBUYWJsZU1ldGFkYXRhIGxhYmVscy4gKi8KICAgICAgICBwdWJsaWMgbGFiZWxzOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfTsKCiAgICAgICAgLyoqIFRhYmxlTWV0YWRhdGEgbGFzdFVwZGF0ZWRNaWxsaXMuICovCiAgICAgICAgcHVibGljIGxhc3RVcGRhdGVkTWlsbGlzOiBMb25nOwoKICAgICAgICAvKiogVGFibGVNZXRhZGF0YSBiaWdxdWVyeS4gKi8KICAgICAgICBwdWJsaWMgYmlncXVlcnk/OiAoZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5JQmlnUXVlcnl8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVGFibGVNZXRhZGF0YSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuCiAgICAgICAgICogQHBhcmFtIFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldAogICAgICAgICAqIEByZXR1cm5zIFRhYmxlTWV0YWRhdGEgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSVRhYmxlTWV0YWRhdGEpOiBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhOwoKICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVGFibGVNZXRhZGF0YSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRhYmxlTWV0YWRhdGEgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlCiAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5JVGFibGVNZXRhZGF0YSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUYWJsZU1ldGFkYXRhIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRhYmxlTWV0YWRhdGEudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGFibGVNZXRhZGF0YSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklUYWJsZU1ldGFkYXRhLCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIFRhYmxlTWV0YWRhdGEgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcGFyYW0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZAogICAgICAgICAqIEByZXR1cm5zIFRhYmxlTWV0YWRhdGEKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLlRhYmxlTWV0YWRhdGE7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBUYWJsZU1ldGFkYXRhIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuCiAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICogQHJldHVybnMgVGFibGVNZXRhZGF0YQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLlRhYmxlTWV0YWRhdGE7CgogICAgICAgIC8qKgogICAgICAgICAqIFZlcmlmaWVzIGEgVGFibGVNZXRhZGF0YSBtZXNzYWdlLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnkKICAgICAgICAgKiBAcmV0dXJucyBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHZlcmlmeShtZXNzYWdlOiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBUYWJsZU1ldGFkYXRhIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIFRhYmxlTWV0YWRhdGEKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLlRhYmxlTWV0YWRhdGE7CgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRhYmxlTWV0YWRhdGEgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRhYmxlTWV0YWRhdGEKICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAqIEByZXR1cm5zIFBsYWluIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uVGFibGVNZXRhZGF0YSwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBUYWJsZU1ldGFkYXRhIHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBUYWJsZU1ldGFkYXRhCiAgICAgICAgICogQHBhcmFtIFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgInR5cGUuZ29vZ2xlYXBpcy5jb20iKQogICAgICAgICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR5cGUgdXJsCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICB9CgogICAgbmFtZXNwYWNlIFRhYmxlTWV0YWRhdGEgewoKICAgICAgICAvKiogVHlwZSBlbnVtLiAqLwogICAgICAgIGVudW0gVHlwZSB7CiAgICAgICAgICAgIFVOS05PV04gPSAwLAogICAgICAgICAgICBUQUJMRSA9IDEsCiAgICAgICAgICAgIFZJRVcgPSAyCiAgICAgICAgfQoKICAgICAgICAvKiogUHJvcGVydGllcyBvZiBhIEJpZ1F1ZXJ5LiAqLwogICAgICAgIGludGVyZmFjZSBJQmlnUXVlcnkgewoKICAgICAgICAgICAgLyoqIEJpZ1F1ZXJ5IGhhc1N0cmVhbWluZ0J1ZmZlciAqLwogICAgICAgICAgICBoYXNTdHJlYW1pbmdCdWZmZXI/OiAoYm9vbGVhbnxudWxsKTsKICAgICAgICB9CgogICAgICAgIC8qKiBSZXByZXNlbnRzIGEgQmlnUXVlcnkuICovCiAgICAgICAgY2xhc3MgQmlnUXVlcnkgaW1wbGVtZW50cyBJQmlnUXVlcnkgewoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQmlnUXVlcnkuCiAgICAgICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgICAgICovCiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM/OiBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhLklCaWdRdWVyeSk7CgogICAgICAgICAgICAvKiogQmlnUXVlcnkgaGFzU3RyZWFtaW5nQnVmZmVyLiAqLwogICAgICAgICAgICBwdWJsaWMgaGFzU3RyZWFtaW5nQnVmZmVyOiBib29sZWFuOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQmlnUXVlcnkgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLgogICAgICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICAgICAqIEByZXR1cm5zIEJpZ1F1ZXJ5IGluc3RhbmNlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5JQmlnUXVlcnkpOiBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhLkJpZ1F1ZXJ5OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCaWdRdWVyeSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhLkJpZ1F1ZXJ5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdRdWVyeSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgICAgICogQHBhcmFtIFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG8KICAgICAgICAgICAgICogQHJldHVybnMgV3JpdGVyCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGVuY29kZShtZXNzYWdlOiBkYXRhZm9ybS5UYWJsZU1ldGFkYXRhLklCaWdRdWVyeSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEJpZ1F1ZXJ5IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIGRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuQmlnUXVlcnkudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEJpZ1F1ZXJ5IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZQogICAgICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAgICAgKiBAcmV0dXJucyBXcml0ZXIKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuSUJpZ1F1ZXJ5LCB3cml0ZXI/OiAkcHJvdG9idWYuV3JpdGVyKTogJHByb3RvYnVmLldyaXRlcjsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgQmlnUXVlcnkgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICAgICAqIEByZXR1cm5zIEJpZ1F1ZXJ5CiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGUocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSwgbGVuZ3RoPzogbnVtYmVyKTogZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5CaWdRdWVyeTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBEZWNvZGVzIGEgQmlnUXVlcnkgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgICAgICogQHBhcmFtIHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tCiAgICAgICAgICAgICAqIEByZXR1cm5zIEJpZ1F1ZXJ5CiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuQmlnUXVlcnk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogVmVyaWZpZXMgYSBCaWdRdWVyeSBtZXNzYWdlLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5CiAgICAgICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgcHVibGljIHN0YXRpYyB2ZXJpZnkobWVzc2FnZTogeyBbazogc3RyaW5nXTogYW55IH0pOiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBCaWdRdWVyeSBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuCiAgICAgICAgICAgICAqIEBwYXJhbSBvYmplY3QgUGxhaW4gb2JqZWN0CiAgICAgICAgICAgICAqIEByZXR1cm5zIEJpZ1F1ZXJ5CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21PYmplY3Qob2JqZWN0OiB7IFtrOiBzdHJpbmddOiBhbnkgfSk6IGRhdGFmb3JtLlRhYmxlTWV0YWRhdGEuQmlnUXVlcnk7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQmlnUXVlcnkgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdRdWVyeQogICAgICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9ucwogICAgICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdG9PYmplY3QobWVzc2FnZTogZGF0YWZvcm0uVGFibGVNZXRhZGF0YS5CaWdRdWVyeSwgb3B0aW9ucz86ICRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnMpOiB7IFtrOiBzdHJpbmddOiBhbnkgfTsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEJpZ1F1ZXJ5IHRvIEpTT04uCiAgICAgICAgICAgICAqIEByZXR1cm5zIEpTT04gb2JqZWN0CiAgICAgICAgICAgICAqLwogICAgICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIEJpZ1F1ZXJ5CiAgICAgICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgICAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgdHlwZSB1cmwKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgICAgIH0KICAgIH0KCiAgICAvKiogUHJvcGVydGllcyBvZiBhIEJpZ1F1ZXJ5LiAqLwogICAgaW50ZXJmYWNlIElCaWdRdWVyeSB7CgogICAgICAgIC8qKiBCaWdRdWVyeSBwcm9qZWN0SWQgKi8KICAgICAgICBwcm9qZWN0SWQ/OiAoc3RyaW5nfG51bGwpOwoKICAgICAgICAvKiogQmlnUXVlcnkgY3JlZGVudGlhbHMgKi8KICAgICAgICBjcmVkZW50aWFscz86IChzdHJpbmd8bnVsbCk7CgogICAgICAgIC8qKiBCaWdRdWVyeSBsb2NhdGlvbiAqLwogICAgICAgIGxvY2F0aW9uPzogKHN0cmluZ3xudWxsKTsKICAgIH0KCiAgICAvKiogUmVwcmVzZW50cyBhIEJpZ1F1ZXJ5LiAqLwogICAgY2xhc3MgQmlnUXVlcnkgaW1wbGVtZW50cyBJQmlnUXVlcnkgewoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEJpZ1F1ZXJ5LgogICAgICAgICAqIEBwYXJhbSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUJpZ1F1ZXJ5KTsKCiAgICAgICAgLyoqIEJpZ1F1ZXJ5IHByb2plY3RJZC4gKi8KICAgICAgICBwdWJsaWMgcHJvamVjdElkOiBzdHJpbmc7CgogICAgICAgIC8qKiBCaWdRdWVyeSBjcmVkZW50aWFscy4gKi8KICAgICAgICBwdWJsaWMgY3JlZGVudGlhbHM6IHN0cmluZzsKCiAgICAgICAgLyoqIEJpZ1F1ZXJ5IGxvY2F0aW9uLiAqLwogICAgICAgIHB1YmxpYyBsb2NhdGlvbjogc3RyaW5nOwoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEJpZ1F1ZXJ5IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy4KICAgICAgICAgKiBAcGFyYW0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0CiAgICAgICAgICogQHJldHVybnMgQmlnUXVlcnkgaW5zdGFuY2UKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShwcm9wZXJ0aWVzPzogZGF0YWZvcm0uSUJpZ1F1ZXJ5KTogZGF0YWZvcm0uQmlnUXVlcnk7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCaWdRdWVyeSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5CaWdRdWVyeS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdRdWVyeSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlKG1lc3NhZ2U6IGRhdGFmb3JtLklCaWdRdWVyeSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBCaWdRdWVyeSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayBkYXRhZm9ybS5CaWdRdWVyeS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBCaWdRdWVyeSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGUKICAgICAgICAgKiBAcGFyYW0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0bwogICAgICAgICAqIEByZXR1cm5zIFdyaXRlcgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2U6IGRhdGFmb3JtLklCaWdRdWVyeSwgd3JpdGVyPzogJHByb3RvYnVmLldyaXRlcik6ICRwcm90b2J1Zi5Xcml0ZXI7CgogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBCaWdRdWVyeSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbQogICAgICAgICAqIEBwYXJhbSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kCiAgICAgICAgICogQHJldHVybnMgQmlnUXVlcnkKICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlcgogICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZwogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjb2RlKHJlYWRlcjogKCRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheSksIGxlbmd0aD86IG51bWJlcik6IGRhdGFmb3JtLkJpZ1F1ZXJ5OwoKICAgICAgICAvKioKICAgICAgICAgKiBEZWNvZGVzIGEgQmlnUXVlcnkgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb20KICAgICAgICAgKiBAcmV0dXJucyBCaWdRdWVyeQogICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyCiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyOiAoJHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5KSk6IGRhdGFmb3JtLkJpZ1F1ZXJ5OwoKICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBhIEJpZ1F1ZXJ5IG1lc3NhZ2UuCiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeQogICAgICAgICAqIEByZXR1cm5zIGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgdmVyaWZ5KG1lc3NhZ2U6IHsgW2s6IHN0cmluZ106IGFueSB9KTogKHN0cmluZ3xudWxsKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIEJpZ1F1ZXJ5IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy4KICAgICAgICAgKiBAcGFyYW0gb2JqZWN0IFBsYWluIG9iamVjdAogICAgICAgICAqIEByZXR1cm5zIEJpZ1F1ZXJ5CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tT2JqZWN0KG9iamVjdDogeyBbazogc3RyaW5nXTogYW55IH0pOiBkYXRhZm9ybS5CaWdRdWVyeTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgQmlnUXVlcnkgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLgogICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIEJpZ1F1ZXJ5CiAgICAgICAgICogQHBhcmFtIFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnMKICAgICAgICAgKiBAcmV0dXJucyBQbGFpbiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgc3RhdGljIHRvT2JqZWN0KG1lc3NhZ2U6IGRhdGFmb3JtLkJpZ1F1ZXJ5LCBvcHRpb25zPzogJHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9ucyk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEJpZ1F1ZXJ5IHRvIEpTT04uCiAgICAgICAgICogQHJldHVybnMgSlNPTiBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdG9KU09OKCk6IHsgW2s6IHN0cmluZ106IGFueSB9OwoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBCaWdRdWVyeQogICAgICAgICAqIEBwYXJhbSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0ICJ0eXBlLmdvb2dsZWFwaXMuY29tIikKICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVmYXVsdCB0eXBlIHVybAogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4Pzogc3RyaW5nKTogc3RyaW5nOwogICAgfQp9CgpkZWNsYXJlIHR5cGUgUmVzb2x2YWJsZSA9IHN0cmluZyB8IGRhdGFmb3JtLklUYXJnZXQ7CmRlY2xhcmUgdHlwZSBDb250ZXh0YWJsZTxDb250ZXh0LCBUPiA9IFQgfCAoKGN0eDogQ29udGV4dCkgPT4gVCk7CmludGVyZmFjZSBJQWN0aW9uQ29udGV4dCB7CiAgICBzZWxmOiAoKSA9PiBzdHJpbmc7CiAgICBuYW1lOiAoKSA9PiBzdHJpbmc7CiAgICByZWY6IChyZWY6IFJlc29sdmFibGUgfCBzdHJpbmdbXSwgLi4ucmVzdDogc3RyaW5nW10pID0+IHN0cmluZzsKICAgIHJlc29sdmU6IChyZWY6IFJlc29sdmFibGUgfCBzdHJpbmdbXSwgLi4ucmVzdDogc3RyaW5nW10pID0+IHN0cmluZzsKICAgIHNjaGVtYTogKCkgPT4gc3RyaW5nOwogICAgZGF0YWJhc2U6ICgpID0+IHN0cmluZzsKfQppbnRlcmZhY2UgSVRhYmxlQ29udGV4dCBleHRlbmRzIElBY3Rpb25Db250ZXh0IHsKICAgIHdoZW46IChjb25kOiBib29sZWFuLCB0cnVlQ2FzZTogc3RyaW5nLCBmYWxzZUNhc2U/OiBzdHJpbmcpID0+IHN0cmluZzsKICAgIGluY3JlbWVudGFsOiAoKSA9PiBib29sZWFuOwp9CgpkZWNsYXJlIHR5cGUgQUNvbnRleHRhYmxlPFQ+ID0gVCB8ICgoY3R4OiBBc3NlcnRpb25Db250ZXh0KSA9PiBUKTsKZGVjbGFyZSBjbGFzcyBBc3NlcnRpb24gZXh0ZW5kcyBBY3Rpb25CdWlsZGVyPGRhdGFmb3JtLkFzc2VydGlvbj4gewogICAgc2Vzc2lvbjogU2Vzc2lvbjsKICAgIHByaXZhdGUgcHJvdG87CiAgICBwcml2YXRlIGNvbnRleHRhYmxlUXVlcnk7CiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uPzogU2Vzc2lvbiwgdW52ZXJpZmllZENvbmZpZz86IGFueSwgY29uZmlnUGF0aD86IHN0cmluZyk7CiAgICBxdWVyeShxdWVyeTogQUNvbnRleHRhYmxlPHN0cmluZz4pOiB0aGlzOwogICAgZGVwZW5kZW5jaWVzKHZhbHVlOiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZVtdKTogdGhpczsKICAgIGhlcm1ldGljKGhlcm1ldGljOiBib29sZWFuKTogdm9pZDsKICAgIGRpc2FibGVkKGRpc2FibGVkPzogYm9vbGVhbik6IHRoaXM7CiAgICB0YWdzKHZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSk6IHRoaXM7CiAgICBkZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogc3RyaW5nKTogdGhpczsKICAgIGRhdGFiYXNlKGRhdGFiYXNlOiBzdHJpbmcpOiB0aGlzOwogICAgc2NoZW1hKHNjaGVtYTogc3RyaW5nKTogdGhpczsKICAgIGdldEZpbGVOYW1lKCk6IHN0cmluZzsKICAgIGdldFRhcmdldCgpOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBnZXRQYXJlbnRBY3Rpb24oKTogZGF0YWZvcm0uVGFyZ2V0OwogICAgc2V0UGFyZW50QWN0aW9uKHRhcmdldDogZGF0YWZvcm0uVGFyZ2V0KTogdm9pZDsKICAgIGNvbXBpbGUoKTogZGF0YWZvcm0uQXNzZXJ0aW9uOwogICAgcHJpdmF0ZSB2ZXJpZnlDb25maWc7Cn0KZGVjbGFyZSBjbGFzcyBBc3NlcnRpb25Db250ZXh0IGltcGxlbWVudHMgSUFjdGlvbkNvbnRleHQgewogICAgcHJpdmF0ZSBhc3NlcnRpb24/OwogICAgY29uc3RydWN0b3IoYXNzZXJ0aW9uOiBBc3NlcnRpb24pOwogICAgc2VsZigpOiBzdHJpbmc7CiAgICBuYW1lKCk6IHN0cmluZzsKICAgIHJlZihyZWY6IFJlc29sdmFibGUgfCBzdHJpbmdbXSwgLi4ucmVzdDogc3RyaW5nW10pOiBzdHJpbmc7CiAgICByZXNvbHZlKHJlZjogUmVzb2x2YWJsZSB8IHN0cmluZ1tdLCAuLi5yZXN0OiBzdHJpbmdbXSk6IHN0cmluZzsKICAgIHNjaGVtYSgpOiBzdHJpbmc7CiAgICBkYXRhYmFzZSgpOiBzdHJpbmc7CiAgICBkZXBlbmRlbmNpZXMobmFtZTogUmVzb2x2YWJsZSB8IFJlc29sdmFibGVbXSk6IHN0cmluZzsKICAgIHRhZ3MobmFtZTogc3RyaW5nIHwgc3RyaW5nW10pOiBzdHJpbmc7CiAgICB3aGVuKGNvbmQ6IGJvb2xlYW4sIHRydWVDYXNlOiBzdHJpbmcsIGZhbHNlQ2FzZT86IHN0cmluZyk6IHN0cmluZzsKICAgIGFwcGx5PFQ+KHZhbHVlOiBBQ29udGV4dGFibGU8VD4pOiBUOwp9CgpkZWNsYXJlIGNsYXNzIERhdGFQcmVwYXJhdGlvbiBleHRlbmRzIEFjdGlvbkJ1aWxkZXI8ZGF0YWZvcm0uRGF0YVByZXBhcmF0aW9uPiB7CiAgICBzZXNzaW9uOiBTZXNzaW9uOwogICAgY29udGV4dGFibGVRdWVyeTogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nPjsKICAgIHByaXZhdGUgcHJvdG87CiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uPzogU2Vzc2lvbiwgY29uZmlnPzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZywgY29uZmlnUGF0aD86IHN0cmluZyk7CiAgICBjb25maWcoY29uZmlnOiBhbnkpOiB0aGlzOwogICAgcXVlcnkocXVlcnk6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZz4pOiB0aGlzOwogICAgZGVwZW5kZW5jaWVzKHZhbHVlOiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZVtdKTogdGhpczsKICAgIGdldEZpbGVOYW1lKCk6IHN0cmluZzsKICAgIGdldFRhcmdldCgpOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBjb21waWxlKCk6IGRhdGFmb3JtLkRhdGFQcmVwYXJhdGlvbjsKICAgIGRhdGFiYXNlKGRhdGFiYXNlOiBzdHJpbmcpOiB0aGlzOwogICAgc2NoZW1hKHNjaGVtYTogc3RyaW5nKTogdGhpczsKICAgIHByaXZhdGUgY29uZmlndXJlWWFtbFdpdGhvdXRUYXJnZXRzOwogICAgcHJpdmF0ZSBjb25maWd1cmVZYW1sV2l0aFRhcmdldHM7CiAgICBwcml2YXRlIGFwcGx5U2Vzc2lvblRvRGF0YVByZXBhcmF0aW9uQ29udGVudHM7CiAgICBwcml2YXRlIGFwcGx5U2Vzc2lvblRvVGFibGVSZWZlcmVuY2U7CiAgICBwcml2YXRlIGdldFRhcmdldHM7CiAgICBwcml2YXRlIGNvbmZpZ3VyZVlhbWw7CiAgICBwcml2YXRlIGNvbmZpZ3VyZVNxbHg7CiAgICBwcml2YXRlIG1hcExvYWRNb2RlOwogICAgcHJpdmF0ZSB2YWxpZGF0ZUxvYWRNb2RlQ29sdW1uTmFtZTsKfQpkZWNsYXJlIGNsYXNzIERhdGFQcmVwYXJhdGlvbkNvbnRleHQgaW1wbGVtZW50cyBJVGFibGVDb250ZXh0IHsKICAgIHByaXZhdGUgZGF0YVByZXBhcmF0aW9uOwogICAgcHJpdmF0ZSBpc0luY3JlbWVudGFsOwogICAgRVhQRUNUOiBzdHJpbmc7CiAgICBjb25zdHJ1Y3RvcihkYXRhUHJlcGFyYXRpb246IERhdGFQcmVwYXJhdGlvbiwgaXNJbmNyZW1lbnRhbD86IGJvb2xlYW4pOwogICAgY29uZmlnKGNvbmZpZzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRhdGFQcmVwYXJhdGlvbkNvbmZpZyk6IHN0cmluZzsKICAgIHNlbGYoKTogc3RyaW5nOwogICAgbmFtZSgpOiBzdHJpbmc7CiAgICByZWYocmVmOiBSZXNvbHZhYmxlIHwgc3RyaW5nW10sIC4uLnJlc3Q6IHN0cmluZ1tdKTogc3RyaW5nOwogICAgcmVzb2x2ZShyZWY6IFJlc29sdmFibGUgfCBzdHJpbmdbXSwgLi4ucmVzdDogc3RyaW5nW10pOiBzdHJpbmc7CiAgICBzY2hlbWEoKTogc3RyaW5nOwogICAgZGF0YWJhc2UoKTogc3RyaW5nOwogICAgd2hlbihjb25kOiBib29sZWFuLCB0cnVlQ2FzZTogc3RyaW5nLCBmYWxzZUNhc2U/OiBzdHJpbmcpOiBzdHJpbmc7CiAgICBpbmNyZW1lbnRhbCgpOiBib29sZWFuOwogICAgZGVwZW5kZW5jaWVzKHJlczogUmVzb2x2YWJsZSk6IHN0cmluZzsKICAgIGFwcGx5PFQ+KHZhbHVlOiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBUPik6IFQ7Cn0KCmRlY2xhcmUgY2xhc3MgRGVjbGFyYXRpb24gZXh0ZW5kcyBBY3Rpb25CdWlsZGVyPGRhdGFmb3JtLkRlY2xhcmF0aW9uPiB7CiAgICBzZXNzaW9uOiBTZXNzaW9uOwogICAgcHJpdmF0ZSBwcm90bzsKICAgIGNvbnN0cnVjdG9yKHNlc3Npb24/OiBTZXNzaW9uLCB1bnZlcmlmaWVkQ29uZmlnPzogYW55LCBmaWxlbmFtZT86IHN0cmluZyk7CiAgICBkZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogc3RyaW5nKTogdGhpczsKICAgIGNvbHVtbnMoY29sdW1uczogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3JbXSk6IHRoaXM7CiAgICBnZXRGaWxlTmFtZSgpOiBzdHJpbmc7CiAgICBnZXRUYXJnZXQoKTogZGF0YWZvcm0uVGFyZ2V0OwogICAgY29tcGlsZSgpOiBkYXRhZm9ybS5EZWNsYXJhdGlvbjsKICAgIHByaXZhdGUgdmVyaWZ5Q29uZmlnOwp9CgpkZWNsYXJlIGNsYXNzIEluY3JlbWVudGFsVGFibGUgZXh0ZW5kcyBBY3Rpb25CdWlsZGVyPGRhdGFmb3JtLlRhYmxlPiB7CiAgICBzZXNzaW9uOiBTZXNzaW9uOwogICAgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbjsKICAgIGNvbnRleHRhYmxlUXVlcnk6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZz47CiAgICBwcml2YXRlIGNvbnRleHRhYmxlV2hlcmU7CiAgICBwcml2YXRlIGNvbnRleHRhYmxlUHJlT3BzOwogICAgcHJpdmF0ZSBjb250ZXh0YWJsZVBvc3RPcHM7CiAgICBwcml2YXRlIHByb3RvOwogICAgcHJpdmF0ZSB1bmlxdWVLZXlBc3NlcnRpb25zOwogICAgcHJpdmF0ZSByb3dDb25kaXRpb25zQXNzZXJ0aW9uOwogICAgcHJpdmF0ZSB1bnZlcmlmaWVkQ29uZmlnOwogICAgcHJpdmF0ZSBjb25maWdQYXRoOwogICAgY29uc3RydWN0b3Ioc2Vzc2lvbj86IFNlc3Npb24sIHVudmVyaWZpZWRDb25maWc/OiBhbnksIGNvbmZpZ1BhdGg/OiBzdHJpbmcpOwogICAgdHlwZSh0eXBlOiBUYWJsZVR5cGUpOiB0aGlzOwogICAgcXVlcnkocXVlcnk6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZz4pOiB0aGlzOwogICAgd2hlcmUod2hlcmU6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZz4pOiB0aGlzOwogICAgcHJlT3BzKHByZXM6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZyB8IHN0cmluZ1tdPik6IHRoaXM7CiAgICBwb3N0T3BzKHBvc3RzOiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBzdHJpbmcgfCBzdHJpbmdbXT4pOiB0aGlzOwogICAgZGlzYWJsZWQoZGlzYWJsZWQ/OiBib29sZWFuKTogdGhpczsKICAgIHByb3RlY3RlZChpc1Byb3RlY3RlZDogYm9vbGVhbik6IHRoaXM7CiAgICB1bmlxdWVLZXkodW5pcXVlS2V5OiBzdHJpbmdbXSk6IHZvaWQ7CiAgICBiaWdxdWVyeShiaWdxdWVyeTogZGF0YWZvcm0uSUJpZ1F1ZXJ5T3B0aW9ucyk6IHRoaXM7CiAgICBkZXBlbmRlbmNpZXModmFsdWU6IFJlc29sdmFibGUgfCBSZXNvbHZhYmxlW10pOiB0aGlzOwogICAgaGVybWV0aWMoaGVybWV0aWM6IGJvb2xlYW4pOiB2b2lkOwogICAgdGFncyh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pOiB0aGlzOwogICAgZGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZyk6IHRoaXM7CiAgICBjb2x1bW5zKGNvbHVtbnM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yW10pOiB0aGlzOwogICAgZGF0YWJhc2UoZGF0YWJhc2U6IHN0cmluZyk6IHRoaXM7CiAgICBzY2hlbWEoc2NoZW1hOiBzdHJpbmcpOiB0aGlzOwogICAgYXNzZXJ0aW9ucyh0YWJsZUFzc2VydGlvbnNDb25maWc6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcpOiBJbmNyZW1lbnRhbFRhYmxlOwogICAgc2V0RGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyhkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuKTogdGhpczsKICAgIGdldEZpbGVOYW1lKCk6IHN0cmluZzsKICAgIGdldFRhcmdldCgpOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBjb21waWxlKCk6IGRhdGFmb3JtLlRhYmxlOwogICAgcHJpdmF0ZSBjb250ZXh0aWZ5T3BzOwogICAgcHJpdmF0ZSB2ZXJpZnlDb25maWc7CiAgICBwcml2YXRlIG1hcE9uU2NoZW1hQ2hhbmdlOwp9CgpkZWNsYXJlIGNsYXNzIE5vdGVib29rIGV4dGVuZHMgQWN0aW9uQnVpbGRlcjxkYXRhZm9ybS5Ob3RlYm9vaz4gewogICAgc2Vzc2lvbjogU2Vzc2lvbjsKICAgIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM6IGJvb2xlYW47CiAgICBwcml2YXRlIHByb3RvOwogICAgY29uc3RydWN0b3Ioc2Vzc2lvbj86IFNlc3Npb24sIHVudmVyaWZpZWRDb25maWc/OiBhbnksIGNvbmZpZ1BhdGg/OiBzdHJpbmcpOwogICAgaXB5bmIoY29udGVudHM6IG9iamVjdCk6IE5vdGVib29rOwogICAgZGVwZW5kZW5jaWVzKHZhbHVlOiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZVtdKTogdGhpczsKICAgIGdldEZpbGVOYW1lKCk6IHN0cmluZzsKICAgIGdldFRhcmdldCgpOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBjb21waWxlKCk6IGRhdGFmb3JtLk5vdGVib29rOwogICAgcHJpdmF0ZSB2ZXJpZnlDb25maWc7Cn0KCmRlY2xhcmUgY2xhc3MgT3BlcmF0aW9uIGV4dGVuZHMgQWN0aW9uQnVpbGRlcjxkYXRhZm9ybS5PcGVyYXRpb24+IHsKICAgIHNlc3Npb246IFNlc3Npb247CiAgICBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuOwogICAgcHJpdmF0ZSBwcm90bzsKICAgIHByaXZhdGUgY29udGV4dGFibGVRdWVyaWVzOwogICAgY29uc3RydWN0b3Ioc2Vzc2lvbj86IFNlc3Npb24sIHVudmVyaWZpZWRDb25maWc/OiBhbnksIGNvbmZpZ1BhdGg/OiBzdHJpbmcpOwogICAgcXVlcmllcyhxdWVyaWVzOiBDb250ZXh0YWJsZTxJQWN0aW9uQ29udGV4dCwgc3RyaW5nIHwgc3RyaW5nW10+KTogdGhpczsKICAgIGRlcGVuZGVuY2llcyh2YWx1ZTogUmVzb2x2YWJsZSB8IFJlc29sdmFibGVbXSk6IHRoaXM7CiAgICBoZXJtZXRpYyhoZXJtZXRpYzogYm9vbGVhbik6IHZvaWQ7CiAgICBkaXNhYmxlZChkaXNhYmxlZD86IGJvb2xlYW4pOiB0aGlzOwogICAgdGFncyh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pOiB0aGlzOwogICAgaGFzT3V0cHV0KGhhc091dHB1dDogYm9vbGVhbik6IHRoaXM7CiAgICBkZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogc3RyaW5nKTogdGhpczsKICAgIGNvbHVtbnMoY29sdW1uczogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkNvbHVtbkRlc2NyaXB0b3JbXSk6IHRoaXM7CiAgICBkYXRhYmFzZShkYXRhYmFzZTogc3RyaW5nKTogdGhpczsKICAgIHNjaGVtYShzY2hlbWE6IHN0cmluZyk6IHRoaXM7CiAgICBzZXREZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zKGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM6IGJvb2xlYW4pOiB0aGlzOwogICAgZ2V0RmlsZU5hbWUoKTogc3RyaW5nOwogICAgZ2V0VGFyZ2V0KCk6IGRhdGFmb3JtLlRhcmdldDsKICAgIGdldEhhc091dHB1dCgpOiBib29sZWFuOwogICAgY29tcGlsZSgpOiBkYXRhZm9ybS5PcGVyYXRpb247CiAgICBwcml2YXRlIHZlcmlmeUNvbmZpZzsKfQpkZWNsYXJlIGNsYXNzIE9wZXJhdGlvbkNvbnRleHQgaW1wbGVtZW50cyBJQWN0aW9uQ29udGV4dCB7CiAgICBwcml2YXRlIG9wZXJhdGlvbj87CiAgICBjb25zdHJ1Y3RvcihvcGVyYXRpb246IE9wZXJhdGlvbik7CiAgICBzZWxmKCk6IHN0cmluZzsKICAgIG5hbWUoKTogc3RyaW5nOwogICAgcmVmKHJlZjogUmVzb2x2YWJsZSB8IHN0cmluZ1tdLCAuLi5yZXN0OiBzdHJpbmdbXSk6IHN0cmluZzsKICAgIHJlc29sdmUocmVmOiBSZXNvbHZhYmxlIHwgc3RyaW5nW10sIC4uLnJlc3Q6IHN0cmluZ1tdKTogc3RyaW5nOwogICAgc2NoZW1hKCk6IHN0cmluZzsKICAgIGRhdGFiYXNlKCk6IHN0cmluZzsKICAgIGRlcGVuZGVuY2llcyhuYW1lOiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZVtdKTogc3RyaW5nOwogICAgdGFncyhuYW1lOiBzdHJpbmcgfCBzdHJpbmdbXSk6IHN0cmluZzsKICAgIGhhc091dHB1dChoYXNPdXRwdXQ6IGJvb2xlYW4pOiBzdHJpbmc7CiAgICB3aGVuKGNvbmQ6IGJvb2xlYW4sIHRydWVDYXNlOiBzdHJpbmcsIGZhbHNlQ2FzZT86IHN0cmluZyk6IHN0cmluZzsKICAgIGFwcGx5PFQ+KHZhbHVlOiBDb250ZXh0YWJsZTxJQWN0aW9uQ29udGV4dCwgVD4pOiBUOwp9CgpkZWNsYXJlIGNsYXNzIFRhYmxlIGV4dGVuZHMgQWN0aW9uQnVpbGRlcjxkYXRhZm9ybS5UYWJsZT4gewogICAgc2Vzc2lvbjogU2Vzc2lvbjsKICAgIGRlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnM6IGJvb2xlYW47CiAgICBjb250ZXh0YWJsZVF1ZXJ5OiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBzdHJpbmc+OwogICAgcHJpdmF0ZSBjb250ZXh0YWJsZVdoZXJlOwogICAgcHJpdmF0ZSBjb250ZXh0YWJsZVByZU9wczsKICAgIHByaXZhdGUgY29udGV4dGFibGVQb3N0T3BzOwogICAgcHJpdmF0ZSBwcm90bzsKICAgIHByaXZhdGUgdW5pcXVlS2V5QXNzZXJ0aW9uczsKICAgIHByaXZhdGUgcm93Q29uZGl0aW9uc0Fzc2VydGlvbjsKICAgIHByaXZhdGUgdW52ZXJpZmllZENvbmZpZzsKICAgIHByaXZhdGUgY29uZmlnUGF0aDsKICAgIGNvbnN0cnVjdG9yKHNlc3Npb24/OiBTZXNzaW9uLCB1bnZlcmlmaWVkQ29uZmlnPzogYW55LCBjb25maWdQYXRoPzogc3RyaW5nKTsKICAgIHR5cGUodHlwZTogVGFibGVUeXBlKTogdGhpczsKICAgIHF1ZXJ5KHF1ZXJ5OiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBzdHJpbmc+KTogdGhpczsKICAgIHdoZXJlKHdoZXJlOiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBzdHJpbmc+KTogdGhpczsKICAgIHByZU9wcyhwcmVzOiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBzdHJpbmcgfCBzdHJpbmdbXT4pOiB0aGlzOwogICAgcG9zdE9wcyhwb3N0czogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nIHwgc3RyaW5nW10+KTogdGhpczsKICAgIGRpc2FibGVkKGRpc2FibGVkPzogYm9vbGVhbik6IHRoaXM7CiAgICBiaWdxdWVyeShiaWdxdWVyeTogZGF0YWZvcm0uSUJpZ1F1ZXJ5T3B0aW9ucyk6IHRoaXM7CiAgICBkZXBlbmRlbmNpZXModmFsdWU6IFJlc29sdmFibGUgfCBSZXNvbHZhYmxlW10pOiB0aGlzOwogICAgaGVybWV0aWMoaGVybWV0aWM6IGJvb2xlYW4pOiB2b2lkOwogICAgdGFncyh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pOiB0aGlzOwogICAgZGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZyk6IHRoaXM7CiAgICBjb2x1bW5zKGNvbHVtbnM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yW10pOiB0aGlzOwogICAgZGF0YWJhc2UoZGF0YWJhc2U6IHN0cmluZyk6IHRoaXM7CiAgICBzY2hlbWEoc2NoZW1hOiBzdHJpbmcpOiB0aGlzOwogICAgYXNzZXJ0aW9ucyh0YWJsZUFzc2VydGlvbnNDb25maWc6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcpOiBUYWJsZTsKICAgIHNldERlcGVuZE9uRGVwZW5kZW5jeUFzc2VydGlvbnMoZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9uczogYm9vbGVhbik6IHRoaXM7CiAgICBnZXRGaWxlTmFtZSgpOiBzdHJpbmc7CiAgICBnZXRUYXJnZXQoKTogZGF0YWZvcm0uVGFyZ2V0OwogICAgY29tcGlsZSgpOiBkYXRhZm9ybS5UYWJsZTsKICAgIHByaXZhdGUgY29udGV4dGlmeU9wczsKICAgIHByaXZhdGUgdmVyaWZ5Q29uZmlnOwp9CmRlY2xhcmUgY2xhc3MgVGFibGVDb250ZXh0IGltcGxlbWVudHMgSVRhYmxlQ29udGV4dCB7CiAgICBwcml2YXRlIHRhYmxlOwogICAgcHJpdmF0ZSBpc0luY3JlbWVudGFsOwogICAgY29uc3RydWN0b3IodGFibGU6IFRhYmxlLCBpc0luY3JlbWVudGFsPzogYm9vbGVhbik7CiAgICBzZWxmKCk6IHN0cmluZzsKICAgIG5hbWUoKTogc3RyaW5nOwogICAgcmVmKHJlZjogUmVzb2x2YWJsZSB8IHN0cmluZ1tdLCAuLi5yZXN0OiBzdHJpbmdbXSk6IHN0cmluZzsKICAgIHJlc29sdmUocmVmOiBSZXNvbHZhYmxlIHwgc3RyaW5nW10sIC4uLnJlc3Q6IHN0cmluZ1tdKTogc3RyaW5nOwogICAgc2NoZW1hKCk6IHN0cmluZzsKICAgIGRhdGFiYXNlKCk6IHN0cmluZzsKICAgIHR5cGUodHlwZTogVGFibGVUeXBlKTogc3RyaW5nOwogICAgd2hlcmUod2hlcmU6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZz4pOiBzdHJpbmc7CiAgICB3aGVuKGNvbmQ6IGJvb2xlYW4sIHRydWVDYXNlOiBzdHJpbmcsIGZhbHNlQ2FzZT86IHN0cmluZyk6IHN0cmluZzsKICAgIGluY3JlbWVudGFsKCk6IGJvb2xlYW47CiAgICBwcmVPcHMoc3RhdGVtZW50OiBDb250ZXh0YWJsZTxJVGFibGVDb250ZXh0LCBzdHJpbmcgfCBzdHJpbmdbXT4pOiBzdHJpbmc7CiAgICBwb3N0T3BzKHN0YXRlbWVudDogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nIHwgc3RyaW5nW10+KTogc3RyaW5nOwogICAgZGlzYWJsZWQoKTogc3RyaW5nOwogICAgYmlncXVlcnkoYmlncXVlcnk6IGRhdGFmb3JtLklCaWdRdWVyeU9wdGlvbnMpOiBzdHJpbmc7CiAgICBkZXBlbmRlbmNpZXMocmVzOiBSZXNvbHZhYmxlKTogc3RyaW5nOwogICAgYXBwbHk8VD4odmFsdWU6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIFQ+KTogVDsKICAgIHRhZ3ModGFnczogc3RyaW5nW10pOiBzdHJpbmc7Cn0KCmRlY2xhcmUgY2xhc3MgVmlldyBleHRlbmRzIEFjdGlvbkJ1aWxkZXI8ZGF0YWZvcm0uVGFibGU+IHsKICAgIHNlc3Npb246IFNlc3Npb247CiAgICBkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuOwogICAgY29udGV4dGFibGVRdWVyeTogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nPjsKICAgIHByaXZhdGUgY29udGV4dGFibGVXaGVyZTsKICAgIHByaXZhdGUgY29udGV4dGFibGVQcmVPcHM7CiAgICBwcml2YXRlIGNvbnRleHRhYmxlUG9zdE9wczsKICAgIHByaXZhdGUgcHJvdG87CiAgICBwcml2YXRlIHVuaXF1ZUtleUFzc2VydGlvbnM7CiAgICBwcml2YXRlIHJvd0NvbmRpdGlvbnNBc3NlcnRpb247CiAgICBwcml2YXRlIHVudmVyaWZpZWRDb25maWc7CiAgICBwcml2YXRlIGNvbmZpZ1BhdGg7CiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uPzogU2Vzc2lvbiwgdW52ZXJpZmllZENvbmZpZz86IGFueSwgY29uZmlnUGF0aD86IHN0cmluZyk7CiAgICB0eXBlKHR5cGU6IFRhYmxlVHlwZSk6IHRoaXM7CiAgICBxdWVyeShxdWVyeTogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nPik6IHRoaXM7CiAgICB3aGVyZSh3aGVyZTogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nPik6IHRoaXM7CiAgICBwcmVPcHMocHJlczogQ29udGV4dGFibGU8SVRhYmxlQ29udGV4dCwgc3RyaW5nIHwgc3RyaW5nW10+KTogdGhpczsKICAgIHBvc3RPcHMocG9zdHM6IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZyB8IHN0cmluZ1tdPik6IHRoaXM7CiAgICBkaXNhYmxlZChkaXNhYmxlZD86IGJvb2xlYW4pOiB0aGlzOwogICAgbWF0ZXJpYWxpemVkKG1hdGVyaWFsaXplZDogYm9vbGVhbik6IHZvaWQ7CiAgICBiaWdxdWVyeShiaWdxdWVyeTogZGF0YWZvcm0uSUJpZ1F1ZXJ5T3B0aW9ucyk6IHRoaXM7CiAgICBkZXBlbmRlbmNpZXModmFsdWU6IFJlc29sdmFibGUgfCBSZXNvbHZhYmxlW10pOiB0aGlzOwogICAgaGVybWV0aWMoaGVybWV0aWM6IGJvb2xlYW4pOiB2b2lkOwogICAgdGFncyh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pOiB0aGlzOwogICAgZGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZyk6IHRoaXM7CiAgICBjb2x1bW5zKGNvbHVtbnM6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Db2x1bW5EZXNjcmlwdG9yW10pOiB0aGlzOwogICAgZGF0YWJhc2UoZGF0YWJhc2U6IHN0cmluZyk6IHRoaXM7CiAgICBzY2hlbWEoc2NoZW1hOiBzdHJpbmcpOiB0aGlzOwogICAgYXNzZXJ0aW9ucyh0YWJsZUFzc2VydGlvbnNDb25maWc6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcpOiBWaWV3OwogICAgc2V0RGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucyhkZXBlbmRPbkRlcGVuZGVuY3lBc3NlcnRpb25zOiBib29sZWFuKTogdGhpczsKICAgIGdldEZpbGVOYW1lKCk6IHN0cmluZzsKICAgIGdldFRhcmdldCgpOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBjb21waWxlKCk6IGRhdGFmb3JtLlRhYmxlOwogICAgcHJpdmF0ZSBjb250ZXh0aWZ5T3BzOwogICAgcHJpdmF0ZSB2ZXJpZnlDb25maWc7Cn0KCmludGVyZmFjZSBJQ29sdW1uc0Rlc2NyaXB0b3IgewogICAgW25hbWU6IHN0cmluZ106IHN0cmluZyB8IElSZWNvcmREZXNjcmlwdG9yOwp9CmludGVyZmFjZSBJUmVjb3JkRGVzY3JpcHRvciB7CiAgICBkZXNjcmlwdGlvbj86IHN0cmluZzsKICAgIGNvbHVtbnM/OiBJQ29sdW1uc0Rlc2NyaXB0b3I7CiAgICBkaXNwbGF5TmFtZT86IHN0cmluZzsKICAgIHRhZ3M/OiBzdHJpbmcgfCBzdHJpbmdbXTsKICAgIGJpZ3F1ZXJ5UG9saWN5VGFncz86IHN0cmluZyB8IHN0cmluZ1tdOwp9CgpkZWNsYXJlIHR5cGUgQWN0aW9uID0gVGFibGUgfCBWaWV3IHwgSW5jcmVtZW50YWxUYWJsZSB8IE9wZXJhdGlvbiB8IEFzc2VydGlvbiB8IERlY2xhcmF0aW9uIHwgTm90ZWJvb2sgfCBEYXRhUHJlcGFyYXRpb247CmRlY2xhcmUgYWJzdHJhY3QgY2xhc3MgQWN0aW9uQnVpbGRlcjxUPiB7CiAgICBzZXNzaW9uOiBTZXNzaW9uOwogICAgaW5jbHVkZUFzc2VydGlvbnNGb3JEZXBlbmRlbmN5OiBNYXA8c3RyaW5nLCBib29sZWFuPjsKICAgIGNvbnN0cnVjdG9yKHNlc3Npb24/OiBTZXNzaW9uKTsKICAgIGFwcGx5U2Vzc2lvblRvVGFyZ2V0KHRhcmdldEZyb21Db25maWc6IGRhdGFmb3JtLlRhcmdldCwgcHJvamVjdENvbmZpZzogZGF0YWZvcm0uUHJvamVjdENvbmZpZywgZmlsZU5hbWU/OiBzdHJpbmcsIG9wdGlvbnM/OiB7CiAgICAgICAgdmFsaWRhdGVUYXJnZXQ/OiBib29sZWFuOwogICAgICAgIHVzZURlZmF1bHRBc3NlcnRpb25EYXRhc2V0PzogYm9vbGVhbjsKICAgIH0pOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBmaW5hbGl6ZVRhcmdldCh0YXJnZXRGcm9tQ29uZmlnOiBkYXRhZm9ybS5UYXJnZXQpOiBkYXRhZm9ybS5UYXJnZXQ7CiAgICBhYnN0cmFjdCBnZXRGaWxlTmFtZSgpOiBzdHJpbmc7CiAgICBhYnN0cmFjdCBnZXRUYXJnZXQoKTogZGF0YWZvcm0uVGFyZ2V0OwogICAgYWJzdHJhY3QgY29tcGlsZSgpOiBUOwogICAgcHJvdGVjdGVkIGdlbmVyYXRlSW5saW5lQXNzZXJ0aW9ucyh0YWJsZUFzc2VydGlvbnNDb25maWc6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5UYWJsZUFzc2VydGlvbnNDb25maWcsIHByb3RvOiBkYXRhZm9ybS5UYWJsZSk6IHsKICAgICAgICB1bmlxdWVLZXlBc3NlcnRpb25zOiBBc3NlcnRpb25bXTsKICAgICAgICByb3dDb25kaXRpb25zQXNzZXJ0aW9uPzogQXNzZXJ0aW9uOwogICAgfTsKICAgIHByaXZhdGUgdmFsaWRhdGVUYXJnZXQ7Cn0KaW50ZXJmYWNlIElOYW1lZENvbmZpZyB7CiAgICB0eXBlPzogc3RyaW5nOwogICAgbmFtZT86IHN0cmluZzsKfQppbnRlcmZhY2UgSUFjdGlvbkNvbmZpZyB7CiAgICB0YWdzPzogc3RyaW5nW107CiAgICBkZXBlbmRlbmNpZXM/OiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZVtdOwogICAgZGlzYWJsZWQ/OiBib29sZWFuOwp9CmludGVyZmFjZSBJVGFyZ2V0YWJsZUNvbmZpZyB7CiAgICBkYXRhYmFzZT86IHN0cmluZzsKICAgIHNjaGVtYT86IHN0cmluZzsKfQppbnRlcmZhY2UgSURlcGVuZGVuY2llc0NvbmZpZyB7CiAgICBkZXBlbmRlbmNpZXM/OiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZVtdOwogICAgaGVybWV0aWM/OiBib29sZWFuOwogICAgZGVwZW5kT25EZXBlbmRlbmN5QXNzZXJ0aW9ucz86IGJvb2xlYW47Cn0KaW50ZXJmYWNlIElEb2N1bWVudGFibGVDb25maWcgewogICAgY29sdW1ucz86IElDb2x1bW5zRGVzY3JpcHRvcjsKICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nOwp9CmRlY2xhcmUgdHlwZSBUYWJsZVR5cGUgPSB0eXBlb2YgVGFibGVUeXBlW251bWJlcl07CmRlY2xhcmUgY29uc3QgVGFibGVUeXBlOiByZWFkb25seSBbInRhYmxlIiwgInZpZXciLCAiaW5jcmVtZW50YWwiXTsKaW50ZXJmYWNlIElMZWdhY3lUYWJsZUNvbmZpZyBleHRlbmRzIElBY3Rpb25Db25maWcsIElEZXBlbmRlbmNpZXNDb25maWcsIElEb2N1bWVudGFibGVDb25maWcsIElOYW1lZENvbmZpZywgSVRhcmdldGFibGVDb25maWcgewogICAgdHlwZT86IFRhYmxlVHlwZTsKICAgIHByb3RlY3RlZD86IGJvb2xlYW47CiAgICBiaWdxdWVyeT86IElMZWdhY3lCaWdRdWVyeU9wdGlvbnM7CiAgICBhc3NlcnRpb25zPzogSUxlZ2FjeVRhYmxlQXNzZXJ0aW9uczsKICAgIHVuaXF1ZUtleT86IHN0cmluZ1tdOwogICAgbWF0ZXJpYWxpemVkPzogYm9vbGVhbjsKfQppbnRlcmZhY2UgSUxlZ2FjeUJpZ1F1ZXJ5T3B0aW9ucyB7CiAgICBwYXJ0aXRpb25CeT86IHN0cmluZzsKICAgIGNsdXN0ZXJCeT86IHN0cmluZ1tdOwogICAgdXBkYXRlUGFydGl0aW9uRmlsdGVyPzogc3RyaW5nOwogICAgbGFiZWxzPzogewogICAgICAgIFtuYW1lOiBzdHJpbmddOiBzdHJpbmc7CiAgICB9OwogICAgcGFydGl0aW9uRXhwaXJhdGlvbkRheXM/OiBudW1iZXI7CiAgICByZXF1aXJlUGFydGl0aW9uRmlsdGVyPzogYm9vbGVhbjsKICAgIGFkZGl0aW9uYWxPcHRpb25zPzogewogICAgICAgIFtuYW1lOiBzdHJpbmddOiBzdHJpbmc7CiAgICB9Owp9CmludGVyZmFjZSBJTGVnYWN5VGFibGVBc3NlcnRpb25zIHsKICAgIHVuaXF1ZUtleT86IHN0cmluZyB8IHN0cmluZ1tdOwogICAgdW5pcXVlS2V5cz86IHN0cmluZ1tdW107CiAgICBub25OdWxsPzogc3RyaW5nIHwgc3RyaW5nW107CiAgICByb3dDb25kaXRpb25zPzogc3RyaW5nW107Cn0KCmludGVyZmFjZSBJVGVzdENvbmZpZyBleHRlbmRzIElOYW1lZENvbmZpZyB7CiAgICBkYXRhc2V0PzogUmVzb2x2YWJsZTsKICAgIG5hbWU/OiBzdHJpbmc7Cn0KZGVjbGFyZSBjbGFzcyBUZXN0IGV4dGVuZHMgQWN0aW9uQnVpbGRlcjxkYXRhZm9ybS5UZXN0PiB7CiAgICBzZXNzaW9uOiBTZXNzaW9uOwogICAgY29udGV4dGFibGVJbnB1dHM6IE1hcDxzdHJpbmcsIENvbnRleHRhYmxlPElBY3Rpb25Db250ZXh0LCBzdHJpbmc+PjsKICAgIHByaXZhdGUgY29udGV4dGFibGVRdWVyeTsKICAgIHByaXZhdGUgZGF0YXNldFRvVGVzdDsKICAgIHByaXZhdGUgcHJvdG87CiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uPzogU2Vzc2lvbiwgY29uZmlnPzogSVRlc3RDb25maWcpOwogICAgY29uZmlnKGNvbmZpZzogSVRlc3RDb25maWcpOiB0aGlzOwogICAgZGF0YXNldChyZWY6IFJlc29sdmFibGUpOiB0aGlzOwogICAgaW5wdXQocmVmTmFtZTogc3RyaW5nIHwgc3RyaW5nW10sIGNvbnRleHRhYmxlUXVlcnk6IENvbnRleHRhYmxlPElBY3Rpb25Db250ZXh0LCBzdHJpbmc+KTogdGhpczsKICAgIGV4cGVjdChjb250ZXh0YWJsZVF1ZXJ5OiBDb250ZXh0YWJsZTxJQWN0aW9uQ29udGV4dCwgc3RyaW5nPik6IHRoaXM7CiAgICBnZXRGaWxlTmFtZSgpOiBzdHJpbmc7CiAgICBnZXRUYXJnZXQoKTogdW5kZWZpbmVkOwogICAgc2V0RmlsZW5hbWUoZmlsZW5hbWU6IHN0cmluZyk6IHZvaWQ7CiAgICBjb21waWxlKCk6IGRhdGFmb3JtLlRlc3Q7Cn0KCmRlY2xhcmUgY2xhc3MgQ29tcGlsYXRpb25TcWwgewogICAgcHJpdmF0ZSByZWFkb25seSBwcm9qZWN0OwogICAgcHJpdmF0ZSByZWFkb25seSBkYXRhZm9ybUNvcmVWZXJzaW9uOwogICAgY29uc3RydWN0b3IocHJvamVjdDogZGF0YWZvcm0uSVByb2plY3RDb25maWcsIGRhdGFmb3JtQ29yZVZlcnNpb246IHN0cmluZyk7CiAgICByZXNvbHZlVGFyZ2V0KHRhcmdldDogZGF0YWZvcm0uSVRhcmdldCk6IHN0cmluZzsKICAgIHNxbFN0cmluZyhzdHJpbmdDb250ZW50czogc3RyaW5nKTogc3RyaW5nOwogICAgaW5kZXhBc3NlcnRpb24oZGF0YXNldDogc3RyaW5nLCBpbmRleENvbHM6IHN0cmluZ1tdKTogc3RyaW5nOwogICAgcm93Q29uZGl0aW9uc0Fzc2VydGlvbihkYXRhc2V0OiBzdHJpbmcsIHJvd0NvbmRpdGlvbnM6IHN0cmluZ1tdKTogc3RyaW5nOwp9CgpkZWNsYXJlIGNsYXNzIFNlc3Npb24gewogICAgcm9vdERpcjogc3RyaW5nOwogICAgcHJvamVjdENvbmZpZzogZGF0YWZvcm0uUHJvamVjdENvbmZpZzsKICAgIGNhbm9uaWNhbFByb2plY3RDb25maWc6IGRhdGFmb3JtLlByb2plY3RDb25maWc7CiAgICBhY3Rpb25zOiBBY3Rpb25bXTsKICAgIGluZGV4ZWRBY3Rpb25zOiBBY3Rpb25NYXA7CiAgICB0ZXN0czogewogICAgICAgIFtuYW1lOiBzdHJpbmddOiBUZXN0OwogICAgfTsKICAgIGFjdGlvbkFzc2VydGlvbk1hcDogQWN0aW9uTWFwOwogICAgZ3JhcGhFcnJvcnM6IGRhdGFmb3JtLklHcmFwaEVycm9yczsKICAgIGNvbnN0cnVjdG9yKHJvb3REaXI/OiBzdHJpbmcsIHByb2plY3RDb25maWc/OiBkYXRhZm9ybS5Qcm9qZWN0Q29uZmlnLCBvcmlnaW5hbFByb2plY3RDb25maWc/OiBkYXRhZm9ybS5Qcm9qZWN0Q29uZmlnKTsKICAgIGluaXQocm9vdERpcjogc3RyaW5nLCBwcm9qZWN0Q29uZmlnPzogZGF0YWZvcm0uUHJvamVjdENvbmZpZywgb3JpZ2luYWxQcm9qZWN0Q29uZmlnPzogZGF0YWZvcm0uUHJvamVjdENvbmZpZyk6IHZvaWQ7CiAgICBjb21waWxhdGlvblNxbCgpOiBDb21waWxhdGlvblNxbDsKICAgIHNxbHhBY3Rpb24oYWN0aW9uT3B0aW9uczogewogICAgICAgIHNxbHhDb25maWc6IGFueTsKICAgICAgICBzcWxTdGF0ZW1lbnRDb3VudDogbnVtYmVyOwogICAgICAgIHNxbENvbnRleHRhYmxlOiAoY3R4OiBUYWJsZUNvbnRleHQgfCBBc3NlcnRpb25Db250ZXh0IHwgT3BlcmF0aW9uQ29udGV4dCB8IERhdGFQcmVwYXJhdGlvbkNvbnRleHQgfCBJQWN0aW9uQ29udGV4dCkgPT4gc3RyaW5nW107CiAgICAgICAgaW5jcmVtZW50YWxXaGVyZUNvbnRleHRhYmxlOiAoY3R4OiBJVGFibGVDb250ZXh0KSA9PiBzdHJpbmc7CiAgICAgICAgcHJlT3BlcmF0aW9uc0NvbnRleHRhYmxlOiAoY3R4OiBJVGFibGVDb250ZXh0KSA9PiBzdHJpbmdbXTsKICAgICAgICBwb3N0T3BlcmF0aW9uc0NvbnRleHRhYmxlOiAoY3R4OiBJVGFibGVDb250ZXh0KSA9PiBzdHJpbmdbXTsKICAgICAgICBpbnB1dENvbnRleHRhYmxlczogW3sKICAgICAgICAgICAgcmVmTmFtZTogc3RyaW5nW107CiAgICAgICAgICAgIGNvbnRleHRhYmxlOiAoY3R4OiBJQWN0aW9uQ29udGV4dCkgPT4gc3RyaW5nOwogICAgICAgIH1dOwogICAgfSk6IHZvaWQ7CiAgICByZXNvbHZlKHJlZjogUmVzb2x2YWJsZSB8IHN0cmluZ1tdLCAuLi5yZXN0OiBzdHJpbmdbXSk6IHN0cmluZzsKICAgIG9wZXJhdGUobmFtZTogc3RyaW5nLCBxdWVyeU9yQ29uZmlnPzogQ29udGV4dGFibGU8SUFjdGlvbkNvbnRleHQsIHN0cmluZyB8IHN0cmluZ1tdPiB8IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5PcGVyYXRpb25Db25maWcpOiBPcGVyYXRpb247CiAgICBwdWJsaXNoKG5hbWU6IHN0cmluZywgcXVlcnlPckNvbmZpZz86IENvbnRleHRhYmxlPElUYWJsZUNvbnRleHQsIHN0cmluZz4gfCBkYXRhZm9ybS5BY3Rpb25Db25maWcuVGFibGVDb25maWcgfCBkYXRhZm9ybS5BY3Rpb25Db25maWcuVmlld0NvbmZpZyB8IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5JbmNyZW1lbnRhbFRhYmxlQ29uZmlnIHwgSUxlZ2FjeVRhYmxlQ29uZmlnIHwgYW55KTogVGFibGUgfCBJbmNyZW1lbnRhbFRhYmxlIHwgVmlldzsKICAgIGFzc2VydChuYW1lOiBzdHJpbmcsIHF1ZXJ5T3JDb25maWc/OiBBQ29udGV4dGFibGU8c3RyaW5nPiB8IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Bc3NlcnRpb25Db25maWcpOiBBc3NlcnRpb247CiAgICBkZWNsYXJlKGNvbmZpZzogZGF0YWZvcm0uQWN0aW9uQ29uZmlnLkRlY2xhcmF0aW9uQ29uZmlnIHwgYW55KTogRGVjbGFyYXRpb247CiAgICB0ZXN0KG5hbWU6IHN0cmluZyk6IFRlc3Q7CiAgICBub3RlYm9vayhjb25maWc6IGRhdGFmb3JtLkFjdGlvbkNvbmZpZy5Ob3RlYm9va0NvbmZpZyk6IE5vdGVib29rOwogICAgY29tcGlsZUVycm9yKGVycjogRXJyb3IgfCBzdHJpbmcsIHBhdGg/OiBzdHJpbmcsIGFjdGlvblRhcmdldD86IGRhdGFmb3JtLklUYXJnZXQpOiB2b2lkOwogICAgY29tcGlsZSgpOiBkYXRhZm9ybS5Db21waWxlZEdyYXBoOwogICAgY29tcGlsZVRvQmFzZTY0KCk6IHN0cmluZzsKICAgIGZpbmFsaXplRGF0YWJhc2UoZGF0YWJhc2U6IHN0cmluZyk6IHN0cmluZzsKICAgIGZpbmFsaXplU2NoZW1hKHNjaGVtYTogc3RyaW5nKTogc3RyaW5nOwogICAgZmluYWxpemVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZzsKICAgIHByaXZhdGUgZ2V0RGF0YWJhc2VTdWZmaXhXaXRoVW5kZXJzY29yZTsKICAgIHByaXZhdGUgZ2V0U2NoZW1hU3VmZml4V2l0aFVuZGVyc2NvcmU7CiAgICBwcml2YXRlIGdldFRhYmxlUHJlZml4V2l0aFVuZGVyc2NvcmU7CiAgICBwcml2YXRlIGNvbXBpbGVHcmFwaENodW5rOwogICAgcHJpdmF0ZSBmdWxseVF1YWxpZnlEZXBlbmRlbmNpZXM7CiAgICBwcml2YXRlIGFsdGVyQWN0aW9uTmFtZTsKICAgIHByaXZhdGUgY2hlY2tUZXN0TmFtZVVuaXF1ZW5lc3M7CiAgICBwcml2YXRlIGNoZWNrQ2lyY3VsYXJpdHk7CiAgICBwcml2YXRlIHJlbW92ZU5vblVuaXF1ZUFjdGlvbnNGcm9tQ29tcGlsZWRHcmFwaDsKfQpkZWNsYXJlIGNsYXNzIEFjdGlvbk1hcCB7CiAgICBwcml2YXRlIGJ5TmFtZTsKICAgIHByaXZhdGUgYnlTY2hlbWFBbmROYW1lOwogICAgcHJpdmF0ZSBieURhdGFiYXNlQW5kTmFtZTsKICAgIHByaXZhdGUgYnlEYXRhYmFzZVNjaGVtYUFuZE5hbWU7CiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zOiBBY3Rpb25bXSk7CiAgICBzZXQoYWN0aW9uVGFyZ2V0OiBkYXRhZm9ybS5JVGFyZ2V0LCBhc3NlcnRpb25UYXJnZXQ6IEFjdGlvbik6IHZvaWQ7CiAgICBmaW5kKHRhcmdldDogZGF0YWZvcm0uSVRhcmdldCk6IEFjdGlvbltdOwogICAgcHJpdmF0ZSBzZXRCeU5hbWVMZXZlbDsKICAgIHByaXZhdGUgc2V0QnlTY2hlbWFMZXZlbDsKfQoKZGVjbGFyZSBjb25zdCB2ZXJzaW9uID0gIjMuMC4yMCI7CgpkZWNsYXJlIGNvbnN0IHNlc3Npb246IFNlc3Npb247CmRlY2xhcmUgY29uc3Qgc3VwcG9ydGVkRmVhdHVyZXM6IGRhdGFmb3JtLlN1cHBvcnRlZEZlYXR1cmVzW107CmRlY2xhcmUgZnVuY3Rpb24gaW5kZXhGaWxlR2VuZXJhdG9yKCk6IHZvaWQ7CgpleHBvcnQgeyBjb21waWxlIGFzIGNvbXBpbGVyLCBpbmRleEZpbGVHZW5lcmF0b3IsIG1haW4sIHNlc3Npb24sIHN1cHBvcnRlZEZlYXR1cmVzLCB2ZXJzaW9uIH07Cg=="
}
